<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>nodeç›¸å…³çŸ¥è¯†ç‚¹</title>
    <link href="/2021/05/11/node%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2021/05/11/node%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<ul><li>å¼•ç”¨æ¨¡å—çš„ç›®å½•åˆ†æ<ol><li>åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾package.json(CommonJSåŒ…è§„èŒƒå®šä¹‰çš„åŒ…æè¿°æ–‡ä»¶)ï¼Œé€šè¿‡JSON.parse()è§£æå‡ºåŒ…æè¿°å¯¹è±¡ï¼Œä»ä¸­å–å‡ºmainå±æ€§æŒ‡å®šçš„æ–‡ä»¶åè¿›è¡Œå®šä½ã€‚å¦‚æœæ–‡ä»¶ç¼ºå°‘æ‰©å±•åï¼Œå°†ä¼šè¿›å…¥æ‰©å±•ååˆ†æçš„æ­¥éª¤ã€‚ ã€€ã€€</li><li>è€Œå¦‚æœmainå±æ€§åˆ¶å®šçš„æ–‡ä»¶åé”™è¯¯ï¼Œæˆ–è€…å‹æ ¹æ²¡æœ‰package.jsonæ–‡ä»¶ï¼ŒNodeä¼šå°†indexå½“åšé»˜è®¤æ–‡ä»¶åï¼Œç„¶åä¾æ¬¡æŸ¥æ‰¾index.jsã€index.nodeã€index.json. ã€€ã€€</li><li>å¦‚æœåœ¨ç›®å½•åˆ†æçš„è¿‡ç¨‹ä¸­æ²¡æœ‰å®šä½æˆåŠŸä»»ä½•æ–‡ä»¶ï¼Œåˆ™è‡ªå®šä¹‰æ¨¡å—è¿›å…¥ä¸‹ä¸€ä¸ªæ¨¡å—è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾ã€‚å¦‚æœæ¨¡å—è·¯å¾„æ•°ç»„éƒ½è¢«éå†å®Œæ¯•ï¼Œä¾ç„¶æ²¡æœ‰æŸ¥æ‰¾åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œåˆ™ä¼šæŠ›å‡ºæŸ¥æ‰¾å¤±è´¥å¼‚å¸¸ã€‚</li></ol></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è™šæ‹Ÿåˆ—è¡¨çš„ç®€å•å®ç°</title>
    <link href="/2021/04/26/%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/"/>
    <url>/2021/04/26/%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ref:[<a href="https://mp.weixin.qq.com/s/8uttkBw-dwYXsybKePQ3nA]">https://mp.weixin.qq.com/s/8uttkBw-dwYXsybKePQ3nA]</a></p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è™šæ‹Ÿåˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">      <span class="hljs-selector-tag">html</span> &#123;</span><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>      &#125;<span class="css">      <span class="hljs-selector-tag">body</span> &#123;</span><span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><span class="css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span>      &#125;      #app &#123;<span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>      &#125;      .visible-area&#123;<span class="css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span>      &#125;      .infinite-list-container &#123;<span class="css">        <span class="hljs-attribute">overflow</span>: auto;</span><span class="css">        <span class="hljs-attribute">position</span>: relative;</span><span class="css">        -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch;</span><span class="css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid black;</span>      &#125;      .infinite-list-phantom &#123;<span class="css">        <span class="hljs-attribute">position</span>: absolute;</span><span class="css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;</span>      &#125;      .infinite-list &#123;<span class="css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">position</span>: absolute;</span>      &#125;      .infinite-list-item &#123;<span class="css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;</span><span class="css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#555</span>;</span><span class="css">        <span class="hljs-comment">/* box-sizing: border-box; */</span></span><span class="css">        <span class="hljs-attribute">border</span>:<span class="hljs-number">6px</span> solid gray;</span><span class="css">        <span class="hljs-comment">/* height:200px; */</span></span>      &#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;visible-area&quot;</span>&gt;</span>        æˆ‘æ˜¯å¯è§†åŒºåŸŸ              <span class="hljs-tag">&lt;<span class="hljs-name">virtual-list</span> <span class="hljs-attr">:list-data</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">:estimated-item-size</span>=<span class="hljs-string">&quot;100&quot;</span> <span class="hljs-attr">:buffer-scale</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">virtual-list</span>&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      <span class="hljs-tag">&lt;/<span class="hljs-name">virtual-list</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/Faker/3.1.0/faker.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="javascript">      <span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.esm.browser.js&quot;</span>;</span><span class="javascript">      Vue.component(<span class="hljs-string">&quot;virtual-list&quot;</span>, &#123;</span>        template: `<span class="javascript">        &lt;div ref=<span class="hljs-string">&quot;list&quot;</span> :style=<span class="hljs-string">&quot;&#123;height&#125;&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;infinite-list-container&quot;</span> @scroll=<span class="hljs-string">&quot;scrollEvent($event)&quot;</span>&gt;</span><span class="handlebars"><span class="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;phantom&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;infinite-list-phantom&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><span class="javascript">          &lt;div ref=<span class="hljs-string">&quot;content&quot;</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;infinite-list&quot;</span>&gt;</span><span class="javascript">            &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;infinite-list-item&quot;</span> ref=<span class="hljs-string">&quot;items&quot;</span> :id=<span class="hljs-string">&quot;item.id&quot;</span> :key=<span class="hljs-string">&quot;item.id&quot;</span> v-<span class="hljs-keyword">for</span>=<span class="hljs-string">&quot;item in visibleData&quot;</span>&gt;</span><span class="handlebars"><span class="xml">              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:red&quot;</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.id</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">item.value</span>&#125;&#125;</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span></span><span class="handlebars"><span class="xml">            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><span class="handlebars"><span class="xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><span class="handlebars"><span class="xml">        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span>        `,        props: &#123;<span class="javascript">          <span class="hljs-comment">//åˆ—è¡¨æ•°æ®</span></span>          listData: &#123;<span class="javascript">            type: <span class="hljs-built_in">Array</span>,</span><span class="javascript">            <span class="hljs-keyword">default</span>: <span class="hljs-function">() =&gt;</span> [],</span>          &#125;,<span class="javascript">          <span class="hljs-comment">//é¢„ä¼°é«˜åº¦</span></span>          estimatedItemSize: &#123;<span class="javascript">            type: <span class="hljs-built_in">Number</span>,</span><span class="javascript">            required: <span class="hljs-literal">true</span>,</span>          &#125;,<span class="javascript">          <span class="hljs-comment">//ç¼“å†²åŒºæ¯”ä¾‹</span></span>          bufferScale: &#123;<span class="javascript">            type: <span class="hljs-built_in">Number</span>,</span><span class="javascript">            <span class="hljs-keyword">default</span>: <span class="hljs-number">1</span>,</span>          &#125;,<span class="javascript">          <span class="hljs-comment">//å®¹å™¨é«˜åº¦ 100px or 50vh</span></span>          height: &#123;<span class="javascript">            type: <span class="hljs-built_in">String</span>,</span><span class="javascript">            <span class="hljs-keyword">default</span>: <span class="hljs-string">&quot;100%&quot;</span>,</span>          &#125;,        &#125;,        computed: &#123;<span class="javascript">          <span class="hljs-comment">// å¯è§†åŒºåŸŸå†…èƒ½æ˜¾ç¤ºå‡ æ¡æ•°æ®</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">visibleCount</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.ceil(<span class="hljs-built_in">this</span>.screenHeight / <span class="hljs-built_in">this</span>.estimatedItemSize);</span>          &#125;,<span class="javascript">          <span class="hljs-comment">// å¯è§†åŒºåŸŸä¸Šæ–¹æ•°æ®æ¡æ•°</span></span><span class="javascript">          <span class="hljs-comment">// Math.minå–ç¼“å†²åŒºå€¼</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">aboveCount</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">this</span>.start, <span class="hljs-built_in">this</span>.bufferScale * <span class="hljs-built_in">this</span>.visibleCount);</span>          &#125;,<span class="javascript">          <span class="hljs-comment">// å¯è§†åŒºåŸŸä¸‹æ–¹æ•°æ®æ¡æ•°</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">belowCount</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.min(</span><span class="javascript">              <span class="hljs-built_in">this</span>.listData.length - <span class="hljs-built_in">this</span>.end,</span><span class="javascript">              <span class="hljs-built_in">this</span>.bufferScale * <span class="hljs-built_in">this</span>.visibleCount</span>            );          &#125;,<span class="javascript">          <span class="hljs-function"><span class="hljs-title">visibleData</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-comment">// éœ€è¦æ¸²æŸ“çš„æ•°æ® = æ˜¾ç¤ºçš„æ•°æ®åŠ ä¸Šä¸Šä¸‹ç¼“å†²åŒº</span></span><span class="javascript">            <span class="hljs-keyword">let</span> start = <span class="hljs-built_in">this</span>.start - <span class="hljs-built_in">this</span>.aboveCount;</span><span class="javascript">            <span class="hljs-keyword">let</span> end = <span class="hljs-built_in">this</span>.end + <span class="hljs-built_in">this</span>.belowCount;</span><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.listData.slice(start, end);</span>          &#125;,        &#125;,<span class="javascript">        <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">          <span class="hljs-built_in">this</span>.initPositions();</span>        &#125;,<span class="javascript">        <span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">          <span class="hljs-built_in">this</span>.screenHeight = <span class="hljs-built_in">this</span>.$el.clientHeight;</span><span class="javascript">          <span class="hljs-built_in">this</span>.start = <span class="hljs-number">0</span>;</span><span class="javascript">          <span class="hljs-built_in">this</span>.end = <span class="hljs-built_in">this</span>.start + <span class="hljs-built_in">this</span>.visibleCount;</span>        &#125;,<span class="javascript">        <span class="hljs-function"><span class="hljs-title">updated</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">          <span class="hljs-built_in">this</span>.$nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><span class="javascript">            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.$refs.items || !<span class="hljs-built_in">this</span>.$refs.items.length) &#123;</span><span class="javascript">              <span class="hljs-keyword">return</span>;</span>            &#125;<span class="javascript">            <span class="hljs-comment">//è·å–çœŸå®å…ƒç´ å¤§å°ï¼Œä¿®æ”¹å¯¹åº”çš„å°ºå¯¸ç¼“å­˜</span></span><span class="javascript">            <span class="hljs-built_in">this</span>.updateItemsSize();</span><span class="javascript">            <span class="hljs-comment">//æ›´æ–°åˆ—è¡¨æ€»é«˜åº¦</span></span><span class="javascript">            <span class="hljs-keyword">let</span> height = <span class="hljs-built_in">this</span>.positions[<span class="hljs-built_in">this</span>.positions.length - <span class="hljs-number">1</span>].bottom;</span><span class="javascript">            <span class="hljs-built_in">this</span>.$refs.phantom.style.height = height + <span class="hljs-string">&quot;px&quot;</span>;</span><span class="javascript">            <span class="hljs-comment">//æ›´æ–°çœŸå®åç§»é‡</span></span><span class="javascript">            <span class="hljs-built_in">this</span>.setStartOffset();</span>          &#125;);        &#125;,<span class="javascript">        <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">          <span class="hljs-keyword">return</span> &#123;</span><span class="javascript">            <span class="hljs-comment">//å¯è§†åŒºåŸŸé«˜åº¦</span></span>            screenHeight: 0,<span class="javascript">            <span class="hljs-comment">//èµ·å§‹ç´¢å¼•</span></span>            start: 0,<span class="javascript">            <span class="hljs-comment">//ç»“æŸç´¢å¼•</span></span>            end: 0,          &#125;;        &#125;,        methods: &#123;<span class="javascript">          <span class="hljs-function"><span class="hljs-title">initPositions</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-built_in">this</span>.positions = <span class="hljs-built_in">this</span>.listData.map(<span class="hljs-function">(<span class="hljs-params">d, index</span>) =&gt;</span> (&#123;</span>              index,<span class="javascript">              height: <span class="hljs-built_in">this</span>.estimatedItemSize,</span><span class="javascript">              top: index * <span class="hljs-built_in">this</span>.estimatedItemSize,</span><span class="javascript">              bottom: (index + <span class="hljs-number">1</span>) * <span class="hljs-built_in">this</span>.estimatedItemSize,</span>            &#125;));          &#125;,<span class="javascript">          <span class="hljs-comment">//è·å–åˆ—è¡¨èµ·å§‹ç´¢å¼•</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">getStartIndex</span>(<span class="hljs-params">scrollTop = <span class="hljs-number">0</span></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-comment">//äºŒåˆ†æ³•æŸ¥æ‰¾</span></span><span class="javascript">            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.binarySearch(<span class="hljs-built_in">this</span>.positions, scrollTop);</span>          &#125;,<span class="javascript">          <span class="hljs-function"><span class="hljs-title">binarySearch</span>(<span class="hljs-params">list, value</span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;</span><span class="javascript">            <span class="hljs-keyword">let</span> end = list.length - <span class="hljs-number">1</span>;</span><span class="javascript">            <span class="hljs-keyword">let</span> tempIndex = <span class="hljs-literal">null</span>;</span><span class="javascript">            <span class="hljs-keyword">while</span> (start &lt;= end) &#123;</span><span class="javascript">              <span class="hljs-keyword">let</span> midIndex = <span class="hljs-built_in">parseInt</span>((start + end) / <span class="hljs-number">2</span>);</span><span class="javascript">              <span class="hljs-keyword">let</span> midValue = list[midIndex].bottom;</span>              if (midValue === value) &#123;<span class="javascript">                <span class="hljs-keyword">return</span> midIndex + <span class="hljs-number">1</span>;</span><span class="javascript">              &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (midValue &lt; value) &#123;</span>                start = midIndex + 1;<span class="javascript">              &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (midValue &gt; value) &#123;</span><span class="javascript">                <span class="hljs-keyword">if</span> (tempIndex === <span class="hljs-literal">null</span> || tempIndex &gt; midIndex) &#123;</span>                  tempIndex = midIndex;                &#125;                end = end - 1;              &#125;            &#125;<span class="javascript">            <span class="hljs-keyword">return</span> tempIndex;</span>          &#125;,<span class="javascript">          <span class="hljs-comment">//æ›´æ–°åˆ—è¡¨é¡¹çš„å½“å‰å°ºå¯¸</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">updateItemsSize</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">let</span> nodes = <span class="hljs-built_in">this</span>.$refs.items;</span><span class="javascript">            nodes.forEach(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> &#123;</span><span class="javascript">              <span class="hljs-keyword">let</span> rect = node.getBoundingClientRect();</span><span class="javascript">              <span class="hljs-keyword">let</span> height = rect.height;</span><span class="javascript">              <span class="hljs-keyword">let</span> index = +node.id.slice(<span class="hljs-number">1</span>);</span><span class="javascript">              <span class="hljs-keyword">let</span> oldHeight = <span class="hljs-built_in">this</span>.positions[index].height;</span><span class="javascript">              <span class="hljs-keyword">let</span> dValue = oldHeight - height;</span><span class="javascript">              <span class="hljs-comment">//å­˜åœ¨å·®å€¼</span></span>              if (dValue) &#123;<span class="javascript">                <span class="hljs-built_in">this</span>.positions[index].bottom =</span><span class="javascript">                  <span class="hljs-built_in">this</span>.positions[index].bottom - dValue;</span><span class="javascript">                <span class="hljs-built_in">this</span>.positions[index].height = height;</span><span class="javascript">                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = index + <span class="hljs-number">1</span>; k &lt; <span class="hljs-built_in">this</span>.positions.length; k++) &#123;</span><span class="javascript">                  <span class="hljs-built_in">this</span>.positions[k].top = <span class="hljs-built_in">this</span>.positions[k - <span class="hljs-number">1</span>].bottom;</span><span class="javascript">                  <span class="hljs-built_in">this</span>.positions[k].bottom = <span class="hljs-built_in">this</span>.positions[k].bottom - dValue;</span>                &#125;              &#125;            &#125;);          &#125;,<span class="javascript">          <span class="hljs-comment">//è®¡ç®—åç§»é‡å¹¶translate</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">setStartOffset</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-keyword">let</span> startOffset;</span><span class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.start &gt;= <span class="hljs-number">1</span>) &#123;</span><span class="javascript">              <span class="hljs-keyword">let</span> size =</span><span class="javascript">                <span class="hljs-built_in">this</span>.positions[<span class="hljs-built_in">this</span>.start].top -</span><span class="javascript">                (<span class="hljs-built_in">this</span>.positions[<span class="hljs-built_in">this</span>.start - <span class="hljs-built_in">this</span>.aboveCount]</span><span class="javascript">                  ? <span class="hljs-built_in">this</span>.positions[<span class="hljs-built_in">this</span>.start - <span class="hljs-built_in">this</span>.aboveCount].top</span>                  : 0);<span class="javascript">              startOffset = <span class="hljs-built_in">this</span>.positions[<span class="hljs-built_in">this</span>.start - <span class="hljs-number">1</span>].bottom - size;</span><span class="javascript">            &#125; <span class="hljs-keyword">else</span> &#123;</span>              startOffset = 0;            &#125;<span class="javascript">            <span class="hljs-built_in">this</span>.$refs.content.style.transform = <span class="hljs-string">`translate3d(0,<span class="hljs-subst">$&#123;startOffset&#125;</span>px,0)`</span>;</span>          &#125;,<span class="javascript">          <span class="hljs-comment">//æ»šåŠ¨äº‹ä»¶</span></span><span class="javascript">          <span class="hljs-function"><span class="hljs-title">scrollEvent</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">            <span class="hljs-comment">//å½“å‰æ»šåŠ¨ä½ç½®</span></span><span class="javascript">            <span class="hljs-keyword">let</span> scrollTop = <span class="hljs-built_in">this</span>.$refs.list.scrollTop;</span><span class="javascript">            <span class="hljs-comment">// let startBottom = this.positions[this.start - ]</span></span><span class="javascript">            <span class="hljs-comment">//æ­¤æ—¶çš„å¼€å§‹ç´¢å¼•</span></span><span class="javascript">            <span class="hljs-built_in">this</span>.start = <span class="hljs-built_in">this</span>.getStartIndex(scrollTop);</span><span class="javascript">            <span class="hljs-comment">//æ­¤æ—¶çš„ç»“æŸç´¢å¼•</span></span><span class="javascript">            <span class="hljs-built_in">this</span>.end = <span class="hljs-built_in">this</span>.start + <span class="hljs-built_in">this</span>.visibleCount;</span><span class="javascript">            <span class="hljs-comment">//æ­¤æ—¶çš„åç§»é‡</span></span><span class="javascript">            <span class="hljs-built_in">this</span>.setStartOffset();</span>          &#125;,        &#125;,      &#125;);<span class="javascript">      <span class="hljs-keyword">new</span> Vue(&#123;</span><span class="javascript">        el: <span class="hljs-string">&quot;#app&quot;</span>,</span>        data: &#123;          dataLength: 100000,          list: [],        &#125;,<span class="javascript">        <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;</span><span class="javascript">          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>; id &lt; <span class="hljs-built_in">this</span>.dataLength; ++id) &#123;</span><span class="javascript">            <span class="hljs-built_in">this</span>.list.push(&#123;</span>              id,              value: faker.lorem.sentences(),            &#125;);          &#125;        &#125;,      &#125;);    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯æ¶‰åŠåˆ°çš„æ•°æ®å­˜å‚¨</title>
    <link href="/2021/04/20/%E5%89%8D%E7%AB%AF%E5%AD%98%E5%82%A8/"/>
    <url>/2021/04/20/%E5%89%8D%E7%AB%AF%E5%AD%98%E5%82%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="LocalStorage-h5-web-storage"><a href="#LocalStorage-h5-web-storage" class="headerlink" title="LocalStorage[h5 web storage]"></a><code>LocalStorage</code>[h5 web storage]</h3><ul><li><p>ä¸ä¼šè¿‡æœŸ</p></li><li><p>æ•°æ®å¤§å°5MB</p></li><li><p>æµè§ˆå™¨ä¸­å…±äº«</p></li><li><p>åŒæºå…±äº«åŒä¸€ä»½<code>localStorage</code></p></li><li><p>åªèƒ½ä¸º<code>string</code>ç±»å‹,æ³¨æ„éœ€è¦<code>JSON</code>è½¬æ¢</p></li></ul><h3 id="SessionStorage-h5-web-storage"><a href="#SessionStorage-h5-web-storage" class="headerlink" title="SessionStorage[h5 web storage]"></a><code>SessionStorage</code>[h5 web storage]</h3><ul><li><p>çª—å£/æ ‡ç­¾é¡µå…³é—­æ—¶æ¸…ç†</p></li><li><p>ä¸è·¨çª—å£å…±äº«</p></li><li><p>æ•°æ®å¤§å°5MB</p></li></ul><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a><code>Cookie</code></h3><ul><li><p>æ‰‹åŠ¨è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¦åˆ™æµè§ˆå™¨å…³é—­å¤±æ•ˆ</p></li><li><p>æ•°æ®å¤§å° 4KB</p></li><li><p>å‚ä¸æ¯æ¬¡httpè¯·æ±‚</p></li><li><p>æœ‰è·¯å¾„æ¦‚å¿µï¼Œå¯ä»¥é™åˆ¶ä¸åŒè·¯å¾„ä¸‹çš„ cookie äº’ç›¸æ˜¯è®¿é—®ä¸åˆ°çš„</p></li><li><p>æŸäº›æµè§ˆå™¨å¯¹å•ç½‘ç«™cookieæ•°ç›®æœ‰é™åˆ¶(ä¸è¶…è¿‡20ä¸ª)</p></li><li><p>cookieå­—æ®µ</p><ul><li><p><code>name</code></p></li><li><p><code>value</code></p></li><li><p><code>domain</code>ã€€        å¯ä»¥è®¿é—®æ­¤cookieçš„åŸŸï¼Œé»˜è®¤ä¸ºè¯¥è¯·æ±‚æºçš„åŸŸ</p></li><li><p><code>path</code>ã€€        ã€€ å¯ä»¥è®¿é—®æ­¤cookieçš„é¡µé¢è·¯å¾„</p></li><li><p><code>expires/Max-Age</code> è¿‡æœŸæ—¶é—´ï¼Œå¦‚æ²¡è®¾ç½®åˆ™ä¸ä¼šè¯æ—¶æ•ˆç›¸åŒï¼ˆå…³é—­æµè§ˆå™¨çª—å£å¤±æ•ˆï¼‰</p></li><li><p><code>httponly</code>ã€€      åªèƒ½ä¼ è¾“ä¸èƒ½æŸ¥çœ‹</p></li><li><p><code>secure</code>          åªä½¿ç”¨HTTPSä¼ è¾“</p></li><li><p><code>sameSite = </code></p><ul><li><code>Strict</code>  è·¨åŸŸæ—¶ä¸å…è®¸å¸¦ä¸Šä»»ä½•cookie</li><li><code>Lax</code>  åªæœ‰ä¸‰ç§æƒ…å†µå¯ä»¥å¸¦ä¸Šcookie[aè¿æ¥,getæäº¤çš„è¡¨å•,é¢„åŠ è½½link]<blockquote><p>ç°ä»£æµè§ˆå™¨ä¼šå°†æ²¡æœ‰å£°æ˜ SameSite å€¼çš„ cookie é»˜è®¤è®¾ç½®ä¸ºLax</p></blockquote></li><li><code>None</code> éœ€é…åˆ<code>secure</code>ä½¿ç”¨ç”¨ <code>Set-Cookie: widget_session=xxxxx; SameSite=None; Secure</code></li></ul></li></ul></li></ul><h3 id="IndexedDB"><a href="#IndexedDB" class="headerlink" title="IndexedDB"></a><code>IndexedDB</code></h3><ul><li><p>é™¤éè¢«æ¸…ç†å¦åˆ™ä¸€ç›´å­˜åœ¨</p></li><li><p>æ•°æ®å¤§å°æ— é™åˆ¶</p></li><li><p>IndexedDBæ˜¯æµè§ˆå™¨æä¾›çš„æœ¬åœ°æ•°æ®åº“ï¼Œå®ƒå¯ä»¥è¢«ç½‘é¡µè„šæœ¬åˆ›å»ºå’Œæ“ä½œã€‚IndexedDB  å…è®¸å‚¨å­˜å¤§é‡æ•°æ®ï¼Œæä¾›æŸ¥æ‰¾æ¥å£ï¼Œè¿˜èƒ½å»ºç«‹ç´¢å¼•ã€‚</p></li></ul><h2 id="manifest"><a href="#manifest" class="headerlink" title="manifest"></a><code>manifest</code></h2><p>webåº”ç”¨ç¦»çº¿ç¼“å­˜</p>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vueæ‹¾é—</title>
    <link href="/2021/04/20/vue%E6%8B%BE%E9%81%97/"/>
    <url>/2021/04/20/vue%E6%8B%BE%E9%81%97/</url>
    
    <content type="html"><![CDATA[<h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><div class="hljs code-wrapper"><pre><code class="hljs javascript">initLifecycle(vm);<span class="hljs-comment">//åˆå§‹åŒ–ç”Ÿå‘½å‘¨æœŸ,å¤„ç†parent,children,$refs,root</span>initEvents(vm);<span class="hljs-comment">//åˆå§‹åŒ–äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬çš„</span>initRender(vm);<span class="hljs-comment">//ç»‘å®šcreateElementæ–¹æ³•ï¼Œç»‘å®š$attrs,$listeners</span>callHook(vm, <span class="hljs-string">&#x27;â­ï¸beforeCreate&#x27;</span>);initInjections(vm); <span class="hljs-comment">// resolve injections before data/props</span>initState(vm);<span class="hljs-comment">//initState</span>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initState</span> (<span class="hljs-params">vm</span>) </span>&#123;      initProps(vm, opts.props);      initMethods(vm, opts.methods);      initData(vm);      initComputed(vm, opts.computed);      initWatch(vm, opts.watch);    &#125;<span class="hljs-comment">//</span>initProvide(vm); <span class="hljs-comment">// resolve provide after data/props</span>callHook(vm, <span class="hljs-string">&#x27;â­ï¸created&#x27;</span>);vm.$mount(vm.$options.el);<span class="hljs-comment">//mount</span>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mountComponent</span> (<span class="hljs-params"></span>) </span>&#123;      callHook(vm, <span class="hljs-string">&#x27;â­ï¸beforeMount&#x27;</span>);      <span class="hljs-keyword">let</span> updateComponent;        updateComponent = <span class="hljs-function">() =&gt;</span> &#123;          vm._update(vm._render(), hydrating);        &#125;;        <span class="hljs-keyword">new</span> Watcher(vm, updateComponent, noop, &#123;          before () &#123;            <span class="hljs-keyword">if</span> (vm._isMounted) &#123;              callHook(vm, <span class="hljs-string">&#x27;â­ï¸beforeUpdate&#x27;</span>)            &#125;          &#125;          <span class="hljs-comment">//æ¸²æŸ“å‡½æ•°update</span>          <span class="hljs-function"><span class="hljs-title">update</span>(<span class="hljs-params"></span>)</span>&#123;          ...          callHook(vm, <span class="hljs-string">&#x27;â­ï¸updated&#x27;</span>)          ...          &#125;        &#125;, <span class="hljs-literal">true</span>)        callHook(vm, <span class="hljs-string">&#x27;â­ï¸mounted&#x27;</span>);      <span class="hljs-keyword">return</span> vm    &#125;<span class="hljs-comment">//</span>Vue.prototype.$destroy = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    callHook(vm, <span class="hljs-string">&#x27;â­ï¸beforeDestroy&#x27;</span>);    <span class="hljs-comment">// remove self from parent</span>    <span class="hljs-keyword">const</span> parent = vm.$parent;    remove(parent.$children, vm);    <span class="hljs-comment">// teardown watchers</span>    vm._watcher.teardown();    vm._watchers[i].teardown();    <span class="hljs-comment">// remove reference from data ob</span>    <span class="hljs-comment">// frozen object may not have observer.</span>    vm._data.__ob__.vmCount--;    <span class="hljs-comment">// invoke destroy hooks on current rendered tree</span>    vm.__patch__(vm._vnode, <span class="hljs-literal">null</span>);    <span class="hljs-comment">// fire destroyed hook</span>    callHook(vm, <span class="hljs-string">&#x27;â­ï¸destroyed&#x27;</span>);    <span class="hljs-comment">// turn off all instance listeners.</span>    vm.$off();    <span class="hljs-comment">// remove __vue__ reference</span>    <span class="hljs-keyword">if</span> (vm.$el) &#123;      vm.$el.__vue__ = <span class="hljs-literal">null</span>;    &#125;    <span class="hljs-comment">// release circular reference (#6759)</span>    <span class="hljs-keyword">if</span> (vm.$vnode) &#123;      vm.$vnode.parent = <span class="hljs-literal">null</span>;    &#125;  &#125;;&#125;<span class="hljs-comment">// keep-alive</span>â­ï¸callHook(vm, <span class="hljs-string">&#x27;â­ï¸activated&#x27;</span>);  â­ï¸ callHook(vm, <span class="hljs-string">&#x27;â­ï¸deactivated&#x27;</span>);</code></pre></div><h1 id="å“åº”å¼åŸç†"><a href="#å“åº”å¼åŸç†" class="headerlink" title="å“åº”å¼åŸç†"></a>å“åº”å¼åŸç†</h1><h3 id="defineReactive"><a href="#defineReactive" class="headerlink" title="defineReactive"></a><code>defineReactive</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">defineReactive (  ...) &#123;  <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> Dep()  ...  <span class="hljs-built_in">Object</span>.defineProperty(obj, key, &#123;    enumerable: <span class="hljs-literal">true</span>,    configurable: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// renderå‡½æ•°æ¥è§¦dataè§¦å‘getter</span>    get: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactiveGetter</span> (<span class="hljs-params"></span>) </span>&#123;      <span class="hljs-keyword">if</span> (Dep.target) &#123;        <span class="hljs-comment">// æ­¤æ—¶Dep.targetå·²ç»æ˜¯æ¸²æŸ“watcher</span>        <span class="hljs-comment">// æ‰§è¡Œdepend</span>â­ï¸        dep.depend()        <span class="hljs-keyword">if</span> (childOb) &#123;          ...        &#125;      &#125;      <span class="hljs-keyword">return</span> value    &#125;,    set: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactiveSetter</span> (<span class="hljs-params">newVal</span>) </span>&#123;      <span class="hljs-keyword">if</span> (newVal === value || (newVal !== newVal &amp;&amp; value !== value)) &#123;        <span class="hljs-keyword">return</span>      &#125;      val = newValğŸ”¥    dep.notify()    &#125;  &#125;)&#125;</code></pre></div><h3 id="mountComponent"><a href="#mountComponent" class="headerlink" title="mountComponent "></a><code>mountComponent </code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">mountComponent (...): Component &#123;  callHook(vm, <span class="hljs-string">&#x27;beforeMount&#x27;</span>)  <span class="hljs-keyword">let</span> updateComponent;â­ï¸ <span class="hljs-comment">// renderå‡½æ•°ç”Ÿæˆè™šæ‹ŸDOMï¼ŒæœŸé—´ä¼šè®¿é—®æ•°æ®</span>  updateComponent = <span class="hljs-function">() =&gt;</span> &#123;    vm._update(vm._render(), hydrating);  &#125;;â­ï¸ <span class="hljs-comment">//ç»„ä»¶`mount`è¿‡ç¨‹ä¸­ä¼šå®ä¾‹åŒ–ä¸€ä¸ªæ¸²æŸ“`watcher`ï¼Œä¼ å…¥updateComponentå‡½æ•°</span>  vm._watcher = <span class="hljs-keyword">new</span> Watcher(vm, updateComponent, noop, &#123;    before () &#123;      <span class="hljs-keyword">if</span> (vm._isMounted) &#123;        callHook(vm, <span class="hljs-string">&#x27;beforeUpdate&#x27;</span>)      &#125;    &#125;  &#125;, <span class="hljs-literal">true</span> <span class="hljs-comment">/* isRenderWatcher */</span>)  <span class="hljs-keyword">if</span> (vm.$vnode == <span class="hljs-literal">null</span>) &#123;    vm._isMounted = <span class="hljs-literal">true</span>    callHook(vm, <span class="hljs-string">&#x27;mounted&#x27;</span>)  &#125;&#125;</code></pre></div><h3 id="Watcher"><a href="#Watcher" class="headerlink" title="Watcher"></a><code>Watcher</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Watcher</span> </span>&#123;  <span class="hljs-title">constructor</span> (<span class="hljs-params"></span><span class="hljs-params">    vm,</span><span class="hljs-params">    expOrFn,</span><span class="hljs-params">    cb,</span><span class="hljs-params">    options</span><span class="hljs-params">  </span>) &#123;    <span class="hljs-built_in">this</span>.vm = vm;    vm._watchers.push(<span class="hljs-built_in">this</span>);    <span class="hljs-built_in">this</span>.deps = [];    <span class="hljs-built_in">this</span>.newDeps = [];    <span class="hljs-built_in">this</span>.depIds = <span class="hljs-keyword">new</span> _Set();    <span class="hljs-built_in">this</span>.newDepIds = <span class="hljs-keyword">new</span> _Set();    <span class="hljs-comment">// parse expression for getter</span>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> expOrFn === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;â­ï¸ <span class="hljs-comment">// getteræ­¤æ—¶ä¸ºä¼ å…¥çš„updateComponentå‡½æ•°</span>      <span class="hljs-built_in">this</span>.getter = expOrFn;    &#125;  &#125;  get () &#123;â­ï¸  <span class="hljs-comment">//é¦–å…ˆè§¦å‘watcherä¸­çš„getï¼ˆï¼‰</span>        <span class="hljs-comment">// pushTargetæ–¹æ³•    </span>    pushTarget(<span class="hljs-built_in">this</span>)    <span class="hljs-keyword">let</span> valueâ­ï¸  <span class="hljs-comment">// è°ƒç”¨getter</span>    value = <span class="hljs-built_in">this</span>.getter.call(vm, vm)    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.deep) &#123;      traverse(value)    &#125;â­ï¸ <span class="hljs-comment">// å½“å‰ç»„ä»¶æ”¶é›†å®Œæˆåæ¸…ç†</span>    popTarget()    <span class="hljs-built_in">this</span>.cleanupDeps()        <span class="hljs-keyword">return</span> value  &#125;  addDep (dep: Dep) &#123;    <span class="hljs-keyword">const</span> id = dep.id    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.newDepIds.has(id)) &#123;      <span class="hljs-built_in">this</span>.newDepIds.add(id)      <span class="hljs-built_in">this</span>.newDeps.push(dep)      <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.depIds.has(id)) &#123;â­ï¸ <span class="hljs-comment">//æ‰§è¡ŒaddSub</span>        dep.addSub(<span class="hljs-built_in">this</span>)      &#125;    &#125;  &#125;â­ï¸<span class="hljs-comment">// å¯¹æ¯”æ–°æ—§è®¢é˜…åˆ—è¡¨ï¼Œæ¸…ç©ºä¾èµ–</span>  cleanupDeps () &#123;    <span class="hljs-keyword">let</span> i = <span class="hljs-built_in">this</span>.deps.length    <span class="hljs-keyword">while</span> (i--) &#123;      <span class="hljs-keyword">const</span> dep = <span class="hljs-built_in">this</span>.deps[i]      <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.newDepIds.has(dep.id)) &#123;        <span class="hljs-comment">//æ¸…ç©ºä¾èµ–</span>        dep.removeSub(<span class="hljs-built_in">this</span>)      &#125;    &#125;    <span class="hljs-comment">// æ¯æ¬¡æ›´æ–°é¡µé¢ï¼Œrenderä¾èµ–æ”¶é›†çš„æ—¶å€™</span>    <span class="hljs-comment">// å°†ä¸å±•ç¤ºäºé¡µé¢ä¸Šçš„æ•°æ®çš„ä¾èµ–ç§»é™¤</span>    <span class="hljs-comment">// è€ƒè™‘v-if</span>    [<span class="hljs-built_in">this</span>.depIds,<span class="hljs-built_in">this</span>.newDepIds]=[<span class="hljs-built_in">this</span>.newDepIds,<span class="hljs-built_in">this</span>.depIds]    <span class="hljs-built_in">this</span>.newDepIds.clear()    [<span class="hljs-built_in">this</span>.deps,<span class="hljs-built_in">this</span>.newDeps] = [<span class="hljs-built_in">this</span>.newDeps,<span class="hljs-built_in">this</span>.deps]    <span class="hljs-built_in">this</span>.newDeps.length = <span class="hljs-number">0</span>  &#125;ğŸ”¥  update () &#123;    <span class="hljs-comment">/* istanbul ignore else */</span>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.lazy) &#123;      <span class="hljs-built_in">this</span>.dirty = <span class="hljs-literal">true</span>;    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.sync) &#123;      <span class="hljs-built_in">this</span>.run();    &#125; <span class="hljs-keyword">else</span> &#123;ğŸ”¥    queueWatcher(<span class="hljs-built_in">this</span>);    &#125;  &#125;  <span class="hljs-comment">// ...</span>&#125;</code></pre></div><h3 id="Dep"><a href="#Dep" class="headerlink" title="Dep"></a><code>Dep</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dep</span> </span>&#123;  <span class="hljs-keyword">static</span> target: ?Watcher;  id: number;  subs: <span class="hljs-built_in">Array</span>&lt;Watcher&gt;;    <span class="hljs-title">constructor</span> (<span class="hljs-params"></span>) &#123;    <span class="hljs-built_in">this</span>.id = uid++    <span class="hljs-built_in">this</span>.subs = []  &#125; <span class="hljs-comment">// å°†watcheråŠ å…¥subs</span>  addSub (sub: Watcher) &#123;    <span class="hljs-built_in">this</span>.subs.push(sub)  &#125;â­ï¸  removeSub (sub: Watcher) &#123;    remove(<span class="hljs-built_in">this</span>.subs, sub)  &#125;â­ï¸   depend () &#123;    <span class="hljs-keyword">if</span> (Dep.target) &#123; <span class="hljs-comment">// æ‰§è¡Œå½“å‰watcherä¸­çš„addDepå‡½æ•°</span>      Dep.target.addDep(<span class="hljs-built_in">this</span>)    &#125;  &#125;ğŸ”¥  notify () &#123;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, l = subs.length; i &lt; l; i++) &#123;      subs[i].update()    &#125;  &#125;&#125;â­ï¸ <span class="hljs-comment">// targetç½®ç©º</span>Dep.target = <span class="hljs-literal">null</span><span class="hljs-keyword">const</span> targetStack = []â­ï¸ <span class="hljs-comment">// å°†Dep.target æŒ‡å‘å½“å‰watcher</span><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pushTarget</span> (<span class="hljs-params">_target: ?Watcher</span>) </span>&#123;  <span class="hljs-keyword">if</span> (Dep.target) targetStack.push(Dep.target)  Dep.target = _target&#125;<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">popTarget</span> (<span class="hljs-params"></span>) </span>&#123;  Dep.target = targetStack.pop()&#125;</code></pre></div><h2 id="â­ï¸æ”¶é›†ä¾èµ–â­ï¸"><a href="#â­ï¸æ”¶é›†ä¾èµ–â­ï¸" class="headerlink" title="â­ï¸æ”¶é›†ä¾èµ–â­ï¸"></a>â­ï¸æ”¶é›†ä¾èµ–â­ï¸</h2><ol><li>initStateé˜¶æ®µä¸ºæ•°æ®æ·»åŠ getter,setterç»‘å®š,å¹¶ä¸ºæ¯ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªæ–°Depå®ä¾‹</li><li>mountComponentæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç»„ä»¶å®ä¾‹åŒ–ä¸€ä¸ªæ¸²æŸ“watcherï¼Œå¹¶ä½œä¸ºDep.target</li><li>renderå‡½æ•°è§¦å‘æ•°æ®çš„getterï¼Œå°†å½“å‰æ¸²æŸ“watcheræ·»åŠ åˆ°è¯¥æ•°æ®æŒæœ‰çš„Depå®ä¾‹subsæ•°ç»„ä¸­<blockquote><p>å¯ä»¥ç†è§£æˆdataæ•°æ®çš„subsæ•°ç»„ä¸­æ¯ä¸ªwatcherå³ä»£è¡¨ä¸€ä¸ªå—è¯¥æ•°æ®å“åº”å¼å½±å“çš„ç»„ä»¶å®ä¾‹</p></blockquote></li></ol><h2 id="ğŸ”¥æ´¾å‘æ›´æ–°ğŸ”¥"><a href="#ğŸ”¥æ´¾å‘æ›´æ–°ğŸ”¥" class="headerlink" title="ğŸ”¥æ´¾å‘æ›´æ–°ğŸ”¥"></a>ğŸ”¥æ´¾å‘æ›´æ–°ğŸ”¥</h2><ol><li>ä¿®æ”¹æ•°æ®è§¦å‘setterï¼Œæ‰§è¡Œdep.notify()</li><li>éå†å½“å‰æ•°æ®subsä¸­çš„watcherï¼Œæ‰§è¡Œå…¶update()</li><li>vueä¸ä¼šæ¯æ¬¡æ•°æ®æ›´æ–°å°±ç«‹åˆ»å»æ›´æ–°è§†å›¾ï¼Œè€Œæ˜¯ç”¨é˜Ÿåˆ—ç®¡ç†è¿™äº›å›è°ƒä»»åŠ¡</li><li>é˜Ÿåˆ—ä¼šå¯¹watcheråˆ¤æ–­æ˜¯å¦é‡å¤ï¼Œå¹¶ä¸”è¿›è¡Œæ’åºã€å…ˆçˆ¶åå­ã€‘ã€è‡ªå®šä¹‰watcher&gt;æ¸²æŸ“watcherã€‘</li><li>åœ¨ä¸‹ä¸€ä¸ªtickæ‰§è¡Œè¿™ä¸ªé˜Ÿåˆ—</li></ol><h1 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a><code>nextTick</code></h1><ul><li>æ‰§è¡Œä¸»çº¿ç¨‹çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªtick</li><li>æ‰§è¡Œå®Œå½“å‰tickåŒ…æ‹¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼ˆå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡ï¼‰</li><li>nextTickå°±æ˜¯æŠŠå›è°ƒåŠ å…¥æœ¬æ¬¡tickçš„å°¾éƒ¨æ‰§è¡Œ</li><li>vueæ ¹æ®ç¯å¢ƒå°è¯•ä½¿ç”¨<code>Promise``SetImmediate``setTimeout(0)</code></li></ul><h1 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h1><ul><li>ç»„ä»¶çš„è°ƒç”¨é¡ºåºéƒ½æ˜¯å…ˆçˆ¶åå­,æ¸²æŸ“å®Œæˆçš„é¡ºåºæ˜¯å…ˆå­åçˆ¶ã€‚</li><li>ç»„ä»¶çš„é”€æ¯æ“ä½œæ˜¯å…ˆçˆ¶åå­ï¼Œé”€æ¯å®Œæˆçš„é¡ºåºæ˜¯å…ˆå­åçˆ¶ã€‚<h3 id="åŠ è½½æ¸²æŸ“è¿‡ç¨‹"><a href="#åŠ è½½æ¸²æŸ“è¿‡ç¨‹" class="headerlink" title="åŠ è½½æ¸²æŸ“è¿‡ç¨‹"></a>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</h3>çˆ¶beforeCreate-&gt;çˆ¶created-&gt;çˆ¶beforeMount-&gt;å­beforeCreate-&gt;å­created-&gt;å­beforeMount- &gt;å­mounted-&gt;çˆ¶mounted<h3 id="å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹"><a href="#å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹" class="headerlink" title="å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹"></a>å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹</h3>çˆ¶beforeUpdate-&gt;å­beforeUpdate-&gt;å­updated-&gt;çˆ¶updated<h3 id="çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹"><a href="#çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹" class="headerlink" title="çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹"></a>çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹</h3>çˆ¶ beforeUpdate -&gt; çˆ¶ updated<h3 id="é”€æ¯è¿‡ç¨‹"><a href="#é”€æ¯è¿‡ç¨‹" class="headerlink" title="é”€æ¯è¿‡ç¨‹"></a>é”€æ¯è¿‡ç¨‹</h3>çˆ¶beforeDestroy-&gt;å­beforeDestroy-&gt;å­destroyed-&gt;çˆ¶destroyed</li></ul><h1 id="è®¡ç®—å±æ€§å’Œä¾¦å¬å±æ€§"><a href="#è®¡ç®—å±æ€§å’Œä¾¦å¬å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§å’Œä¾¦å¬å±æ€§"></a>è®¡ç®—å±æ€§å’Œä¾¦å¬å±æ€§</h1><h2 id="Computed"><a href="#Computed" class="headerlink" title="Computed"></a><code>Computed</code></h2><div class="hljs code-wrapper"><pre><code class="hljs javascript">initComputed (vm: Component, <span class="hljs-attr">computed</span>: <span class="hljs-built_in">Object</span>) &#123;  <span class="hljs-keyword">const</span> watchers = vm._computedWatchers = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>)  <span class="hljs-keyword">const</span> isSSR = isServerRendering()  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> computed) &#123;    <span class="hljs-keyword">const</span> userDef = computed[key]    <span class="hljs-keyword">const</span> getter = <span class="hljs-keyword">typeof</span> userDef === <span class="hljs-string">&#x27;function&#x27;</span> ? userDef : userDef.get    ...â­ï¸<span class="hljs-number">1</span>      watchers[key] = <span class="hljs-keyword">new</span> Watcher(        vm,        getter || noop,        noop,        &#123; <span class="hljs-attr">computed</span>: <span class="hljs-literal">true</span> &#125;      )    <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> vm)) &#123;â­ï¸<span class="hljs-number">2</span>      defineComputed(vm, key, userDef)    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">&#x27;production&#x27;</span>) &#123;      <span class="hljs-keyword">if</span> (key <span class="hljs-keyword">in</span> vm.$data) &#123;        <span class="hljs-comment">// ... keyåç§°è¢«dataæˆ–è€…propå ç”¨çš„è­¦å‘Š</span>      &#125;    &#125;  &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript">createComputedGetter (key) &#123;  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computedGetter</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-keyword">const</span> watcher = <span class="hljs-built_in">this</span>._computedWatchers &amp;&amp; <span class="hljs-built_in">this</span>._computedWatchers[key]    <span class="hljs-keyword">if</span> (watcher) &#123;â­ï¸<span class="hljs-number">2</span>      watcher.depend()      <span class="hljs-keyword">return</span> watcher.evaluate()    &#125;  &#125;&#125;</code></pre></div><ol><li>éå†Computedå†…çš„keyï¼Œä¸ºæ¯ä¸ªkeyåˆ›å»ºcomputed watcher</li><li>åˆ©ç”¨ Object.defineProperty ç»™ key å€¼æ·»åŠ  getter</li><li>æ¸²æŸ“å‡½æ•°è®¿é—®åˆ°computedå†…çš„keyæ—¶å€™ï¼Œè§¦å‘getterï¼Œç”Ÿæˆä¸€ä¸ªDepå®ä¾‹ï¼Œå¹¶ä¸”æ­¤æ—¶Dep.targetæ˜¯æ¸²æŸ“watcherï¼Œæ¸²æŸ“watcherå°±è®¢é˜…äº†è¿™ä¸ªkeyçš„å˜åŒ–</li><li>ç»§ç»­æ‰§è¡Œè®¡ç®—é€»è¾‘ï¼Œä¼šè§¦å‘å…¶ä¸­å“åº”å¼æ•°æ®çš„getterï¼Œåˆ™computed watcherä¹Ÿå°±è®¢é˜…äº†dataçš„å˜åŒ–ï¼Œæœ€åä¹Ÿè¿”å›è®¡ç®—å€¼</li><li>å½“ä¾èµ–çš„å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œå“åº”çš„computed watcherä¼šæ”¶åˆ°é€šçŸ¥</li><li>computed watcherä¼šé‡æ–°æ±‚å€¼ï¼Œç»“æœæ”¹å˜æ—¶æ‰ä¼šé€šçŸ¥æ¸²æŸ“watcher</li></ol><h2 id="Watch"><a href="#Watch" class="headerlink" title="Watch"></a><code>Watch</code></h2><ul><li>deep</li><li>immediate<div class="hljs code-wrapper"><pre><code class="hljs javascript">initWatch (vm: Component, <span class="hljs-attr">watch</span>: <span class="hljs-built_in">Object</span>) &#123;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> watch) &#123;    <span class="hljs-keyword">const</span> handler = watch[key]    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(handler)) &#123;      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; handler.length; i++) &#123;        <span class="hljs-comment">// éå†handlers</span>        createWatcher(vm, key, handler[i])      &#125;    &#125; <span class="hljs-keyword">else</span> &#123;      createWatcher(vm, key, handler)    &#125;  &#125;&#125;</code></pre></div></li></ul><ol><li>éå†Watchå†…çš„key</li><li>éå†æ¯ä¸€ä¸ªhandlerï¼Œä¸ºæ¯ä¸€ä¸ªhandleråˆ›å»ºuser watcher</li><li>user watcherä¼šè¢«æ·»åŠ è¿›è®¢é˜…å“åº”æ•°æ®çš„subs[]å®Œæˆè®¢é˜…</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>webå®‰å…¨</title>
    <link href="/2021/04/13/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/"/>
    <url>/2021/04/13/%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><ul><li>ä¸¤ä¸ªURl <strong>!åŒåè®® !åŒåŸŸå !åŒç«¯å£</strong></li><li>åŒæºç­–ç•¥é™åˆ¶äº†åŒä¸€ä¸ªæºåŠ è½½çš„è„šæœ¬å’Œæ–‡æ¡£å¦‚ä½•ä¸å…¶ä»–æºçš„èµ„æºè¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬jsè„šæœ¬ï¼Œç¼“å­˜çš„è¯»å–ï¼Œcookieï¼Œajaxç­‰</li><li>ä¸‰ç§æ ‡ç­¾ä¸å—åŒæºé™åˆ¶<code>script</code> <code>link</code> <code>img</code></li></ul><h3 id="è·¨åŸŸçš„æ–¹æ³•"><a href="#è·¨åŸŸçš„æ–¹æ³•" class="headerlink" title="è·¨åŸŸçš„æ–¹æ³•"></a>è·¨åŸŸçš„æ–¹æ³•</h3><ul><li><p>ä»£ç†æœåŠ¡å™¨-<code>nginx,devServerç­‰</code></p></li><li><p>æ›´æ”¹é¡µé¢çš„æº<code>document.domain</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-string">&#x27;someWebSite.com/dir1/pageA.html&#x27;</span><span class="hljs-string">&#x27;someWebSite.com/dir2/pageB.html&#x27;</span>éƒ½è®¾ç½®<span class="hljs-built_in">document</span>.domain = <span class="hljs-string">&#x27;someWebSite.com&#x27;</span>åˆ™ä»–ä»¬ä¹‹é—´é€šä¿¡å°†é€šè¿‡åŒæºæ£€æµ‹ï¼Œå¹¶éƒ½è®¿é—®çˆ¶æºçš„cookie</code></pre></div></li><li><p><code>postMessage</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// pageAé€šè¿‡iframeåµŒå…¥äº†pageB</span><span class="hljs-comment">// pageAä¸­ä»£ç </span><span class="hljs-built_in">window</span>.iframe[i].postMessage(<span class="hljs-string">&#x27;data&#x27;</span>,<span class="hljs-string">&#x27;pqgeBçš„URL&#x27;</span>)<span class="hljs-comment">// pageBä¸­çš„ä»£ç </span><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">&#x27;message&#x27;</span>,<span class="hljs-function"><span class="hljs-title">funciton</span>(<span class="hljs-params">e</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(e.data)     <span class="hljs-comment">// data</span>    <span class="hljs-built_in">console</span>.log(e.source)   <span class="hljs-comment">// aä¸­windowçš„å¼•ç”¨</span>    <span class="hljs-built_in">console</span>.log(e.oringin)  <span class="hljs-comment">// pageAçš„URL</span>&#125;,<span class="hljs-literal">false</span>)<span class="hljs-comment">// åè¿‡æ¥pageBå‘pageAå‘é€æ•°æ®</span><span class="hljs-comment">// åœ¨pageAä¸­åŠ å…¥window.addEventListener</span><span class="hljs-comment">// åœ¨pageBä¸­e.source.postMessage</span></code></pre></div></li><li><p><code>iframe</code>+<code>hash</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// pageAé€šè¿‡iframeåµŒå…¥äº†pageB</span><span class="hljs-keyword">var</span> B = <span class="hljs-built_in">document</span>.getElementByTagName(<span class="hljs-string">&quot;iframe&quot;</span>);B.src = B.src + <span class="hljs-string">&quot;#&quot;</span> + <span class="hljs-string">&quot;data&quot;</span>;<span class="hljs-comment">// pageBä¸­çš„ä»£ç </span><span class="hljs-built_in">window</span>.onhashchange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;data = <span class="hljs-built_in">window</span>.location.hash; <span class="hljs-comment">//  &lt;-  pageBå°±è·å–åˆ°äº†hashå€¼</span>&#125;;</code></pre></div></li><li><p><code>jsonp</code></p></li></ul>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonp</span>(<span class="hljs-params">&#123; url, params, callback &#125;</span>) </span>&#123;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatParams</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">const</span> attrs = []    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> [key,value] <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.entries(params))&#123;      attrs.push(<span class="hljs-string">`<span class="hljs-subst">$&#123;key&#125;</span>=<span class="hljs-subst">$&#123;value&#125;</span>`</span>)    &#125;    attrs.push(<span class="hljs-string">`callback=<span class="hljs-subst">$&#123;callback&#125;</span>`</span>)    <span class="hljs-keyword">return</span> attrs.join(<span class="hljs-string">&#x27;&amp;)</span><span class="hljs-string">  &#125;</span><span class="hljs-string">  return new Promise((resolve,reject)=&gt;&#123;</span><span class="hljs-string">    const script = document.createElement(&#x27;</span>script<span class="hljs-string">&#x27;)</span><span class="hljs-string">    script.src = url+&#x27;</span>?<span class="hljs-string">&#x27;+formatParams()</span><span class="hljs-string">    try&#123;</span><span class="hljs-string">      window[callback] = function(data)&#123;</span><span class="hljs-string">        resolve(data)</span><span class="hljs-string">        document.removeChild(script)</span><span class="hljs-string">      &#125;</span><span class="hljs-string">    &#125;catch(err)&#123;</span><span class="hljs-string">      reject(err)</span><span class="hljs-string">    &#125;</span><span class="hljs-string">  &#125;)</span><span class="hljs-string">&#125;</span></code></pre></div>  <div class="hljs code-wrapper"><pre><code class="hljs js"><span class="hljs-comment">// å‘é€</span>jsonp(&#123;url: <span class="hljs-string">&quot;http://localhost:3000/jsptest&quot;</span>,params: &#123; <span class="hljs-attr">msg</span>: <span class="hljs-string">&quot;jsptestmessage&quot;</span> &#125;,callback: <span class="hljs-string">&quot;jsonpCallback&quot;</span>&#125;).then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> &#123;<span class="hljs-comment">//å¤„ç†data</span>    &#125;);</code></pre></div><ul><li><p><code>imgPing</code><strong>æ·»åŠ imgæ ‡ç­¾srcä¸­æ”¾å…¥getè¯·æ±‚</strong></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> img = <span class="hljs-keyword">new</span> Image();img.onload = img.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    alert(<span class="hljs-string">&quot;å·²å‘é€&quot;</span>);&#125;;img.src = <span class="hljs-string">&quot;http://xxx.xxx.com/query?key=value&quot;</span>;<span class="hljs-comment">// è®¾ç½®å®Œsrcå±æ€§é‚£ä¸€åˆ»å¼€å§‹è¯·æ±‚å°±å‘é€äº†</span></code></pre></div></li><li><p><code>CORS</code>è·¨åŸŸèµ„æºå…±äº«ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰</p></li><li><p><code>websocket</code>åè®®</p></li><li><p><code>Fetch</code>API</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postData</span>(<span class="hljs-params">url, data</span>) </span>&#123;<span class="hljs-comment">// Default options are marked with *</span>  <span class="hljs-keyword">return</span> fetch(url, &#123;      body: <span class="hljs-built_in">JSON</span>.stringify(data), <span class="hljs-comment">// must match &#x27;Content-Type&#x27; header</span>      cache: <span class="hljs-string">&quot;no-cache&quot;</span>, <span class="hljs-comment">// *default, no-cache, reload, force-cache, only-if-cached</span>      credentials: <span class="hljs-string">&quot;same-origin&quot;</span>, <span class="hljs-comment">// include, same-origin, *omit</span>      headers: &#123;        <span class="hljs-string">&quot;user-agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/4.0 MDN Example&quot;</span>,       <span class="hljs-string">&quot;content-type&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>      &#125;,      method: <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-comment">// *GET, POST, PUT, DELETE, etc.</span>      mode: <span class="hljs-string">&quot;cors&quot;</span>, <span class="hljs-comment">// no-cors, cors, *same-origin</span>      redirect: <span class="hljs-string">&quot;follow&quot;</span>, <span class="hljs-comment">// manual, *follow, error</span>      referrer: <span class="hljs-string">&quot;no-referrer&quot;</span> <span class="hljs-comment">// *client, no-referrer</span>      &#125;).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.json()); <span class="hljs-comment">// parses response to JSON</span>  &#125;</code></pre></div></li></ul><h3 id="CORSè·¨åŸŸ"><a href="#CORSè·¨åŸŸ" class="headerlink" title="CORSè·¨åŸŸ"></a><code>CORS</code>è·¨åŸŸ</h3><h4 id="ï¼ç®€å•è¯·æ±‚"><a href="#ï¼ç®€å•è¯·æ±‚" class="headerlink" title="ï¼ç®€å•è¯·æ±‚"></a>ï¼ç®€å•è¯·æ±‚</h4><ul><li>æ–¹æ³•<code>post get head</code>,</li><li><code>Content-Type</code>ï¼šåªé™äºä¸‰ä¸ªå€¼<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code></li></ul><h5 id="è¯·æ±‚"><a href="#è¯·æ±‚" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h5><ul><li>headerä¸­æ·»åŠ <code>Origin</code>å­—æ®µ</li></ul><h5 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h5><ul><li><p><code>Access-Control-Allow-Origin</code>:å…è®¸è·¨åŸŸè®¿é—®çš„åŸŸï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªåŸŸçš„åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šé…ç¬¦â€*â€œ</p></li><li><p><code>Access-Control-Allow-Credentials</code>:æ˜¯å¦å…è®¸è¯·æ±‚å¸¦æœ‰ cookie</p><p>å¦‚æœè¦å‘é€<code>Cookieï¼ŒAccess-Control-Allow-Origin</code>å°±ä¸èƒ½è®¾ä¸ºæ˜Ÿå·ï¼Œå¿…é¡»æŒ‡å®šæ˜ç¡®çš„ã€ä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸå</p><p>å¹¶ä¸” ajax ä¸­è¦æ‰“å¼€</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();xhr.withCredentials = <span class="hljs-literal">true</span>;  <span class="xml">&lt;-------</span></code></pre></div></li><li><p><code>Access-Control-Expose-Headers</code>: è‡ªå®šä¹‰å­—æ®µ</p></li></ul><h4 id="ï¼éç®€å•è¯·æ±‚"><a href="#ï¼éç®€å•è¯·æ±‚" class="headerlink" title="ï¼éç®€å•è¯·æ±‚"></a>ï¼éç®€å•è¯·æ±‚</h4><ul><li>éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯<code>PUT</code>æˆ–<code>DELETE</code>ï¼Œæˆ–è€…<code>Content-Type</code>å­—æ®µçš„ç±»å‹æ˜¯<code>application/json</code></li><li>æ­£å¼é€šä¿¡å‰ä¼šå…ˆå‘èµ·â€é¢„æ£€â€è¯·æ±‚</li><li>ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†â€é¢„æ£€â€è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„ CORS è¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·</li></ul><h5 id="è¯·æ±‚-1"><a href="#è¯·æ±‚-1" class="headerlink" title="è¯·æ±‚"></a>è¯·æ±‚</h5><ul><li><code>OPTIONS</code>è¯¢é—®</li><li><code>Origin</code>æ¥æºåŸŸ</li><li><code>Access-Control-Request-Method</code>æ¥ä¸‹æ¥è¯·æ±‚çš„æ–¹æ³•</li></ul><h5 id="å“åº”-1"><a href="#å“åº”-1" class="headerlink" title="å“åº”"></a>å“åº”</h5><ul><li><code>Access-Control-Allow-Origin</code>å…è®¸è·¨åŸŸè®¿é—®çš„åŸŸ</li><li><code>Access-Control-Allow-Methods</code>æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•</li><li><code>Access-Control-Max-Age</code>é¢„æ£€è¯·æ±‚æœ‰æ•ˆæœŸ</li><li><code>Access-Control-Allow-Credentials</code>ä¸ç®€å•è¯·æ±‚ç›¸åŒ</li></ul><h2 id="XSSè·¨åŸŸè„šæœ¬æ”»å‡»"><a href="#XSSè·¨åŸŸè„šæœ¬æ”»å‡»" class="headerlink" title="XSSè·¨åŸŸè„šæœ¬æ”»å‡»"></a>XSSè·¨åŸŸè„šæœ¬æ”»å‡»</h2><p><code>Cross-site scripting</code></p><blockquote><p>æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ‰§è¡Œäº†é¢„æœŸå¤–çš„æ¶æ„ä»£ç ï¼Œä½¿éæ³•è„šæœ¬åœ¨ç”¨æˆ·é¡µé¢å†…è¿è¡Œ</p></blockquote><ul><li><p>å­˜å‚¨å‹XSS</p><p>  input, textareaç­‰ï¼‰ä¸­å†™å…¥æ¶æ„è„šæœ¬ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå…¶ä»–äººä¸‹è½½å¸¦æœ‰è¯¥è„šæœ¬çš„htmlé¡µé¢è‡³æµè§ˆå™¨æ—¶è„šæœ¬è¿è¡Œ</p></li><li><p>åå°„å‹XSS</p><p>  å°†æ¶æ„ä»£ç åŠ å…¥<code>URL</code>ä¸­æäº¤ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›å†…å®¹å°±å¸¦ä¸Šäº†æ¶æ„ä»£ç ï¼Œæµè§ˆå™¨ä¸‹è½½é¡µé¢åˆ™æ‰§è¡Œäº†æ¶æ„ä»£ç ï¼ŒæœåŠ¡å™¨ä¸å­˜å‚¨æ¶æ„ä»£ç </p></li><li><p>DOM XSS</p><ul><li>JavaScript çš„ <code>eval()</code>ã€<code>setTimeout()</code>ã€<code>setInterval()</code> ç­‰å‡½æ•°</li><li><code>&lt;a&gt;</code>æ ‡ç­¾çš„<code>href</code>å±æ€§</li><li>DOMä¸­çš„å†…è”äº‹ä»¶ç›‘è§†å™¨,<code>location</code>,<code>onclick</code>,<code>onerror</code>,<code>onload</code>ç­‰</li><li>éƒ½å¯ä»¥å°†å­—ç¬¦ä¸²ä½œä¸ºä»£ç æ‰§è¡Œ</li></ul></li></ul><h3 id="é˜²èŒƒXSS"><a href="#é˜²èŒƒXSS" class="headerlink" title="é˜²èŒƒXSS"></a>é˜²èŒƒXSS</h3><ul><li>è®¾ç½®cookie  <code>httponly</code></li><li>æ ¡éªŒç”¨æˆ·è¾“å…¥å’ŒURLå‚æ•°è¿›è¡Œè¿‡æ»¤</li><li>å¯¹å‘é€è‡³ç”¨æˆ·çš„å†…å®¹è¿›è¡Œè½¬ç ï¼Œé¿å…æµè§ˆå™¨æ‰§è¡Œ</li><li>ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥CSP<code>Content Security Policy</code>,é™åˆ¶è¯¥é¡µé¢å¯ä»¥è·å–çš„èµ„æºå’Œæ¥æº</li><li>! <code>jsonp</code>å¦‚ä½•é˜²æ­¢xss<ol><li>å‰åç«¯çº¦å®šjsonpè¯·æ±‚çš„jsçš„å›è°ƒå‡½æ•°å</li><li>æœåŠ¡å™¨ç«¯æŒ‡å®šè¿”å›çš„æ•°æ®æ ¼å¼ä¸ºjson</li><li>è¿›è¡ŒreferreréªŒè¯ ï¼ˆ<code>$_SERVER[&#39;HTTP_REFERRER&#39;] ä¸­çš„ host</code>ï¼‰</li></ol></li></ul><h2 id="CSRFè·¨åŸŸè¯·æ±‚ä¼ªé€ "><a href="#CSRFè·¨åŸŸè¯·æ±‚ä¼ªé€ " class="headerlink" title="CSRFè·¨åŸŸè¯·æ±‚ä¼ªé€ "></a>CSRFè·¨åŸŸè¯·æ±‚ä¼ªé€ </h2><p><code>Cross-site request forgery</code><br> åˆ©ç”¨ç”¨æˆ·çš„ç™»é™†çŠ¶æ€è¯±å¯¼è‡³æ¶æ„ç½‘ç«™ï¼Œä»¥åˆæ³•èº«ä»½å‘åŸå…ˆç½‘ç«™å‘é€æ¶æ„è¯·æ±‚</p><h3 id="é˜²å¾¡CSRF"><a href="#é˜²å¾¡CSRF" class="headerlink" title="é˜²å¾¡CSRF"></a>é˜²å¾¡CSRF</h3><ul><li>åŒæºæ£€æµ‹ï¼ŒéªŒè¯<code>http</code>è¯·æ±‚çš„æ¥æº<code>origin</code>å’Œ<code>referrer</code></li><li>è®¾ç½®<code>cookie</code>çš„<code>SameSite</code>å±æ€§ï¼Œä½¿<code>cookie</code>åªå¯è¢«ç¬¬ä¸€æ–¹ä½¿ç”¨</li><li>åˆæ³•é¡µé¢ä¸­åŠ å…¥<code>token</code>ï¼Œå¹¶åœ¨åˆæ³•é¡µé¢çš„åç»­è¯·æ±‚ï¼ˆaæ ‡ç­¾å’Œè¡¨å•ï¼‰ä¸­éƒ½åŠ ä¸Šè¿™ä¸ª<code>token</code>,æœåŠ¡å™¨éªŒè¯</li></ul><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h4 id="SQlæ³¨å…¥"><a href="#SQlæ³¨å…¥" class="headerlink" title="SQlæ³¨å…¥"></a>SQlæ³¨å…¥</h4><ol><li><p>é»‘å®¢æäº¤ç•¸å½¢æ•°æ®æ”¹å˜è¯­ä¹‰æäº¤sqlæŸ¥è¯¢å¾—åˆ°éæ³•æ•°æ®</p></li><li><p>é˜²å¾¡</p><ol><li>è¿‡æ»¤sqlä¿ç•™å­—</li><li>å‡å°‘æŠ›å‡ºä¸å¿…è¦çš„æ•°æ®åº“é”™è¯¯ä¿¡æ¯</li><li>ç¦æ­¢åŠ¨æ€æ‹¼æ¥sqlè¯­å¥è®¿é—®æ•°æ®åº“</li></ol></li></ol><h4 id="ç‚¹å‡»åŠ«æŒ"><a href="#ç‚¹å‡»åŠ«æŒ" class="headerlink" title="ç‚¹å‡»åŠ«æŒ"></a>ç‚¹å‡»åŠ«æŒ</h4><ol><li>ç‚¹å‡»é€æ˜iframe</li><li>ç›‘å¬é¼ æ ‡ç§»åŠ¨ä½ç½®</li><li>H5æ‹–æ‹½</li><li>é˜²å¾¡ï¼š<ol><li>æœåŠ¡ç«¯æ·»åŠ  <code>X-Frame-Options</code> å“åº”å¤´</li><li>jsåˆ¤æ–­é¡¶å±‚è§†å£æ˜¯å¦åŒæº</li><li>æ•æ„Ÿæ“ä½œå¤æ‚æ“ä½œï¼ˆéªŒè¯ç ï¼ŒäºŒæ¬¡ç¡®è®¤</li></ol></li></ol><h4 id="window-opener"><a href="#window-opener" class="headerlink" title="window.opener"></a><code>window.opener</code></h4><ol><li>ä¿®æ”¹<code>window.opener.location</code>å¯ä»¥æ”¹å†™æ¥æºç«™ç‚¹çš„åœ°å€</li><li>é˜²å¾¡ï¼š<ol><li>è®¾ç½®aæ ‡ç­¾çš„relå±æ€§<code>rel=noopener</code>,ç¦æ­¢æ–°é¡µé¢ä¼ é€’æºé¡µé¢åœ°å€</li><li>å¤–éƒ¨é“¾æ¥æ”¹ä¸ºç»ç”±æœåŠ¡å™¨è·³è½¬</li><li>ä½¿ç”¨window.openæ‰“å¼€å¤–é“¾</li></ol></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vueç»„ä»¶ä¹‹é—´é€šä¿¡æ–¹å¼</title>
    <link href="/2021/04/13/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/"/>
    <url>/2021/04/13/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1/</url>
    
    <content type="html"><![CDATA[<h3 id="refå’Œ-refs"><a href="#refå’Œ-refs" class="headerlink" title="refå’Œ$refs"></a><code>refå’Œ$refs</code></h3><ul><li><p><code>ref</code>æŒ‚è½½åœ¨æ™®é€šHTMLç»„ä»¶ä¸Šè®¿é—®å®ƒå¾—åˆ°DOM</p></li><li><p><code>ref</code>æŒ‚è½½åœ¨VUEç»„ä»¶ä¸Šè®¿é—®å®ƒå¾—åˆ°ç»„ä»¶å®ä¾‹</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">base-input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;usernameInput&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">base-input</span>&gt;</span></code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">this</span>.$refs.usernameInput</code></pre></div><h3 id="emitå’Œprop"><a href="#emitå’Œprop" class="headerlink" title="$emitå’Œprop"></a><code>$emit</code>å’Œ<code>prop</code></h3><ul><li>å­ç»„ä»¶<code>props</code>æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®</li><li>åŠ¨æ€æ•°æ®åŠ å†’å·<code>:</code></li><li>å­ç»„ä»¶å¯å¯¹æ”¶åˆ°çš„<code>props</code>è®¾ç½®æ ¡éªŒ</li><li>å­ç»„ä»¶å®šä¹‰<code>$emit</code>è‡ªå®šä¹‰æ–¹æ³•<br><code>this.$emit(&#39;childToParentMsg&#39;,this.childInfor,this.type)</code></li><li>çˆ¶ç»„ä»¶å°±å¯ä»¥<code>v-on</code>ç›‘å¬è¯¥æ–¹æ³•</li><li>è¯¥æ–¹æ³•ç»‘å®šçˆ¶ç»„ä»¶çš„<code>methods</code></li><li>è·å¾—æ–¹æ³•ä¸­ä¼ é€’çš„å‚æ•°</li></ul><h3 id="parentå’Œ-children"><a href="#parentå’Œ-children" class="headerlink" title="$parentå’Œ$children"></a><code>$parent</code>å’Œ<code>$children</code></h3><ul><li>$parentå¾—åˆ°  <strong>å¯¹è±¡</strong></li><li>$childrenå¾—åˆ°å­ç»„ä»¶å®ä¾‹çš„ <strong>æ•°ç»„</strong></li></ul><h3 id="provideå’Œinject"><a href="#provideå’Œinject" class="headerlink" title="provideå’Œinject"></a><code>provide</code>å’Œ<code>inject</code></h3><ul><li><p>çˆ¶ç»„ä»¶å‘<code>ä»»æ„æ·±åº¦</code>å­ç»„ä»¶ä¼ å€¼</p></li><li><p>çˆ¶ç»„ä»¶ä¸­é€šè¿‡<code>provide</code>æ¥æä¾›å˜é‡</p></li><li><p>å­ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>æ¥æ³¨å…¥å˜é‡</p></li><li><p>ä¸è®ºå­ç»„ä»¶æœ‰å¤šæ·±ï¼Œåªè¦è°ƒç”¨äº†<code>inject</code>é‚£ä¹ˆå°±å¯ä»¥æ³¨å…¥<code>provider</code>ä¸­çš„æ•°æ®ã€‚åªè¦åœ¨çˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå­ç»„ä»¶éƒ½å¯ä»¥è°ƒç”¨ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">Vue.component(<span class="hljs-string">&#x27;child&#x27;</span>,&#123;    <span class="hljs-comment">// </span>    inject:[<span class="hljs-string">&#x27;for&#x27;</span>],      <span class="xml">&lt;------------------å°†forå˜é‡æ’å…¥æœ¬å®ä¾‹</span><span class="xml">    data()&#123;</span><span class="xml">        return &#123;</span><span class="xml">            mymessage:this.for</span><span class="xml">        &#125;</span><span class="xml">    &#125;</span><span class="xml">&#125;)</span><span class="xml">Vue.component(&#x27;parent&#x27;,&#123;</span>    provide:&#123;    &lt;---------------------------æä¾›äº†forå˜é‡        for:&#x27;test&#x27;    &#125;&#125;)</code></pre></div></li></ul><h3 id="attrs-amp-amp-listeners"><a href="#attrs-amp-amp-listeners" class="headerlink" title="$attrs &amp;&amp; $listeners"></a><code>$attrs</code> &amp;&amp; <code>$listeners</code></h3><ul><li><p><code>$attrs</code>åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º prop è¢«è¯†åˆ« (ä¸”è·å–) çš„ attribute ç»‘å®š (class å’Œ style é™¤å¤–),é€šè¿‡<code>v-bind=&quot;$attrs&quot;</code> ä¼ å…¥å†…éƒ¨ç»„ä»¶</p></li><li></li><li><p><code>$listeners</code>åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„ (ä¸å« .native ä¿®é¥°å™¨çš„) v-on äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥é€šè¿‡ v-on=â€$listenersâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// A-&gt;B-&gt;C</span>  <span class="hljs-comment">// äºŒçº§å­ç»„ä»¶C</span>  Vue.component(<span class="hljs-string">&#x27;C&#x27;</span>,&#123;          template:<span class="hljs-string">`</span><span class="hljs-string">              &lt;div&gt;</span><span class="hljs-string">                  &lt;input type=&quot;text&quot; v-model=&quot;$attrs.messagec&quot; @input=&quot;passCData($attrs.messagec)&quot;&gt; &lt;/div&gt;</span><span class="hljs-string">          `</span>,          methods:&#123;              <span class="hljs-function"><span class="hljs-title">passCData</span>(<span class="hljs-params">val</span>)</span>&#123;                  <span class="hljs-comment">//è§¦å‘çˆ¶ç»„ä»¶Aä¸­çš„äº‹ä»¶</span>                  <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;getCData&#x27;</span>,val)              &#125;          &#125;      &#125;)  <span class="hljs-comment">// ä¸€çº§å­ç»„ä»¶B</span>  Vue.component(<span class="hljs-string">&#x27;B&#x27;</span>,&#123;      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;          <span class="hljs-keyword">return</span> &#123;              mymessage:<span class="hljs-built_in">this</span>.message          &#125;      &#125;,      template:<span class="hljs-string">`</span><span class="hljs-string">          &lt;div&gt;</span><span class="hljs-string">              &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @input=&quot;passData(mymessage)&quot;&gt; </span><span class="hljs-string">              &lt;C v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/C&gt;</span><span class="hljs-string">          &lt;/div&gt;</span><span class="hljs-string">      `</span>,      props:[<span class="hljs-string">&#x27;message&#x27;</span>],<span class="hljs-comment">//propsä¸­å–èµ°äº†Aä¼ ä¸‹æ¥çš„ä¸€ä¸ªattr</span>      <span class="hljs-comment">// å¦å¤–ä¸€ä¸ªä½¿ç”¨:bind=&quot;$attrs&quot;ç»§ç»­å‘ä¸‹ä¼ é€’ç»™C</span>      methods:&#123;          <span class="hljs-function"><span class="hljs-title">passData</span>(<span class="hljs-params">val</span>)</span>&#123;              <span class="hljs-comment">//è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„äº‹ä»¶</span>              <span class="hljs-built_in">this</span>.$emit(<span class="hljs-string">&#x27;getChildData&#x27;</span>,val)          &#125;      &#125;  &#125;)  <span class="hljs-comment">// çˆ¶ç»„ä»¶A</span>  Vue.component(<span class="hljs-string">&#x27;A&#x27;</span>,&#123;      template:<span class="hljs-string">`</span><span class="hljs-string">          &lt;div&gt;</span><span class="hljs-string">              &lt;p&gt;this is parent compoent!&lt;/p&gt;</span><span class="hljs-string">              &lt;B :messagec=&quot;messagec&quot; :message=&quot;message&quot; v-on:getCData=&quot;getCData&quot; v-on:getChildData=&quot;getChildData(message)&quot;&gt;&lt;/B&gt;</span><span class="hljs-string">          &lt;/div&gt;</span><span class="hljs-string">      `</span>,      <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span>&#123;          <span class="hljs-keyword">return</span> &#123;              message:<span class="hljs-string">&#x27;hello&#x27;</span>,              messagec:<span class="hljs-string">&#x27;hello c&#x27;</span> <span class="hljs-comment">//ä¼ é€’ç»™cç»„ä»¶çš„æ•°æ®</span>          &#125;      &#125;,      methods:&#123;          <span class="hljs-function"><span class="hljs-title">getChildData</span>(<span class="hljs-params">val</span>)</span>&#123;              <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;è¿™æ˜¯æ¥è‡ªBç»„ä»¶çš„æ•°æ®&#x27;</span>)          &#125;,          <span class="hljs-comment">//æ‰§è¡ŒCå­ç»„ä»¶è§¦å‘çš„äº‹ä»¶</span>          <span class="hljs-function"><span class="hljs-title">getCData</span>(<span class="hljs-params">val</span>)</span>&#123;              <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;è¿™æ˜¯æ¥è‡ªCç»„ä»¶çš„æ•°æ®ï¼š&quot;</span>+val)          &#125;      &#125;  &#125;)</code></pre></div></li></ul><h3 id="EventBus"><a href="#EventBus" class="headerlink" title="EventBus"></a>EventBus</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// eventBus.js</span><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">const</span> EventBus  = <span class="hljs-keyword">new</span> Vue()<span class="hljs-comment">// componentA</span><span class="hljs-keyword">import</span> EventBus <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;eventBus.js&#x27;</span>methods:&#123;    <span class="hljs-function"><span class="hljs-title">someFunc</span>(<span class="hljs-params"></span>)</span>&#123;        EventBus.$emit(<span class="hljs-string">&#x27;funcName&#x27;</span>,&#123;            <span class="hljs-comment">//props</span>        &#125;)    &#125;&#125;<span class="hljs-comment">// componentsB</span><span class="hljs-function"><span class="hljs-title">mounted</span>(<span class="hljs-params"></span>)</span>&#123;    EventBus.$on(<span class="hljs-string">&#x27;funcName&#x27;</span>,<span class="hljs-function"><span class="hljs-params">param</span> =&gt;</span> &#123;        <span class="hljs-comment">//paramså–å¾—ä¼ è¿‡æ¥çš„å‚æ•°</span>    &#125;)&#125;</code></pre></div><h3 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h3>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é—­åŒ…</title>
    <link href="/2021/04/13/js%E9%97%AD%E5%8C%85/"/>
    <url>/2021/04/13/js%E9%97%AD%E5%8C%85/</url>
    
    <content type="html"><![CDATA[<h2 id="é—­åŒ…çš„å®šä¹‰"><a href="#é—­åŒ…çš„å®šä¹‰" class="headerlink" title="é—­åŒ…çš„å®šä¹‰"></a>é—­åŒ…çš„å®šä¹‰</h2><ul><li><p>å‡½æ•°ä¸å…¶è¯æ³•ç¯å¢ƒå…±åŒæ„æˆ <em>é—­åŒ…ï¼ˆclosureï¼‰</em> ã€‚</p></li><li><p>è¯æ³•ç¯å¢ƒ = ä»£ç å†…å˜é‡æ ‡è¯†ç¬¦ä¸å˜é‡å€¼å’Œå‡½æ•°å€¼ä¹‹é—´çš„å…³è”å…³ç³»ï¼ˆç¯å¢ƒè®°å½•ï¼‰+ å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å¼•ç”¨</p></li><li><p>jsçš„è¯æ³•ä½œç”¨åŸŸä¸ºé™æ€ä½œç”¨åŸŸï¼Œåœ¨ä¹¦å†™å®Œæˆåå‡½æ•°è¯æ³•ç¯å¢ƒå°±è¢«ç¡®å®šï¼Œä¸è°ƒç”¨ä½ç½®æ— å…³</p></li><li><p>é—­åŒ…å‡½æ•°ä¼šä¿æŒå¯¹å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å¼•ç”¨ï¼Œä½¿å¤–éƒ¨å˜é‡å¸¸é©»å†…å­˜ä¸å¯å›æ”¶</p></li></ul><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addCounter</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ‰§è¡Œç»“æŸåä¸ä¼šè¢«æ¸…é™¤</span>  <span class="hljs-keyword">const</span> myFunction = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    counter = counter + <span class="hljs-number">1</span>; <span class="hljs-comment">// myFunctionå‡½æ•°å¯ä»¥è¯»å–addå‡½æ•°å†…éƒ¨çš„å˜é‡</span>    <span class="hljs-keyword">return</span> counter;  &#125;;  <span class="hljs-keyword">return</span> myFunction;&#125;<span class="hljs-keyword">const</span> increment = addCounter();<span class="hljs-keyword">const</span> c1 = increment();<span class="hljs-keyword">const</span> c2 = increment();<span class="hljs-keyword">const</span> c3 = increment();<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;increment:&quot;</span>, c1, c2, c3);<span class="hljs-comment">// increment: 1 2 3</span></code></pre></div><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(i)  &#125;, <span class="hljs-number">1000</span> * i)&#125;<span class="hljs-comment">// 6 6 6 6 6 6</span><span class="hljs-comment">// åˆ›å»ºçš„6ä¸ªsetTimeouté—­åŒ…å…±äº«ä¸€ä¸ªè¯æ³•ä½œç”¨åŸŸ</span>**é—­åŒ…åªèƒ½å–å¾—åŒ…å«å‡½æ•°ä¸­ä»»ä½•å˜é‡èµ‹å€¼æœ€åä¸€ä¸ªå€¼** <span class="hljs-comment">// 6</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  (<span class="hljs-function">(<span class="hljs-params">j</span>) =&gt;</span> &#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-built_in">console</span>.log(j)    &#125;, <span class="hljs-number">1000</span> * j)  &#125;)(i)&#125;<span class="hljs-comment">// 1 2 3 4 5 6</span><span class="hljs-comment">// 6ä¸ªsetTimeouté—­åŒ…æœ‰è‡ªå·±ç‹¬ç«‹çš„è¯æ³•ç¯å¢ƒ</span><span class="hljs-comment">// é—­åŒ…è¯»å–åˆ°ä¸åŒçš„iå€¼</span><span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span> ;i&lt;<span class="hljs-number">7</span>;i++)&#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-params">j</span>=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(j);  &#125;,<span class="hljs-number">1000</span>*i,i)&#125;<span class="hljs-comment">// setTimeout å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°å½“å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fn</span>(<span class="hljs-params">num2</span>) </span>&#123;  <span class="hljs-keyword">var</span> num = <span class="hljs-number">15</span>;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abc</span>(<span class="hljs-params"></span>) </span>&#123; <span class="hljs-comment">// å‡½æ•°ä½œä¸ºè¿”å›å€¼</span>    num++;    <span class="hljs-keyword">return</span>(num + num2);  &#125;  <span class="hljs-keyword">return</span> abc;&#125;<span class="hljs-keyword">var</span> aa = fn(<span class="hljs-number">20</span>); <span class="hljs-comment">//  æ²¡æœ‰å¼•ç”¨ï¼Ÿï¼Ÿ</span>aa(); <span class="hljs-comment">//16+20</span>aa(); <span class="hljs-comment">//17+20</span>fn(<span class="hljs-number">20</span>)(); <span class="hljs-comment">//36</span>fn(<span class="hljs-number">20</span>)(); <span class="hljs-comment">//36</span></code></pre></div><h2 id="ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸä¸ä½œç”¨åŸŸé“¾</h2><h3 id="ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥èµ·ä½œç”¨çš„èŒƒå›´"><a href="#ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥èµ·ä½œç”¨çš„èŒƒå›´" class="headerlink" title="ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥èµ·ä½œç”¨çš„èŒƒå›´"></a>ä½œç”¨åŸŸï¼šå˜é‡å¯ä»¥èµ·ä½œç”¨çš„èŒƒå›´</h3><h4 id="å…¨å±€ä½œç”¨åŸŸ"><a href="#å…¨å±€ä½œç”¨åŸŸ" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸ"></a>å…¨å±€ä½œç”¨åŸŸ</h4><div class="hljs code-wrapper"><pre><code>å…¨å±€å˜é‡å¯¹åº”çš„ä½œç”¨åŸŸ`å…¨å±€å˜é‡`ï¼šåœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®åˆ°çš„å˜é‡ï¼Œå…¨å±€å˜é‡å…³é—­ç½‘é¡µæˆ–æµè§ˆå™¨æ‰ä¼šé”€æ¯(ç”Ÿå‘½å‘¨æœŸ)</code></pre></div><h4 id="å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰"><a href="#å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰" class="headerlink" title="å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰"></a>å±€éƒ¨ä½œç”¨åŸŸï¼ˆå‡½æ•°ä½œç”¨åŸŸï¼‰</h4><div class="hljs code-wrapper"><pre><code>å‡½æ•°å†…éƒ¨å°±æ˜¯ä¸€ä¸ªå±€éƒ¨ä½œç”¨åŸŸ`å±€éƒ¨å˜é‡`ï¼šåªåœ¨å›ºå®šçš„ä»£ç ç‰‡æ®µå†…å¯è®¿é—®åˆ°çš„å˜é‡ï¼Œå˜é‡é€€å‡ºä½œç”¨åŸŸä¹‹åä¼šé”€æ¯</code></pre></div><h4 id="å—çº§ä½œç”¨åŸŸï¼ˆes5ï¼‰"><a href="#å—çº§ä½œç”¨åŸŸï¼ˆes5ï¼‰" class="headerlink" title="å—çº§ä½œç”¨åŸŸï¼ˆes5ï¼‰"></a>å—çº§ä½œç”¨åŸŸï¼ˆes5ï¼‰</h4><div class="hljs code-wrapper"><pre><code>ä»»ä½•ä¸€å¯¹èŠ±æ‹¬å·`&#123;&#125;`ä¸­çš„è¯­å¥é›†éƒ½å±äºä¸€ä¸ªå—ï¼Œåœ¨è¿™ä¹‹ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡åœ¨ä»£ç å—å¤–éƒ½æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º `å—çº§ä½œç”¨åŸŸ`</code></pre></div><h4 id="è¯æ³•ä½œç”¨åŸŸ"><a href="#è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="è¯æ³•ä½œç”¨åŸŸ"></a>è¯æ³•ä½œç”¨åŸŸ</h4><div class="hljs code-wrapper"><pre><code>å˜é‡çš„ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰æ—¶å†³å®šè€Œä¸æ˜¯æ‰§è¡Œæ—¶å†³å®šï¼Œä¹Ÿå°±æ˜¯è¯´è¯æ³•ä½œç”¨åŸŸå–å†³äºæºç ï¼Œé€šè¿‡é™æ€åˆ†æå°±èƒ½ç¡®å®š(ä¹¦å†™æ—¶å°±å·²ç»ç¡®å®š)ï¼Œå› æ­¤è¯æ³•ä½œç”¨åŸŸä¹Ÿå«åšé™æ€ä½œç”¨åŸŸ</code></pre></div><p><em>åœ¨ js ä¸­è¯æ³•ä½œç”¨åŸŸè§„åˆ™:</em></p><ul><li>å‡½æ•°å…è®¸è®¿é—®å‡½æ•°å¤–çš„æ•°æ®.</li><li>æ•´ä¸ªä»£ç ç»“æ„ä¸­åªæœ‰å‡½æ•°å¯ä»¥é™å®šä½œç”¨åŸŸ</li><li>ä½œç”¨åŸŸè§„åˆ™é¦–å…ˆä½¿ç”¨æå‡è§„åˆ™åˆ†æ</li><li>å¦‚æœå½“å‰ä½œç”¨è§„åˆ™ä¸­æœ‰åå­—äº†, å°±ä¸è€ƒè™‘å¤–é¢çš„åå­—</li></ul><h3 id="è‡ªç”±å˜é‡"><a href="#è‡ªç”±å˜é‡" class="headerlink" title="è‡ªç”±å˜é‡"></a>è‡ªç”±å˜é‡</h3><ul><li><p>å½“å‰ä½œç”¨åŸŸæ²¡æœ‰å®šä¹‰çš„å˜é‡ï¼Œè¿™æˆä¸º<code>è‡ªç”±å˜é‡</code>ã€‚</p></li><li><p>è‡ªç”±å˜é‡å‘çˆ¶çº§ä½œç”¨åŸŸä¸­å¯»æ‰¾</p></li><li><p><strong>è‡ªç”±å˜é‡ä»ä½œç”¨åŸŸé“¾ä¸­å»å¯»æ‰¾ï¼Œä¾æ®çš„æ˜¯å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾ï¼Œè€Œä¸æ˜¯å‡½æ•°æ‰§è¡Œæ—¶çš„ä½œç”¨åŸŸ</strong></p></li></ul><h3 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h3><p>åªæœ‰å‡½æ•°å¯ä»¥åˆ¶é€ ä½œç”¨åŸŸç»“æ„ï¼Œ é‚£ä¹ˆåªè¦æ˜¯ä»£ç ï¼Œå°±è‡³å°‘æœ‰ä¸€ä¸ªä½œç”¨åŸŸ, å³å…¨å±€ä½œç”¨åŸŸã€‚å‡¡æ˜¯ä»£ç ä¸­æœ‰å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ„æˆå¦ä¸€ä¸ªä½œç”¨åŸŸã€‚å¦‚æœå‡½æ•°ä¸­è¿˜æœ‰å‡½æ•°ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸­å°±åˆå¯ä»¥è¯ç”Ÿä¸€ä¸ªä½œç”¨åŸŸã€‚</p><p>å°†è¿™æ ·çš„æ‰€æœ‰çš„ä½œç”¨åŸŸåˆ—å‡ºæ¥ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªç»“æ„: å‡½æ•°å†…æŒ‡å‘å‡½æ•°å¤–çš„é“¾å¼ç»“æ„ã€‚å°±ç§°ä½œä½œç”¨åŸŸé“¾ã€‚</p><h2 id="é—­åŒ…çš„ç”¨é€”"><a href="#é—­åŒ…çš„ç”¨é€”" class="headerlink" title="é—­åŒ…çš„ç”¨é€”"></a>é—­åŒ…çš„ç”¨é€”</h2><ul><li>å®ç°æ•°æ®(å˜é‡å’Œæ–¹æ³•)ç§æœ‰åŒ–</li><li>å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆå‡½æ•°å¼ç¼–ç¨‹</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsæ¨¡å—åŒ–</title>
    <link href="/2021/04/13/js%E6%A8%A1%E5%9D%97%E5%8C%96/"/>
    <url>/2021/04/13/js%E6%A8%A1%E5%9D%97%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æ¨¡å—åŒ–çš„æ¼”è¿›è¿‡ç¨‹</p></blockquote><ol><li>æ–‡ä»¶åˆ’åˆ†</li><li>å‘½åç©ºé—´ (å°†æ¯ä¸ªæ¨¡å—æš´éœ²åœ¨å…¨å±€å¯¹è±¡</li><li>IIFE ç«‹å³æ‰§è¡Œå‡½æ•° </li></ol><h2 id="æ¨¡å—åŒ–å¼€å‘çš„æ€æƒ³"><a href="#æ¨¡å—åŒ–å¼€å‘çš„æ€æƒ³" class="headerlink" title="æ¨¡å—åŒ–å¼€å‘çš„æ€æƒ³"></a>æ¨¡å—åŒ–å¼€å‘çš„æ€æƒ³</h2><p>æ¨¡å—åŒ–çš„å¼€å‘æ–¹å¼å¯ä»¥æé«˜ä»£ç å¤ç”¨ç‡ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç çš„ç®¡ç†ã€‚é€šå¸¸ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªå‘å¤–æš´éœ²ç‰¹å®šçš„å˜é‡å’Œå‡½æ•°ã€‚</p><h3 id="æ¨¡å—åŒ–çš„å¥½å¤„"><a href="#æ¨¡å—åŒ–çš„å¥½å¤„" class="headerlink" title="æ¨¡å—åŒ–çš„å¥½å¤„"></a>æ¨¡å—åŒ–çš„å¥½å¤„</h3><ul><li>å‘½åå†²çª</li><li>æ–‡ä»¶ä¾èµ–</li><li>ä»£ç å¤ç”¨</li><li>ä¸æ±¡æŸ“å…¨å±€ç©ºé—´</li></ul><h3 id="CommonJS-Node-js"><a href="#CommonJS-Node-js" class="headerlink" title="CommonJS (Node.js)"></a>CommonJS (Node.js)</h3><ul><li><p>è¿è¡Œåœ¨æœåŠ¡ç«¯`</p></li><li><p>ä»£ç åŒæ­¥åŠ è½½</p></li><li><p>ä»£ç å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œä½†æ˜¯è¿è¡Œç»“æœä¼šè¢«ç¼“å­˜</p></li><li><p><code>require(&#39;xxx&#39;)</code>åŠ è½½æ¨¡å—</p></li><li><p><code>module.exports=&#123;&#125;</code>(å…¨å±€å˜é‡æˆ–æ–¹æ³•)æˆ–<code>exports</code>å®šä¹‰å¯¹å¤–çš„æ¥å£</p></li></ul><h3 id="AMD-require-js"><a href="#AMD-require-js" class="headerlink" title="AMD (require.js)"></a>AMD (require.js)</h3><ul><li><code>Async Module Definition</code></li><li>ä»£ç å¼‚æ­¥åŠ è½½</li><li>ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å—</li><li>æ‰§è¡Œé¡ºåºä¸ä¸€å®šå’Œä»£ç ä¸­é¡ºåºç›¸åŒï¼Œè€Œæ˜¯è°å…ˆä¸‹è½½å®Œæ‰§è¡Œè°  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// AMD</span>define([<span class="hljs-string">&quot;./a&quot;</span>, <span class="hljs-string">&quot;./b&quot;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) </span>&#123;    <span class="hljs-comment">// ...</span>    a.doSomething();    <span class="hljs-comment">// ...</span>    b.doSomething();    <span class="hljs-comment">// ...å¯èƒ½bæ¯”aå…ˆdoäº†</span>&#125;);</code></pre></div></li></ul><h3 id="CMD-sea-js"><a href="#CMD-sea-js" class="headerlink" title="CMD (sea.js)"></a>CMD (sea.js)</h3><ul><li><code>Common Module Definition</code></li><li> å®šä¹‰å’ŒåŠ è½½ä¸AMDç›¸åŒ</li><li> ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™</li><li>ä¾èµ–å…¨éƒ¨åŠ è½½å®Œæ‰æŒ‰é¡ºåºæ‰§è¡Œ  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// CMD</span>define(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-built_in">require</span>, <span class="hljs-built_in">exports</span>, <span class="hljs-built_in">module</span></span>) </span>&#123;    <span class="hljs-keyword">var</span> a = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./a&quot;</span>);    a.doSomething();    <span class="hljs-comment">//...</span>    <span class="hljs-keyword">var</span> b = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;./b&quot;</span>);     b.doSomething();<span class="hljs-comment">// ...</span>&#125;);</code></pre></div></li></ul><h3 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h3><ul><li> <code>Universal Module Definition</code></li><li> å†™æ³•æ˜¯ä¸€ä¸ªè‡ªè¿è¡Œå‡½æ•°</li><li> å…¼å®¹CMD/AMD/å‘½åç©ºé—´</li></ul><h3 id="ES6-MODULE"><a href="#ES6-MODULE" class="headerlink" title="ES6 MODULE"></a>ES6 MODULE</h3><ul><li><p>ï¼ES6æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œ<code>import</code>æŒ‡å‘çš„æ˜¯æ¨¡å—çš„çš„åªè¯»å¼•ç”¨ï¼ˆ<strong>åŠ¨æ€å¼•ç”¨</strong>ï¼‰ï¼Œ<code>export</code>åªæ˜¯æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç </p></li><li><p>ç¼–è¯‘æ—¶åŠ è½½,ç”¨åˆ°æ‰æ‰§è¡Œ</p></li><li><p><code>export</code>å¯¼å‡ºæ¨¡å—,æä¾›<code>export default</code>åˆ¶å®šé»˜è®¤è¾“å‡º</p></li><li><p><code>import</code>å¼•å…¥</p></li><li><p><code>import</code>å’Œ<code>export</code>å‘½ä»¤åªèƒ½å†™åœ¨ä»£ç é¡¶å±‚</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// modules.js</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>) </span>&#123;    <span class="hljs-keyword">return</span> x * y;&#125;<span class="hljs-keyword">export</span> &#123;add <span class="hljs-keyword">as</span> <span class="hljs-keyword">default</span>&#125;;<span class="hljs-comment">// ç­‰åŒäº</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> add;<span class="hljs-comment">// app.js</span><span class="hljs-keyword">import</span> &#123; <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> foo &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;modules&#x27;</span>;<span class="hljs-comment">// ç­‰åŒäº</span><span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;modules&#x27;</span>;</code></pre></div></li></ul><h3 id="ES6-MODULEå’ŒCommonJSçš„åŒºåˆ«"><a href="#ES6-MODULEå’ŒCommonJSçš„åŒºåˆ«" class="headerlink" title="ES6 MODULEå’ŒCommonJSçš„åŒºåˆ«"></a>ES6 MODULEå’ŒCommonJSçš„åŒºåˆ«</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// CommonJSæ¨¡å—</span><span class="hljs-comment">// è¿è¡Œæ—¶åŠ è½½</span><span class="hljs-keyword">let</span> &#123; stat, exists, readFile &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<span class="hljs-comment">// ç­‰åŒäº</span><span class="hljs-keyword">let</span> _fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<span class="hljs-keyword">let</span> stat = _fs.stat;<span class="hljs-keyword">let</span> exists = _fs.exists;<span class="hljs-keyword">let</span> readfile = _fs.readfile;<span class="hljs-comment">//ä¸Šé¢ä»£ç çš„å®è´¨æ˜¯æ•´ä½“åŠ è½½fsæ¨¡å—ï¼ˆå³åŠ è½½fsçš„æ‰€æœ‰æ–¹æ³•ï¼‰ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼ˆ_fsï¼‰ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å– 3 ä¸ªæ–¹æ³•ã€‚è¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ï¼Œå› ä¸ºåªæœ‰è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œå¯¼è‡´å®Œå…¨æ²¡åŠæ³•åœ¨ç¼–è¯‘æ—¶åšâ€œé™æ€ä¼˜åŒ–â€</span>modules.exports xxx<span class="hljs-comment">//CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œè¾“å‡ºåæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼</span><span class="hljs-comment">// ES6</span><span class="hljs-comment">// ç¼–è¯‘æ—¶åŠ è½½</span><span class="hljs-keyword">import</span> &#123; stat, exists, readFile &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;<span class="hljs-comment">//ç¼–è¯‘æ—¶å°±å®Œæˆæ¨¡å—åŠ è½½ï¼Œï¼ˆç¡®å®šäº†æŒ‡é’ˆ</span><span class="hljs-comment">//å½“ç„¶ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†æ²¡æ³•å¼•ç”¨ ES6 æ¨¡å—æœ¬èº«ï¼Œå› ä¸ºå®ƒä¸æ˜¯å¯¹è±¡</span><span class="hljs-built_in">exports</span> <span class="hljs-keyword">default</span> xxx<span class="hljs-comment">// ES6 MODULESè¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œè¿è¡Œæ—¶æ‰åˆ°æŒ‡å®šæ¨¡å—ä¸­å–å€¼</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>es6æ–°ç‰¹æ€§</title>
    <link href="/2021/04/13/es6%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <url>/2021/04/13/es6%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<h2 id="let-const"><a href="#let-const" class="headerlink" title="let / const"></a>let / const</h2><ul><li>éƒ½ç”¨äºå£°æ˜å˜é‡</li><li>ä¸å­˜åœ¨å˜é‡æå‡ï¼Œæš‚æ—¶æ€§æ­»åŒº</li><li>ä¸èƒ½é‡å¤å£°æ˜</li><li>å¿«çº§ä½œç”¨åŸŸ</li></ul><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><ul><li>å¯ä»¥é‡æ–°èµ‹å€¼<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3></li><li>å£°æ˜æ—¶éœ€èµ‹å€¼</li><li>åªè¯»ä¸å¯æ”¹å˜ï¼ˆå¯¹äºå¤æ‚å˜é‡ï¼Œå¯ä»¥ä¿®æ”¹å˜é‡å†…å®¹ï¼Œå˜é‡å†…å­˜åœ°å€æœªæ”¹å˜ï¼‰</li></ul><h2 id="å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡çš„è§£æ„èµ‹å€¼"></a>å˜é‡çš„è§£æ„èµ‹å€¼</h2><ul><li>åªæœ‰å¯éå†ï¼ˆå…·å¤‡éå†å™¨<code>[Symbol.Iterator]</code>ï¼‰çš„æ•°æ®ç»“æ„æ‰èƒ½è§£æ„èµ‹å€¼<h3 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h3></li><li>éå†æ•°æ®</li><li>äº¤æ¢å˜é‡</li><li>æå–å¯¹è±¡ä¸­çš„æ•°æ®</li><li>å‡½æ•°å‚æ•°é»˜è®¤å€¼</li><li>æŒ‡å®šæ¨¡å—</li></ul><h2 id="å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œå‡½æ•°ï¼Œæ•°ç»„ï¼Œå¯¹è±¡æ‰©å±•"><a href="#å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œå‡½æ•°ï¼Œæ•°ç»„ï¼Œå¯¹è±¡æ‰©å±•" class="headerlink" title="å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œå‡½æ•°ï¼Œæ•°ç»„ï¼Œå¯¹è±¡æ‰©å±•"></a>å­—ç¬¦ä¸²ï¼Œæ•°å€¼ï¼Œå‡½æ•°ï¼Œæ•°ç»„ï¼Œå¯¹è±¡æ‰©å±•</h2><p>ä¾‹å¦‚ï¼š</p><ul><li>æ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼ˆå˜é‡æ’å€¼ï¼Œå¤šè¡Œå­—ç¬¦ä¸²</li><li>å®‰å…¨æ•´æ•°<code>Number.isSafeInteger</code>,<code>Number.MAX_SAFE_INTEGER</code>,<code>Number.MAX_SAFE_INTEGER</code><blockquote><p>+-2^53 +-10^16</p></blockquote></li><li>æŒ‡æ•°è¿ç®—<code>**</code></li><li>å¤§æ•°<code>BigInt</code>ï¼Œåè¦åŠ ä¸Šå­—æ¯n<code>123n</code>ï¼Œæ²¡æœ‰ä½æ•°é™åˆ¶<blockquote><p>æ™®é€šnumberç±»å‹åªèƒ½ä¿ç•™53ä¸ªäºŒè¿›åˆ¶ä½/16ä¸ª10è¿›åˆ¶ä½</p></blockquote></li><li>ç®­å¤´å‡½æ•°<ul><li>ç®­å¤´å‡½æ•°çš„ this æ˜¯è¯­æ³•ä¸Šçš„ï¼Œé™æ€ç»‘å®šä¹¦å†™æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œä¸ä¼šæ”¹å˜</li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰<code>prototype</code> â€”&gt; <strong>ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¸èƒ½ new</strong></li><li>ç®­å¤´å‡½æ•°æ²¡æœ‰<code>arguments</code>å±æ€§</li><li>ä¸èƒ½ç”¨ä½œ<code>generator</code>å‡½æ•°</li></ul></li></ul><ul><li><p>å‡½æ•°å‚æ•°é»˜è®¤å€¼</p></li><li><p><code>...rest</code></p></li><li><p>æ‰©å±•è¿ç®—ç¬¦<code>...</code></p></li><li><p>ä¸€å †æ•°ç»„æ–¹æ³•</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.from()<span class="hljs-built_in">Array</span>.of()includes()copyWithin()find()/findIndex()keys(),values(),entries()</code></pre></div></li><li><p>å¯¹è±¡æ–¹æ³•</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Object</span>.is()<span class="hljs-built_in">Object</span>.assign()getPrototypeOf()/setPrototypeOf().__proto__ =</code></pre></div><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>ç‹¬ä¸€æ— äºŒçš„å€¼,<code>Symbol()</code>å£°æ˜</p><h2 id="Set-WeakSet"><a href="#Set-WeakSet" class="headerlink" title="Set/WeakSet"></a>Set/WeakSet</h2></li><li><p>Setç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">sizeadd()<span class="hljs-keyword">delete</span>()has()clear()</code></pre></div></li><li><p>WeakSetçš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œã€å¼±å¼•ç”¨ã€‘ï¼Œã€ä¸å¯éå†ã€‘</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">add()<span class="hljs-keyword">delete</span>()has()</code></pre></div></li></ul><h2 id="Map-WeakMap"><a href="#Map-WeakMap" class="headerlink" title="Map/WeakMap"></a>Map/WeakMap</h2><ul><li>Objectçš„é”®ä¼ ç»Ÿä¸Šåªèƒ½ä½¿ç”¨å­—ç¬¦ä¸²ï¼ŒMapæ— æ­¤é™åˆ¶<div class="hljs code-wrapper"><pre><code class="hljs javascript">sizeset(key,value) <span class="hljs-comment">// è¿”å›æ•´ä¸ª Map ç»“æ„</span>get() <span class="hljs-comment">// æ‰¾ä¸åˆ°è¯¥ key è¿”å› undefined</span>has()<span class="hljs-keyword">delete</span>() <span class="hljs-comment">// åˆ é™¤å¤±è´¥è¿”å› false</span>clear() <span class="hljs-comment">// æ— è¿”å›å€¼</span></code></pre></div></li><li>WeakMapåªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆé™¤äº†nullï¼‰ï¼Œã€é”®åå¼±å¼•ç”¨ã€‘<div class="hljs code-wrapper"><pre><code class="hljs javascript">set()get()has()<span class="hljs-keyword">delete</span>()</code></pre></div></li></ul><h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>æ‹¦æˆªå™¨/ä»£ç† <code>const _proxy1 = new Proxy(target,handler)</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¸¸ç”¨handlers</span>handler.getPrototypeOf()<span class="hljs-comment">// Object.getPrototypeOf æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.setPrototypeOf()<span class="hljs-comment">// Object.setPrototypeOf æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.getOwnPropertyDescriptor()<span class="hljs-comment">// Object.getOwnPropertyDescriptor æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.defineProperty()<span class="hljs-comment">// Object.defineProperty æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.has()<span class="hljs-comment">// in æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span>handler.get()<span class="hljs-comment">// å±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.set()<span class="hljs-comment">// å±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.deleteProperty()<span class="hljs-comment">// delete æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span>handler.ownKeys()<span class="hljs-comment">// Object.getOwnPropertyNames æ–¹æ³•å’Œ Object.getOwnPropertySymbols æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.apply()<span class="hljs-comment">// å‡½æ•°è°ƒç”¨æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.construct()<span class="hljs-comment">// new æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span></code></pre></div><h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h2><p>æ“ä½œå¯¹è±¡çš„API</p><ul><li>å°†å¯¹è±¡æ“ä½œçš„è¿”å›æ›´åˆç†åŒ–ï¼ˆæŠ¥é”™-&gt;false</li><li>å°†å¯¹è±¡æ“ä½œå‡½æ•°åŒ–<blockquote><p>æŸäº›Objectæ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚name in objå’Œdelete obj[name]ï¼Œè€ŒReflect.has(obj, name)å’ŒReflect.deleteProperty(obj, name)è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸ºã€‚</p></blockquote></li><li>ä¸Proxyä¸­æ–¹æ³•å‡å¯¹åº”<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2></li><li>å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…å›è°ƒåµŒå¥—</li><li>çŠ¶æ€ä¸å¯é€†</li><li>ä¸­é€”ä¸å¯åœæ­¢</li><li>éœ€è¦æ•è·promiseå†…é”™è¯¯</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>((resolve,reject))<span class="hljs-built_in">Promise</span>.prototype.then(onFulfilled,onRejected)<span class="hljs-built_in">Promise</span>.prototype.catch()<span class="hljs-comment">// promiseä¸­çš„é”™è¯¯ä¼šä¸€ç›´å†’æ³¡åˆ°æœ€åï¼Œæ²¡æœ‰æ•è·åˆ™æŠ¥é”™</span><span class="hljs-built_in">Promise</span>.prototype.finally()<span class="hljs-built_in">Promise</span>.all() <span class="hljs-comment">// å…¨éƒ¨fulfilledæˆ–è€…æœ‰è°rejected</span><span class="hljs-built_in">Promise</span>.allSettled() <span class="hljs-comment">// å…¨éƒ¨å¾—åˆ°ä¸ç®¡ä»€ä¹ˆçŠ¶æ€</span><span class="hljs-built_in">Promise</span>.race() <span class="hljs-comment">// æœ€å…ˆæ”¹å˜status</span><span class="hljs-built_in">Promise</span>.any() <span class="hljs-comment">// æœ€å…ˆfulfilledæˆ–è€…å…¨éƒ¨rejected</span><span class="hljs-built_in">Promise</span>.resolve()<span class="hljs-built_in">Promise</span>.reject()<span class="hljs-built_in">Promise</span>.try()</code></pre></div><h2 id="Iteratorå’Œforâ€¦ofå¾ªç¯"><a href="#Iteratorå’Œforâ€¦ofå¾ªç¯" class="headerlink" title="Iteratorå’Œforâ€¦ofå¾ªç¯"></a>Iteratorå’Œforâ€¦ofå¾ªç¯</h2><h3 id="Symbol-Iterator"><a href="#Symbol-Iterator" class="headerlink" title="[Symbol.Iterator]"></a>[Symbol.Iterator]</h3><ul><li>ç»Ÿä¸€çš„éå†é›†åˆæ•°æ®çš„å€Ÿå£</li><li>åªè¦æ‹¥æœ‰<code>[Symbol.Iterator]</code>çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ç”¨forâ€¦oféå†</li></ul><h3 id="åŸç”Ÿå…·å¤‡-Iterator-æ¥å£çš„æ•°æ®ç»“æ„å¦‚ä¸‹ã€‚"><a href="#åŸç”Ÿå…·å¤‡-Iterator-æ¥å£çš„æ•°æ®ç»“æ„å¦‚ä¸‹ã€‚" class="headerlink" title="åŸç”Ÿå…·å¤‡ Iterator æ¥å£çš„æ•°æ®ç»“æ„å¦‚ä¸‹ã€‚"></a>åŸç”Ÿå…·å¤‡ Iterator æ¥å£çš„æ•°æ®ç»“æ„å¦‚ä¸‹ã€‚</h3><ul><li>Array</li><li>Map</li><li>Set</li><li>String</li><li>TypedArray</li><li>å‡½æ•°çš„ arguments å¯¹è±¡</li><li>NodeList å¯¹è±¡</li></ul><h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h3><h3 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h3><h3 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h3><p>async å‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ*ï¼‰æ›¿æ¢æˆ asyncï¼Œå°† yield æ›¿æ¢æˆ awaitã€‚<br>å¯ä»¥çœ‹ä½œæ˜¯å¤šä¸ªå¼‚æ­¥æ“ä½œåŒ…è£…æˆçš„ Promise å¯¹è±¡ï¼Œawaitå‘½ä»¤å°±æ˜¯å†…éƒ¨ then å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</p><h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><ul><li>å¯ä»¥æš‚åœçš„çŠ¶æ€æœºï¼Œé‡åˆ°yieldåˆ™æš‚åœ</li><li>.nextï¼ˆï¼‰æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªyield</li><li>è‡ªæ‰§è¡Œgenerator<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">co</span>(<span class="hljs-params">fn</span>)</span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-keyword">const</span> gen = fn()    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step</span>(<span class="hljs-params">nextF</span>)</span>&#123;      <span class="hljs-keyword">let</span> ret      <span class="hljs-keyword">try</span>&#123;        ret = nextF()      &#125;<span class="hljs-keyword">catch</span>(e)&#123;        <span class="hljs-keyword">return</span> reject(e)      &#125;      <span class="hljs-keyword">if</span>(ret.done) <span class="hljs-keyword">return</span> resolve(ret.value)      <span class="hljs-built_in">Promise</span>.resolve(ret.value).then(<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>&#123;        step(<span class="hljs-function">()=&gt;</span>gen.next(v))      &#125;,<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>&#123;        step(<span class="hljs-function">()=&gt;</span>gen.throe(e))      &#125;)    &#125;    step(<span class="hljs-function">()=&gt;</span>gen.next(<span class="hljs-literal">undefined</span>))  &#125;)&#125;</code></pre></div><h2 id="async-await-1"><a href="#async-await-1" class="headerlink" title="async/await"></a>async/await</h2>generatorè¯­æ³•ç³–<h2 id="Classç±»"><a href="#Classç±»" class="headerlink" title="Classç±»"></a>Classç±»</h2></li></ul><ol><li><p>ç±»è¡¨è¾¾å¼å’Œç±»å£°æ˜</p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> A = <span class="hljs-class"><span class="hljs-keyword">class</span> </span>&#123;&#125;<span class="hljs-comment">// or</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;&#125;</code></pre></div><blockquote><p>ç±»å£°æ˜å’Œç±»è¡¨è¾¾å¼çš„ä¸»ä½“éƒ½æ‰§è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹</p></blockquote></li><li><p>ç»§æ‰¿</p><p>æœ¬è´¨ä½¿ç”¨çš„æ˜¯åŸå‹å¼ç»§æ‰¿</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name</span>)</span>&#123;    <span class="hljs-built_in">this</span>.name = name  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> <span class="hljs-title">extend</span> <span class="hljs-title">B</span></span>&#123;  <span class="hljs-title">constructor</span> (<span class="hljs-params">name</span>)&#123;    <span class="hljs-built_in">super</span>(name)      &#125;  &#125;</code></pre></div></li><li><p>é™æ€å­—æ®µï¼Œç§æœ‰å­—æ®µï¼Œç§æœ‰å®ä¾‹å­—æ®µ</p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span></span>&#123;  <span class="hljs-comment">//é™æ€å­—æ®µ</span>  <span class="hljs-keyword">static</span> attr1 = <span class="hljs-number">123</span>  <span class="hljs-keyword">static</span> <span class="hljs-function"><span class="hljs-title">func1</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;im func1&#x27;</span>&#125;  <span class="hljs-comment">//åªåœ¨ç±»å£°æ˜ä¸­å­˜åœ¨ï¼Œå®ä¾‹ä¸èƒ½è®¿é—®</span>  <span class="hljs-comment">// å…¬æœ‰å­—æ®µ</span>  attr2 = <span class="hljs-number">666</span>  <span class="hljs-function"><span class="hljs-title">func2</span>(<span class="hljs-params"></span>)</span>&#123;&#125;  <span class="hljs-comment">// æ¯ä¸ªå®ä¾‹éƒ½å¤åˆ¶ä¸€ä»½</span>  <span class="hljs-comment">//ç§æœ‰å®ä¾‹å­—æ®µ</span>  <span class="hljs-comment">//ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œé—­åŒ…è®¿é—®</span>  #attr3  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">name</span>)</span>&#123;    <span class="hljs-built_in">this</span>.#attr3 = name  &#125;  <span class="hljs-function"><span class="hljs-title">getPrivate</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.#attr3  &#125;  #func3 = <span class="hljs-function">() =&gt;</span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;im private&#x27;</span>);  &#125;  <span class="hljs-function"><span class="hljs-title">getPrivateFunc</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.#func3()  &#125;&#125;</code></pre></div></li></ol><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><ol><li>è¯­æ³•</li></ol><p><code>export / export</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// è¿™æ˜¯ Node ä¸­å‘å¤–æš´éœ²æˆå‘˜çš„å½¢å¼ï¼š</span><span class="hljs-comment">// module.exports = &#123;&#125;</span><span class="hljs-comment">// ES6ä¸­å¯¼å…¥æ¨¡å—ï¼Œä½¿ç”¨ import æ¨¡å—åç§° from &#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27; import &#x27;è¡¨ç¤ºè·¯å¾„&#x27;</span><span class="hljs-comment">// åœ¨ ES6 ä¸­ï¼Œä½¿ç”¨ export default å’Œ export å‘å¤–æš´éœ²æˆå‘˜ï¼š</span><span class="hljs-keyword">var</span> info = &#123;  name: <span class="hljs-string">&quot;zs&quot;</span>,  age: <span class="hljs-number">20</span>&#125;;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> info;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  address: <span class="hljs-string">&quot;æ·±åœ³&quot;</span>&#125;;<span class="hljs-comment">// æ³¨æ„ï¼š export default å‘å¤–æš´éœ²çš„æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„çš„å˜é‡æ¥æ¥æ”¶</span><span class="hljs-comment">// æ³¨æ„ï¼š åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œexport default åªå…è®¸å‘å¤–æš´éœ²1æ¬¡</span><span class="hljs-comment">// æ³¨æ„ï¼š åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ export default å’Œ export å‘å¤–æš´éœ²æˆå‘˜</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">var</span> title = <span class="hljs-string">&quot;å°æ˜Ÿæ˜Ÿ&quot;</span>;<span class="hljs-keyword">export</span> <span class="hljs-keyword">var</span> content = <span class="hljs-string">&quot;å“ˆå“ˆå“ˆ&quot;</span>;<span class="hljs-comment">// æ³¨æ„ï¼š ä½¿ç”¨ export å‘å¤–æš´éœ²çš„æˆå‘˜ï¼Œåªèƒ½ä½¿ç”¨ &#123; &#125; çš„å½¢å¼æ¥æ¥æ”¶ï¼Œè¿™ç§å½¢å¼ï¼Œå«åš ã€æŒ‰éœ€å¯¼å‡ºã€‘</span><span class="hljs-comment">// æ³¨æ„ï¼š export å¯ä»¥å‘å¤–æš´éœ²å¤šä¸ªæˆå‘˜ï¼Œ åŒæ—¶ï¼Œå¦‚æœæŸäº›æˆå‘˜ï¼Œæˆ‘ä»¬åœ¨ import çš„æ—¶å€™ï¼Œä¸éœ€è¦ï¼Œåˆ™å¯ä»¥ä¸åœ¨ &#123;&#125; ä¸­å®šä¹‰</span><span class="hljs-comment">// æ³¨æ„ï¼š ä½¿ç”¨ export å¯¼å‡ºçš„æˆå‘˜ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§ å¯¼å‡ºæ—¶å€™çš„åç§°ï¼Œæ¥ä½¿ç”¨ &#123;&#125; æŒ‰éœ€æ¥æ”¶ï¼›</span><span class="hljs-comment">// æ³¨æ„ï¼š ä½¿ç”¨ export å¯¼å‡ºçš„æˆå‘˜ï¼Œå¦‚æœ å°±æƒ³ æ¢ä¸ª åç§°æ¥æ¥æ”¶ï¼Œå¯ä»¥ä½¿ç”¨ as æ¥èµ·åˆ«åï¼›</span><span class="hljs-comment">// åœ¨Nodeä¸­ ä½¿ç”¨ var åç§° = require(&#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27;)</span><span class="hljs-comment">// module.exports å’Œ exports æ¥æš´éœ²æˆå‘˜</span></code></pre></div><ol start="2"><li><p>ä½¿ç”¨ babel ç¼–è¯‘ ES6 è¯­æ³•</p><p>Babel æ˜¯ä¸€ä¸ªå·¥å…·é“¾ï¼Œä¸»è¦ç”¨äºåœ¨æ—§çš„æµè§ˆå™¨æˆ–ç¯å¢ƒä¸­å°† ECMAScript 2015+ ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹ç‰ˆæœ¬çš„ JavaScript ä»£ç </p></li><li><p>æ¨¡å—åŒ–å·¥å…· webpack,rollup</p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ES6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flexå¸ƒå±€</title>
    <link href="/2021/04/13/flex/"/>
    <url>/2021/04/13/flex/</url>
    
    <content type="html"><![CDATA[<p>ref:<a href="http://www.ruanyifeng.com/blog/2015/07/flex-examples.html">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a></p><h2 id="å®¹å™¨çš„å±æ€§"><a href="#å®¹å™¨çš„å±æ€§" class="headerlink" title="å®¹å™¨çš„å±æ€§"></a>å®¹å™¨çš„å±æ€§</h2><ul><li><p>flex-direction ä¸»è½´çš„æ–¹å‘</p><p><code>flex-direction</code>: </p><ul><li><code>row(é»˜è®¤ä½) | row-reverse</code> æ¨ªå‘æ’åˆ—</li><li><code>column | column-reverse</code>çºµå‘æ’åˆ—</li></ul></li><li><p>flex-wrap æ’åˆ—ä¸ä¸‹æ—¶çš„æ¢è¡Œå¤„ç†</p><p><code>flex-wrap</code>:</p><ul><li><code>nowrap</code>ä¸æ¢è¡Œ</li><li><code>wrap</code>æ¢è¡Œ</li><li><code>wrap-reverse</code>é€†åºæ¢è¡Œ</li></ul></li><li><p>flex-flow(ä¸Šè¿°ä¸¤ç§çš„ç®€å†™)</p><p><code>flex-flowå±æ€§æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™</code></p></li><li><p>justify-content ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼</p><ul><li><code>flex-start</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå·¦å¯¹é½ </li><li><code>flex-end</code>ï¼šå³å¯¹é½</li><li><code>center</code>ï¼š å±…ä¸­</li><li><code>space-between</code>ï¼šä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰</li><li><code>space-around</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€</li></ul></li><li><p>align-items é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ </p><ul><li><code>flex-start</code>ï¼šäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½</li><li><code>flex-end</code>ï¼šäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½</li><li><code>center</code>ï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½</li><li><code>baseline</code>: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦</li></ul></li><li><p>align-content å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼</p><ul><li><code>flex-start</code>ï¼šä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½</li><li><code>flex-end</code>ï¼šä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½</li><li><code>center</code>ï¼šä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½</li><li><code>space-between</code>ï¼šä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ</li><li><code>space-around</code>ï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´</li></ul></li></ul><h2 id="é¡¹ç›®çš„å±æ€§"><a href="#é¡¹ç›®çš„å±æ€§" class="headerlink" title="é¡¹ç›®çš„å±æ€§"></a>é¡¹ç›®çš„å±æ€§</h2><ul><li><p><code>order</code></p><p>é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0</p></li><li><p><code>flex-grow</code></p><p>å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œ1æ”¾å¤§ï¼Œ0ä¸æ”¾å¤§</p></li><li><p><code>flex-shrink</code></p><p>å¦‚æœç©ºé—´ä¸è¶³ï¼Œ1ç¼©å°ï¼Œ0ä¸ç¼©å°</p></li><li><p><code>flex-basis</code></p><p>  åŸºç¡€å¤§å°</p></li><li><p><code>flex</code></p><p><code>[flex-grow][flex-shrink][flex-basis]</code></p></li><li><p><code>align-self</code></p><p>ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼,å‚è€ƒ<code>[align-item]</code></p></li></ul><ol><li><p>åœ£æ¯å¸ƒå±€</p><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:burlywood&quot;</span>&gt;</span>header<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span>    <span class="hljs-comment">&lt;!-- æŒ‰ç…§é¡ºåºæ¸²æŸ“ï¼Œå¦‚æœéœ€æå‰ä¿®æ”¹å…ƒç´ orderå±æ€§ï¼Œè¶Šå°è¶Šä¼˜å…ˆ --&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:chocolate&quot;</span>&gt;</span>nav<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:blueviolet&quot;</span>&gt;</span>main<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:cadetblue&quot;</span>&gt;</span>aside<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:darkslateblue&quot;</span>&gt;</span>footer<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs css">*&#123;  <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<span class="hljs-selector-tag">body</span>&#123;  <span class="hljs-attribute">display</span>: flex;  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;  <span class="hljs-comment">/* å‚ç›´æ–¹å‘ */</span>  <span class="hljs-attribute">flex-direction</span>: column;&#125;<span class="hljs-selector-tag">header</span>,<span class="hljs-selector-tag">footer</span>&#123;  <span class="hljs-comment">/* 6em ä¸ºæœ¬èº«çš„å›ºå®šå®½åº¦ */</span>  <span class="hljs-attribute">flex</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">6em</span>;&#125;<span class="hljs-selector-class">.body</span>&#123;  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;  <span class="hljs-attribute">display</span>: flex;&#125;<span class="hljs-selector-class">.body</span> <span class="hljs-selector-tag">nav</span>,<span class="hljs-selector-class">.body</span> <span class="hljs-selector-tag">aside</span>&#123;  <span class="hljs-comment">/* 10em ä¸ºæœ¬èº«çš„å›ºå®šå®½åº¦ */</span>  <span class="hljs-attribute">flex</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10em</span>;&#125;<span class="hljs-selector-class">.body</span> <span class="hljs-selector-tag">main</span>&#123;  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>&#125;</code></pre></div></li><li><p>å›ºå®šçš„åº•æ </p><div class="hljs code-wrapper"><pre><code class="hljs css">*&#123;  <span class="hljs-attribute">padding</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<span class="hljs-selector-tag">body</span>&#123;  <span class="hljs-attribute">display</span>: flex;  <span class="hljs-comment">/* æ”¹å˜flexæœå‘ */</span>  <span class="hljs-attribute">flex-direction</span>:column;  <span class="hljs-comment">/* å æ»¡è§†å£é«˜åº¦ */</span> &lt;----------------  <span class="hljs-attribute">min-height</span>:<span class="hljs-number">100vh</span>;&#125;<span class="hljs-selector-tag">header</span>&#123;  <span class="hljs-attribute">height</span>:<span class="hljs-number">30px</span>;  <span class="hljs-attribute">background</span>: blue;&#125;<span class="hljs-selector-tag">main</span>&#123;  <span class="hljs-comment">/* ä¸»é¢˜å†…å®¹å¡«æ»¡å‰©ä½™ç©ºé—´ */</span>  <span class="hljs-attribute">flex</span>:<span class="hljs-number">1</span>&#125;<span class="hljs-selector-tag">footer</span>&#123;  <span class="hljs-attribute">background</span>:black;&#125;</code></pre></div></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>css</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HTMLé¢è¯•é¢˜</title>
    <link href="/2021/04/13/html%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/2021/04/13/html%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="HTML5-æ–°ç‰¹æ€§"><a href="#HTML5-æ–°ç‰¹æ€§" class="headerlink" title="HTML5 æ–°ç‰¹æ€§"></a>HTML5 æ–°ç‰¹æ€§</h2><h3 id="ç§»é™¤"><a href="#ç§»é™¤" class="headerlink" title="ç§»é™¤"></a>ç§»é™¤</h3><ul><li><p>çº¯è¡¨ç°çš„å…ƒç´ /å¯ä»¥ç”¨csså®ç°çš„å…ƒç´ ï¼š<code>basefont</code>ï¼Œ<code>big</code>ï¼Œ<code>center</code>ï¼Œ<code>font</code>, <code>s</code>ï¼Œ<code>strike</code></p></li><li><p>å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼š<code>frame</code>ï¼Œ<code>frameset</code>ï¼Œ<code>noframes</code>ï¼›</p></li></ul><h3 id="æ–°å¢"><a href="#æ–°å¢" class="headerlink" title="æ–°å¢"></a>æ–°å¢</h3><ul><li><p>æ‹–æ‹½API </p></li><li><p><code>canvas</code> ç”»å¸ƒå’Œå†…è” <code>svg</code></p></li><li><p><code>audio/video</code> éŸ³è§†é¢‘å…ƒç´ </p></li><li><p>è¯­æ„åŒ–æ›´å¥½çš„æ ‡ç­¾ï¼Œæ¯”å¦‚<code>header,nav,section,article,footer,aside</code></p></li><li><p>è¡¨å•æ ¡éªŒAPI</p></li><li><p>å¢å¼ºäº†<code>input</code>ç±»å‹:<code>color,date,url,time,tel,range</code></p></li><li><p>æ–°çš„è¡¨å•å…ƒç´ :<code>datalist,progress,meter</code></p></li><li><p><code>manifest</code>webåº”ç”¨ç¦»çº¿ç¼“å­˜</p></li><li><p>åœ°ç†å®šä½<code>Geolocation</code> API</p></li><li><p><code>webworker</code>å°†JSè®¡ç®—äº¤ç»™åå°çº¿ç¨‹</p></li><li><p><code>websocket</code>å…¨åŒå·¥çš„æ”¯æŒæœåŠ¡ç«¯æ¨é€çš„æŒä¹…åŒ–è¿æ¥åè®®</p></li><li><p>webStorageï¼š<code>localStorage sessionStorage</code></p></li><li><p><code>history</code></p></li></ul><h3 id="HTML5-å“ªäº›æ ‡ç­¾å¯ä»¥åš-SEO-ä¼˜åŒ–"><a href="#HTML5-å“ªäº›æ ‡ç­¾å¯ä»¥åš-SEO-ä¼˜åŒ–" class="headerlink" title="HTML5 å“ªäº›æ ‡ç­¾å¯ä»¥åš SEO ä¼˜åŒ–"></a>HTML5 å“ªäº›æ ‡ç­¾å¯ä»¥åš SEO ä¼˜åŒ–</h3><p><code>titleã€metaã€headerã€footerã€navã€articleã€aside</code></p><h3 id="metaæ ‡ç­¾çš„ä½œç”¨"><a href="#metaæ ‡ç­¾çš„ä½œç”¨" class="headerlink" title="metaæ ‡ç­¾çš„ä½œç”¨"></a>metaæ ‡ç­¾çš„ä½œç”¨</h3><ul><li>charset å­—ç¬¦ç¼–ç </li><li>å…³é”®è¯seoä¼˜åŒ– </li><li>é€‚ç”¨ä¸ç§»åŠ¨è®¾å¤‡çš„viewport scaleé¡µé¢ç¼©æ”¾</li><li>dnsé¢„è§£æ</li><li>cspå†…å®¹å®‰å…¨ç­–ç•¥</li></ul><h3 id="linkå’Œ-importå’Œsrc"><a href="#linkå’Œ-importå’Œsrc" class="headerlink" title="linkå’Œ@importå’Œsrc"></a><code>link</code>å’Œ<code>@import</code>å’Œ<code>src</code></h3><ul><li><code>src</code>æŒ‡å‘å¤–éƒ¨èµ„æºçš„ä½ç½®ï¼Œè¯¥èµ„æºä¼šè¢«åµŒå…¥srcæ‰€åœ¨ä½ç½®ï¼Œæµè§ˆå™¨ä¼šåœ¨æ­¤å¤„æš‚åœå…¶ä»–èµ„æºçš„ä¸‹è½½</li><li><code>link</code>å¼•å…¥cssï¼Œiconï¼Œå®šä¹‰RSSç­‰ã€‚ä¸é¡µé¢åŠ è½½åŒæ—¶è¿›è¡Œã€‚</li><li><code>@import</code>åªèƒ½å¼•å…¥æ ·å¼è¡¨ã€‚é¡µé¢åŠ è½½å®Œåæ‰ä¸‹è½½ã€‚å¯èƒ½ä¼šæœ‰å…¼å®¹é—®é¢˜</li><li>åŒæ ·å¼•å…¥cssï¼Œlinkæƒé‡è¾ƒé«˜<h3 id="HTML5-çš„ç¦»çº¿å­˜å‚¨"><a href="#HTML5-çš„ç¦»çº¿å­˜å‚¨" class="headerlink" title="HTML5 çš„ç¦»çº¿å­˜å‚¨"></a>HTML5 çš„ç¦»çº¿å­˜å‚¨</h3></li></ul><p>åœ¨ç”¨æˆ·æ²¡æœ‰è”ç½‘æ—¶ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç«™ç‚¹æˆ–åº”ç”¨ï¼›åœ¨è”ç½‘çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°ç”¨æˆ·æœºå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚</p><p>å¦‚ä½•ä½¿ç”¨ï¼š<br>1ã€é¡µé¢å¤´éƒ¨åŠ å…¥ä¸€ä¸ª manifest çš„å±æ€§<br>2ã€åœ¨ cache.manifest æ–‡ä»¶çš„ç¼–å†™ç¦»çº¿å­˜å‚¨çš„èµ„æº<br>3ã€åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ï¼Œæ“ä½œ window.applicationCache è¿›è¡Œéœ€æ±‚å®ç°</p><h4 id="æµè§ˆå™¨æ˜¯å¦‚ä½•å¯¹-HTML5-çš„ç¦»çº¿å­˜å‚¨èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„"><a href="#æµè§ˆå™¨æ˜¯å¦‚ä½•å¯¹-HTML5-çš„ç¦»çº¿å­˜å‚¨èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„" class="headerlink" title="æµè§ˆå™¨æ˜¯å¦‚ä½•å¯¹ HTML5 çš„ç¦»çº¿å­˜å‚¨èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„"></a>æµè§ˆå™¨æ˜¯å¦‚ä½•å¯¹ HTML5 çš„ç¦»çº¿å­˜å‚¨èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„</h4><ul><li><p>åœ¨çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å‘ç° HTML å¤´éƒ¨æœ‰ manifest å±æ€§ï¼Œå®ƒä¼šè¯·æ±‚ manifest æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—® appï¼Œæµè§ˆå™¨ä¼šæ ¹æ® manifest æ–‡ä»¶çš„å†…å®¹ä¸‹è½½ç›¸åº”çš„èµ„æºå¹¶ä¸”è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚</p></li><li><p>å¦‚æœå·²ç»è®¿é—®è¿‡ appï¼Œå¹¶ä¸”èµ„æºå·²ç»ç¦»çº¿å­˜å‚¨ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨ç¦»çº¿çš„èµ„æºåŠ è½½é¡µé¢ï¼Œç„¶åæµè§ˆå™¨ä¼šå¯¹æ¯”æ–°çš„ manifest æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦åˆ™å°±ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ä¸­çš„èµ„æºå¹¶è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚</p></li><li><p>ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¦»çº¿å­˜å‚¨çš„èµ„æºã€‚</p></li></ul><h3 id="ä¸¥æ ¼æ¨¡å¼å’Œæ··æ‚æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼å’Œæ··æ‚æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼å’Œæ··æ‚æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼å’Œæ··æ‚æ¨¡å¼</h3><ul><li>ä¸¥æ ¼æ¨¡å¼çš„æ’ç‰ˆå’Œ JS è¿ä½œæ¨¡å¼æ˜¯ ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚</li><li>æ··æ‚æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤ºã€‚æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥ é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œ</li></ul><h3 id="è¶…é“¾æ¥è®¿é—®è¿‡å-hover-æ ·å¼å°±ä¸å‡ºç°äº†"><a href="#è¶…é“¾æ¥è®¿é—®è¿‡å-hover-æ ·å¼å°±ä¸å‡ºç°äº†" class="headerlink" title="è¶…é“¾æ¥è®¿é—®è¿‡å hover æ ·å¼å°±ä¸å‡ºç°äº†"></a>è¶…é“¾æ¥è®¿é—®è¿‡å hover æ ·å¼å°±ä¸å‡ºç°äº†</h3><p>è¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸åœ¨å…·æœ‰ hover å’Œ active äº†è§£å†³æ–¹æ³•æ˜¯æ”¹å˜ CSS å±æ€§æ’åˆ—é¡ºåº: <code>L-V-H-A</code></p><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:link</span> &#123;&#125;<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:visited</span> &#123;&#125;<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> &#123;&#125;<span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:active</span> &#123;&#125;</code></pre></div><h2 id="ç›’æ¨¡å‹"><a href="#ç›’æ¨¡å‹" class="headerlink" title="ç›’æ¨¡å‹"></a>ç›’æ¨¡å‹</h2><blockquote><p>æ¦‚å¿µ<br>HTML æ–‡æ¡£ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä½¿ç”¨ä¸€ä¸ªçŸ©å½¢ç›’å­æ¥æè¿°å…¶å ç”¨ç©ºé—´ï¼Œè¿™ä¸ªæ¨¡å‹ç§°ä¸ºç›’æ¨¡å‹ã€‚ç›’æ¨¡å‹åŒ…å«å››ä¸ªåŒºåŸŸï¼š<code>margin</code>ï¼ˆå¤–è¾¹è·ï¼‰ï¼Œ<code>border</code>ï¼ˆè¾¹æ¡†ï¼‰ï¼Œ<code>padding</code>ï¼ˆå†…è¾¹è·ï¼‰ï¼Œ<code>content</code>ï¼ˆå†…å®¹åŒºåŸŸ</p></blockquote><h3 id="è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ "><a href="#è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ " class="headerlink" title="è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ "></a>è¡Œå†…å…ƒç´ å’Œå—çº§å…ƒç´ </h3><h4 id="è¡Œå†…å…ƒç´ "><a href="#è¡Œå†…å…ƒç´ " class="headerlink" title="è¡Œå†…å…ƒç´ "></a>è¡Œå†…å…ƒç´ </h4><p><code>display inline</code></p><ol><li><p>å’Œå…¶ä»–å…ƒç´ åœ¨åŒä¸€è¡Œå†…</p></li><li><p>è¡Œå†…å…ƒç´ ä¸èƒ½è®¾ç½® widthã€heightã€marginã€padding</p></li><li><p>é»˜è®¤é«˜åº¦å’Œå®½åº¦å°±æ˜¯å†…å®¹çš„é«˜åº¦å’Œå®½åº¦</p></li><li><p>å¯ä»¥è®¾ç½® margin-left å’Œ margin-right å±æ€§ï¼Œæ— æ³•è®¾ç½® margin-top å’Œ margin-bottom å±æ€§</p></li><li><p>border å’Œ padding å¯ä»¥è®¾ç½®ï¼Œä½†æ˜¯ border-top å’Œ padding-top åˆ°é¡µé¢é¡¶éƒ¨åå°±ä¸å†å¢åŠ </p></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript">img; <span class="hljs-comment">//å¯ä»¥è®¾ç½®å®½é«˜</span>span;lable;strong;a;input; <span class="hljs-comment">//å¯ä»¥è®¾ç½®å®½é«˜</span>select; <span class="hljs-comment">//å¯ä»¥è®¾ç½®å®½é«˜</span>textarea; <span class="hljs-comment">//å¯ä»¥è®¾ç½®å®½é«˜</span></code></pre></div><h4 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´ "></a>å—çº§å…ƒç´ </h4><p><code>display block</code></p><ol><li><p>ç‹¬å ä¸€è¡Œ</p></li><li><p>å¯ä»¥è®¾ç½® widthï¼Œheightï¼Œmarginï¼Œpaddingï¼Œborder å±æ€§</p></li><li><p>é»˜è®¤å®½åº¦æ˜¯å®¹å™¨çš„ 100%</p></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript">artical; <span class="hljs-comment">// h5</span>div;header; <span class="hljs-comment">// h5</span>section; <span class="hljs-comment">// h5</span>adress; <span class="hljs-comment">// h5</span>ol;ul;aside; <span class="hljs-comment">// h5</span>footer; <span class="hljs-comment">// h5</span>audio; <span class="hljs-comment">// h5</span>video; <span class="hljs-comment">// h5</span>canvas; <span class="hljs-comment">// h5</span>hgroup; <span class="hljs-comment">// h5</span>p;h1 - h6;table;form;</code></pre></div><ul><li>è¡Œå†…å—çº§å…ƒç´ <br><code>display line-block</code></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å…¼å®¹</span>div &#123;    displayï¼š inline-blockï¼›    zoomï¼š <span class="hljs-number">1</span>ï¼›   <span class="hljs-comment">//åœ¨IEä¸‹è§¦å‘hasLayout</span>    displayï¼šinlineï¼›<span class="hljs-comment">//ä¸€æ—¦è§¦å‘äº†hasLayoutè®¾ç½®displayï¼šinlineå’Œdisplayï¼šblockæ•ˆæœç›¸ä¼¼ã€‚</span>&#125;</code></pre></div><ol><li>ä¸è‡ªåŠ¨æ¢è¡Œ</li><li>è¯†åˆ«å®½é«˜</li><li>å·¦å‘å³æ’åˆ—</li></ol><h3 id="ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼º"><a href="#ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼º" class="headerlink" title="ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼º"></a>ä¼˜é›…é™çº§å’Œæ¸è¿›å¢å¼º</h3><p>_ä¼˜é›…é™çº§_ï¼šWeb ç«™ç‚¹åœ¨æ‰€æœ‰æ–°å¼æµè§ˆå™¨ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨çš„æ˜¯æ—§å¼æµè§ˆå™¨ï¼Œåˆ™ä»£ç ä¼šé’ˆå¯¹æ—§ç‰ˆæœ¬çš„ IE è¿›è¡Œé™çº§å¤„ç†ï¼Œä½¿ä¹‹åœ¨æ—§å¼æµè§ˆå™¨ä¸Šä»¥æŸç§å½¢å¼é™çº§ä½“éªŒè€Œä¸è‡³äºå®Œå…¨ä¸èƒ½ä½¿ç”¨ã€‚</p><p>_æ¸è¿›å¢å¼º_ï¼šä»è¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒçš„åŸºæœ¬åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥åœ°æ·»åŠ é‚£äº›åªæœ‰æ–°ç‰ˆæœ¬æµè§ˆå™¨æ‰æ”¯æŒçš„åŠŸèƒ½ï¼Œå‘é¡µé¢å¢åŠ ä¸å½±å“åŸºç¡€æµè§ˆå™¨çš„é¢å¤–æ ·å¼å’ŒåŠŸèƒ½ã€‚å½“æµè§ˆå™¨æ”¯æŒæ—¶ï¼Œå®ƒä»¬ä¼šè‡ªå®šåœ°å‘ˆç°å‡ºæ¥å¹¶å‘æŒ¥ä½œç”¨ã€‚</p><h3 id="å¸¸è§ç©º-VOID-å…ƒç´ "><a href="#å¸¸è§ç©º-VOID-å…ƒç´ " class="headerlink" title="å¸¸è§ç©º VOID å…ƒç´ "></a>å¸¸è§ç©º VOID å…ƒç´ </h3><p><code>brã€hrã€imgã€inputã€linkã€meta</code></p><h3 id="window-onload-å’Œ-DOMContentLoaded-çš„åŒºåˆ«"><a href="#window-onload-å’Œ-DOMContentLoaded-çš„åŒºåˆ«" class="headerlink" title="window.onload å’Œ DOMContentLoaded çš„åŒºåˆ«"></a>window.onload å’Œ DOMContentLoaded çš„åŒºåˆ«</h3><p><code>window.onload</code>é¡µé¢çš„å…¨éƒ¨èµ„æºåŠ è½½å®Œ<br><code>DOMContentLoaded</code>çº¯HTMLåŠ è½½å®Œ</p><h3 id="visibilityState-æœ‰å“ªäº›ç”¨é€”"><a href="#visibilityState-æœ‰å“ªäº›ç”¨é€”" class="headerlink" title="visibilityState æœ‰å“ªäº›ç”¨é€”"></a>visibilityState æœ‰å“ªäº›ç”¨é€”</h3><p>é€šè¿‡<code>visibilityState</code>çš„å€¼æ£€æµ‹é¡µé¢å½“å‰æ˜¯å¦å¯è§ï¼Œä»¥åŠæ‰“å¼€é¡µé¢çš„æ—¶é—´ç­‰<br>åœ¨é¡µé¢è¢«åˆ‡æ¢åˆ°å…¶ä»–åå°è¿›ç¨‹çš„æ—¶å€™ï¼Œè‡ªåŠ¨æš‚åœéŸ³ä¹æˆ–è§†é¢‘çš„æ’­æ”¾</p><h3 id="æ ‡å‡†æ¨¡å‹å’Œ-IE-æ¨¡å‹"><a href="#æ ‡å‡†æ¨¡å‹å’Œ-IE-æ¨¡å‹" class="headerlink" title="æ ‡å‡†æ¨¡å‹å’Œ IE æ¨¡å‹"></a>æ ‡å‡†æ¨¡å‹å’Œ IE æ¨¡å‹</h3><ul><li>é€šè¿‡[box-sizing]è®¾ç½®</li><li>æ ‡å‡†æ¨¡å‹[content-box]çš„å®½å’Œé«˜åªè®¡ç®— content éƒ¨åˆ†</li><li>ie æ¨¡å‹[border-box]çš„å®½é«˜åŒ…æ‹¬ padding å’Œ border</li></ul><h3 id="è·å–-DOM-å…ƒç´ çš„-style"><a href="#è·å–-DOM-å…ƒç´ çš„-style" class="headerlink" title="è·å– DOM å…ƒç´ çš„ style"></a>è·å– DOM å…ƒç´ çš„ style</h3><ol><li><code>dom.style.width/height</code>content åªèƒ½è·å–å†…è”æ ·å¼</li><li><code>dom.currentStyle.width/height</code>// åªæ”¯æŒie</li><li><code>window.getComputedStyle(ele).width/height</code></li><li><code>offsetHeight</code>// content+padding+border + æ»šåŠ¨æ¡</li><li><code>offsetTop//Left</code>//ç›¸è¾ƒäºoffsetParentçš„åç§» margin+position</li><li><code>clientHeight</code>// content+padding - æ»šåŠ¨æ¡</li><li><code>scrollHeight</code>// æ²¡æœ‰æ»šåŠ¨æ¡æ—¶ç­‰äºclientHeight</li><li><code>scrollTop</code>// æ»šåŠ¨åƒç´ æ•°</li></ol><p>// æ»šåŠ¨åˆ°åº•</p><blockquote><p>ele.scrollHeight - ele.scrollTop === ele.clientHeight</p></blockquote><h3 id="è¾¹è·é‡å "><a href="#è¾¹è·é‡å " class="headerlink" title="è¾¹è·é‡å "></a>è¾¹è·é‡å </h3><p>ä¸¤ä¸ªæˆ–å¤šä¸ªå—çº§ç›’å­çš„!!å‚ç›´!!ç›¸é‚»è¾¹ç•Œä¼šé‡åˆï¼Œå®ƒä»¬çš„è¾¹ç•Œå®½åº¦æ˜¯ç›¸é‚»è¾¹ç•Œå®½åº¦ä¸­çš„æœ€å¤§å€¼ã€‚<br>ç‰¹åˆ«æ³¨æ„å†…å®¹ä¸ºç©ºçš„ç›’å­ã€‚</p><h2 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h2><p>Block Formatting Context å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡,æ˜¯å¸¸è§„æµå¼å¸ƒå±€ä¸­ä¸€ä¸ªå†³å®šå—çº§ç›’å­å¸ƒå±€åŠæµ®åŠ¨ç›¸äº’å½±å“çš„ä¸€ä¸ªåŒºåŸŸï¼Œæ‹¥æœ‰ä¸æ™®é€šç›’æ¨¡å‹ä¸åŒçš„ç‰¹æ€§ã€‚</p><h3 id="BFCç‰¹æ€§"><a href="#BFCç‰¹æ€§" class="headerlink" title="BFCç‰¹æ€§"></a>BFCç‰¹æ€§</h3><ul><li><p>BFCå†…ç›’å­ç«–å‘æ’åˆ—</p></li><li><p>BFCå†…ç›’å­ä¹‹é—´ä¼šå‘ç”Ÿmarginåˆå¹¶</p></li><li><p>BFCå†…æµ®åŠ¨å…ƒç´ å‚ä¸é«˜åº¦è®¡ç®—ï¼ˆé«˜åº¦å¡Œé™·ï¼‰</p></li><li><p>BFCå†…ç›’å­ä¸ä¼šè¶…å‡ºBFCè¾¹ç•Œï¼ˆæµ®åŠ¨è¦†ç›–ï¼‰</p><h3 id="ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºBFCï¼š"><a href="#ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºBFCï¼š" class="headerlink" title="ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºBFCï¼š"></a>ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»ºBFCï¼š</h3><ul><li>æ ¹å…ƒç´ <code>HTML</code></li><li>æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>float</code> ä¸æ˜¯ <code>none</code>ï¼‰</li><li>å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>position</code> ä¸º <code>absolute</code> æˆ– <code>fixed</code></li><li><code>overflow</code> å€¼ä¸ä¸º <code>visible</code> çš„å—å…ƒç´ </li><li><code>display</code> å€¼ä¸º <code>flow-root</code> çš„å…ƒç´ </li><li>è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>display</code> ä¸º <code>inline-block</code></li><li>å¼¹æ€§å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>flex</code> æˆ– <code>inline-flex</code> å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li><li>ç½‘æ ¼å…ƒç´ ï¼ˆ<code>display</code> ä¸º <code>grid</code> æˆ– <code>inline-grid</code> å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li><li>è¡¨æ ¼æœ‰å…³ï¼ˆ<code>display</code> ä¸º <code>table``table-row``table-row-group``table-header-group``table-footer-group</code>ï¼‰</li></ul></li></ul><p>[MDN] <a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context">https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context</a> â€œå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€</p><h3 id="æ¸…é™¤æµ®åŠ¨"><a href="#æ¸…é™¤æµ®åŠ¨" class="headerlink" title="æ¸…é™¤æµ®åŠ¨"></a>æ¸…é™¤æµ®åŠ¨</h3><ul><li>ç”¨çˆ¶å…ƒç´ ä¼ªç±»æ¸…é™¤æµ®åŠ¨</li></ul><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-comment">/* é€šç”¨ */</span><span class="hljs-selector-class">.clearfather</span>:after &#123;  content: <span class="hljs-string">&quot;&quot;</span>;  <span class="hljs-attribute">clear</span>: both;  <span class="hljs-attribute">display</span>: block;  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;  <span class="hljs-attribute">overflow</span>: hidden;  <span class="hljs-attribute">visibility</span>: hidden;&#125;<span class="hljs-selector-class">.clearfather</span> &#123;  *zoom: <span class="hljs-number">1</span>; <span class="hljs-comment">/* ie6/7 */</span>&#125;</code></pre></div><ul><li>ç©º div æ¸…é™¤æµ®åŠ¨</li></ul><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-selector-class">.clearfloat</span> &#123;  <span class="hljs-attribute">clear</span>: both;&#125;</code></pre></div><ul><li>çˆ¶å…ƒç´  BFC</li></ul><p>è®¾ç½®èƒ½è§¦å‘ BFC çš„å±æ€§å‡å¯</p><h3 id="é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨-link-å’Œ-import-æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨-link-å’Œ-import-æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨ link å’Œ@import æœ‰ä»€ä¹ˆåŒºåˆ«"></a>é¡µé¢å¯¼å…¥æ ·å¼æ—¶ï¼Œä½¿ç”¨ link å’Œ@import æœ‰ä»€ä¹ˆåŒºåˆ«</h3><ul><li><p>link æ˜¯ XHTML æ ‡ç­¾ï¼Œé™¤äº†åŠ è½½ CSS å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰ RSS ç­‰å…¶ä»–äº‹åŠ¡ï¼›@import å±äº CSS èŒƒç•´ï¼Œåªèƒ½åŠ è½½ CSSã€‚</p></li><li><p>link å¼•ç”¨ CSS æ—¶ï¼Œåœ¨é¡µé¢è½½å…¥æ—¶åŒæ—¶åŠ è½½ï¼›@import éœ€è¦é¡µé¢ç½‘é¡µå®Œå…¨è½½å…¥ä»¥ååŠ è½½ã€‚</p></li><li><p>link æ˜¯ XHTML æ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜ï¼›@import æ˜¯åœ¨ CSS2.1 æå‡ºçš„ï¼Œä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ˆIE5 ä»¥ä¸‹ï¼‰ä¸æ”¯æŒã€‚</p></li><li><p>link æ”¯æŒä½¿ç”¨ Javascript æ§åˆ¶ DOM å»æ”¹å˜æ ·å¼ï¼›è€Œ@import ä¸æ”¯æŒã€‚</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>HTML</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¡µé¢æ€§èƒ½ä¼˜åŒ–</title>
    <link href="/2021/04/13/%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <url>/2021/04/13/%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h2 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> imgList = [...document.querySelectAll(<span class="hljs-string">&#x27;img&#x27;</span>)]<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lazyLoad</span>(<span class="hljs-params">imgList</span>)</span>&#123;  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>  <span class="hljs-keyword">const</span> len = imgList.length  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">let</span> doneList = []    imgList.forEach(<span class="hljs-function">(<span class="hljs-params">img,index</span>)=&gt;</span>&#123;      <span class="hljs-keyword">const</span> react = img.getBoundingClientRect()      <span class="hljs-comment">// Element.getBoundingClientRect() æ–¹æ³•è¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®</span>      <span class="hljs-comment">// è¿”å›å€¼æ˜¯ä¸€ä¸ª DOMRect å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç”±è¯¥å…ƒç´ çš„ getClientRects() æ–¹æ³•è¿”å›çš„ä¸€ç»„çŸ©å½¢çš„é›†åˆï¼Œå°±æ˜¯è¯¥å…ƒç´ çš„ CSS è¾¹æ¡†å¤§å°ã€‚è¿”å›çš„ç»“æœæ˜¯åŒ…å«å®Œæ•´å…ƒç´ çš„æœ€å°çŸ©å½¢ï¼Œå¹¶ä¸”æ‹¥æœ‰left, top, right, bottom, x, y, width, å’Œ heightè¿™å‡ ä¸ªä»¥åƒç´ ä¸ºå•ä½çš„åªè¯»å±æ€§ç”¨äºæè¿°æ•´ä¸ªè¾¹æ¡†ã€‚</span>      <span class="hljs-keyword">if</span>(react.top&lt;<span class="hljs-built_in">window</span>.innerHeight)&#123;        img.src = img.dataset.src        doneList.push(index)        count++        <span class="hljs-keyword">if</span>(count === len)&#123;          <span class="hljs-built_in">document</span>.removeEventListener(<span class="hljs-string">&#x27;scroll&#x27;</span>,lazyLoad)        &#125;      &#125;    &#125;)    imgList = imgList.filter(<span class="hljs-function">(<span class="hljs-params">img,index</span>)=&gt;</span>!doneList.includes(i))  &#125;&#125;<span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">&#x27;scroll&#x27;</span>,debounce(lazyLoad))<span class="hljs-comment">// åŠ ä¸ŠèŠ‚æµ</span></code></pre></div><h2 id="éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½"><a href="#éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½" class="headerlink" title="éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½"></a>éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½</h2><ul><li><p>å¼‚æ­¥åŠ è½½çš„æ–¹å¼</p><ol><li>åŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾ï¼Œwindow.onloadåŠ å…¥é¡µé¢</li><li>script<code>defer</code></li><li>script<code>async</code></li></ol></li><li><p>script/script async/script deferçš„åŒºåˆ«</p><ul><li>æ™®é€šçš„<code>script</code>ï¼Œhtmlè§£ææš‚åœï¼Œç«‹å³ä¸‹è½½å’Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬</li><li><code>&lt;script async&gt;</code>ï¼Œhtmlè§£æå’Œè¯¥è„šæœ¬çš„åŠ è½½åŒæ—¶è¿›è¡Œï¼Œä¸‹è½½å®Œåæ‰§è¡Œè„šæœ¬æ—¶æš‚åœhtmlè§£æ</li><li><code>&lt;script defer&gt;</code>ï¼Œhtmlè§£æå’Œè¯¥è„šæœ¬çš„åŠ è½½åŒæ—¶è¿›è¡Œï¼Œè„šæœ¬åœ¨é¡µé¢è§£æå®Œæˆåæ‰æ‰§è¡Œ</li></ul><p>  <img src="../images/script.png" alt="script"></p></li></ul><h2 id="é¢„è§£æDNS"><a href="#é¢„è§£æDNS" class="headerlink" title="é¢„è§£æDNS"></a>é¢„è§£æDNS</h2><p><code>DNS Prefetch</code> æ˜¯ä¸€ç§DNS é¢„è§£ææŠ€æœ¯ï¼Œå½“æµè§ˆç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨åŠ è½½ç½‘é¡µæ—¶å¯¹ç½‘é¡µä¸­çš„åŸŸåè¿›è¡Œè§£æç¼“å­˜ï¼Œè¿™æ ·åœ¨å•å‡»å½“å‰ç½‘é¡µä¸­çš„è¿æ¥æ—¶å°±æ— éœ€è¿›è¡ŒDNSçš„è§£æï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…æ—¶é—´ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚</p><ol><li><p>httpä¸­æµè§ˆå™¨ä¼šå¯¹aæ ‡ç­¾è‡ªåŠ¨å¼€å¯dnsé¢„è§£æ</p></li><li><p>httpsç”¨metaä¿¡æ¯æ¥å‘ŠçŸ¥æµè§ˆå™¨, å½“å‰é¡µé¢è¦åšDNSé¢„è§£æ:</p></li></ol><blockquote><p>å¯¹äºhttpsé¡µé¢ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨æ˜¯å…³é—­aæ ‡ç­¾çš„dnsé¢„è§£æçš„</p></blockquote><p><code>&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot; /&gt;</code></p><ol start="2"><li>åœ¨é¡µé¢headerä¸­ä½¿ç”¨linkæ ‡ç­¾æ¥å¼ºåˆ¶å¯¹DNSé¢„è§£æ:</li></ol><p><code> &lt;link rel=&quot;dns-prefetch&quot; href=&quot;http://bdimg.share.baidu.com&quot; /&gt;</code></p><h2 id="é¢„æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“"><a href="#é¢„æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“" class="headerlink" title="é¢„æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“"></a>é¢„æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“</h2><ul><li><code>SSR:server side render</code></li><li><code>prerender-spa-plugin</code>ä¸é€‚ç”¨äºä¸ªæ€§åŒ–çš„ï¼Œå†…å®¹å˜åŒ–å¤§ï¼Œå¤šè·¯ç”±çš„é¡µé¢<br>å¯ä»¥ç”¨æ¥ä¼˜åŒ–å•é¡µåº”ç”¨</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsè¿è¡Œæœºåˆ¶</title>
    <link href="/2021/04/13/js%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/"/>
    <url>/2021/04/13/js%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/</url>
    
    <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/10714ad38f9a">ref:javascript è¿è¡Œæœºåˆ¶ EventLoop</a></p><h2 id="JSçš„å•çº¿ç¨‹"><a href="#JSçš„å•çº¿ç¨‹" class="headerlink" title="JSçš„å•çº¿ç¨‹"></a>JSçš„å•çº¿ç¨‹</h2><p>JavaScriptçš„å•çº¿ç¨‹ï¼Œä¸å®ƒçš„ç”¨é€”æœ‰å…³ã€‚ä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMã€‚è¿™å†³å®šäº†å®ƒåªèƒ½æ˜¯å•çº¿ç¨‹ï¼Œå¦åˆ™ä¼šå¸¦æ¥å¾ˆå¤æ‚çš„åŒæ­¥é—®é¢˜ã€‚</p><h2 id="EventLoop"><a href="#EventLoop" class="headerlink" title="EventLoop"></a>EventLoop</h2><ul><li><p>æ¦‚æ‹¬ï¼šä¸»çº¿ç¨‹ä¸æ–­ä»ä»»åŠ¡é˜Ÿåˆ—è¯»å–ä»»åŠ¡è¿›å…¥æ‰§è¡Œæ ˆæ‰§è¡Œçš„å¾ªç¯è¿‡ç¨‹</p></li><li><p>å› ä¸º js æ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œåœ¨ä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡å°†ä¸åŒå‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ‰§è¡Œæ ˆä¸­æ¥ä¿è¯ä»£ç çš„æœ‰åºæ‰§è¡Œã€‚å¦‚æœé‡åˆ°äº†å¼‚æ­¥ä»»åŠ¡ï¼Œjs å¼•æ“å¹¶ä¸ä¼šä¸€ç›´ç­‰å¾…å…¶è¿”å›ç»“æœï¼Œè€Œæ˜¯ä¼šå°†è¿™ä¸ªäº‹ä»¶æŒ‚èµ·ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚å½“å¼‚æ­¥äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œå†å°†å¼‚æ­¥äº‹ä»¶å¯¹åº”çš„å›è°ƒåŠ å…¥åˆ°ä¸å½“å‰æ‰§è¡Œæ ˆä¸­ä¸åŒçš„å¦ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚</p></li><li><p>ä»»åŠ¡é˜Ÿåˆ—å¯ä»¥åˆ†ä¸ºå®ä»»åŠ¡å¯¹åˆ—å’Œå¾®ä»»åŠ¡å¯¹åˆ—ï¼Œå½“â€˜å½“å‰â€™æ‰§è¡Œæ ˆä¸­çš„äº‹ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œjs å¼•æ“é¦–å…ˆä¼šåˆ¤æ–­å¾®ä»»åŠ¡å¯¹åˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼Œå¦‚æœæœ‰å°±å°†å¾®ä»»åŠ¡é˜Ÿé¦–çš„äº‹ä»¶å‹å…¥æ ˆä¸­æ‰§è¡Œã€‚å½“å¾®ä»»åŠ¡å¯¹åˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæˆåå†å»åˆ¤æ–­å®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚</p></li><li><p>äº‹ä»¶å¾ªç¯çš„è¿è¡Œ</p><ol><li>å¾ªç¯å¼€å§‹ï¼Œæ•´ä½“å‡½æ•°scriptæ¨å…¥æ‰§è¡Œæ ˆ</li><li>æ‰§è¡Œæ‰§è¡Œæ ˆä¸­åŒæ­¥å‡½æ•°</li><li>é‡åˆ°å¼‚æ­¥å‡½æ•°å°†å…¶å›è°ƒåˆ†åˆ«åŠ å…¥<em>å®ä»»åŠ¡é˜Ÿåˆ—</em>å’Œ<em>å¾®ä»»åŠ¡é˜Ÿåˆ—</em></li><li>æ‰§è¡Œæ ˆä¸ºç©ºåï¼ˆåŒæ­¥å‡½æ•°æ‰§è¡Œå®Œï¼‰ï¼ŒæŸ¥çœ‹ä»»åŠ¡é˜Ÿåˆ—é‡Œå¾®ä»»åŠ¡æ¨å…¥æ‰§è¡Œæ ˆæ‰§è¡Œ</li><li>æ‰§è¡Œå®Œåï¼Œè¯»å–å®ä»»åŠ¡è¿›å…¥æ‰§è¡Œæ ˆæ‰§è¡Œ</li><li>æ‰§è¡Œè¯¥å®ä»»åŠ¡ï¼Œå¦‚æœè¯¥å®ä»»åŠ¡ç»§ç»­äº§ç”Ÿå¾®ä»»åŠ¡åˆ™æ‰§è¡Œå®Œå¾®ä»»åŠ¡æ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œ<br>blahblahblahã€‚ã€‚ã€‚</li></ol></li></ul><h2 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h2><ul><li>setTimeout/setInterval<blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒsetTimeout()åªæ˜¯å°†äº‹ä»¶æ’å…¥äº†â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œå¿…é¡»ç­‰åˆ°å½“å‰ä»£ç ï¼ˆæ‰§è¡Œæ ˆï¼‰æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹æ‰ä¼šå»æ‰§è¡Œå®ƒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¦æ˜¯å½“å‰ä»£ç è€—æ—¶å¾ˆé•¿ï¼Œæœ‰å¯èƒ½è¦ç­‰å¾ˆä¹…ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰åŠæ³•ä¿è¯ï¼Œå›è°ƒå‡½æ•°ä¸€å®šä¼šåœ¨setTimeout()æŒ‡å®šçš„æ—¶é—´æ‰§è¡Œ</p></blockquote><ul><li>DOMäº‹ä»¶(onclick,onload)</li><li>Promise</li></ul></li></ul><h2 id="å¾®ä»»åŠ¡-å®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡-å®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡/å®ä»»åŠ¡"></a>å¾®ä»»åŠ¡/å®ä»»åŠ¡</h2><ul><li><p>ä¸åŒçš„å¼‚æ­¥ä»»åŠ¡è¢«åˆ†ä¸ºä¸¤ç±»ï¼šå¾®ä»»åŠ¡ï¼ˆ<code>micro task</code>ï¼‰å’Œå®ä»»åŠ¡ï¼ˆ<code>macro task</code>ï¼‰</p></li><li><p>JSçš„äº‹ä»¶å¾ªç¯ä¸­æ¯ä¸ªå®ä»»åŠ¡ç§°ä¸ºä¸€ä¸ª<code>Tick</code>(æ ‡è®°)ï¼Œåœ¨æ¯ä¸ªæ ‡è®°çš„æœ«å°¾ä¼šè¿½åŠ ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œåä¼šæ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ï¼Œç›´åˆ°é˜Ÿåˆ—æ¸…ç©ºã€‚</p></li><li><p>å¾®ä»»åŠ¡åŒ…æ‹¬ <code>process.nextTick</code> ï¼Œ<code>promise.then</code> ï¼Œ<code>catch</code>,<code>finally</code> ï¼Œ<code>MutationObserver</code></p><ul><li>ï¼é‡åˆ°<code>nextTick</code>ä¼šæåˆ°å¾®ä»»åŠ¡çš„æ ˆé¡¶</li></ul></li><li><p>å®ä»»åŠ¡åŒ…æ‹¬ <code>æ•´ä½“ä»£ç script</code> ï¼Œ <code>setTimeout</code> ï¼Œ<code>setInterval</code> ï¼Œ<code>setImmediate</code> ï¼Œ<code>I/O</code>æ“ä½œ ï¼Œ<code>UI</code>æ¸²æŸ“</p></li></ul><h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// jsæ‰§è¡Œé¡ºåº</span><span class="hljs-comment">// 1</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;script start&quot;</span>);  <span class="hljs-comment">// 1</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;setTimeout&quot;</span>);<span class="hljs-comment">// 4</span>&#125;, <span class="hljs-number">0</span>);<span class="hljs-built_in">Promise</span>.resolve()  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>);<span class="hljs-comment">//2</span>  &#125;)  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>);<span class="hljs-comment">//3</span>  &#125;);<span class="hljs-comment">// 2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;1&quot;</span>); <span class="hljs-comment">//1</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span>);<span class="hljs-comment">// 5</span>  process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;3&quot;</span>);<span class="hljs-comment">//7</span>  &#125;);  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;4&quot;</span>);<span class="hljs-comment">//6</span>    resolve();  &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;5&quot;</span>);<span class="hljs-comment">//8</span>  &#125;);&#125;);process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;6&quot;</span>); <span class="hljs-comment">//3</span>&#125;);<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;7&quot;</span>); <span class="hljs-comment">//2</span>  resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;8&quot;</span>); <span class="hljs-comment">//4</span>&#125;);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;9&quot;</span>); <span class="hljs-comment">//9</span>  process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;10&quot;</span>); <span class="hljs-comment">//11</span>  &#125;);  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;11&quot;</span>); <span class="hljs-comment">//10</span>    resolve();  &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;12&quot;</span>);  &#125;);<span class="hljs-comment">//12</span>&#125;);<span class="hljs-comment">// 3</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>) <span class="hljs-comment">//1</span>  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)<span class="hljs-comment">//2</span>  &#125;)  <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å¼‚æ­¥3&#x27;</span>)<span class="hljs-comment">//6</span>  &#125;)  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;åŒæ­¥3&#x27;</span>)<span class="hljs-comment">//3</span>&#125;<span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">()=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>)<span class="hljs-comment">//5</span>&#125;)<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>)<span class="hljs-comment">//7</span>&#125;)async1()<span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>)<span class="hljs-comment">//4</span></code></pre></div><ol><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;å®šæ—¶å™¨å¼€å§‹å•¦&#x27;</span>)&#125;);<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;é©¬ä¸Šæ‰§è¡Œforå¾ªç¯å•¦&#x27;</span>);    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++)&#123;        i == <span class="hljs-number">99</span> &amp;&amp; resolve();    &#125;&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;æ‰§è¡Œthenå‡½æ•°å•¦&#x27;</span>)&#125;);<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;ä»£ç æ‰§è¡Œç»“æŸ&#x27;</span>);<span class="hljs-comment">// é©¬ä¸Šæ‰§è¡Œforå¾ªç¯å•¦</span><span class="hljs-comment">// ä»£ç æ‰§è¡Œç»“æŸ</span><span class="hljs-comment">// æ‰§è¡Œthenå‡½æ•°å•¦</span><span class="hljs-comment">// å®šæ—¶å™¨å¼€å§‹å•¦</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;setTimeout&#x27;</span>);&#125;)<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise&#x27;</span>);    resolve()&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;then&#x27;</span>);&#125;)<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;console&#x27;</span>);<span class="hljs-comment">// promise</span><span class="hljs-comment">// console</span><span class="hljs-comment">// then</span><span class="hljs-comment">// setTimeout</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-comment">// console.log(&#x27;2&#x27;);</span>    process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;3&#x27;</span>);    &#125;)    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;        <span class="hljs-comment">// console.log(&#x27;4&#x27;);</span>        resolve();    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;5&#x27;</span>)    &#125;)&#125;)process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;6&#x27;</span>);&#125;)<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;7&#x27;</span>);    resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;8&#x27;</span>)&#125;)<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;    process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;10&#x27;</span>);    &#125;)    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>&#123;        resolve();    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;12&#x27;</span>)    &#125;)&#125;)</code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>) &#125;,<span class="hljs-number">0</span>)<span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>) &#125;)<span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>) <span class="hljs-comment">// 3 2</span><span class="hljs-comment">// 1</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>) &#125;,<span class="hljs-number">0</span>)<span class="hljs-keyword">let</span> a=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)    resolve()&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>) &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;   <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>) &#125;)<span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>) <span class="hljs-comment">// 2 5 3 4</span><span class="hljs-comment">// 1</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> &#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>)  resolve()  &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>)  &#125;)  a.then(<span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>)  &#125;)  a.then(<span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>)  &#125;)<span class="hljs-comment">// 2 5 3 4</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>)    resolve()&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then11&quot;</span>)    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>)        resolve()    &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then21&quot;</span>)    &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then23&quot;</span>)     &#125;)&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then12&quot;</span>)&#125;)<span class="hljs-comment">// promise1,then11,promise2,then21,then12,then23</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>)    resolve()&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then11&quot;</span>)     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>)        resolve()    &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then21&quot;</span>)     &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then23&quot;</span>)     &#125;)&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then12&quot;</span>)  &#125;)<span class="hljs-comment">// promise1 then11  promise2 then21 then12  then23</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>)      resolve()&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then11&quot;</span>)      <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>)          resolve()    &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then21&quot;</span>)      &#125;).then(<span class="hljs-function">()=&gt;</span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then23&quot;</span>)      &#125;)&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then12&quot;</span>)  &#125;)<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise3&quot;</span>)      resolve()&#125;).then(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then31&quot;</span>)  &#125;)<span class="hljs-comment">//promise1 promise3 then11 promise2 then31 then21 then12 then23</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;async1 start&quot;</span>);    <span class="hljs-keyword">await</span>  async2();    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;async1 end&quot;</span>);&#125;<span class="hljs-keyword">async</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async2</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&#x27;async2&#x27;</span>);&#125;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;script start&quot;</span>);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;settimeout&quot;</span>);&#125;,<span class="hljs-number">0</span>);async1();<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>);    resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>);&#125;);<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;script end&#x27;</span>);<span class="hljs-comment">// script start,async1 start,async2,promise1,script end,async1 end,promise2</span><span class="hljs-comment">// settimeout</span></code></pre></div></li><li><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;async1 start&quot;</span>);    <span class="hljs-keyword">await</span>  async2();    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;async1 end&quot;</span>);&#125;<span class="hljs-keyword">async</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async2</span>(<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">&#x27;async2&#x27;</span>);&#125;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;script start&quot;</span>);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;settimeout&quot;</span>);&#125;);async1()<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>);    resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>);&#125;);setImmediate(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;setImmediate&quot;</span>)&#125;)process.nextTick(<span class="hljs-function">()=&gt;</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;process&quot;</span>)&#125;)<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;script end&#x27;</span>); <span class="hljs-comment">//script start,async1 start,async2,promise1,script end,process,async1 end,promise2</span><span class="hljs-comment">//sttimeout,setImmediate</span></code></pre></div></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsé¢è¯•é¢˜é›†</title>
    <link href="/2021/04/13/js%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/"/>
    <url>/2021/04/13/js%E9%9D%A2%E8%AF%95%E9%A2%98%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<ul><li>å‘ setTimeout ä¼ å‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">func1</span>(<span class="hljs-params">name</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    alert(name + <span class="hljs-string">&quot;æœ€å¸…&quot;</span>);  &#125;;&#125;<span class="hljs-keyword">var</span> n1 = func1(<span class="hljs-string">&quot;åˆ˜å¾·å&quot;</span>);<span class="hljs-built_in">setTimeout</span>(n1, <span class="hljs-number">1000</span>);<span class="hljs-comment">//ä½¿ç”¨setTimeoutç¬¬ä¸‰ä¸ªå‚æ•°</span><span class="hljs-built_in">setTimeout</span>(  <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>&#123;    alert(name);  &#125;,  <span class="hljs-number">2000</span>,  <span class="hljs-string">&quot;å‘¨æ°ä¼¦&quot;</span>);<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(i);  &#125;, i * <span class="hljs-number">1000</span>);&#125; <span class="hljs-comment">// æ¯ä¸€ç§’é’Ÿè¾“å‡ºä¸€ä¸ª6</span><span class="hljs-comment">// 6 6 6 6 6</span><span class="hljs-comment">//</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(i);  &#125;, i * <span class="hljs-number">1000</span>);&#125; <span class="hljs-comment">// letåˆ›å»ºå—çº§ä½œç”¨åŸŸ</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  <span class="hljs-built_in">setTimeout</span>(    <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) </span>&#123;      <span class="hljs-built_in">console</span>.log(j);    &#125;,    i * <span class="hljs-number">1000</span>,    i  );&#125; <span class="hljs-comment">//ä½¿ç”¨setTimeoutç¬¬ä¸‰ä¸ªå‚æ•°</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">7</span>; i++) &#123;  (<span class="hljs-function">(<span class="hljs-params">j</span>) =&gt;</span> &#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-built_in">console</span>.log(j);    &#125;, <span class="hljs-number">1000</span> * j);  &#125;)(i);&#125;<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;setTimeout&quot;</span>);&#125;);<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promishe&quot;</span>);&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;then&quot;</span>);&#125;);<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;console&quot;</span>);<span class="hljs-comment">//æ‰§è¡Œç»“æœ</span><span class="hljs-comment">//promise</span><span class="hljs-comment">//console</span><span class="hljs-comment">//then</span><span class="hljs-comment">//setTimeout</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;1&quot;</span>);&#125;);<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span>);  resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;3&quot;</span>);&#125;);<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;4&quot;</span>);<span class="hljs-comment">//2</span><span class="hljs-comment">//4</span><span class="hljs-comment">//3</span><span class="hljs-comment">//1</span><span class="hljs-comment">//thenæ˜¯Promiseçš„å¾®ä»»åŠ¡,new Promise</span></code></pre></div><ul><li>instance of</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">instance_of</span>(<span class="hljs-params">l, r</span>) </span>&#123;  <span class="hljs-keyword">let</span> r = r.prototype;  <span class="hljs-keyword">let</span> l = <span class="hljs-built_in">Object</span>.getPrototypeOf(l);  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;    <span class="hljs-keyword">if</span> (l === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">if</span> (o === l) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    l = <span class="hljs-built_in">Object</span>.getPrototypeOf(l); <span class="hljs-comment">// ä¸€ç›´åˆ°æœ‰ç»“æœreturn</span>  &#125;&#125;</code></pre></div><ul><li>æ‰‹å†™ new<br>new æ“ä½œ:<ul><li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li><li>å°†ç©ºå¯¹è±¡è¿æ¥ä¸Šæ„é€ å‡½æ•°çš„åŸå‹</li><li>å°† this æŒ‡å‘æ–°å¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°</li><li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å› this</li></ul></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_new</span>(<span class="hljs-params">func, ...args</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> func !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;first argument must be a function&quot;</span>);  &#125;  <span class="hljs-keyword">const</span> obj = <span class="hljs-built_in">Object</span>.create(func.prototype);  <span class="hljs-comment">//Object.create(proto)ç­‰æ•ˆäº</span>  <span class="hljs-comment">//let O = &#123;&#125;</span>  <span class="hljs-comment">//O.__proto__ = proto</span>  <span class="hljs-comment">//return O</span>  <span class="hljs-keyword">const</span> res = func.apply(obj, args);  <span class="hljs-keyword">if</span> (res !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> res === <span class="hljs-string">&quot;function&quot;</span> || <span class="hljs-keyword">typeof</span> res === <span class="hljs-string">&quot;object&quot;</span>)) &#123;    <span class="hljs-keyword">return</span> res;  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-keyword">return</span> obj;  &#125;&#125;<span class="hljs-comment">//or</span><span class="hljs-keyword">const</span> isComplexType = <span class="hljs-function">(<span class="hljs-params">func</span>) =&gt;</span>  (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;object&quot;</span> || <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;function&quot;</span>) &amp;&amp; obj !== <span class="hljs-literal">null</span>;<span class="hljs-keyword">const</span> _new = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">func, ...args</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> func !== <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">throw</span> <span class="hljs-string">&quot;err&quot;</span>;  <span class="hljs-keyword">const</span> instance = <span class="hljs-built_in">Object</span>.create(func.prototype);  <span class="hljs-keyword">const</span> res = func.apply(instance, args);  <span class="hljs-keyword">return</span> isComplexType(res) ? res : instance;&#125;;</code></pre></div><ul><li>å®ç°ä¸€ä¸ªObject.create<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-built_in">Object</span>._create = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">proto,propertyObj</span>)</span>&#123;  <span class="hljs-comment">// propertyObj</span>  <span class="hljs-comment">// è¦å®šä¹‰å…¶å¯æšä¸¾å±æ€§æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦çš„å¯¹è±¡</span>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">&#x27;function&#x27;</span> || <span class="hljs-keyword">typeof</span> proto !== <span class="hljs-string">&#x27;object&#x27;</span>)&#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(proto+<span class="hljs-string">&#x27;should be an object&#x27;</span>)  &#125;  <span class="hljs-keyword">if</span>(propertyObj &amp;&amp; (<span class="hljs-keyword">typeof</span> propertyObj === <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> propertyObj !== <span class="hljs-string">&#x27;object&#x27;</span>))&#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&#x27;cant convert null to object&#x27;</span>)  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Fn</span>(<span class="hljs-params"></span>)</span>&#123;&#125;  Fn.prototype = proto  <span class="hljs-keyword">const</span> newObj = <span class="hljs-keyword">new</span> Fn()  <span class="hljs-keyword">if</span>(propertyObj !== <span class="hljs-literal">undefined</span>)&#123;    <span class="hljs-built_in">Object</span>.definedProperty(newObj,propertyObj)  &#125;  <span class="hljs-keyword">if</span>(proto === <span class="hljs-literal">null</span>)&#123;    newObj.__proto__ = <span class="hljs-literal">null</span>  &#125;  <span class="hljs-keyword">return</span> newObj&#125;)</code></pre></div></li></ul><ul><li>æ‰‹å†™é˜²æŠ–/èŠ‚æµ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// é˜²æŠ–</span><span class="hljs-comment">// å¤šæ¬¡è§¦å‘æœ€åä¸€æ¬¡æ‰§è¡Œ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debounce</span>(<span class="hljs-params">func,wait,immediate = <span class="hljs-literal">true</span>,...args1</span>)</span>&#123;  <span class="hljs-comment">// æœ‰ç«‹å³æ‰§è¡Œé€‰é¡¹</span>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> fn !== <span class="hljs-string">&#x27;function&#x27;</span> ï½œï½œ <span class="hljs-keyword">typeof</span> delay !== <span class="hljs-string">&#x27;number&#x27;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span> (<span class="hljs-string">&#x27;bad args&#x27;</span>)  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>  <span class="hljs-keyword">const</span> _debounce = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">...args2</span>)</span>&#123;    <span class="hljs-keyword">if</span>(timer)&#123;      <span class="hljs-built_in">clearTimeout</span>(timer)      timer = <span class="hljs-literal">null</span>    &#125;    <span class="hljs-keyword">if</span>(immediate &amp;&amp; !timer)&#123;      fn.apply(<span class="hljs-built_in">this</span>,[...args1,...args2])      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-literal">null</span>,delay)    &#125;<span class="hljs-keyword">else</span>&#123;      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;        fn.apply(<span class="hljs-built_in">this</span>,args)        <span class="hljs-built_in">clearTimeout</span>(timeout)        timer = <span class="hljs-literal">null</span>      &#125;,delay)    &#125;  &#125;  _debounce.cancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">clearTimeout</span>(timer)    timer = <span class="hljs-literal">null</span>  &#125;  <span class="hljs-keyword">return</span> _debounce&#125;<span class="hljs-comment">// èŠ‚æµ</span><span class="hljs-comment">// è¿ç»­è§¦å‘é™åˆ¶å®šæ—¶é—´éš”æ‰§è¡Œ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">throttle</span>(<span class="hljs-params">func, wait, tail,...args1</span>) </span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> fn !== <span class="hljs-string">&#x27;function&#x27;</span> ï½œï½œ <span class="hljs-keyword">typeof</span> delay !== <span class="hljs-string">&#x27;number&#x27;</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span> (<span class="hljs-string">&#x27;bad args&#x27;</span>)  <span class="hljs-comment">// tail = true waitç»“æŸåæ‰§è¡Œ</span>  <span class="hljs-comment">// tail = false æ»¡è¶³æ¡ä»¶ç«‹å³æ‰§è¡Œ</span>  <span class="hljs-keyword">let</span> timeout,pre = <span class="hljs-number">0</span>  <span class="hljs-keyword">const</span> _throttle = <span class="hljs-function">(<span class="hljs-params">...args2</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(tail)&#123;      <span class="hljs-keyword">if</span>(timeout) <span class="hljs-keyword">return</span>      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;        func.apply(<span class="hljs-built_in">this</span>,[...args1,...args2])        <span class="hljs-built_in">clearTimeout</span>(timeout)        timeout = <span class="hljs-literal">null</span>      &#125;,wait)    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-keyword">let</span> now = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()      <span class="hljs-keyword">if</span>(now-pre&gt;wait)&#123;        func.apply(<span class="hljs-built_in">this</span>,[...args1,...args2])        pre = now      &#125;    &#125;  &#125;  _throttle.cancel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">clearTimeout</span>(timeout)    timeout = <span class="hljs-literal">null</span>  &#125;  <span class="hljs-keyword">return</span> _throttle&#125;<span class="hljs-keyword">const</span> f1 = throttle(<span class="hljs-function">()=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>),<span class="hljs-number">3000</span>,<span class="hljs-literal">false</span>)<span class="hljs-built_in">setInterval</span>(f1, <span class="hljs-number">1000</span>);</code></pre></div><ul><li>è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>];<span class="hljs-comment">//reduce</span><span class="hljs-keyword">let</span> countArr = arr.reduce(<span class="hljs-function">(<span class="hljs-params">obj, i</span>) =&gt;</span> &#123;  <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> obj) &#123;    obj[i]++;  &#125; <span class="hljs-keyword">else</span> &#123;    obj[i] = <span class="hljs-number">1</span>;  &#125;  <span class="hljs-keyword">return</span> obj;&#125;, &#123;&#125;);<span class="hljs-comment">// &#123; &#x27;1&#x27;: 2, &#x27;2&#x27;: 2, &#x27;3&#x27;: 2, &#x27;4&#x27;: 4 &#125;</span><span class="hljs-comment">// å¾ªç¯</span><span class="hljs-keyword">let</span> obj = &#123;&#125;;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> arr) &#123;  <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> obj) &#123;    obj[i]++;  &#125; <span class="hljs-keyword">else</span> &#123;    obj[i] = <span class="hljs-number">1</span>;  &#125;&#125;</code></pre></div><ul><li>call/bind/apply åŒºåˆ«</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> a = &#123;  sing: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arg1, arg2</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;ç¬¨å°å­©&quot;</span> + <span class="hljs-built_in">this</span>.name);    <span class="hljs-built_in">console</span>.log(arg1 + arg2);  &#125;,&#125;;<span class="hljs-keyword">const</span> b = &#123;  name: <span class="hljs-string">&quot;åˆ˜å¾·å&quot;</span>,&#125;;<span class="hljs-keyword">const</span> c = &#123;  name: <span class="hljs-string">&quot;å¼ å­¦å‹&quot;</span>,&#125;;a.sing();<span class="hljs-comment">//ç¬¨å°å­©undefined</span><span class="hljs-comment">// NaN</span>a.sing.call(b, <span class="hljs-number">666</span>, <span class="hljs-number">888</span>);<span class="hljs-comment">// callåä¸€ä¸ªä¸€ä¸ªä¼ args</span><span class="hljs-comment">// ç¬¨å°å­©åˆ˜å¾·å</span><span class="hljs-comment">// 1554</span>a.sing.apply(c, [<span class="hljs-number">666</span>, <span class="hljs-number">888</span>]);<span class="hljs-comment">// applyç¬¬äºŒä¸ªå‚æ•°[]</span><span class="hljs-comment">// ç¬¨å°å­©åˆ˜å¾·å</span><span class="hljs-comment">// 1554</span><span class="hljs-keyword">let</span> d = a.sing.bind(b, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<span class="hljs-comment">// bindè¿”å›å‡½æ•°ä¸æ‰§è¡Œï¼Œä¼ å‚æ•°æ–¹å¼å’Œcallä¸€æ ·</span>d();<span class="hljs-comment">//callæ˜¯applyçš„è¯­æ³•ç³–</span></code></pre></div><ul><li>é™åˆ¶å¹¶å‘</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// çº¿ç¨‹æ± </span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">asyncPool</span>(<span class="hljs-params">limit, arr, func</span>) </span>&#123;  <span class="hljs-keyword">let</span> i = o;  <span class="hljs-keyword">const</span> ret = []; <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡</span>  <span class="hljs-keyword">const</span> executing = []; <span class="hljs-comment">// è¿è¡Œä¸­</span>  <span class="hljs-keyword">const</span> enqueue = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-keyword">if</span> (array.length === <span class="hljs-number">0</span>) &#123;      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();    &#125;    <span class="hljs-keyword">const</span> item = arr[i++];    <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> func(item));    ret.push(p);    <span class="hljs-comment">//</span>    executing.push(e);    <span class="hljs-comment">//</span>    <span class="hljs-keyword">const</span> e = p.then(<span class="hljs-function">() =&gt;</span> executing.splice(executing.indexOf(e), <span class="hljs-number">1</span>)); <span class="hljs-comment">// è‡ªå·±resolveåä»å¹¶å‘æ± ä¸­åˆ é™¤</span>    <span class="hljs-keyword">let</span> r = <span class="hljs-built_in">Promise</span>.resolve();    <span class="hljs-keyword">if</span> (executing.length &gt;= limit) &#123;      r = <span class="hljs-built_in">Promise</span>.race(executing);      <span class="hljs-comment">//ä½¿ç”¨raceï¼Œå¹¶å‘æ± ä¸­åªè¦æœ‰ä¸€ä¸ªpromiseè¿”å›resolveï¼Œåˆ™ç»§ç»­è°ƒç”¨enqueueæ–¹æ³•æ·»åŠ æ–°çš„è¿›å»</span>    &#125;    <span class="hljs-keyword">return</span> r.then(<span class="hljs-function">() =&gt;</span> enqueue());  &#125;;  <span class="hljs-keyword">return</span> enqueue().then(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">Promise</span>.all(ret));&#125;</code></pre></div><ul><li>å®ç°é‡è¯•åŠŸèƒ½</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">retry</span>(<span class="hljs-params">fn, interval, limit</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">attempt</span>(<span class="hljs-params"></span>) </span>&#123;      <span class="hljs-keyword">const</span> p = <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> fn());      p.then(resolve).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;        <span class="hljs-keyword">if</span> (limit-- &lt;= <span class="hljs-number">1</span>) &#123;          reject(<span class="hljs-string">&quot;run out of limit&quot;</span>);        &#125; <span class="hljs-keyword">else</span> &#123;          <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;            attempt();            <span class="hljs-built_in">clearTimeout</span>(timer);          &#125;, interval);        &#125;      &#125;);    &#125;    attempt();  &#125;);&#125;</code></pre></div><ul><li>æµ…æ‹·è´</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//</span><span class="hljs-built_in">Object</span>.assign();<span class="hljs-comment">//å±•å¼€è¿ç®—ç¬¦</span><span class="hljs-keyword">let</span> a = &#123;  age: <span class="hljs-number">1</span>,&#125;;<span class="hljs-keyword">let</span> b = &#123; ...a &#125;;a.age = <span class="hljs-number">2</span>;<span class="hljs-built_in">console</span>.log(b.age); <span class="hljs-comment">// 1</span>**åªä¼šå¯¹å¯¹è±¡çš„è¡¨å±‚å±æ€§è¿›è¡Œæ‹·è´ï¼Œé‡åˆ°å¤æ‚ç±»å‹æ—¶åªæ˜¯æ‹·è´äº†åœ°å€**</code></pre></div><ul><li>æ·±æ‹·è´</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">JSON</span>.stringify(source))<span class="hljs-comment">//å…ˆJSON.stringifyè½¬æˆå­—ç¬¦ä¸²ï¼Œå†JSON.parseæŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ–°çš„å¯¹è±¡</span>**é‡åˆ°<span class="hljs-built_in">Symbol</span>å’Œå‡½æ•°åˆ™æŠ¥é”™**</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å®ç°</span><span class="hljs-keyword">const</span> isObject = <span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> obj !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;object&quot;</span>;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepClone</span>(<span class="hljs-params">source, map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()</span>) </span>&#123;  <span class="hljs-comment">//WeakMap é¿å…å¾ªç¯å¼•ç”¨çˆ†æ ˆ</span>  <span class="hljs-comment">// obj.o1 = obj  // boom</span>  <span class="hljs-keyword">if</span> (!isObject(source)) <span class="hljs-keyword">return</span> source  <span class="hljs-keyword">if</span> (map.has(source)) <span class="hljs-keyword">return</span> map.get(source);  <span class="hljs-keyword">const</span> _constructor = source.constructor;  <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/RegExp|Date/</span>.test(_constructor))&#123;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> _constructor(source)  &#125;  <span class="hljs-comment">// æ­£åˆ™å’Œæ—¥æœŸ</span>  <span class="hljs-keyword">const</span> _new_ =    _constructor === <span class="hljs-built_in">Array</span> ? [] : &#123;&#125;  map.set(source, newObj);  <span class="hljs-built_in">Reflect</span>.ownKeys(source).forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> &#123;    <span class="hljs-comment">// Reflect.ownKeys æ–¹æ³•è¿”å›ä¸€ä¸ªç”±ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å±æ€§é”®ç»„æˆçš„æ•°ç»„ã€‚å®ƒçš„è¿”å›å€¼ç­‰åŒäºObject.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))ã€‚</span>    newObj[key] = deepClone(source[key], map);  &#125;);  <span class="hljs-keyword">return</span> _new;&#125;</code></pre></div><ul><li>forâ€¦in /forâ€¦of</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype.method = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.length);&#125;;<span class="hljs-keyword">var</span> myArray = [<span class="hljs-string">&quot;1&quot;</span>, &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span> &#125;, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>];myArray.name = <span class="hljs-string">&quot;æ•°ç»„&quot;</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> value <span class="hljs-keyword">of</span> myArray) &#123;  <span class="hljs-built_in">console</span>.log(value);&#125;<span class="hljs-comment">//1 &#123;name: &quot;mmm&quot;&#125; 3 4 5 6 7</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> index <span class="hljs-keyword">in</span> myArray) &#123;  <span class="hljs-built_in">console</span>.log(myArray[index]);&#125;<span class="hljs-comment">//1 2 3 4 5 6 7 æ•°ç»„ Æ’ () &#123;</span><span class="hljs-comment">//  console.log(this.length);</span><span class="hljs-comment">//&#125;</span></code></pre></div><ul><li>é˜»æ­¢å†’æ³¡å’Œé»˜è®¤äº‹ä»¶</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopBubble</span>(<span class="hljs-params">e</span>) </span>&#123;  <span class="hljs-keyword">if</span> (e &amp;&amp; e.stopPropagation) &#123;    e.stopPropagation();  &#125; <span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.event.cancelBubble = <span class="hljs-literal">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stopDefault</span>(<span class="hljs-params">e</span>) </span>&#123;  <span class="hljs-keyword">if</span> (e &amp;&amp; e.preventDefault) e.preventDefault();  <span class="hljs-keyword">else</span> <span class="hljs-built_in">window</span>.event.returnValue = <span class="hljs-literal">false</span>;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;</code></pre></div><ul><li>let/const/var</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// JavaScript å˜é‡æå‡ varå£°æ˜ä¼šæå‰ï¼ˆå£°æ˜ä¸æ˜¯èµ‹å€¼ï¼‰</span><span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// undefined</span><span class="hljs-built_in">console</span>.log(b); <span class="hljs-comment">// æŠ¥é”™</span><span class="hljs-built_in">console</span>.log(c); <span class="hljs-comment">// æŠ¥é”™</span><span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;<span class="hljs-keyword">let</span> b = <span class="hljs-number">2</span>;<span class="hljs-keyword">const</span> c = <span class="hljs-number">3</span>;<span class="hljs-built_in">console</span>.log(a); <span class="hljs-comment">// 1</span></code></pre></div><ul><li>æ‰‹å†™ call/apply/bind</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Function</span>.prototype._call = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;must call a function&quot;</span>);  context = context || <span class="hljs-built_in">window</span>;  <span class="hljs-keyword">const</span> caller = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;caller&quot;</span>);  context[caller] = <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">let</span> result = context[caller](...args);  <span class="hljs-keyword">delete</span> context[caller];  <span class="hljs-keyword">return</span> result;&#125;;<span class="hljs-built_in">Function</span>.prototype._apply = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, args</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;must apply a function&quot;</span>);  context = context || <span class="hljs-built_in">window</span>;  <span class="hljs-keyword">const</span> caller = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;caller&quot;</span>);  context[caller] = <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">let</span> result = context[caller](...args);  <span class="hljs-keyword">delete</span> context[caller];  <span class="hljs-keyword">return</span> result;&#125;;<span class="hljs-comment">// è¿”å›ä¸€ä¸ªåŸå‡½æ•°çš„æ‹·è´ï¼Œå¹¶æ‹¥æœ‰æŒ‡å®šçš„thiså€¼å’Œåˆå§‹å‚æ•°ã€‚</span><span class="hljs-built_in">Function</span>.prototype._bind = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args1</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">this</span> !== <span class="hljs-string">&quot;function&quot;</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;must bind a function&quot;</span>);  <span class="hljs-keyword">const</span> originFn = <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">const</span> notBFn = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;&#125;;  <span class="hljs-keyword">const</span> boundFn = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args2</span>) </span>&#123;    <span class="hljs-keyword">return</span> originFn.apply(<span class="hljs-built_in">this</span> <span class="hljs-keyword">instanceof</span> originFn ? <span class="hljs-built_in">this</span> : context, [      <span class="hljs-comment">// å¦‚æœç»‘å®šå‡½æ•°è¢«newè°ƒç”¨</span>      <span class="hljs-comment">// åˆ™thisæŒ‡å‘new objçš„this</span>      ...args1,      ...args2,    ]);  &#125;;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.prototype) &#123;    notBFn.prototype = <span class="hljs-built_in">this</span>.prototype;  &#125;  boundFn.prototype = <span class="hljs-keyword">new</span> notBFn();  <span class="hljs-comment">// boundFn.prototype = Object.create(this.prototype)</span>  <span class="hljs-comment">// ä½¿ç”¨notBFné—´æ¥è¿æ¥boundFnå’ŒoriginFnåŸå‹é“¾</span>  <span class="hljs-keyword">return</span> boundFn;&#125;;</code></pre></div><ul><li>æ‰‹åŠ¨å®ç°ä¸€ä¸ªç»§æ‰¿</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">///////æœ€å®Œç¾åŠæ³•</span><span class="hljs-comment">// 1.call</span><span class="hljs-comment">// 2.Object.create</span><span class="hljs-comment">// 3.åŸå‹çš„æ„é€ å™¨æŒ‡å‘è‡ªå·±</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Person</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">this</span>.type = <span class="hljs-string">&quot;human&quot;</span>;  <span class="hljs-built_in">this</span>.eat = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;æˆ‘è‚šå­é¥¿äº†&quot;</span>);  &#125;;&#125;Person.prototype.live = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;åƒé¥­ç¡è§‰æ‰“è±†è±†&quot;</span>);&#125;;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>) </span>&#123;  Person.call(<span class="hljs-built_in">this</span>);  <span class="hljs-built_in">this</span>.name = name;&#125;Avenger.prototype = <span class="hljs-built_in">Object</span>.create(Person.prototype);Avenger.prototype.constructor = Avenger;<span class="hljs-keyword">let</span> hulk = <span class="hljs-keyword">new</span> Avenger(<span class="hljs-string">&quot;HULK&quot;</span>);hulk.live();<span class="hljs-comment">// åƒé¥­ç¡è§‰æ‰“è±†è±†</span>å…¶ä»–æ–¹æ³•ï¼š<span class="hljs-comment">// - å€Ÿç”¨æ„é€ å‡½æ•°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>)</span>&#123;  Person.call(<span class="hljs-built_in">this</span>,name)  <span class="hljs-built_in">this</span>.name = name&#125;<span class="hljs-comment">// åªèƒ½ç»§æ‰¿æ„é€ å‡½æ•°ä¸Šå±æ€§</span><span class="hljs-comment">// 2. åŸå‹ç»§æ‰¿</span>Avenger.prototype = <span class="hljs-keyword">new</span> Person()<span class="hljs-comment">// å­ç±»å®ä¾‹å…±äº«åŸå‹ä¸­çš„å¼•ç”¨ç±»å‹æ•°æ®</span><span class="hljs-comment">// ä¸èƒ½ä¼ å‚</span><span class="hljs-comment">// 3.ç»„åˆç»§æ‰¿ 1+2</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>)</span>&#123;  Person.call(<span class="hljs-built_in">this</span>,name)  <span class="hljs-built_in">this</span>.name = name&#125;Avenger.prototype = <span class="hljs-keyword">new</span> Person()<span class="hljs-comment">// å®ä¾‹æ„é€ å‡½æ•°ä¼šæŒ‡å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°</span><span class="hljs-comment">// çˆ¶ç±»æ„é€ å‡½æ•°æ‰§è¡Œå¤šæ¬¡</span><span class="hljs-comment">// 4. åŸå‹å¼ç»§æ‰¿</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>)</span>&#123;    Person.call(<span class="hljs-built_in">this</span>,name)    <span class="hljs-built_in">this</span>.name = name&#125;Avenger.prototype = Person.prototype<span class="hljs-comment">// å­ç±»å®ä¾‹æ„é€ å‡½æ•°ä¼šæŒ‡å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°</span><span class="hljs-comment">// åˆ†ä¸æ¸…å®ä¾‹æ˜¯è°æ„é€ çš„</span><span class="hljs-comment">// 5. å¯„ç”Ÿç»§æ‰¿</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>)</span>&#123;    Person.call(<span class="hljs-built_in">this</span>,name)    <span class="hljs-built_in">this</span>.name = name&#125;Avenger.prototype = <span class="hljs-built_in">Object</span>.create(Person.prototype)<span class="hljs-comment">// Object.create() åˆ›é€ çš„ä¸­é—´å¯¹è±¡çš„åŸå‹å¯¹è±¡å°±æ˜¯ä¼ å…¥çš„å‚æ•°</span><span class="hljs-comment">// æ­¤æ—¶ä¸­é—´å¯¹è±¡çš„åŸå‹ä¹Ÿå°±æ˜¯çˆ¶ç±»çš„åŸå‹</span><span class="hljs-comment">// ä¸­é—´å¯¹è±¡é€šè¿‡ç±»ä¼¼åœ¨åŸå‹é“¾ä¸Šâ€œåŠ ä¸€æ®µâ€çš„æ–¹å¼æŠŠçˆ¶å­ç±»çš„æ„é€ å™¨éš”å¼€</span><span class="hljs-comment">// 6. å¯„ç”Ÿç»„åˆ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Avenger</span>(<span class="hljs-params">name</span>)</span>&#123;    Person.call(<span class="hljs-built_in">this</span>,name)    <span class="hljs-built_in">this</span>.name = name&#125;Avenger.prototype = <span class="hljs-built_in">Object</span>.create(Person.prototype)Avenger.prototype.constructor = Avenger<span class="hljs-comment">//   å†æŠŠæ„é€ å™¨æŒ‡å‘è‡ªå·±ï¼Œå®Œæˆè‡ªå·±çš„é“¾</span></code></pre></div><ul><li>æ‰‹åŠ¨å®ç°ä¸€ä¸ªè¿­ä»£å™¨</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createIterator</span>(<span class="hljs-params">array</span>) </span>&#123;  <span class="hljs-keyword">let</span> nextIndex = <span class="hljs-number">0</span>;  <span class="hljs-keyword">return</span> &#123;    next: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;      <span class="hljs-keyword">return</span> nextIndex &lt; array.length        ? &#123; <span class="hljs-attr">value</span>: array[nextIndex++], <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> &#125;        : &#123; <span class="hljs-attr">value</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> &#125;;    &#125;,    [<span class="hljs-built_in">Symbol</span>.iterator]: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;    &#125;,  &#125;;&#125;<span class="hljs-keyword">var</span> i1 = createIterator([<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">21</span>, <span class="hljs-number">6</span>]);<span class="hljs-built_in">console</span>.log(i1.next()); <span class="hljs-comment">// &#123;value:4,done:false&#125;</span></code></pre></div><ul><li><p>for å¾ªç¯å®ç°éå†æ–¹æ³•</p><ul><li><p>for å¾ªç¯å®ç° forEach</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._forEach = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  thisArg = thisArg || <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.length; i++) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(i)) &#123;      callback.call(thisArg, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>);    &#125;  &#125;&#125;;</code></pre></div></li><li><p>for å¾ªç¯å®ç° map</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._map = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  <span class="hljs-keyword">const</span> result = [];  thisArg = thisArg || <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.length; i++) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(i)) &#123;      result[i] = callback.call(thisArg, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>);    &#125;  &#125;  <span class="hljs-keyword">return</span> result;&#125;;</code></pre></div></li><li><p>for å¾ªç¯å®ç° filter</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._filter_ = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  <span class="hljs-keyword">const</span> result = [];  thisArg = thisArg || <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.length; i++) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(i)) &#123;      <span class="hljs-keyword">if</span> (callback.call(thisArg, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>)) &#123;        result.push(<span class="hljs-built_in">this</span>[i]);      &#125;    &#125;  &#125;  <span class="hljs-keyword">return</span> result;&#125;;</code></pre></div></li><li><p>for å¾ªç¯å®ç° some</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._some = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  thisArg = thisArg || <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.length; i++) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(i)) &#123;      <span class="hljs-keyword">if</span> (callback.call(thisArg, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>)) &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;      &#125;    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;&#125;;</code></pre></div></li><li><p>for å¾ªç¯å®ç° every</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._every = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  thisArg = thisArg || <span class="hljs-built_in">this</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.length; i++) &#123;    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(i)) &#123;      <span class="hljs-keyword">if</span> (!callback.call(thisArg, <span class="hljs-built_in">this</span>[i], i, <span class="hljs-built_in">this</span>)) &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;      &#125;    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;&#125;;</code></pre></div></li><li><p>for å¾ªç¯å®ç° reduce</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._reduce = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, initialValue</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  <span class="hljs-keyword">let</span> res;  <span class="hljs-keyword">let</span> initialIndex = <span class="hljs-number">0</span>;  <span class="hljs-keyword">if</span> (!initialValue) &#123;    <span class="hljs-keyword">for</span> (; initialIndex &lt; <span class="hljs-built_in">this</span>.length; initialIndex++) &#123;      <span class="hljs-comment">// æœªæŒ‡å®šåˆå§‹å€¼åˆ™è‡ªè¡ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªéç©ºä¸‹æ ‡</span>      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.hasOwnProperty(initialIndex)) &#123;        res = <span class="hljs-built_in">this</span>[i];        <span class="hljs-keyword">break</span>;      &#125;    &#125;  &#125; <span class="hljs-keyword">else</span> &#123;    res = initialValue;  &#125;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = initialIndex + <span class="hljs-number">1</span>; j &lt; <span class="hljs-built_in">this</span>.length; j++) &#123;    res = callback.call(<span class="hljs-literal">null</span>, res, <span class="hljs-built_in">this</span>[j], j, <span class="hljs-built_in">this</span>);  &#125;  <span class="hljs-keyword">return</span> res;&#125;;</code></pre></div></li></ul></li><li><p>reduce å®ç°éå†æ–¹æ³•</p><ul><li>reduce å®ç° forEach</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._forEach = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback, thisArg</span>) </span>&#123;  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span> == <span class="hljs-literal">null</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;this is null or undefined&quot;</span>);  &#125;  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">&quot;function&quot;</span>) &#123;    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(callback + <span class="hljs-string">&quot;must be a function&quot;</span>);  &#125;  <span class="hljs-built_in">this</span>.reduce(<span class="hljs-function">(<span class="hljs-params">pre, acc, index</span>) =&gt;</span> &#123;    <span class="hljs-keyword">return</span> [...pre, callback.call(thisArg, acc, index, <span class="hljs-built_in">this</span>)];  &#125;, []);&#125;;</code></pre></div><ul><li>reduce å®ç° map</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//åŠ ä¸Šreturn</span></code></pre></div><ul><li>reduce å®ç° filter</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Array</span>.prototype._filter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">callback,thisArg</span>)</span>&#123;  ...  ...  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.reduce(<span class="hljs-function">(<span class="hljs-params">pre,acc</span>)=&gt;</span>&#123;    <span class="hljs-keyword">return</span> callback.call(thisArg,acc,index,<span class="hljs-built_in">this</span>)?[...pre,cur]:[...pre]  &#125;,[])&#125;</code></pre></div></li><li><p>å®ç° object.assign</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> isComplexType = <span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span>  (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;object&quot;</span> || <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;function&quot;</span>) &amp;&amp; obj !== <span class="hljs-literal">null</span>;<span class="hljs-keyword">const</span> selfAssign = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target, ...source</span>) </span>&#123;  <span class="hljs-keyword">if</span> (!target) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;need assign target&#x27;</span>);  <span class="hljs-keyword">return</span> source.reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (cur == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> acc;    <span class="hljs-keyword">if</span> (!isComplexType(acc)) acc = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>(acc);    <span class="hljs-built_in">Reflect</span>.ownKeys(cur).forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> &#123;      acc[key] = cur[key];    &#125;);    <span class="hljs-keyword">return</span> acc;  &#125;, target);&#125;;</code></pre></div><ul><li>æ‰‹åŠ¨å®ç° typeof</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> selfTypeof = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>&#123;  <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">Object</span>.prototype.toString.call(obj);  <span class="hljs-keyword">return</span> ret.slice(<span class="hljs-number">8</span>, -<span class="hljs-number">1</span>).toLowercase();&#125;;</code></pre></div><ul><li>æ‰‹åŠ¨å®ç° instanceof</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> selfInstanceof = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">left, right</span>) </span>&#123;  <span class="hljs-keyword">let</span> _proto = <span class="hljs-built_in">Object</span>.getPrototypeOf(left);  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;    <span class="hljs-keyword">if</span> (_proto === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">if</span> (_proto === right.prototype) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;    _proto = <span class="hljs-built_in">Object</span>.getPrototypeOf(_proto);  &#125;&#125;;</code></pre></div><ul><li><p>äºŒç»´æ•°ç»„çš„æ‰€æœ‰æ’åˆ—ç»„åˆ</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">let</span> len = arr.length;  <span class="hljs-keyword">if</span> (len &gt;= <span class="hljs-number">2</span>) &#123;    <span class="hljs-keyword">let</span> len1 = arr[<span class="hljs-number">0</span>].length;    <span class="hljs-keyword">let</span> len2 = arr[<span class="hljs-number">1</span>].length;    <span class="hljs-keyword">let</span> lenBoth = len1 * len2;    <span class="hljs-keyword">let</span> items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(lenBoth);    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len1; i++) &#123;      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; len2; j++) &#123;        items[index] = [].concat(arr[<span class="hljs-number">0</span>][i]).concat(arr[<span class="hljs-number">1</span>][j]);        index++;      &#125;    &#125;    <span class="hljs-keyword">let</span> newArr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len - <span class="hljs-number">1</span>);    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt; len; i++) &#123;      newArr[i - <span class="hljs-number">1</span>] = arr[i];    &#125;    newArr[<span class="hljs-number">0</span>] = items;    <span class="hljs-keyword">return</span> exchange(newArr);  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>];  &#125;&#125;</code></pre></div></li><li><p>å±æ€§åè¡¨è¾¾å¼</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> a = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">10</span> &#125;;<span class="hljs-keyword">let</span> b = &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">10</span> &#125;;<span class="hljs-keyword">let</span> obj = &#123;  a: <span class="hljs-number">10</span>,&#125;;obj[b] = <span class="hljs-number">20</span>;<span class="hljs-built_in">console</span>.log(obj[a]); <span class="hljs-comment">// 20</span><span class="hljs-comment">//obj.bå’Œobj[b]çš„ä¸åŒ</span>obj[éœ€è¦æ˜¯å·²ç»å£°æ˜çš„å˜é‡å]obj.åˆ™ä¸å—é™åˆ¶obj.c = <span class="hljs-number">20</span> ===&gt; obj:&#123;<span class="hljs-attr">c</span>:<span class="hljs-number">20</span>,<span class="hljs-attr">a</span>:<span class="hljs-number">10</span>&#125;obj[c] <span class="hljs-comment">//æŠ¥é”™</span><span class="hljs-comment">//åŸé¢˜ä¸­obj[b]åæ‰“å°å¾—åˆ°</span>obj = &#123;  a:<span class="hljs-number">10</span>,  <span class="hljs-string">&#x27;[object:object]&#x27;</span> : <span class="hljs-number">20</span>  <span class="hljs-comment">//b = &#123; b: 10 &#125; ===&gt; &#x27;[object:object]&#x27;</span>&#125;åå†è®¿é—®obj[a]æ—¶ä¹Ÿå°±æ˜¯è®¿é—®obj[<span class="hljs-string">&#x27;[object:object]&#x27;</span>] = <span class="hljs-number">20</span></code></pre></div><ul><li>this çš„æŒ‡å‘</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;<span class="hljs-keyword">var</span> obj = &#123;  a: <span class="hljs-number">20</span>,  say: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);  &#125;,&#125;;obj.say();<span class="hljs-comment">// æ‰“å°å‡º10çš„æ–¹æ³•</span><span class="hljs-comment">// 1</span><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;<span class="hljs-keyword">var</span> obj = &#123;  a: <span class="hljs-number">20</span>,  say: <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);  &#125;,&#125;;obj.say();<span class="hljs-comment">// 2</span><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;<span class="hljs-keyword">var</span> obj = &#123;  a: <span class="hljs-number">20</span>,  say: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);  &#125;,&#125;;<span class="hljs-keyword">let</span> say = obj.say;say();<span class="hljs-comment">// 3</span><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;<span class="hljs-keyword">var</span> obj = &#123;  a: <span class="hljs-number">20</span>,  say: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.a);  &#125;,&#125;;obj.say.call(<span class="hljs-built_in">this</span>);</code></pre></div><ul><li>js æ‰§è¡Œé¡ºåº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// jsæ‰§è¡Œé¡ºåº</span><span class="hljs-comment">// 1</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;script start&quot;</span>); <span class="hljs-comment">// 1</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;setTimeout&quot;</span>); <span class="hljs-comment">// 4</span>&#125;, <span class="hljs-number">0</span>);<span class="hljs-built_in">Promise</span>.resolve()  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise1&quot;</span>); <span class="hljs-comment">//2</span>  &#125;)  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;promise2&quot;</span>); <span class="hljs-comment">//3</span>  &#125;);<span class="hljs-comment">// 2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;1&quot;</span>); <span class="hljs-comment">//1</span><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span>); <span class="hljs-comment">// 5</span>  process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;3&quot;</span>); <span class="hljs-comment">//7</span>  &#125;);  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;4&quot;</span>); <span class="hljs-comment">//6</span>    resolve();  &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;5&quot;</span>); <span class="hljs-comment">//8</span>  &#125;);&#125;);process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;6&quot;</span>); <span class="hljs-comment">//3</span>&#125;);<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;7&quot;</span>); <span class="hljs-comment">//2</span>  resolve();&#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;8&quot;</span>); <span class="hljs-comment">//4</span>&#125;);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;9&quot;</span>); <span class="hljs-comment">//9</span>  process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;10&quot;</span>); <span class="hljs-comment">//11</span>  &#125;);  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;11&quot;</span>); <span class="hljs-comment">//10</span>    resolve();  &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;12&quot;</span>);  &#125;); <span class="hljs-comment">//12</span>&#125;);<span class="hljs-comment">// 3</span><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>); <span class="hljs-comment">//1</span>  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>); <span class="hljs-comment">//2</span>  &#125;);  <span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;å¼‚æ­¥3&quot;</span>); <span class="hljs-comment">//6</span>  &#125;);  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;åŒæ­¥3&quot;</span>); <span class="hljs-comment">//3</span>&#125;<span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>); <span class="hljs-comment">//5</span>&#125;);<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>); <span class="hljs-comment">//7</span>&#125;);async1();<span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>); <span class="hljs-comment">//4</span></code></pre></div><ul><li>è®¾ç½®æœ€å¤§è¯·æ±‚æ¬¡æ•°çš„è¯·æ±‚å‡½æ•°</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myRequest</span>(<span class="hljs-params">url,body,successCallback,errorCallback,maxCount</span>)</span>&#123;  <span class="hljs-keyword">return</span> fetch(url,body).then(<span class="hljs-function"><span class="hljs-params">response</span>=&gt;</span>successCallback(response)).catch(<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;    <span class="hljs-keyword">if</span>(maxCount&lt;=<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> errorCallback(<span class="hljs-string">&#x27;è¯·æ±‚è¶…æ—¶&#x27;</span>)    <span class="hljs-keyword">return</span> myRequest(url,body,successCallback,errorCallback,--maxCount)  &#125;)&#125;myRequest(<span class="hljs-string">&#x27;http://test/aaa&#x27;</span>,&#123;           method: <span class="hljs-string">&#x27;GET&#x27;</span>,           headers: myHeaders,           mode: <span class="hljs-string">&#x27;cors&#x27;</span>,           cache: <span class="hljs-string">&#x27;default&#x27;</span> &#125;           ,successCallback,errorCallback,<span class="hljs-number">10</span>)&lt;!-- <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myRequest2</span>(<span class="hljs-params">params,successCallback,errorCallback,maxCount</span>)</span>&#123;  <span class="hljs-keyword">return</span> axios(params)  .then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> successCallback(response))&#125;  .catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(maxCount&lt;=<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> errorCallback(<span class="hljs-string">&#x27;è¯·æ±‚è¶…æ—¶&#x27;</span>)    <span class="hljs-keyword">return</span> myRequest2(params,successCallback,errorCallback,--maxCount)  &#125;) --&gt;</code></pre></div><ul><li>js æ‰§è¡Œä¼˜å…ˆçº§</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Foo</span>(<span class="hljs-params"></span>) </span>&#123;  getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);  &#125;;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;&#125;Foo.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">2</span>);&#125;;Foo.prototype.getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">3</span>);&#125;;<span class="hljs-keyword">var</span> getName = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">4</span>);&#125;;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getName</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-number">5</span>);&#125;Foo.getName();getName();Foo().getName();<span class="hljs-comment">// function changeThis()&#123;</span><span class="hljs-comment">//   return this</span><span class="hljs-comment">// &#125;</span><span class="hljs-comment">// changeThis().fn666 = ()=&gt;&#123;</span><span class="hljs-comment">//   console.log(666);</span><span class="hljs-comment">// &#125;</span><span class="hljs-comment">// global.fn666()</span>getName();<span class="hljs-keyword">new</span> Foo.getName();<span class="hljs-keyword">new</span> Foo().getName();<span class="hljs-keyword">new</span> <span class="hljs-keyword">new</span> Foo().getName();</code></pre></div><ul><li>å®ç°ä¸€ä¸ª setTimeout</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setTimeout</span>(<span class="hljs-params">cb, timeout, ...args</span>) </span>&#123;  <span class="hljs-keyword">const</span> start = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();  <span class="hljs-keyword">let</span> timer, now;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loop</span>(<span class="hljs-params"></span>) </span>&#123;    timer = <span class="hljs-built_in">window</span>.requestAnimationFrame(loop);    now = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();    <span class="hljs-keyword">if</span> (now - start &gt;= timeout) &#123;      cb.apply(<span class="hljs-built_in">this</span>, args);      <span class="hljs-built_in">window</span>.cancelAnimationFrame(timer);    &#125;  &#125;  <span class="hljs-built_in">window</span>.requestAnimationFrame(loop);&#125;</code></pre></div><ul><li>ä½¿ç”¨ setTimeout æ¨¡æ‹Ÿ setInterval</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// setInterval çš„é—®é¢˜</span><span class="hljs-comment">// å®šæ—¶å¾€äº‹ä»¶é˜Ÿåˆ—ä¸­æ·»åŠ å›è°ƒå‡½æ•°ï¼Œå¦‚æœä¸»çº¿ç¨‹è¿è¡Œæ—¶é—´è¿‡é•¿åˆ°å¤§é‡å›è°ƒè¶…æ—¶ï¼Œåˆ™æœ‰å¯èƒ½åŒæ—¶æ‰§è¡Œå¤§é‡å¼‚æ­¥å›è°ƒï¼Œè¿èƒŒä½¿ç”¨æ„å›¾</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setInterval</span>(<span class="hljs-params">fn,timeout,...args</span>)</span>&#123;  <span class="hljs-keyword">const</span> controller = &#123;    stop = <span class="hljs-literal">false</span>    <span class="hljs-comment">// æ§åˆ¶å™¨</span>  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">interval</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">if</span>(!controller.stop)&#123;      fn.apply(<span class="hljs-built_in">this</span>,args)      <span class="hljs-built_in">setTimeout</span>(interval,timeout)    &#125;  &#125;  <span class="hljs-built_in">setTimeout</span>(interval,timeout)  <span class="hljs-keyword">return</span> controller&#125;</code></pre></div><ul><li>æ¨¡ç‰ˆå­—ç¬¦ä¸²</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\&#123;\&#123;(w+)\&#125;\&#125;/g</span>;<span class="hljs-keyword">const</span> template = <span class="hljs-string">&quot;æˆ‘æ˜¯&#123;&#123;name&#125;&#125;ï¼Œå¹´é¾„&#123;&#123;age&#125;&#125;ï¼Œæ€§åˆ«&#123;&#123;sex&#125;&#125;&quot;</span>;<span class="hljs-keyword">const</span> data = &#123;  name: <span class="hljs-string">&quot;æ£®ä¸‹ä¸Šå£«&quot;</span>,  age: <span class="hljs-number">18</span>,&#125;;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params">template, data</span>) </span>&#123;  <span class="hljs-keyword">if</span> (reg.test(template)) &#123;    <span class="hljs-keyword">const</span> tem = template.match(reg);    tem.forEach(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> &#123;      <span class="hljs-keyword">const</span> p = key.slice(<span class="hljs-number">2</span>, -<span class="hljs-number">2</span>);      <span class="hljs-comment">// &#123;&#123;xxx&#125;&#125; ==&gt; xxx</span>      template = template.replace(key, data[p]);    &#125;);  &#125;  <span class="hljs-keyword">return</span> template;&#125;</code></pre></div><ul><li>Ajax</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> request = <span class="hljs-function">(<span class="hljs-params">method,url,<span class="hljs-keyword">async</span>=<span class="hljs-literal">true</span>,data</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest()    xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.readyState !== <span class="hljs-number">4</span>)<span class="hljs-keyword">return</span>      <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.status === <span class="hljs-number">200</span>)&#123;        resolve(<span class="hljs-built_in">JSON</span>.parse(<span class="hljs-built_in">this</span>.response))      &#125;<span class="hljs-keyword">else</span>&#123;        reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-built_in">this</span>.statusText))      &#125;    &#125;    xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;      reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>))    &#125;    xhr.responseType = <span class="hljs-string">&#x27;json&#x27;</span>    xhr.setRequestHeader(<span class="hljs-string">&quot;Accept&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>)    <span class="hljs-keyword">if</span>(method===<span class="hljs-string">&#x27;GET&#x27;</span>)&#123;      xhr.open(<span class="hljs-string">&quot;GET&quot;</span>,url+<span class="hljs-string">&#x27;?&#x27;</span>+data,<span class="hljs-literal">true</span>)      xhr.send()    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(method === <span class="hljs-string">&quot;POST&quot;</span>)&#123;      xhr.setRequestHeader(<span class="hljs-string">&quot;Content-type&quot;</span>,<span class="hljs-string">&quot;application/x-www-form-urlencode&quot;</span>)      xhr.open(<span class="hljs-string">&#x27;POST&#x27;</span>,url)      xhr.send(<span class="hljs-built_in">encodeURIComponent</span>(data))    &#125;  &#125;)&#125;</code></pre></div><ul><li>æ•°ç»„éšæœºæ’åº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//æ–¹æ³•ä¸€ï¼š</span><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>];<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randSort</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = arr.length; i &lt; len; i++) &#123;    <span class="hljs-keyword">var</span> rand = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.random() * len);    <span class="hljs-keyword">var</span> temp = arr[rand];    arr[rand] = arr[i];    arr[i] = temp;  &#125;  <span class="hljs-keyword">return</span> arr;&#125;<span class="hljs-comment">//æ–¹æ³•äºŒï¼š</span><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>];<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">randSort</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">var</span> mixedArray = [];  <span class="hljs-keyword">while</span> (arr.length &gt; <span class="hljs-number">0</span>) &#123;    <span class="hljs-keyword">var</span> randomIndex = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.random() * arr.length);    mixedArray.push(arr[randomIndex]);    arr.splice(randomIndex, <span class="hljs-number">1</span>);  &#125;  <span class="hljs-keyword">return</span> mixedArray;&#125;<span class="hljs-comment">//æ–¹æ³•ä¸‰ï¼š</span><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>];arr.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.random() - <span class="hljs-number">0.5</span>;&#125;);</code></pre></div><ul><li>js è·å–æ–‡ä»¶æ‰©å±•å</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getExt</span>(<span class="hljs-params">filename</span>) </span>&#123;  <span class="hljs-keyword">return</span> filename.split(<span class="hljs-string">&quot;.&quot;</span>).pop();&#125;<span class="hljs-comment">// æŒ‰.åˆ†å‰²å­—ç¬¦ä¸²ä¸ºæ•°ç»„</span><span class="hljs-comment">// popåˆ é™¤æœ€åä¸€é¡¹å¹¶è¿”å›</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getExt</span>(<span class="hljs-params">filename</span>) </span>&#123;  <span class="hljs-keyword">return</span> filename.replace(<span class="hljs-regexp">/.+\./</span>, <span class="hljs-string">&quot;&quot;</span>);&#125;</code></pre></div><ul><li> åŒ¿åå‡½æ•°è‡ªæ‰§è¡Œ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ç›´æ¥åœ¨åŒ¿åå‡½æ•°ä¹‹ååŠ ï¼ˆï¼‰æ— æ•ˆ</span><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>])&#125;(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>)<span class="hljs-comment">//åŠ å·</span>+<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);&#125;(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>);<span class="hljs-comment">//å‡å·</span>-<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);&#125;(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>);<span class="hljs-comment">//æ„Ÿå¹å·</span>!<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);&#125;(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>);<span class="hljs-comment">//æ‹¬å·</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);&#125;)(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>);(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>]+<span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>]);&#125;(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>));</code></pre></div><ul><li><p>å®ç°ä¸€ä¸ªsleepå‡½æ•°</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 1 promise</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sleep</span>(<span class="hljs-params">delay</span>)</span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>=&gt;</span>&#123;    <span class="hljs-built_in">setTimeout</span>(resolve,delay)  &#125;)&#125;<span class="hljs-comment">// 2 async</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async</span> <span class="hljs-title">sleep</span>(<span class="hljs-params">delay</span>)</span>&#123;  <span class="hljs-keyword">await</span> delay(delay)&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delay</span>(<span class="hljs-params">delay</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span>=&gt;</span><span class="hljs-built_in">setTimeout</span>(resolve,delay))&#125;</code></pre></div></li><li><p>æ•°ç»„çš„å…¨æ’åˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">permute</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> res = []  <span class="hljs-comment">// å›æº¯ç®—æ³•</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">recursion</span>(<span class="hljs-params">path,set</span>)</span>&#123;    <span class="hljs-keyword">if</span>(path.length===arr.length)&#123;      <span class="hljs-keyword">return</span> res.push(path.concat())    &#125;    <span class="hljs-comment">// ä½¿ç”¨pathè®°å½•å›æº¯çš„è·¯å¾„</span>    <span class="hljs-comment">// [1,2,3,4]</span>    <span class="hljs-comment">// path[1,2]ï¼Œset[1,2]</span>    <span class="hljs-comment">// 1,2,å·²ç»ç”¨è¿‡</span>    <span class="hljs-comment">// åˆ†åˆ«éå†3ï¼Œ4</span>    <span class="hljs-comment">// æ·»åŠ [1,2,3,4],[1,2,4,3]è¿›ç»“æœ</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> arr)&#123;      <span class="hljs-keyword">if</span>(set.has(num)) <span class="hljs-keyword">continue</span>      path.push(num)      set.add(num)      recursion(path,set)      path.pop()      set.delete(num)    &#125;  &#125;  recursion([],<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>())  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li><li><p>äºŒåˆ†æŸ¥æ‰¾å…ƒç´ </p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binaryFind</span>(<span class="hljs-params">arr,target,s=<span class="hljs-number">0</span>,e=arr.length-<span class="hljs-number">1</span></span>)</span>&#123;  <span class="hljs-keyword">const</span> i  = <span class="hljs-built_in">Math</span>.floor((s+e)/<span class="hljs-number">2</span>)  <span class="hljs-keyword">if</span>(arr[i]===target)&#123;    <span class="hljs-keyword">return</span> i  &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(arr[i]&gt;target)&#123;    <span class="hljs-keyword">return</span> binaryFind(arr,target,s,i-<span class="hljs-number">1</span>)  &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(arr[i]&lt;target)&#123;    <span class="hljs-keyword">return</span> binaryFind(arr,target,i+<span class="hljs-number">1</span>,e)  &#125;  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binaryFind2</span>(<span class="hljs-params">arr,target</span>)</span>&#123;  <span class="hljs-keyword">let</span> s = <span class="hljs-number">0</span>,e = arr.length-<span class="hljs-number">1</span>,mid  <span class="hljs-keyword">while</span>(s&lt;=e)&#123;    mid = <span class="hljs-built_in">Math</span>.floor((s+e)/<span class="hljs-number">2</span>)    <span class="hljs-keyword">if</span>(arr[mid] === target)&#123;      <span class="hljs-keyword">return</span> mid    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(arr[mid] &gt; target)&#123;      e = mid - <span class="hljs-number">1</span>     &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(arr[mid] &lt; target)&#123;      s = mid + <span class="hljs-number">1</span>    &#125;  &#125;  <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>&#125;<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>]<span class="hljs-built_in">console</span>.log(binaryFind2(arr,<span class="hljs-number">9</span>));</code></pre></div><ul><li>æ‰å¹³åŒ–è½¬æ¢<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å®ç°ä¸€ä¸ª fn å‡½æ•°</span><span class="hljs-keyword">const</span> o = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, &#123; <span class="hljs-attr">c</span>: <span class="hljs-literal">true</span> &#125;], <span class="hljs-attr">d</span>: &#123; <span class="hljs-attr">e</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">f</span>: <span class="hljs-number">3</span> &#125;, <span class="hljs-attr">g</span>: <span class="hljs-literal">null</span> &#125;;<span class="hljs-comment">// fn(o) =&gt; æ‰å¹³åŒ–è½¬æ¢</span><span class="hljs-comment">// &#123; &quot;a&quot;: 1, &quot;b[0]&quot;: 1, &quot;b[1]&quot;: 2, &quot;b[2].c&quot;: true, &quot;d.e&quot;: 2, ... &#125;</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">objectFlat</span>(<span class="hljs-params">obj</span>) </span>&#123;  <span class="hljs-keyword">const</span> res = &#123;&#125;;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat</span>(<span class="hljs-params">obj, path</span>) </span>&#123;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">&quot;object&quot;</span>) &#123;      res[path] = obj;    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> <span class="hljs-built_in">Object</span>.keys(obj)) &#123;        <span class="hljs-keyword">const</span> cur = obj[key];          <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(cur)) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; cur.length; i++) &#123;              flat(                cur[i],                path ? path + <span class="hljs-string">&quot;.&quot;</span> + key + <span class="hljs-string">&quot;[&quot;</span> + i + <span class="hljs-string">&quot;]&quot;</span> : key + <span class="hljs-string">&quot;[&quot;</span> + i + <span class="hljs-string">&quot;]&quot;</span>              );            &#125;          &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj[key] === <span class="hljs-string">&quot;object&quot;</span>) &#123;            flat(cur, path ? path + <span class="hljs-string">&quot;.&quot;</span> + key : key);          &#125; <span class="hljs-keyword">else</span> &#123;            res[path ? path + <span class="hljs-string">&quot;.&quot;</span> + key : key] = cur;          &#125;      &#125;    &#125;  &#125;  flat(obj, <span class="hljs-string">&quot;&quot;</span>);  <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-built_in">console</span>.log(objectFlat(o));</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HTTPåè®®</title>
    <link href="/2021/04/13/HTTP/"/>
    <url>/2021/04/13/HTTP/</url>
    
    <content type="html"><![CDATA[<h2 id="HTTPï¼ˆHyperText-Transfer-Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®"><a href="#HTTPï¼ˆHyperText-Transfer-Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®" class="headerlink" title="HTTPï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®"></a>HTTPï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®</h2><blockquote><p>HTTP æ˜¯åŸºäº TCP/IP åè®®çš„åº”ç”¨å±‚åè®®ï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡<br>é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼Œåº”ç”¨å±‚</p></blockquote><h3 id="HTTP-æŠ¥æ–‡ç»„æˆéƒ¨åˆ†"><a href="#HTTP-æŠ¥æ–‡ç»„æˆéƒ¨åˆ†" class="headerlink" title="HTTP æŠ¥æ–‡ç»„æˆéƒ¨åˆ†"></a>HTTP æŠ¥æ–‡ç»„æˆéƒ¨åˆ†</h3><ul><li><p>è¯·æ±‚æŠ¥æ–‡</p><ul><li>è¯·æ±‚è¡Œ <code>Request Method</code>,<code>Request URL</code></li><li>è¯·æ±‚å¤´ åŒ…å«è‹¥å¹²å±æ€§ï¼Œkey:value å€¼</li><li>ç©ºè¡Œ</li><li>è¯·æ±‚ä½“</li></ul></li><li><p>å“åº”æŠ¥æ–‡</p><ul><li>çŠ¶æ€è¡Œ <code>Request Version</code>,<code>Status CodeåŠå…¶æè¿°</code></li><li>å“åº”å¤´ åŒ…å«è‹¥å¹²å±æ€§ï¼Œkey:value å€¼</li><li>ç©ºè¡Œ</li><li>å“åº”ä½“</li></ul></li></ul><h4 id="å­—æ®µ"><a href="#å­—æ®µ" class="headerlink" title="å­—æ®µ"></a>å­—æ®µ</h4><ul><li><p>ç¼“å­˜ç›¸å…³</p><ul><li><code>Cache-Control</code></li><li><code>Pragma</code></li><li><code>Expires</code>å®ä½“é¦–éƒ¨</li><li><code>Last-Modified</code>å®ä½“é¦–éƒ¨</li><li><code>If-Modified-Since</code></li><li><code>ETag</code></li><li><code>If-None-Match</code></li></ul></li><li><p>Cookie</p><ul><li><code>Cookie</code></li><li><code>Set-Cookie</code></li></ul></li><li><p>è·¨åŸŸ</p><ul><li><code>Origin</code></li><li><code>Access-Control-Request-Method</code></li><li><code>Access-Control-Allow-Origin</code></li><li><code>Access-Control-Allow-Methods</code></li><li><code>Access-Control-Max-Age</code></li><li><code>Access-Control-Allow-Credentials</code></li></ul></li><li><p>è¿æ¥</p><ul><li><code>Connection</code>:keep-alive / close / upgrade</li><li><code>Referer</code>è¯·æ±‚å‘èµ·URL<blockquote><p>è¿™ä¸ªå•è¯æ˜¯é”™çš„</p></blockquote></li><li><code>Host</code>æœåŠ¡å™¨åŸŸå</li><li><code>Upgrade</code>:websocket<h4 id="HTTP-çš„å“åº”çŠ¶æ€ç "><a href="#HTTP-çš„å“åº”çŠ¶æ€ç " class="headerlink" title="HTTP çš„å“åº”çŠ¶æ€ç "></a>HTTP çš„å“åº”çŠ¶æ€ç </h4></li></ul></li></ul><p><code>1xx è¯·æ±‚æ”¶åˆ°</code>,</p><p><code>2xx å¤„ç†æˆåŠŸ</code>,</p><p><code>3xx é‡å®šå‘</code>,</p><p><code>4xx å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨å®¢æˆ·ç«¯</code>,</p><p><code>5xx å¤„ç†å‘ç”Ÿé”™è¯¯ï¼Œè´£ä»»åœ¨æœåŠ¡ç«¯</code></p><h4 id="å¸¸è§-code"><a href="#å¸¸è§-code" class="headerlink" title="å¸¸è§ code"></a>å¸¸è§ code</h4><ul><li>100 ç»§ç»­å‘é€</li><li>101 åè®®å‡çº§</li><li>200 OK</li><li>206 å¤„ç†äº†éƒ¨åˆ†è¯·æ±‚</li><li></li><li>301 æ°¸ä¹…æ€§é‡å®šå‘ï¼Œèµ„æºå·²ç»åˆ†é…äº†æ–°çš„ URl</li><li>302 ä¸´æ—¶é‡å®šå‘</li><li>303 è¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•è·å–èµ„æº<blockquote><p>å¯¹äº 301/302/303 å“åº”ï¼Œå‡ ä¹æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šåˆ é™¤æŠ¥æ–‡ä¸»ä½“å¹¶è‡ªåŠ¨ç”¨ GET é‡æ–°è¯·æ±‚</p></blockquote></li><li>304 èµ„æºæœªä¿®æ”¹</li><li></li><li>400 Bad Requestè¯·æ±‚æŠ¥æ–‡è¯­æ³•é”™è¯¯</li><li>401 Unauthorizedéœ€è¦è®¤è¯</li><li>403 Forbiddenç¦æ­¢è®¿é—®</li><li>404 Not Found</li><li>405 ä¸å…è®¸è¯¥è¯·æ±‚æ–¹æ³•</li><li>408 è¯·æ±‚è¶…æ—¶</li><li>500 æœåŠ¡å™¨é”™è¯¯</li><li>503 æœåŠ¡å™¨è¿‡è½½</li><li>505 ä¸æ”¯æŒè¯¥ç‰ˆæœ¬HTTPåè®®</li></ul><h2 id="HTTP-å‘å±•"><a href="#HTTP-å‘å±•" class="headerlink" title="HTTP å‘å±•"></a>HTTP å‘å±•</h2><h3 id="HTTP1-0"><a href="#HTTP1-0" class="headerlink" title="HTTP1.0"></a>HTTP1.0</h3><ul><li><p>ä¸²è¡Œè¿æ¥ï¼šæ¯æ¬¡é€šä¿¡å®Œåæ–­å¼€TCPé€šé“ï¼Œæ¯ä¸ªæ–°è¯·æ±‚éƒ½éœ€è¦å»ºç«‹æ–°çš„è¿æ¥</p></li><li><p><code>GET</code></p><ol><li>è¯·æ±‚æ”¾åœ¨å‚æ•°æ”¾åœ¨URLåœ°å€å</li><li>åˆ·æ–°æ— å‰¯ä½œç”¨</li><li>èƒ½ä¿å­˜ä¹¦ç­¾ï¼Œä¼šè¢«æµè§ˆå™¨ç¼“å­˜ï¼ŒåŠ å…¥å†å²è®°å½•</li><li>ç¼–ç urlencoded</li><li>å‚æ•°æ•°æ®ç±»å‹é™åˆ¶ä¸ºASCIIå­—ç¬¦ï¼Œæµè§ˆå™¨æˆ–è€…æœåŠ¡å™¨ä¼šå¯¹å‚æ•°é•¿åº¦åšé™åˆ¶</li></ol></li><li><p><code>POST</code></p><ol><li>è¯·æ±‚å‚æ•°æ”¾åœ¨bodyä¸­</li><li>åˆ·æ–°æç¤ºå†æ¬¡æäº¤ï¼Ÿ</li><li>ä¸ç¼“å­˜ä¸ä¿å­˜ä¸è®°å½•</li><li>ç¼–ç form-dataï¼Œæ•°æ®ç±»å‹æ— é™åˆ¶</li></ol></li><li><p><code>HEAD</code> ä¸ get ç›¸åŒçš„è¯·æ±‚ï¼Œä¸è¿‡åªè¯·æ±‚å¤´éƒ¨ï¼Œè·å–å…¶ä¸­â€œå…³äºè¯¥èµ„æºçš„ä¿¡æ¯â€(å…ƒä¿¡æ¯æˆ–ç§°å…ƒæ•°æ®)</p><h3 id="HTTP1-1"><a href="#HTTP1-1" class="headerlink" title="HTTP1.1"></a>HTTP1.1</h3></li><li><p>æŒä¹…è¿æ¥ï¼šä¸€å®šæ—¶é—´å†…ï¼Œåªè¦ä¸æ˜¯ä¸»åŠ¨æ–­å¼€åˆ™ä¿æŒè¿æ¥ï¼Œä½†æ˜¯ä¸‹ä¸€ä¸ªè¯·æ±‚å¿…é¡»ç­‰å¾…ä¸Šä¸€ä¸ªè¯·æ±‚å“åº”å®Œæˆï¼ˆçº¿å¤´é˜»å¡ï¼‰</p></li><li><p>ç®¡çº¿åŒ–æŒä¹…è¿æ¥ï¼šè¯·æ±‚/å“åº” æ‰“åŒ…å¤„ç†ï¼Œå¯ä»¥ä¸ç”¨ç­‰å¾…å“åº”è¿”å›è€Œå‘é€ä¸‹ä¸ªè¯·æ±‚å¹¶+æŒ‰é¡ºåºè¿”å›å“åº”+,åªèƒ½ç”¨äºGETå’ŒHEADè¯·æ±‚</p></li><li><p><code>OPTIONS</code>è¯¢é—®è·å–å½“å‰èµ„æºæ‰€æ”¯æŒçš„æ–¹æ³•</p></li><li><p><code>PUT</code>ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€æ–°æ–‡ä»¶</p></li><li><p><code>PATCH</code>æ˜¯å¯¹ PUT æ–¹æ³•çš„è¡¥å……ï¼Œç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–° ã€‚</p></li><li><p><code>DELETE</code>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šæ–‡ä»¶</p></li><li><p><code>TRACE</code>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</p></li><li><p><code>CONNECT</code> HTTP/1.1 åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</p></li></ul><h3 id="SPDY-åè®®"><a href="#SPDY-åè®®" class="headerlink" title="SPDY åè®®"></a>SPDY åè®®</h3><ul><li>2009 å¹´æ¨å‡º</li></ul><blockquote><p>ç‰¹æ€§ï¼š</p></blockquote><ol><li><p>å¤šè·¯å¤ç”¨ï¼šé€šè¿‡ä¸€ä¸ª TCP è¿æ¥ï¼Œå¯ä»¥æ— é™åˆ¶å¤„ç†å¤šä¸ª HTTP è¯·æ±‚ã€‚</p></li><li><p>èµ‹äºˆè¯·æ±‚ä¼˜å…ˆçº§ï¼šç»™è¯·æ±‚é€ä¸ªåˆ†é…ä¼˜å…ˆçº§é¡ºåºã€‚å¯ä»¥è§£å†³åœ¨å‘é€å¤šä¸ªè¯·æ±‚æ—¶ï¼Œå› å¸¦å®½ä½è€Œå¯¼è‡´å“åº”å˜æ…¢çš„é—®é¢˜ã€‚</p></li><li><p>å‹ç¼© HTTP é¦–éƒ¨ï¼šå‹ç¼©æ–¹å¼ï¼šDELEFT</p></li><li><p>æœåŠ¡ç«¯æ¨é€åŠŸèƒ½</p></li><li><p>æœåŠ¡å™¨æç¤ºåŠŸèƒ½ï¼šæœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨æç¤ºå®¢æˆ·ç«¯è¯·æ±‚æ‰€éœ€çš„èµ„æºã€‚</p></li><li><p>SPDY ä½äº HTTP ä¸‹ï¼ŒTCP å’Œ SSL ä¹‹ä¸Šï¼Œå¯ä»¥å…¼å®¹è€ç‰ˆæœ¬ http åŒæ—¶ä½¿ç”¨å¯ç”¨çš„ ssl åŠŸèƒ½</p></li></ol><blockquote><p>ç¼ºç‚¹ï¼š</p></blockquote><p>SPDY å¼ºåˆ¶ä½¿ç”¨ httpsã€‚è€Œä¸” SPDY åŸºæœ¬ä¸Šåªæ˜¯å°†å•ä¸ªåŸŸåä¸‹çš„é€šä¿¡å¤šè·¯å¤ç”¨ï¼Œæ‰€ä»¥å½“ä¸€ä¸ª web ç½‘ç«™ä¸Šä½¿ç”¨å¤šä¸ªåŸŸåä¸‹çš„èµ„æºæ—¶ï¼Œæ”¹å–„æ•ˆæœæœ‰é™</p><h3 id="HTTP2"><a href="#HTTP2" class="headerlink" title="HTTP2"></a>HTTP2</h3><ul><li><p>2015 å¹´å‘å¸ƒï¼ŒåŸºäº SPDY åè®®</p></li><li><p>http/1.x æ˜¯ä¸€ä¸ªè¶…æ–‡æœ¬åè®®ï¼Œè€Œ http2 æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶åè®®</p></li></ul><blockquote><p>ç‰¹æ€§ï¼š</p></blockquote><ol><li><p>äºŒè¿›åˆ¶æ ¼å¼ä¼ è¾“æ•°æ®</p><ul><li><p>1.Xä½¿ç”¨çš„æ–‡æœ¬æ ¼å¼ä¼ è¾“æ•°æ®</p></li><li><p>å½“å®¢æˆ·ç«¯åŒæ—¶å‘æœåŠ¡ç«¯å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™äº›è¯·æ±‚ä¼šè¢«åˆ†è§£æˆä¸€ä¸€ä¸ªçš„å¸§ï¼Œæ¯ä¸ªå¸§éƒ½ä¼šåœ¨ä¸€ä¸ª TCP é“¾è·¯ä¸­æ— åºçš„ä¼ è¾“ï¼ŒåŒä¸€ä¸ªè¯·æ±‚çš„å¸§çš„ Stream Identifier éƒ½æ˜¯ä¸€æ ·çš„ã€‚å½“å¸§åˆ°è¾¾æœåŠ¡ç«¯ä¹‹åï¼Œå°±å¯ä»¥æ ¹æ® Stream Identifier æ¥é‡æ–°ç»„åˆå¾—åˆ°å®Œæ•´çš„è¯·æ±‚ã€‚</p></li></ul></li><li><p>å¤´éƒ¨å‹ç¼©</p><ul><li>è¯·æ±‚å’Œå“åº”é¦–éƒ¨å‹ç¼©</li><li>HPACK ç®—æ³•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹å­—å…¸ï¼ˆé¦–éƒ¨è¡¨ï¼‰é‡å¤å¤´éƒ¨ä¸ç”¨å†å‘é€</li></ul></li><li><p>æœåŠ¡ç«¯æ¨é€</p></li><li><p>å¤šè·¯å¤ç”¨</p><ul><li>åŒåŸŸåçš„é€šä¿¡éƒ½åœ¨å•ä¸ªè¿æ¥ä¸Šå®Œæˆ(åªå ç”¨ä¸€ä¸ª tcp è¿æ¥</li><li>å•è¿æ¥å¯ä»¥æ‰¿å—ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµ</li></ul></li></ol><h3 id="HTTP3"><a href="#HTTP3" class="headerlink" title="HTTP3"></a>HTTP3</h3><ul><li>http3ä½¿ç”¨æ–°çš„UDPåè®®<code>QUIC</code>ä»£æ›¿TCP</li><li>è§£å†³http2æ—¶ä»£ä¸¢åŒ…é˜»å¡</li><li>åˆ‡æ¢ç½‘ç»œæ—¶çš„è¿æ¥ä¿æŒï¼ˆå¿«é€Ÿé‡å¯ä¼šè¯ï¼‰</li><li>åŠ å¯†ä¼ è¾“</li></ul><h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><h3 id="TLS-SSl"><a href="#TLS-SSl" class="headerlink" title="TLS/SSl"></a>TLS/SSl</h3><ul><li><p>ä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼ˆè‹±è¯­ï¼šTransport Layer Securityï¼Œç¼©å†™ä½œTLSï¼‰ï¼ŒåŠå…¶å‰èº«å®‰å…¨å¥—æ¥å±‚ï¼ˆSecure Sockets Layerï¼Œç¼©å†™ä½œSSLï¼‰æ˜¯ä¸€ç§å®‰å…¨åè®®ï¼Œç›®çš„æ˜¯ä¸ºäº’è”ç½‘é€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§ä¿éšœã€‚</p></li><li><p>TLSåè®®çš„ç‰¹ç‚¹æ˜¯ä¸åº”ç”¨å±‚åè®®ï¼ˆHTTPï¼ŒFTPï¼‰æ— è€¦åˆï¼Œåº”ç”¨å±‚åè®®èƒ½é€æ˜è¿è¡Œåœ¨TLSåè®®ä¸Šå±‚ï¼ˆHTTPä¸TCPä¹‹é—´ï¼‰</p></li></ul><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><ul><li><p>ã€éå¯¹ç§°åŠ å¯†ã€‘</p><p>åªæœ‰ä½¿ç”¨ç§é’¥æ‰èƒ½è§£å¼€å…¬é’¥åŠ å¯†</p></li><li><p>ã€æ‘˜è¦ç®—æ³•ã€‘</p><p>è¾“å‡ºå›ºå®šé•¿åº¦çš„æ•°æ®ï¼Œç”¨æ¥è®¡ç®—æ•°æ®æŒ‡çº¹ï¼Œæ¯”å¦‚å‚»256</p></li><li><p>ã€æ•°å­—ç­¾åã€‘</p><p>  ä½¿ç”¨ç§é’¥å¯¹æ‘˜è¦ç®—æ³•å¾—å‡ºçš„æŒ‡çº¹åŠ å¯†</p><h3 id="SSLè¯ä¹¦"><a href="#SSLè¯ä¹¦" class="headerlink" title="SSLè¯ä¹¦"></a>SSLè¯ä¹¦</h3></li><li><p>è¯ä¹¦åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼šç”³è¯·è€…å…¬é’¥ã€ç”³è¯·è€…çš„ç»„ç»‡ä¿¡æ¯å’Œä¸ªäººä¿¡æ¯ã€ç­¾å‘æœºæ„ CA çš„ä¿¡æ¯ã€æœ‰æ•ˆæ—¶é—´ã€è¯ä¹¦åºåˆ—å·ï¼Œæ‘˜è¦ç®—æ³•ç­‰ä¿¡æ¯çš„æ˜æ–‡</p></li><li><p>CAä½¿ç”¨CAç§é’¥å¯¹è¯ä¹¦æ˜æ–‡æ‘˜è¦ç®—æ³•åå¾—å‡ºçš„æŒ‡çº¹è¿›è¡Œç­¾å</p></li></ul><h3 id="æµè§ˆå™¨éªŒè¯è¯ä¹¦åˆæ³•æ€§"><a href="#æµè§ˆå™¨éªŒè¯è¯ä¹¦åˆæ³•æ€§" class="headerlink" title="æµè§ˆå™¨éªŒè¯è¯ä¹¦åˆæ³•æ€§"></a>æµè§ˆå™¨éªŒè¯è¯ä¹¦åˆæ³•æ€§</h3><ol><li>ä»æ“ä½œç³»ç»Ÿä¸­æ‰¾åˆ°ç›¸åº”çš„<code>CAæœºæ„è¯ä¹¦</code></li><li>ä½¿ç”¨<code>CAè¯ä¹¦</code>å†…ç½®çš„å…¬é’¥è§£å¯†<code>ç«™ç‚¹è¯ä¹¦</code>çš„ç­¾åå¾—åˆ°æ ¡éªŒç 1</li><li>ä½¿ç”¨ç”Ÿäº§è¯ä¹¦æ—¶ç›¸åŒçš„æ‘˜è¦ç®—æ³•å¯¹<code>ç«™ç‚¹è¯ä¹¦</code>è®¡ç®—å¾—åˆ°æ ¡éªŒç 2</li><li>æ¯”è¾ƒä¸¤ä¸ªæ ¡éªŒç ç›¸åŒåˆ™è¯´æ˜è¯ä¹¦æ²¡è¢«ç¯¡æ”¹</li><li>åé¢å°±å¼€å§‹æŸ¥çœ‹è¯ä¹¦æ˜¯å¦åœ¨æœ‰æ•ˆæœŸï¼Œæ˜¯å¦å¯¹åº”å½“å‰åŸŸåï¼Œæ˜¯å¦åœ¨åŠé”€åˆ—è¡¨ä¸­</li></ol><h3 id="HTTPS-å·¥ä½œæµç¨‹"><a href="#HTTPS-å·¥ä½œæµç¨‹" class="headerlink" title="HTTPS å·¥ä½œæµç¨‹"></a>HTTPS å·¥ä½œæµç¨‹</h3><ol><li>ç”¨æˆ·è®¿é—®:443</li><li>æœåŠ¡å™¨è¿”å›è¯ä¹¦</li><li>ç”¨æˆ·æµè§ˆå™¨ä½¿ç”¨ <em><strong>CAå…¬é’¥</strong></em> æ‰“å¼€å¹¶éªŒè¯è¯ä¹¦çš„åˆæ³•æ€§å¾—åˆ°è¯ä¹¦ä¸­çš„ <em><strong>æœåŠ¡å™¨å…¬é’¥</strong></em></li><li>ç”¨æˆ·ç”Ÿæˆ <em><strong>å®¢æˆ·ç«¯ç§é’¥</strong></em>ï¼Œå¹¶ä½¿ç”¨ <em><strong>æœåŠ¡å™¨å…¬é’¥</strong></em> åŠ å¯†å‘é€ç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨ä½¿ç”¨è‡ªå·±çš„ <em><strong>æœåŠ¡å™¨ç§é’¥</strong></em> è§£å¯†ï¼Œå¾—åˆ° <em><strong>å®¢æˆ·ç«¯ç§é’¥</strong></em></li><li>è‡³æ­¤åŒæ–¹å¾—åˆ°äº†å¯¹ç§°åŠ å¯†å¯†é’¥</li></ol><h2 id="TCPæ¡æ‰‹"><a href="#TCPæ¡æ‰‹" class="headerlink" title="TCPæ¡æ‰‹"></a>TCPæ¡æ‰‹</h2><h3 id="ä¸‰æ¬¡æ¡æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹</h3><ol><li>ä¸ºäº†ç¡®ä¿é€šä¿¡åŒæ–¹æ”¶å‘èƒ½åŠ›æ­£å¸¸</li><li>æŒ‡å®šè‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·ï¼Œä¸ºåé¢çš„å¯é ä¼ é€åšå‡†å¤‡</li><li>è¿‡ç¨‹ï¼š<ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š<br>å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¸€ä¸ª <code>SYN</code> æŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜å®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· <code>ISN(c)</code>ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº <code>SYN_Send</code> çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š<br>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ <code>SYN</code> æŠ¥æ–‡ä¹‹åï¼Œä¼šä»¥è‡ªå·±çš„ <code>SYN</code> æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å· <code>ISN(s)</code>ï¼ŒåŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ <code>ISN(c) + 1</code> ä½œä¸º <code>ACK(ç¡®è®¤å­—ç¬¦)</code> çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ <code>SYN</code>ï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äº <code>SYN_REVD</code> çš„çŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š<br>å®¢æˆ·ç«¯æ”¶åˆ° <code>SYN</code> æŠ¥æ–‡ä¹‹åï¼Œä¼šå‘é€ä¸€ä¸ª <code>ACK</code> æŠ¥æ–‡ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·æŠŠæœåŠ¡å™¨çš„ <code>ISN(s) + 1</code> ä½œä¸º <code>ACK</code> çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ <code>SYN</code> æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº <code>establised</code> çŠ¶æ€ã€‚<blockquote><p>åŒæ—¶è¯¥tcpæ ˆå·²ç»å…è®¸è¯·æ±‚æ•°æ®ï¼Œä¾‹å¦‚åŒæ—¶å¸¦ä¸Šä¸€ä¸ªGETè¯·æ±‚</p></blockquote></li><li>æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¹Ÿå¤„äº <code>establised</code> çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹ä»¥å»ºç«‹èµ·äº†é“¾æ¥ã€‚</li></ul></li></ol><blockquote><p>åŠè¿æ¥é˜Ÿåˆ—ï¼š<br>æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN ä¹‹åï¼Œå°±ä¼šå¤„äº SYN_RCVD çŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹è¿˜æ²¡æœ‰å®Œå…¨å»ºç«‹å…¶è¿æ¥ï¼ŒæœåŠ¡å™¨ä¼šæŠŠæ­¤ç§çŠ¶æ€ä¸‹è¯·æ±‚è¿æ¥æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™ç§é˜Ÿåˆ—ç§°ä¹‹ä¸ºåŠè¿æ¥é˜Ÿåˆ—ã€‚</p></blockquote><h3 id="å››æ¬¡æŒ¥æ‰‹"><a href="#å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="å››æ¬¡æŒ¥æ‰‹"></a>å››æ¬¡æŒ¥æ‰‹</h3><ol><li>æ–­å¼€tcpè¿æ¥</li><li>è¿‡ç¨‹ï¼š<ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼š<br>å®¢æˆ·ç«¯å‘é€<code>FIN</code> æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº FIN_WAIT1 çŠ¶æ€ã€‚</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š<br>æœåŠ¡ç«¯æ”¶åˆ° <code>FIN</code> ä¹‹åï¼Œä¼šæŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸º <code>ACK</code> æŠ¥æ–‡çš„åºåˆ—å·å€¼å¹¶å‘é€ç»™å®¢æˆ·ç«¯ï¼Œè¡¨æ˜å·²ç»æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äº <code>CLOSE_WAIT</code>çŠ¶æ€ã€‚</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼š<br>å¦‚æœæœåŠ¡ç«¯ä¹Ÿæƒ³æ–­å¼€è¿æ¥äº†ï¼Œå’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ä¸€æ ·ï¼Œå‘ç»™ <code>FIN</code> æŠ¥æ–‡ï¼Œä¸”æŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶æœåŠ¡ç«¯å¤„äº <code>LAST_ACK</code> çš„çŠ¶æ€ã€‚</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼š<br>å®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¹ŸæŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸ºè‡ªå·± <code>ACK</code> æŠ¥æ–‡çš„åºåˆ—å·å€¼å¹¶å‘é€ç»™æœåŠ¡ç«¯,æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº <code>TIME_WAIT</code> çŠ¶æ€ã€‚ä¹‹åæ‰ä¼šè¿›å…¥ <code>CLOSED</code> çŠ¶æ€</li><li>æœåŠ¡ç«¯æ”¶åˆ° <code>ACK</code> æŠ¥æ–‡ä¹‹åï¼Œå°±å¤„äºå…³é—­è¿æ¥äº†ï¼Œå¤„äº <code>CLOSED</code> çŠ¶æ€ã€‚</li></ul></li></ol><blockquote><p><code>TIME_WAIT</code> çŠ¶æ€:<br>å®¢æˆ·ç«¯å‘é€ ACK ä¹‹åä¸ç›´æ¥å…³é—­ï¼Œè€Œæ˜¯è¦ç­‰ä¸€é˜µå­æ‰å…³é—­,ç¡®ä¿æœåŠ¡å™¨æ˜¯å¦å·²ç»æ”¶åˆ°äº† ACK æŠ¥æ–‡ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°çš„è¯ï¼ŒæœåŠ¡å™¨ä¼šé‡æ–°å‘ FIN æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†æ¬¡æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œå°±çŸ¥é“ä¹‹å‰çš„ ACK æŠ¥æ–‡ä¸¢å¤±äº†ï¼Œç„¶åå†æ¬¡å‘é€ ACK æŠ¥æ–‡ã€‚</p></blockquote><blockquote><p>ä¹Ÿå¯ç¼©çŸ­ä¸ºä¸‰æ¬¡æŒ¥æ‰‹ï¼Œä¸Šè¿°äºŒä¸‰æ­¥éª¤åˆå¹¶ï¼ŒæœåŠ¡å™¨åŒæ—¶å›å¤ACKå’ŒFIN</p></blockquote><h2 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h2><ul><li>websocketçš„å‡ºç°è§£å†³äº†ä¼ ç»Ÿhttpè¯·æ±‚åªèƒ½ç”±å®¢æˆ·ç«¯å‘èµ·çš„ç¼ºé™·</li><li>httpæ— æ³•å¾—çŸ¥æœåŠ¡å™¨è¿ç»­çš„çŠ¶æ€å˜åŒ–ï¼Œåªèƒ½é è½®è¯¢</li><li>æ„é€ å‡½æ•°å°±è¦ä¼ å…¥<code>ç»å¯¹URL</code></li><li>å…¨åŒå·¥ï¼ŒåŒå‘é€šä¿¡</li><li>æœåŠ¡ç«¯æ¨é€</li><li>æŒä¹…è¿æ¥</li><li>åŸºäº TCP ä¼ è¾“ï¼Œå¤ç”¨ HTTP çš„æ¡æ‰‹é€šé“</li><li>è½¬åè®®<ol><li>å®¢æˆ·ç«¯è¯·æ±‚<div class="hljs code-wrapper"><pre><code class="hljs avrasm"><span class="hljs-symbol">Connection:</span> Upgrade<span class="hljs-symbol">Upgrade:</span> websocket</code></pre></div></li><li>æœåŠ¡ç«¯å“åº”åè®®å‡çº§<div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">HTTP</span>/<span class="hljs-number">1</span>.<span class="hljs-number">1</span> <span class="hljs-number">101</span> Switching Protocols</code></pre></div></li></ol></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>http</tag>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢å‘å¯¹è±¡</title>
    <link href="/2021/04/13/js%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    <url>/2021/04/13/js%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    
    <content type="html"><![CDATA[<h2 id="é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³"><a href="#é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³" class="headerlink" title="é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³"></a>é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³</h2><p>é¢å‘å¯¹è±¡çš„è®¾è®¡æ€æƒ³æ˜¯ä»è‡ªç„¶ç•Œä¸­æ¥çš„ï¼Œå› ä¸ºåœ¨è‡ªç„¶ç•Œä¸­å°±å­˜åœ¨ç±»ï¼ˆClassï¼‰å’Œå®ä¾‹ï¼ˆInstanceï¼‰çš„æ¦‚å¿µã€‚</p><ul><li><p>Class æ˜¯ä¸€ç§æŠ½è±¡æ¦‚å¿µï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰çš„ Classâ€”â€”Student ï¼Œæ˜¯æŒ‡å­¦ç”Ÿè¿™ä¸ªæ¦‚å¿µï¼Œ</p></li><li><p>è€Œå®ä¾‹ï¼ˆInstanceï¼‰åˆ™æ˜¯ä¸€ä¸ªä¸ªå…·ä½“çš„ Student ï¼Œæ¯”å¦‚ï¼Œ Michael å’Œ Bob æ˜¯ä¸¤ä¸ªå…·ä½“çš„ Student ã€‚</p></li><li><p>é¢å‘è¿‡ç¨‹å°±æ˜¯åˆ†æå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸€ä¸ªä¸€ä¸ªä¾æ¬¡è°ƒç”¨å°±å¯ä»¥äº†ã€‚</p></li><li><p>é¢å‘å¯¹è±¡æ˜¯æŠŠæ„æˆé—®é¢˜äº‹åŠ¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡ï¼Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†å®Œæˆä¸€ä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯ä¸ºäº†æå™æŸä¸ªäº‹ç‰©åœ¨æ•´ä¸ªè§£å†³é—®é¢˜çš„æ­¥éª¤ä¸­çš„è¡Œä¸ºã€‚</p></li></ul><h2 id="é¢å‘å¯¹è±¡ä¸‰è¦ç´ "><a href="#é¢å‘å¯¹è±¡ä¸‰è¦ç´ " class="headerlink" title="é¢å‘å¯¹è±¡ä¸‰è¦ç´ "></a>é¢å‘å¯¹è±¡ä¸‰è¦ç´ </h2><p><a href="https://github.com/CyC2018/CS-Notes/blob/master/notes/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%80%9D%E6%83%B3.md#%E5%B0%81%E8%A3%85">ref:https://github.com/CyC2018</a></p><h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>åˆ©ç”¨æŠ½è±¡æ•°æ®ç±»å‹å°†æ•°æ®å’ŒåŸºäºæ•°æ®çš„æ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œä½¿å…¶æ„æˆä¸€ä¸ªä¸å¯åˆ†å‰²çš„ç‹¬ç«‹å®ä½“ã€‚æ•°æ®è¢«ä¿æŠ¤åœ¨æŠ½è±¡æ•°æ®ç±»å‹çš„å†…éƒ¨ï¼Œå°½å¯èƒ½åœ°éšè—å†…éƒ¨çš„ç»†èŠ‚ï¼Œåªä¿ç•™ä¸€äº›å¯¹å¤–æ¥å£ä½¿ä¹‹ä¸å¤–éƒ¨å‘ç”Ÿè”ç³»ã€‚ç”¨æˆ·æ— éœ€çŸ¥é“å¯¹è±¡å†…éƒ¨çš„ç»†èŠ‚ï¼Œä½†å¯ä»¥é€šè¿‡å¯¹è±¡å¯¹å¤–æä¾›çš„æ¥å£æ¥è®¿é—®è¯¥å¯¹è±¡ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>å‡å°‘è€¦åˆï¼šå¯ä»¥ç‹¬ç«‹åœ°å¼€å‘ã€æµ‹è¯•ã€ä¼˜åŒ–ã€ä½¿ç”¨ã€ç†è§£å’Œä¿®æ”¹</li><li>å‡è½»ç»´æŠ¤çš„è´Ÿæ‹…ï¼šå¯ä»¥æ›´å®¹æ˜“è¢«ç¨‹åºå‘˜ç†è§£ï¼Œå¹¶ä¸”åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥ä¸å½±å“å…¶ä»–æ¨¡å—</li><li>æœ‰æ•ˆåœ°è°ƒèŠ‚æ€§èƒ½ï¼šå¯ä»¥é€šè¿‡å‰–æç¡®å®šå“ªäº›æ¨¡å—å½±å“äº†ç³»ç»Ÿçš„æ€§èƒ½<br>æé«˜è½¯ä»¶çš„å¯é‡ç”¨æ€§</li><li>é™ä½äº†æ„å»ºå¤§å‹ç³»ç»Ÿçš„é£é™©ï¼šå³ä½¿æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼Œä½†æ˜¯è¿™äº›ç‹¬ç«‹çš„æ¨¡å—å´æœ‰å¯èƒ½æ˜¯å¯ç”¨çš„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ä»¥ä¸‹ Person ç±»å°è£… nameã€genderã€age ç­‰å±æ€§ï¼Œå¤–ç•Œåªèƒ½é€šè¿‡ get() æ–¹æ³•è·å–ä¸€ä¸ª Person å¯¹è±¡çš„ name å±æ€§å’Œ gender å±æ€§ï¼Œè€Œæ— æ³•è·å– age å±æ€§ï¼Œä½†æ˜¯ age å±æ€§å¯ä»¥ä¾› work() æ–¹æ³•ä½¿ç”¨ã€‚</span><span class="hljs-comment">// æ³¨æ„åˆ° gender å±æ€§ä½¿ç”¨ int æ•°æ®ç±»å‹è¿›è¡Œå­˜å‚¨ï¼Œå°è£…ä½¿å¾—ç”¨æˆ·æ³¨æ„ä¸åˆ°è¿™ç§å®ç°ç»†èŠ‚ã€‚å¹¶ä¸”åœ¨éœ€è¦ä¿®æ”¹ gender å±æ€§ä½¿ç”¨çš„æ•°æ®ç±»å‹æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸å½±å“å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹è¿›è¡Œã€‚</span>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;    private <span class="hljs-built_in">String</span> name;    private int gender;    private int age;    public <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getName</span>(<span class="hljs-params"></span>)</span> &#123;        <span class="hljs-keyword">return</span> name;    &#125;    public <span class="hljs-built_in">String</span> <span class="hljs-function"><span class="hljs-title">getGender</span>(<span class="hljs-params"></span>)</span> &#123;        <span class="hljs-keyword">return</span> gender == <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;man&quot;</span> : <span class="hljs-string">&quot;woman&quot;</span>;    &#125;    public <span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">work</span>(<span class="hljs-params"></span>)</span> &#123;        <span class="hljs-keyword">if</span> (<span class="hljs-number">18</span> &lt;= age &amp;&amp; age &lt;= <span class="hljs-number">50</span>) &#123;            System.out.println(name + <span class="hljs-string">&quot; is working very hard!&quot;</span>);        &#125; <span class="hljs-keyword">else</span> &#123;            System.out.println(name + <span class="hljs-string">&quot; can&#x27;t work any more!&quot;</span>);        &#125;    &#125;&#125;</code></pre></div><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>ç»§æ‰¿å®ç°äº† IS-A å…³ç³»ï¼Œä¾‹å¦‚ Cat å’Œ Animal å°±æ˜¯ä¸€ç§ IS-A å…³ç³»ï¼Œå› æ­¤ Cat å¯ä»¥ç»§æ‰¿è‡ª Animalï¼Œä»è€Œè·å¾— Animal é private çš„å±æ€§å’Œæ–¹æ³•ã€‚</p><ul><li><p>ç»§æ‰¿åº”è¯¥éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œå­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰çˆ¶ç±»å¯¹è±¡ã€‚</p></li><li><p>Cat å¯ä»¥å½“åš Animal æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä½¿ç”¨ Animal å¼•ç”¨ Cat å¯¹è±¡ã€‚çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ç§°ä¸º å‘ä¸Šè½¬å‹ ã€‚</p></li></ul><p><code>Animal animal = new Cat();</code></p><h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p>å¤šæ€åˆ†ä¸ºç¼–è¯‘æ—¶å¤šæ€å’Œè¿è¡Œæ—¶å¤šæ€ï¼š</p><ul><li><p>ç¼–è¯‘æ—¶å¤šæ€ä¸»è¦æŒ‡æ–¹æ³•çš„é‡è½½</p></li><li><p>è¿è¡Œæ—¶å¤šæ€æŒ‡ç¨‹åºä¸­å®šä¹‰çš„å¯¹è±¡å¼•ç”¨æ‰€æŒ‡å‘çš„å…·ä½“ç±»å‹åœ¨è¿è¡ŒæœŸé—´æ‰ç¡®å®š<br>è¿è¡Œæ—¶å¤šæ€æœ‰ä¸‰ä¸ªæ¡ä»¶ï¼š</p><ol><li><p>ç»§æ‰¿</p></li><li><p>è¦†ç›–ï¼ˆé‡å†™ï¼‰</p></li><li><p>å‘ä¸Šè½¬å‹</p></li></ol>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//  ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¹å™¨ç±»ï¼ˆInstrumentï¼‰æœ‰ä¸¤ä¸ªå­ç±»ï¼šWind å’Œ Percussionï¼Œå®ƒä»¬éƒ½è¦†ç›–äº†çˆ¶ç±»çš„ play() æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ main() æ–¹æ³•ä¸­ä½¿ç”¨çˆ¶ç±» Instrument æ¥å¼•ç”¨ Wind å’Œ Percussion å¯¹è±¡ã€‚åœ¨ Instrument å¼•ç”¨è°ƒç”¨ play() æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡Œå®é™…å¼•ç”¨å¯¹è±¡æ‰€åœ¨ç±»çš„ play() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ Instrument ç±»çš„æ–¹æ³•ã€‚</span>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Instrument</span> </span>&#123;    public <span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">play</span>(<span class="hljs-params"></span>)</span> &#123;        System.out.println(<span class="hljs-string">&quot;Instument is playing...&quot;</span>);    &#125;&#125;public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Wind</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Instrument</span> </span>&#123;    public <span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">play</span>(<span class="hljs-params"></span>)</span> &#123;        System.out.println(<span class="hljs-string">&quot;Wind is playing...&quot;</span>);    &#125;&#125;public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Percussion</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Instrument</span> </span>&#123;    public <span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">play</span>(<span class="hljs-params"></span>)</span> &#123;        System.out.println(<span class="hljs-string">&quot;Percussion is playing...&quot;</span>);    &#125;&#125;public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Music</span> </span>&#123;    public <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-function"><span class="hljs-title">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)</span> &#123;        List&lt;Instrument&gt; instruments = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();        instruments.add(<span class="hljs-keyword">new</span> Wind());        instruments.add(<span class="hljs-keyword">new</span> Percussion());        <span class="hljs-keyword">for</span>(Instrument instrument : instruments) &#123;            instrument.play();        &#125;    &#125;&#125;</code></pre></div><h2 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h2></li></ul><ol><li><code>JavaScript</code> å¸¸è¢«æè¿°ä¸ºä¸€ç§åŸºäºåŸå‹çš„è¯­è¨€ (prototype-based language),æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯¹è±¡ä»¥å…¶åŸå‹ä¸ºæ¨¡æ¿åˆ›å»ºæ–°å¯¹è±¡ã€å¹¶ä»åŸå‹ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ã€‚è€Œè¿™ä¸ªåŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ï¼Œä¸€å±‚ä¸€å±‚ã€ä»¥æ­¤ç±»æ¨ã€‚è¿™ç§å…³ç³»å¸¸è¢«ç§°ä¸º<code>åŸå‹é“¾ (prototype chain)</code>ï¼Œå®ƒè§£é‡Šäº†ä¸ºä½•ä¸€ä¸ªå¯¹è±¡ä¼šæ‹¥æœ‰å®šä¹‰åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚</li></ol><ol><li><p>ç‰¹æ®Šçš„<code>Object</code>å’Œ<code>Function</code></p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å‡½æ•°å¯¹è±¡éƒ½æ˜¯ç”±Functionå‡½æ•°ç”Ÿæˆçš„,åˆ™</span><span class="hljs-built_in">Object</span>._proto_ === <span class="hljs-built_in">Function</span>.prototype<span class="hljs-comment">//ç‰¹ä¾‹</span><span class="hljs-built_in">Function</span>.__proto__ ===  <span class="hljs-built_in">Function</span>.prototypeÆ’ () &#123; [native code] &#125;</code></pre></div></li><li><p>åŸå½¢é“¾çš„ç»ˆç‚¹</p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Object</span>.prototye === <span class="hljs-string">&#x27;object&#x27;</span><span class="hljs-comment">// è¯´æ˜ä»–æ˜¯ä¸€ä¸ªobjectç±»å‹çš„å¯¹è±¡ï¼Œå¦‚æœä»–æ˜¯ç”±Objectå‡½æ•°ç”Ÿæˆçš„ï¼Œ</span><span class="hljs-comment">// ä¸ºäº†è®©åŸå‹é“¾æœ‰ç»ˆç‚¹ã€‚Javascriptè§„å®šï¼Œ</span><span class="hljs-built_in">Object</span>.prototype.__proto__ === <span class="hljs-literal">null</span><span class="hljs-comment">// å¯¹äºFunction</span><span class="hljs-built_in">Function</span>.prototype.__proto__ === <span class="hljs-built_in">Object</span>.prototype<span class="hljs-built_in">Object</span>.prototype.__proto__ === <span class="hljs-literal">null</span></code></pre></div></li><li><p>åªæœ‰å‡½æ•°æ‰æœ‰<code>prototype</code></p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params"></span>)</span>&#123;&#125;f1.__proto__ === <span class="hljs-built_in">Function</span>.prototype <span class="hljs-comment">// f1ç›´æ¥ç”±Functionæ„é€ è€Œæ¥</span></code></pre></div></li><li><p>åœ¨ä¼ ç»Ÿçš„â€™é¢å‘å¯¹è±¡â€˜ä¸­ï¼Œé¦–å…ˆå®šä¹‰â€œç±»â€ï¼Œæ­¤ååˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼Œç±»ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½è¢«å¤åˆ¶åˆ°æ–°å®ä¾‹ä¸­ã€‚åœ¨ JavaScript ä¸­å¹¶ä¸å¦‚æ­¤å¤åˆ¶ï¼Œè€Œæ˜¯åœ¨å¯¹è±¡å®ä¾‹å’Œå®ƒçš„æ„é€ å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªé“¾æ¥ï¼ˆå®ƒæ˜¯__proto__å±æ€§ï¼Œæ˜¯ä»æ„é€ å‡½æ•°çš„prototypeå±æ€§æ´¾ç”Ÿçš„ï¼‰ï¼Œä¹‹åé€šè¿‡ä¸Šæº¯åŸå‹é“¾ï¼Œåœ¨æ„é€ å™¨ä¸­æ‰¾åˆ°è¿™äº›å±æ€§å’Œæ–¹æ³•ã€‚</p></li></ol><div class="hljs code-wrapper"><pre><code>![proto](../images/proto.png)</code></pre></div><ul><li><p>å½“ js åœ¨æŸ¥æ‰¾æŸå±æ€§æ—¶ï¼Œå¯¹è±¡æœ¬ä½“ä¸Šæ²¡æœ‰è¯¥å±æ€§åˆ™ä¼šè®¿é—®å¯¹è±¡çš„<code>__proto__</code>è¿›è¡ŒæŸ¥æ‰¾(å³åœ¨è¯¥å‡½æ•°æ„é€ å‡½æ•°çš„<code>prototype</code>ä¸­æŸ¥æ‰¾)ï¼Œè¿˜æ˜¯æ²¡æœ‰åˆ™ç»§ç»­é€’å½’è®¿é—®<code>__proto__</code>,ä¸€ç›´åˆ°<code>Object</code>ï¼Œã€ã€ã€<code>Object.prototype</code>æ²¡æœ‰<code>__proto__</code>å±æ€§ã€‘ã€‘ã€‘ï¼Œç»§ç»­è®¿é—®åˆ™è¿”å›<code>null</code>,è¿™æ ·ä¸€æ¡ç”±<code>__proto__</code>æŠŠæ‰€æœ‰å¯¹è±¡é“¾æ¥èµ·æ¥çš„çº¿æˆä¸ºåŸå‹é“¾</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f1</span>(<span class="hljs-params"></span>)</span>&#123;&#125;<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Function</span>.prototype)Æ’ () &#123; [native code] &#125;<span class="hljs-built_in">console</span>.log(f1.__proto__)Æ’ () &#123; [native code] &#125;<span class="hljs-comment">//    !!!!!!!!!</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Function</span>.prototype.__proto__ == f1.__proto__.__proto__)<span class="hljs-literal">true</span><span class="hljs-comment">// å®ä¾‹ç»§æ‰¿è‡ªæ„é€ å‡½æ•°</span><span class="hljs-comment">// å‡½æ•°ç»§æ‰¿è‡ªFunctionå¯¹è±¡</span><span class="hljs-comment">// Functionç»§æ‰¿è‡ªObjectå¯¹è±¡</span><span class="hljs-comment">// éå‡½æ•°å¯¹è±¡</span><span class="hljs-keyword">const</span> o1 = &#123;&#125;o1.__proto__<span class="hljs-comment">// &#123;constructor: Æ’, __defineGetter__: Æ’, __defineSetter__: Æ’, hasOwnProperty: Æ’, __lookupGetter__: Æ’,Â â€¦&#125;</span>o1.__proto__ === <span class="hljs-built_in">Object</span>.prototype<span class="hljs-comment">// true</span>o1.__proto__.__proto__ = <span class="hljs-literal">null</span></code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MVC/MVP/MVVM</title>
    <link href="/2021/04/13/mvcmvpmvvm/"/>
    <url>/2021/04/13/mvcmvpmvvm/</url>
    
    <content type="html"><![CDATA[<h3 id="MVCModel-View-Controller"><a href="#MVCModel-View-Controller" class="headerlink" title="MVCModel-View-Controller"></a>MVC<code>Model-View-Controller</code></h3><div class="hljs code-wrapper"><pre><code class="hljs js">View-&gt;Controller-&gt;Model^                     ||                     v&lt;---------------------&lt;</code></pre></div><ol><li><p>å•å‘é€šä¿¡</p></li><li><p><code>Controller</code>åªèµ·åˆ°è·¯ç”±ä½œç”¨ï¼Œä¸šåŠ¡é€»è¾‘éƒ½åœ¨<code>View</code>ä¸­</p></li><li><p>UIäº¤äº’<code>View</code> ä¼ é€æŒ‡ä»¤åˆ° <code>Controller</code> ï¼›</p></li><li><p><code>Controller</code> å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œæ“ä½œ <code>Model</code> æ”¹å˜æ•°æ® ï¼›</p></li><li><p>Modelé€šçŸ¥ <code>View</code>æ›´æ–°ï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆã€‚</p></li></ol><h3 id="MVPModel-View-Presenter"><a href="#MVPModel-View-Presenter" class="headerlink" title="MVPModel-View-Presenter"></a>MVP<code>Model-View-Presenter</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">View &lt;--&gt; Presenter &lt;==&gt; Model</code></pre></div><ol><li><p>åŒå‘é€šä¿¡</p></li><li><p><code>View</code> ä¸ <code>Model</code> ä¹‹é—´ä¸é€šä¿¡ï¼Œé€šè¿‡ <code>Presenter</code>è§£å¶</p></li><li><p>ä¸»è¦çš„ç¨‹åºé€»è¾‘åœ¨<code>Presenter</code>ä¸­</p></li><li><p><code>View</code> éå¸¸è–„ï¼Œä¸éƒ¨ç½²ä»»ä½•ä¸šåŠ¡é€»è¾‘</p></li><li><p><em>Presenterä¸å…·ä½“çš„Viewæ˜¯æ²¡æœ‰ç›´æ¥å…³è”çš„</em>ï¼Œè€Œæ˜¯é€šè¿‡å®šä¹‰å¥½çš„æ¥å£è¿›è¡Œäº¤äº’ï¼Œä»è€Œä½¿å¾—åœ¨å˜æ›´Viewæ—¶å€™å¯ä»¥ä¿æŒPresenterçš„ä¸å˜ï¼Œè¿™æ ·å°±å¯ä»¥é‡ç”¨ã€‚</p></li></ol><h3 id="MVVMModel-View-ViewModel"><a href="#MVVMModel-View-ViewModel" class="headerlink" title="MVVMModel-View-ViewModel"></a>MVVM<code>Model-View-ViewModel</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">View &lt;==&gt; ViewModel &lt;==&gt; Model</code></pre></div><blockquote><p>mvvmæ¨¡å¼å°†Preseneræ”¹åä¸ºView Modelï¼ŒåŸºæœ¬ä¸Šä¸MVPæ¨¡å¼ä¸€è‡´ï¼Œç”±æ¡†æ¶ä»£æ›¿å¼€å‘è€…å®Œæˆäº‹ä»¶æ”¶é›†å’Œviewæ›´æ–°çš„å·¥ä½œ</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ•°ç»„</title>
    <link href="/2021/04/13/%E6%95%B0%E7%BB%84/"/>
    <url>/2021/04/13/%E6%95%B0%E7%BB%84/</url>
    
    <content type="html"><![CDATA[<h2 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å­—é¢é‡</span><span class="hljs-keyword">let</span> arr = []<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<span class="hljs-comment">// æ„é€ å‡½æ•°</span><span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>()<span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-regexp">/ä¼ å…¥æ•°ç»„ä»£è¡¨æ•°ç»„é•¿åº¦/</span>)<span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-string">&#x27;item1&#x27;</span>,<span class="hljs-string">&#x27;item2&#x27;</span>/ä¼ å…¥å…ƒç´ /)<span class="hljs-keyword">let</span> arr = <span class="hljs-built_in">Array</span>(<span class="hljs-number">10</span>)/çœç•¥<span class="hljs-keyword">new</span>æ“ä½œç¬¦/<span class="hljs-comment">// Array.of</span><span class="hljs-built_in">Array</span>.of(<span class="hljs-number">7</span>) åˆ›å»ºä¸€ä¸ªå…·æœ‰å•ä¸ªå…ƒç´  <span class="hljs-number">7</span> çš„æ•°ç»„ï¼Œè€Œ<span class="hljs-built_in">Array</span>(<span class="hljs-number">7</span>) åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º<span class="hljs-number">7</span>çš„ç©ºæ•°ç»„<span class="hljs-comment">// Array.from</span><span class="hljs-built_in">Array</span>.from(arrayLike[, mapFn[, thisArg]])</code></pre></div><h2 id="å˜å¼‚æ–¹æ³•ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰"><a href="#å˜å¼‚æ–¹æ³•ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰" class="headerlink" title="å˜å¼‚æ–¹æ³•ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰"></a>å˜å¼‚æ–¹æ³•ï¼ˆæ”¹å˜åŸæ•°ç»„ï¼‰</h2><ul><li><code>pop()</code>åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </li><li><code>shift()</code>åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </li><li><code>push()</code>æ·»åŠ å…ƒç´ è‡³æœ«å°¾</li><li><code>unshift()</code>æ·»åŠ å…ƒç´ è‡³é¦–ä½</li><li><code>splice(start,delCount,new1,new2...)</code>å¾€æ•°ç»„ç´¢å¼•ä¸º start ä½ç½®åˆ é™¤ delCont ä¸ªå…ƒç´ ï¼Œå¹¶ä»è¯¥ä½ç½®åŠ å…¥ new æ–°å…ƒç´ </li><li><code>sort()</code>æ’åº</li><li><code>reverse()</code>å€’åº,è¿”å›æ–°æ•°ç»„<br>es6</li><li><code>copyWithin(target,start,end)</code>æ‹·è´æ•°ç»„ä¸­ç´¢å¼•ä» start åˆ° endï¼ˆendï¼‰çš„å…ƒç´ æ·»åŠ è‡³ target</li><li><code>fill(value,start,end)</code>å°†æ•°ç»„ä¸­ç´¢å¼• start åˆ° endï¼ˆä¸å«ï¼‰çš„ä½ç½®å¡«å……ä¸º value å…ƒç´ </li></ul><h2 id="éå˜å¼‚æ–¹æ³•"><a href="#éå˜å¼‚æ–¹æ³•" class="headerlink" title="éå˜å¼‚æ–¹æ³•"></a>éå˜å¼‚æ–¹æ³•</h2><ul><li><code>slice(start,end)</code>æ½œæ‹·è´ï¼Œè¿”å›ç´¢å¼•ä» start åˆ° endï¼ˆä¸å«ï¼‰çš„å…ƒç´ ç»„æˆæ–°æ•°ç»„</li><li><code>join()</code>æŒ‡å®šåˆ†éš”ç¬¦å°†æ•°å­—å…ƒç´ è¿æˆå­—ç¬¦ä¸²</li><li><code>concat()</code>åˆå¹¶æ•°ç»„</li><li><code>indexOf()/lastIndexOf()</code>æŸ¥æ‰¾å…ƒç´ ç´¢å¼•,å¯ä¼ å…¥èµ·å§‹ä½ç½®</li><li><code>includes()</code>æŸ¥æ‰¾æ˜¯å¦åŒ…å«å…ƒç´ è¿”å›Boolean,å¯ä¼ å…¥èµ·å§‹ä½ç½®</li><li><code>...</code>å±•å¼€è¿ç®—ç¬¦</li></ul><h3 id="éå†æ•°ç»„"><a href="#éå†æ•°ç»„" class="headerlink" title="éå†æ•°ç»„"></a>éå†æ•°ç»„</h3><p>  éå†æ•°ç»„çš„æ–¹æ³•å›è°ƒmapFnåŒ…å«è‡ªåŠ¨ä¼ å…¥çš„å‚æ•°(currentValue,currentIndex,thisArr)</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">è§£é‡Šäº†[<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-string">&#x27;3&#x27;</span>].map(<span class="hljs-built_in">parseInt</span>)=  <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-number">0</span>),<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&#x27;2&#x27;</span>,<span class="hljs-number">1</span>),<span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&#x27;3&#x27;</span>,<span class="hljs-number">2</span>)=  <span class="hljs-number">1</span>,<span class="hljs-literal">NaN</span>,<span class="hljs-literal">NaN</span></code></pre></div><ul><li><p><code>map()</code>åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœ</p></li><li><p><code>flatmap()</code>ä½¿ç”¨æ˜ å°„å‡½æ•°æ˜ å°„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åå°†ç»“æœå‹ç¼©æˆä¸€ä¸ªæ–°æ•°ç»„</p></li><li><p><code>some()</code>æ–¹æ³•æµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡è¢«æä¾›çš„å‡½æ•°æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª Boolean ç±»å‹çš„å€¼</p></li><li><p><code>every()</code>æ£€æµ‹æ•°ç»„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆåˆ¤æ–­æ¡ä»¶,<br>å¦‚æœæ•°ç»„ä¸­æ£€æµ‹åˆ°æœ‰ä¸€ä¸ªå…ƒç´ ä¸æ»¡è¶³, åˆ™æ•´ä¸ªè¡¨è¾¾å¼è¿”å› false,ä¸”åœæ­¢éå†</p></li><li><p><code>forEach()</code>å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›çš„å‡½æ•°ã€‚*<em>æ— æ³•ä¸­é€”é€€å‡ºå¾ªç¯</em>*  </p></li><li><p><code>filter()</code>è¿”å›è¿‡æ»¤åçš„æ•°ç»„</p></li><li><p><code>find()</code>è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦åˆ™è¿”å› undefined</p></li><li><p><code>findIndex()</code>è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ã€‚å¦åˆ™è¿”å›-1</p></li><li><p><code>reduce()å’ŒreduceRight()</code>ç´¯åŠ å™¨,ç´¯åŠ å‡½æ•°çš„ return ä½œä¸ºä¸‹ä¸€æ¬¡ç´¯åŠ çš„ pre å€¼ï¼Œå¹¶å¯æŒ‡å®šåˆå§‹å€¼</p></li><li><p><code>flat(deepth)</code>æŒ‰ç…§ä¸€ä¸ªå¯æŒ‡å®šçš„æ·±åº¦é€’å½’éå†æ•°ç»„ï¼Œå¹¶å°†æ‰€æœ‰å…ƒç´ ä¸éå†åˆ°çš„å­æ•°ç»„ä¸­çš„å…ƒç´ åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ï¼ˆ<em>ä¼šç§»é™¤æ•°ç»„ä¸­çš„ç©ºé¡¹</em>ï¼‰</p></li><li><p><code>keys()</code></p></li><li><p><code>values()</code></p></li><li><p><code>entries()</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index <span class="hljs-keyword">of</span> [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>].keys()) &#123;  <span class="hljs-built_in">console</span>.log(index);&#125;<span class="hljs-comment">// 0</span><span class="hljs-comment">// 1</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> elem <span class="hljs-keyword">of</span> [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>].values()) &#123;  <span class="hljs-built_in">console</span>.log(elem);&#125;<span class="hljs-comment">// &#x27;a&#x27;</span><span class="hljs-comment">// &#x27;b&#x27;</span><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [index, elem] <span class="hljs-keyword">of</span> [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>].entries()) &#123;  <span class="hljs-built_in">console</span>.log(index, elem);&#125;<span class="hljs-comment">// 0 &quot;a&quot;</span><span class="hljs-comment">// 1 &quot;b&quot;</span></code></pre></div></li></ul><h2 id="åˆ¤æ–­æ•°ç»„"><a href="#åˆ¤æ–­æ•°ç»„" class="headerlink" title="åˆ¤æ–­æ•°ç»„"></a>åˆ¤æ–­æ•°ç»„</h2><ol><li><code>arr.constructor===Array</code></li><li><code>arr instanceof Array</code></li><li><code>Array.prototype.isPrototypeOf(arr)</code><br>  æŸ¥æ‰¾åŸå‹çš„æ–¹æ³•ï¼Œå¦‚æœæ‰‹åŠ¨æ›´æ”¹å¯¹è±¡çš„åŸå‹ä¹Ÿå¯æ¬ºéª—è¿‡æ£€æµ‹</li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> arr = [];<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Array</span>.prototype.isPrototypeOf(arr));<span class="hljs-built_in">console</span>.log(arr <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>);<span class="hljs-built_in">console</span>.log(arr.constructor === <span class="hljs-built_in">Array</span>);arr = &#123;  __proto__: <span class="hljs-built_in">Array</span>.prototype,&#125;;<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Array</span>.prototype.isPrototypeOf(arr));<span class="hljs-built_in">console</span>.log(arr <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span>);<span class="hljs-built_in">console</span>.log(arr.constructor === <span class="hljs-built_in">Array</span>);</code></pre></div><ol><li><code>Object.prototype.toString.call(arr)===&#39;[object Array]&#39;</code></li><li><code>Array.isArray()</code></li></ol><h2 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>];<span class="hljs-comment">// 1</span><span class="hljs-keyword">let</span> uni1 = <span class="hljs-built_in">Array</span>.from(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(arr));<span class="hljs-comment">// 2</span><span class="hljs-keyword">let</span> uni2 = [...new <span class="hljs-built_in">Set</span>(arr)];<span class="hljs-comment">// 3</span><span class="hljs-keyword">let</span> uni3 = arr.sort().reduce((init, cur) =  &#123;  <span class="hljs-keyword">if</span> (init.length === <span class="hljs-number">0</span> || init[init.length - <span class="hljs-number">1</span>] !== cur) &#123;    init.push(cur);  &#125;  <span class="hljs-keyword">return</span> init;&#125;, []);<span class="hljs-comment">// 4</span><span class="hljs-keyword">let</span> uni4 = arr.filter((item,index)= &#123;  <span class="hljs-keyword">return</span> arr.indexOf(item) === index&#125;)</code></pre></div><h2 id="è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°"><a href="#è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°" class="headerlink" title="è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°"></a>è®¡ç®—æ•°ç»„ä¸­å…ƒç´ å‡ºç°çš„æ¬¡æ•°</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>];<span class="hljs-comment">//reduce</span><span class="hljs-keyword">let</span> countArr = arr.reduce((obj, i) =  &#123;  <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> obj) &#123;    obj[i]++;  &#125; <span class="hljs-keyword">else</span> &#123;    obj[i] = <span class="hljs-number">1</span>;  &#125;  <span class="hljs-keyword">return</span> obj;&#125;, &#123;&#125;);<span class="hljs-comment">// &#123; &#x27;1&#x27;: 2, &#x27;2&#x27;: 2, &#x27;3&#x27;: 2, &#x27;4&#x27;: 4 &#125;</span><span class="hljs-comment">// å¾ªç¯</span><span class="hljs-keyword">let</span> obj = &#123;&#125;;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">of</span> arr) &#123;  <span class="hljs-keyword">if</span> (i <span class="hljs-keyword">in</span> obj) &#123;    obj[i]++;  &#125; <span class="hljs-keyword">else</span> &#123;    obj[i] = <span class="hljs-number">1</span>;  &#125;&#125;</code></pre></div><h2 id="å¯¹äº-obj-æŒ‰ç…§å±æ€§åˆ†ç±»"><a href="#å¯¹äº-obj-æŒ‰ç…§å±æ€§åˆ†ç±»" class="headerlink" title="å¯¹äº obj æŒ‰ç…§å±æ€§åˆ†ç±»"></a>å¯¹äº obj æŒ‰ç…§å±æ€§åˆ†ç±»</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// é¢è¯•é¢˜æ•™ä½ å½’ç±»json</span><span class="hljs-comment">// JSON.parse(jsonStr)</span><span class="hljs-keyword">let</span> person = [  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Hank&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Jery&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span> &#125;,];<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">groupBy</span>(<span class="hljs-params">objArr, prop</span>) </span>&#123;  <span class="hljs-keyword">return</span> objArr.reduce((acc, obj) =  &#123;    <span class="hljs-keyword">let</span> key = obj[prop];    <span class="hljs-keyword">if</span> (!acc[key]) &#123;      acc[key] = [];    &#125;    acc[key].push(obj);    <span class="hljs-keyword">return</span> acc;  &#125;, &#123;&#125;);&#125;<span class="hljs-keyword">let</span> res = groupBy(person, <span class="hljs-string">&quot;age&quot;</span>);</code></pre></div><h2 id="æ‰å¹³åŒ–æ•°ç»„"><a href="#æ‰å¹³åŒ–æ•°ç»„" class="headerlink" title="æ‰å¹³åŒ–æ•°ç»„"></a>æ‰å¹³åŒ–æ•°ç»„</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 1 reduce</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat1</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">return</span> arr.reduce((res, item) =  &#123;    <span class="hljs-keyword">return</span> res.concat(<span class="hljs-built_in">Array</span>.isArray(item) ? flat1(item) : item);  &#125;, []);&#125;<span class="hljs-comment">//2 é€’å½’</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat2</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">let</span> res = [];  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> arr) &#123;    <span class="hljs-built_in">Array</span>.isArray(item) ? (res = res.concat.flat2(item)) : res.push(item);  &#125;  <span class="hljs-keyword">return</span> res;&#125;<span class="hljs-comment">// 3 å±•å¼€è¿ç®—ç¬¦</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat3</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">while</span> (arr.some((item) =  <span class="hljs-built_in">Array</span>.isArray(item))) &#123;    arr = [].concat(...arr);  &#125;  <span class="hljs-keyword">return</span> arr;&#125;<span class="hljs-comment">// 4 toString</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat4</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">return</span> arr    .toString()    .split(<span class="hljs-string">&quot;,&quot;</span>)    .map((item) =  <span class="hljs-built_in">Number</span>(item));&#125;<span class="hljs-comment">// 5 join</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flat5</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">return</span> arr    .join(<span class="hljs-string">&quot;,&quot;</span>)    .split(<span class="hljs-string">&quot;,&quot;</span>)    .map((item) =  <span class="hljs-built_in">Number</span>(item));&#125;<span class="hljs-comment">// 6 flat()</span>flat(<span class="hljs-literal">Infinity</span>);</code></pre></div><h2 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h2><h3 id="V8ä¸­çš„sort"><a href="#V8ä¸­çš„sort" class="headerlink" title="V8ä¸­çš„sort()"></a>V8ä¸­çš„sort()</h3><ul><li>7.0ä¹‹å‰ arr.length =10ã€æ’å…¥æ’åºã€‘ï¼Œ 10ã€å¿«é€Ÿæ’åºã€‘</li><li>7.0ä¹‹å ã€timesortã€‘ <h3 id="æ‰‹å†™æ’åºæ–¹æ³•"><a href="#æ‰‹å†™æ’åºæ–¹æ³•" class="headerlink" title="æ‰‹å†™æ’åºæ–¹æ³•"></a>æ‰‹å†™æ’åºæ–¹æ³•</h3><h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><blockquote><p>O(n^2)</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bubbleSort</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">const</span> len = arr.length;  <span class="hljs-keyword">if</span> (len &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> arr  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len-<span class="hljs-number">1</span> ; i++) &#123;    <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æå‰é€€å‡ºæ ‡è¯†</span>    <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; len - <span class="hljs-number">1</span> - i; j++) &#123;      <span class="hljs-keyword">if</span> (arr[j] &gt;  arr[j + <span class="hljs-number">1</span>]) &#123;        [arr[j], arr[j + <span class="hljs-number">1</span>]] = [arr[j + <span class="hljs-number">1</span>], arr[j]];        flag = <span class="hljs-literal">true</span>;      &#125;    &#125;    <span class="hljs-keyword">if</span> (!flag) <span class="hljs-keyword">break</span>;  &#125;  <span class="hljs-keyword">return</span> arr;&#125;</code></pre></div></li></ul><h4 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h4><blockquote><p>O(n^2)</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insertSort1</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> len = arr.length  <span class="hljs-keyword">if</span>(len &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> arr  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span> ;i&lt;len ;i++)&#123;    <span class="hljs-keyword">const</span> temp = arr[i]    <span class="hljs-keyword">let</span> j = i    <span class="hljs-keyword">if</span>(arr[j-<span class="hljs-number">1</span>]&gt;temp)&#123;      <span class="hljs-keyword">while</span>(arr[j-<span class="hljs-number">1</span>]&gt;temp &amp;&amp; j&gt;<span class="hljs-number">0</span>)&#123;        arr[j] = arr[j-<span class="hljs-number">1</span>]        j--      &#125;    &#125;    <span class="hljs-comment">// å°†å…ƒç´ æ’å…¥æ­£ç¡®ä½ç½®</span>    arr[j] = temp  &#125;  <span class="hljs-keyword">return</span> arr&#125;<span class="hljs-comment">// äº¤æ¢[ä½æ•ˆç‡]</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insertSort2</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> len = arr.length  <span class="hljs-keyword">if</span>(len &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> arr  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span> ;i &lt; len ;i++)&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = i ;j &gt; <span class="hljs-number">0</span> &amp;&amp; arr[j] &gt;arr[j-<span class="hljs-number">1</span>];j--)&#123;      <span class="hljs-comment">// ä¾æ¬¡ç§»åŠ¨iæŒ‡é’ˆ</span>      <span class="hljs-comment">// å¾ªç¯æ¯”è¾ƒå°†iä½ç½®é¡ºåºæ’å…¥åˆ°içš„å·¦è¾¹</span>      <span class="hljs-comment">// ä¾æ¬¡å¾€å‰å†’æ³¡åˆ°åˆç†ä½ç½®</span>      [arr[j],arr[j-<span class="hljs-number">1</span>]] = [arr[j-<span class="hljs-number">1</span>],arr[j]]    &#125;  &#125;  <span class="hljs-keyword">return</span> arr&#125;</code></pre></div><h4 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h4><blockquote><p>å¹³å‡O(n log 2n) æœ€åO(n^2)</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¸Œå°”æ’åºç›¸å½“äºæœ‰é—´éš”å¾—è¿›è¡Œæ’å…¥æ’åº</span><span class="hljs-comment">// ç§»åŠ¨</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shellSort1</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> len = arr.length  <span class="hljs-keyword">if</span>(len&lt;<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> arr  <span class="hljs-keyword">let</span> gap = <span class="hljs-built_in">Math</span>.floor(len/<span class="hljs-number">2</span>)  <span class="hljs-keyword">for</span>(;gap&gt;<span class="hljs-number">0</span>;gap = <span class="hljs-built_in">Math</span>.floor(gap/<span class="hljs-number">2</span>))&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = gap;i&lt;len;i++)&#123;      <span class="hljs-keyword">const</span> temp = arr[i]      <span class="hljs-keyword">let</span> j = i      <span class="hljs-keyword">if</span>(arr[j-gap]&gt;temp)&#123;        <span class="hljs-keyword">while</span>(arr[j-gap]&gt;temp &amp;&amp; j-gap&gt;=<span class="hljs-number">0</span>)&#123;          arr[j] = arr[j-gap]          j-=gap        &#125;      &#125;      arr[j] = temp    &#125;  &#125;  <span class="hljs-keyword">return</span> arr&#125;<span class="hljs-comment">// äº¤æ¢[ä½æ•ˆç‡]</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shellSort2</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> len = arr.length  <span class="hljs-keyword">let</span> gap = <span class="hljs-built_in">Math</span>.floor(len/<span class="hljs-number">2</span>)  <span class="hljs-keyword">for</span>(;gap&gt;<span class="hljs-number">0</span>;gap = <span class="hljs-built_in">Math</span>.floor(gap/<span class="hljs-number">2</span>))&#123;    <span class="hljs-comment">// ä¸æ–­ç¼©å°é—´éš”çš„é•¿åº¦</span>    <span class="hljs-comment">// æœ€ç»ˆä¼šä¸º1</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = gap ; i&lt;len ;i++)&#123;      <span class="hljs-comment">// iæŒ‡é’ˆ</span>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = i;j-gap&gt;=<span class="hljs-number">0</span> &amp;&amp; arr[j-gap] &gt; arr[j];j-=gap)&#123;        <span class="hljs-comment">// æ¯”è¾ƒæŒ‡é’ˆå·¦è¾¹ä¸æŒ‡é’ˆä½ç½®ç›¸è·gapçš„å…ƒç´ </span>        <span class="hljs-comment">// å†’æ³¡åˆ°è¯¥ä½ç½®</span>        [arr[j],arr[j-gap]] = [arr[j-gap],arr[j]]      &#125;    &#125;  &#125;  <span class="hljs-keyword">return</span> arr&#125;</code></pre></div><h4 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h4><blockquote><p>æ—¶é—´O(n^2)</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectionSort</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">var</span> len = arr.length;  <span class="hljs-keyword">var</span> minIndex;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len - <span class="hljs-number">1</span>; i++) &#123;    minIndex = i;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = i + <span class="hljs-number">1</span>; j &lt; len; j++) &#123;      <span class="hljs-keyword">if</span> (arr[j] &lt; arr[minIndex]) &#123;        <span class="hljs-comment">// å¯»æ‰¾iå³è¾¹æœ€å°çš„æ•°</span>        minIndex = j; <span class="hljs-comment">// å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜</span>      &#125;    &#125;    [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]];  &#125;  <span class="hljs-keyword">return</span> arr;&#125;</code></pre></div><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><blockquote><p>å¹³å‡ O(n log n)</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> quickSort = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">if</span> (arr.length &lt; <span class="hljs-number">2</span>) &#123;    <span class="hljs-keyword">return</span> arr;  &#125; <span class="hljs-comment">//ä¸€ç›´æ’åºåˆ°åŒºé—´å†…åªæœ‰ä¸€ä¸ªæ•°</span>  <span class="hljs-keyword">var</span> pivotIndex = <span class="hljs-built_in">Math</span>.floor(arr.length / <span class="hljs-number">2</span>); <span class="hljs-comment">//åŸºå‡†ä½ç½®ï¼ˆå¯ä»»æ„é€‰å–ï¼‰</span>  <span class="hljs-keyword">var</span> pivot = arr.splice(pivotIndex, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>]; <span class="hljs-comment">//æ‰¾å‡ºåŸºå‡†æ•°å¹¶æŠŠå®ƒä»åŸæ•°ç»„åˆ é™¤</span>  <span class="hljs-keyword">var</span> left = [];  <span class="hljs-comment">// ç©ºé—´å¤æ‚åº¦O(n)</span>  <span class="hljs-keyword">var</span> right = [];  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;    <span class="hljs-keyword">if</span> (arr[i] &lt; pivot) &#123;      left.push(arr[i]);    &#125; <span class="hljs-keyword">else</span> &#123;      right.push(arr[i]);    &#125;  &#125;  <span class="hljs-keyword">return</span> [...quickSort(left), pivot, ...quickSort(right)]; <span class="hljs-comment">// ä¸ä½¿ç”¨é¢å¤–ç©ºé—´</span>  <span class="hljs-comment">// éšæœºé€‰å–åŸºå‡†ï¼Œæ•°ç»„åˆ†æˆåŸºå‡†å·¦å³ä¸¤éƒ¨åˆ†</span>  <span class="hljs-comment">// å°†æ¯”åŸºå‡†å¤§çš„ç§»åŠ¨åŸºå‡†å³è¾¹ï¼Œæ¯”åŸºå‡†å°çš„ç§»åŠ¨åˆ°åŸºå‡†å·¦è¾¹</span>  <span class="hljs-comment">// é€’å½’åˆ†å‰²æ’åº</span>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quickSort</span>(<span class="hljs-params">arr</span>) </span>&#123;    quick(arr, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>);    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick</span>(<span class="hljs-params">arr, left, right</span>) </span>&#123;      <span class="hljs-keyword">if</span>(left&gt;=right) <span class="hljs-keyword">return</span>         <span class="hljs-keyword">const</span> index = partition(arr, left, right);        <span class="hljs-comment">// é€‰å‡ºä¸€ä¸ªéšæœºå€¼ï¼Œå¹¶æŠŠå®ƒç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®</span>        <span class="hljs-comment">// æ ¹æ®è¯¥ä½ç½®åˆ‡å‰²é€’å½’</span>        <span class="hljs-keyword">if</span> (left &lt; index - <span class="hljs-number">1</span>) &#123;          <span class="hljs-comment">//æ’åºå·¦è¾¹</span>          quick(arr, left, index - <span class="hljs-number">1</span>);        &#125;        <span class="hljs-keyword">if</span> (index &lt; right) &#123;          <span class="hljs-comment">// æ’åºå³è¾¹</span>          quick(arr, index+<span class="hljs-number">1</span>, right);        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">partition</span>(<span class="hljs-params">arr, left, right</span>) </span>&#123;      <span class="hljs-keyword">const</span> base = arr[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (right - left + <span class="hljs-number">1</span>)) + left];      <span class="hljs-comment">// éšæœºé€‰</span>      <span class="hljs-keyword">let</span> L = left,        R = right;        <span class="hljs-comment">// å·¦å³æŒ‡é’ˆ</span>      <span class="hljs-keyword">while</span> (L &lt; R) &#123;        <span class="hljs-keyword">while</span> (arr[L] &lt; base) &#123;          L++;          <span class="hljs-comment">// å·¦æŒ‡é’ˆå‘å³æŸ¥æ‰¾æ¯”åŸºå‡†å¤§</span>        &#125;        <span class="hljs-keyword">while</span> (arr[R] &gt; base) &#123;          R--;          <span class="hljs-comment">//å³æŒ‡é’ˆå‘å·¦æŸ¥æ‰¾æ¯”åŸºå‡†å°</span>        &#125;        <span class="hljs-keyword">if</span> (L &lt; R) &#123;          [arr[L], arr[R]] = [arr[R], arr[L]];          <span class="hljs-comment">//äº¤æ¢ä½ç½®</span>        &#125;        <span class="hljs-keyword">if</span>(arr[L]===arr[R] &amp;&amp; L!==R)&#123;          <span class="hljs-comment">//é‡å¤å…ƒç´ </span>          L++        &#125;      &#125;      <span class="hljs-comment">//æœ€åè¾“å‡ºä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ä½ç½®</span>      <span class="hljs-comment">//è¿”å›è¿™ä¸ªä½ç½®</span>      <span class="hljs-keyword">return</span> L;    &#125;    <span class="hljs-keyword">return</span> arr  &#125;  quickSort([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>]);  <span class="hljs-comment">//[(1, 2, 3, 4, 5, 6, 7, 8)];</span></code></pre></div><h4 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h4><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å»ºç«‹å¤§é¡¶å †</span><span class="hljs-comment">// ä¾æ¬¡å°†æœ«å°¾å…ƒç´ ä¸heap[1]äº¤æ¢ä½ç½®å¹¶è°ƒæ•´å †ï¼ŒåŒæ—¶ç¼©å°å †çš„å¤§å°ï¼ˆæ’é™¤æœ€åçš„å¤§æ•°ï¼‰</span><span class="hljs-comment">// heap[2]å’Œheap[1]äº¤æ¢å®Œæˆåå°±æ˜¯å‡åºæ’åº</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapSort</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">const</span> heap = [,...arr]  <span class="hljs-keyword">let</span> heapSize = arr.length  buildHeap(heap,heapSize)  <span class="hljs-comment">// å¼€å§‹äº¤æ¢å¤´å°¾</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> k = heapSize;k&gt;<span class="hljs-number">1</span>;k--)&#123;    [heap[k],heap[<span class="hljs-number">1</span>]] = [heap[<span class="hljs-number">1</span>],heap[k]]    heapify(heap,--heapSize,<span class="hljs-number">1</span>)  &#125;  heap.shift()  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">heap,size</span>)</span>&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">Math</span>.floor(size/<span class="hljs-number">2</span>);i&gt;=<span class="hljs-number">1</span>;i--)&#123;      heapify(heap,size,i)    &#125;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">heap,heapSize,i</span>)</span>&#123;    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;      <span class="hljs-keyword">let</span> maxIndex = i      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i &lt;= heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i] &gt; heap[i]) maxIndex = <span class="hljs-number">2</span> * i       <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;=heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>] &gt; heap[maxIndex]) maxIndex = <span class="hljs-number">2</span> * i +<span class="hljs-number">1</span>      <span class="hljs-keyword">if</span>(maxIndex === i) <span class="hljs-keyword">break</span>      [heap[maxIndex],heap[i]] = [heap[i],heap[maxIndex]]      i = maxIndex    &#125;  &#125;&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Promise</title>
    <link href="/2021/04/13/Promise/"/>
    <url>/2021/04/13/Promise/</url>
    
    <content type="html"><![CDATA[<h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><p>Promise å¯¹è±¡ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå°šæœªå®Œæˆä¸”é¢„è®¡åœ¨æœªæ¥å®Œæˆçš„å¼‚æ­¥æ“ä½œã€‚</p><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>è§£å†³å›è°ƒåœ°ç‹±</li><li>ç»Ÿä¸€çš„ API æ¥å£å¤„ç†å¼‚æ­¥ä»»åŠ¡</li><li>é“¾å¼è°ƒç”¨</li><li>è¿”å›å€¼ç©¿é€</li><li>é”™è¯¯å†’æ³¡</li></ul><h2 id="Promise-å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹"><a href="#Promise-å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹" class="headerlink" title="Promise å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹"></a>Promise å¯¹è±¡æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹</h2><ol><li><p>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰å’Œ<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯ Promise è¿™ä¸ªåå­—çš„ç”±æ¥ï¼Œå®ƒçš„è‹±è¯­æ„æ€å°±æ˜¯â€œæ‰¿è¯ºâ€ï¼Œè¡¨ç¤ºå…¶ä»–æ‰‹æ®µæ— æ³•æ”¹å˜ã€‚</p></li><li><p>ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä» pending å˜ä¸º fulfilled å’Œä» pending å˜ä¸º rejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœï¼Œè¿™æ—¶å°±ç§°ä¸º resolvedï¼ˆå·²å®šå‹ï¼‰ã€‚å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚è¿™ä¸äº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœä½ é”™è¿‡äº†å®ƒï¼Œå†å»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æœçš„ã€‚</p></li></ol><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><h3 id="Promise-prototype-then"><a href="#Promise-prototype-then" class="headerlink" title="Promise.prototype.then()"></a>Promise.prototype.then()</h3><ul><li>ä¸º Promise å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°</li><li>then æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>resolved</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯<code>rejected</code>çŠ¶æ€çš„å›è°ƒå‡½æ•°</li><li>then æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹,å¯ä»¥ then æ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª then æ–¹æ³•</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">getJSON(<span class="hljs-string">&quot;/post/1.json&quot;</span>)  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">post</span>) </span>&#123;    <span class="hljs-keyword">return</span> getJSON(post.commentURL);  &#125;)  .then(    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcA</span>(<span class="hljs-params">comments</span>) </span>&#123;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;resolved: &quot;</span>, comments);    &#125;,    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funcB</span>(<span class="hljs-params">err</span>) </span>&#123;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;rejected: &quot;</span>, err);    &#125;  );<span class="hljs-comment">// ç¬¬ä¸€ä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œè¿”å›çš„æ˜¯å¦ä¸€ä¸ªPromiseå¯¹è±¡ã€‚è¿™æ—¶ï¼Œç¬¬äºŒä¸ªthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¿™ä¸ªæ–°çš„Promiseå¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–ã€‚å¦‚æœå˜ä¸ºresolvedï¼Œå°±è°ƒç”¨funcAï¼Œå¦‚æœçŠ¶æ€å˜ä¸ºrejectedï¼Œå°±è°ƒç”¨funcBã€‚</span></code></pre></div><h3 id="Promise-prototype-catch"><a href="#Promise-prototype-catch" class="headerlink" title="Promise.prototype.catch()"></a>Promise.prototype.catch()</h3><ul><li><p>æŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°</p></li><li><p>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª<code>catch</code>è¯­å¥æ•è·</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰ Reject çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨catchæ–¹æ³•ã€‚</span><span class="hljs-comment">// bad</span>promise.then(  <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;    <span class="hljs-comment">// success</span>  &#125;,  <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;    <span class="hljs-comment">// error</span>  &#125;);<span class="hljs-comment">// good</span>promise  .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;    <span class="hljs-comment">//cb</span>    <span class="hljs-comment">// success</span>  &#125;)  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>&#123;    <span class="hljs-comment">// error</span>  &#125;);</code></pre></div><ul><li><p>è·Ÿä¼ ç»Ÿçš„<code>try/catch</code>ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨<code>catch</code>æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼ŒPromise å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”</p></li><li><p>catch æ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤åé¢è¿˜å¯ä»¥æ¥ç€è°ƒç”¨ then æ–¹æ³•</p></li></ul><h3 id="Promise-prototype-finally"><a href="#Promise-prototype-finally" class="headerlink" title="Promise.prototype.finally()"></a>Promise.prototype.finally()</h3><ul><li><p>finally æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œ</p></li><li><p>finally æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰åŠæ³•çŸ¥é“ï¼Œå‰é¢çš„ Promise çŠ¶æ€åˆ°åº•æ˜¯ fulfilled è¿˜æ˜¯ rejectedã€‚è¿™è¡¨æ˜ï¼Œfinally æ–¹æ³•é‡Œé¢çš„æ“ä½œï¼Œåº”è¯¥æ˜¯ä¸çŠ¶æ€æ— å…³çš„ï¼Œä¸ä¾èµ–äº Promise çš„æ‰§è¡Œç»“æœã€‚</p></li></ul><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all()"></a>Promise.all()</h3><ul><li>Promise.all æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li></ul><p><code>const p = Promise.all([p1, p2, p3]);</code></p><ul><li>p çš„çŠ¶æ€ç”± p1ã€p2ã€p3 å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚</li></ul><ol><li><p>åªæœ‰ p1ã€p2ã€p3 çš„çŠ¶æ€éƒ½å˜æˆ<code>fulfilled</code>ï¼Œp çš„çŠ¶æ€æ‰ä¼šå˜æˆ<code>fulfilled</code>ï¼Œæ­¤æ—¶ p1ã€p2ã€p3 çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°ã€‚</p></li><li><p>åªè¦ p1ã€p2ã€p3 ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«<code>rejected</code>ï¼Œp çš„çŠ¶æ€å°±å˜æˆ<code>rejected</code>ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«<code>reject</code>çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°</p></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// example</span><span class="hljs-keyword">const</span> databasePromise = connectDatabase();<span class="hljs-keyword">const</span> booksPromise = databasePromise.then(findAllBooks);<span class="hljs-keyword">const</span> userPromise = databasePromise.then(getCurrentUser);<span class="hljs-built_in">Promise</span>.all([booksPromise, userPromise]).then(<span class="hljs-function">(<span class="hljs-params">[books, user]</span>) =&gt;</span>  pickTopRecommendations(books, user));</code></pre></div><ul><li>å¦‚æœä½œä¸ºå‚æ•°çš„ Promise å®ä¾‹ï¼Œè‡ªå·±å®šä¹‰äº† catch æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¸€æ—¦è¢« rejectedï¼Œå¹¶ä¸ä¼šè§¦å‘ Promise.all()çš„ catch æ–¹æ³•</li></ul><h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race()"></a>Promise.race()</h3><p>Promise.race æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª Promise å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹ã€‚</p><p><code>const p = Promise.race([p1, p2, p3]);</code></p><p>ä¸Šé¢ä»£ç ä¸­ï¼Œåªè¦ p1ã€p2ã€p3 ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œp çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™ p çš„å›è°ƒå‡½æ•°ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//example</span><span class="hljs-keyword">const</span> p = <span class="hljs-built_in">Promise</span>.race([  fetch(<span class="hljs-string">&quot;/resource-that-may-take-a-while&quot;</span>),  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;request timeout&quot;</span>)), <span class="hljs-number">5000</span>);  &#125;), <span class="hljs-comment">// 5så†…è¯·æ±‚ä¸resolveåˆ™æŠ›å‡ºé”™è¯¯</span>]);p.then(<span class="hljs-built_in">console</span>.log).catch(<span class="hljs-built_in">console</span>.error);</code></pre></div><h3 id="promise-try"><a href="#promise-try" class="headerlink" title="promise.try()"></a>promise.try()</h3><p>ä¸æƒ³åŒºåˆ†ï¼Œå‡½æ•° f æ˜¯åŒæ­¥å‡½æ•°è¿˜æ˜¯å¼‚æ­¥æ“ä½œï¼Œä½†æ˜¯æƒ³ç”¨ Promise æ¥å¤„ç†å®ƒ</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">try</span> &#123;  database.users.get(&#123;<span class="hljs-attr">id</span>: userId&#125;)  .then(...)  .catch(...) <span class="hljs-comment">// promiseé”™è¯¯</span>&#125; <span class="hljs-keyword">catch</span> (e) &#123; <span class="hljs-comment">// åŒæ­¥é”™è¯¯</span>  <span class="hljs-comment">// ...</span>&#125;<span class="hljs-comment">// try catchæ•è·åŒæ­¥é”™è¯¯</span><span class="hljs-comment">// ç”¨promise.tryæ”¹å†™</span><span class="hljs-built_in">Promise</span>.try(<span class="hljs-function">() =&gt;</span> database.users.get(&#123;<span class="hljs-attr">id</span>: userId&#125;))  .then(...)  .catch(...)</code></pre></div><h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><ul><li>ç«‹å³<code>resolve()</code>çš„ Promise å¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶æ‰§è¡Œ</li></ul><blockquote><p>Promise.resolve()æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ Promise å¯¹è±¡ã€‚</p></blockquote><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;three&quot;</span>);&#125;, <span class="hljs-number">0</span>);<span class="hljs-built_in">Promise</span>.resolve().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;two&quot;</span>);&#125;);<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;one&quot;</span>);<span class="hljs-comment">// one</span><span class="hljs-comment">// two</span><span class="hljs-comment">// three</span></code></pre></div><ul><li><p><code>Promise.reject()</code>æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŸå°ä¸åŠ¨åœ°ä½œä¸º reject çš„ç†ç”±ï¼Œå˜æˆåç»­æ–¹æ³•çš„å‚æ•°</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> thenable = &#123;  <span class="hljs-function"><span class="hljs-title">then</span>(<span class="hljs-params">resolve, reject</span>)</span> &#123;    reject(<span class="hljs-string">&quot;å‡ºé”™äº†&quot;</span>);  &#125;,&#125;;<span class="hljs-built_in">Promise</span>.reject(thenable).catch(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;  <span class="hljs-built_in">console</span>.log(e);&#125;);<span class="hljs-comment">// catchæ–¹æ³•çš„å‚æ•°ä¸æ˜¯rejectæŠ›å‡ºçš„â€œå‡ºé”™äº†â€è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯thenableå¯¹è±¡ã€‚</span></code></pre></div></li></ul><h2 id="æ‰‹å†™ä¸€ä¸ª-Promise"><a href="#æ‰‹å†™ä¸€ä¸ª-Promise" class="headerlink" title="æ‰‹å†™ä¸€ä¸ª Promise"></a>æ‰‹å†™ä¸€ä¸ª Promise</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ç¬¦åˆA+è§„èŒƒçš„promise</span><span class="hljs-comment">// promises-aplus-tests</span><span class="hljs-keyword">const</span> isComplex = <span class="hljs-function">(<span class="hljs-params">o</span>) =&gt;</span>  o !== <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-keyword">typeof</span> o === <span class="hljs-string">&quot;function&quot;</span> || <span class="hljs-keyword">typeof</span> o === <span class="hljs-string">&quot;object&quot;</span>);  <span class="hljs-comment">//è§£æthençš„æ‰§è¡Œç»“æœ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvePromise</span>(<span class="hljs-params">promise2, x, resolve, reject</span>) </span>&#123;  <span class="hljs-keyword">if</span> (promise2 === x) &#123;    <span class="hljs-comment">// å¾ªç¯å¼•ç”¨</span>    <span class="hljs-keyword">return</span> reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">&quot;cycle quotes detected&quot;</span>));  &#125;  <span class="hljs-keyword">if</span> (isComplex(x)) &#123;    <span class="hljs-comment">// xæ˜¯functionæˆ–è€…object</span>    <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">false</span>;    <span class="hljs-comment">// åªreturnç¬¬ä¸€ä¸ª</span>    <span class="hljs-keyword">try</span> &#123;      <span class="hljs-keyword">let</span> then = x.then;      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> then === <span class="hljs-string">&quot;function&quot;</span>) &#123; <span class="hljs-comment">//å¦‚æœxæ˜¯promise</span>        then.call(          x,          (y) =&gt; &#123;            <span class="hljs-keyword">if</span> (flag) <span class="hljs-keyword">return</span>;            flag = <span class="hljs-literal">true</span>;            <span class="hljs-comment">//é€’å½’è§£æ</span>            <span class="hljs-keyword">return</span> resolvePromise(promise2, y, resolve, reject);          &#125;,          (r) =&gt; &#123;            <span class="hljs-keyword">if</span> (flag) <span class="hljs-keyword">return</span>;            flag = <span class="hljs-literal">true</span>;            <span class="hljs-keyword">return</span> reject(r);          &#125;        );      &#125; <span class="hljs-keyword">else</span> &#123;        resolve(x);<span class="hljs-comment">// xæ˜¯å¯¹è±¡</span>      &#125;    &#125; <span class="hljs-keyword">catch</span> (e) &#123;      <span class="hljs-comment">//æœ‰å¼‚å¸¸rejectå¼‚å¸¸</span>      <span class="hljs-keyword">if</span> (flag) <span class="hljs-keyword">return</span>;      flag = <span class="hljs-literal">true</span>;      <span class="hljs-keyword">return</span> reject(e);    &#125;  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-comment">// ç®€å•ç±»å‹ç›´æ¥ä½œä¸ºresolveçš„å€¼</span>    resolve(x);  &#125;&#125;<span class="hljs-comment">//</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Promise</span>(<span class="hljs-params">executor</span>) </span>&#123;  <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;pending&quot;</span>;  <span class="hljs-built_in">this</span>.data = <span class="hljs-literal">null</span>;  <span class="hljs-built_in">this</span>.onResolvedCallback = [];  <span class="hljs-built_in">this</span>.onRejectedCallback = [];  <span class="hljs-keyword">const</span> resolve = <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;      <span class="hljs-keyword">return</span> value.then(resolve, reject);    &#125;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-string">&quot;pending&quot;</span>) &#123;        <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;resolved&quot;</span>;        <span class="hljs-built_in">this</span>.data = value;        <span class="hljs-built_in">this</span>.onResolvedCallback.forEach(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> cb(value));      &#125;    &#125;);  &#125;;  <span class="hljs-keyword">const</span> reject = <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> &#123;    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-string">&quot;pending&quot;</span>) &#123;        <span class="hljs-built_in">this</span>.status = <span class="hljs-string">&quot;rejected&quot;</span>;        <span class="hljs-built_in">this</span>.data = reason;        <span class="hljs-built_in">this</span>.onRejectedCallback.forEach(<span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> cb(reason));      &#125;    &#125;);  &#125;;  <span class="hljs-comment">// ä¼ å…¥ç«‹å³æ‰§è¡Œ</span>  <span class="hljs-keyword">try</span> &#123;    executor(resolve, reject);  &#125; <span class="hljs-keyword">catch</span> (e) &#123;    reject(e);  &#125;&#125;<span class="hljs-comment">// åŸå‹é“¾ä¸Šçš„thenï¼Œå¯è°ƒç”¨å¤šæ¬¡</span><span class="hljs-built_in">Promise</span>.prototype.then = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onResolved, onRejected</span>) </span>&#123;  <span class="hljs-comment">// onResolvedå¦‚æœæ˜¯ä¸ªå€¼åˆ™ä½œä¸ºä¸Šä¸ªpromiseçš„resolveç»“æœ</span>  onResolved = <span class="hljs-keyword">typeof</span> onResolved === <span class="hljs-string">&quot;function&quot;</span> ? onResolved : <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value;  <span class="hljs-comment">// onResolvedå¦‚æœæ˜¯ä¸ªå€¼åˆ™ä½œä¸ºä¸Šä¸ªpromiseçš„rejecté”™è¯¯</span>  onRejected =    <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">&quot;function&quot;</span>      ? onRejected      : <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;          <span class="hljs-keyword">throw</span> err;        &#125;;  <span class="hljs-comment">// thenæ ¹æ®promiseçš„çŠ¶æ€è¿”å›ä¸åŒçš„promise2</span>  <span class="hljs-keyword">let</span> promise2;  <span class="hljs-comment">// å¦‚æœè°ƒç”¨ then æ—¶ï¼Œpromiseå·²ç»resolveï¼Œåˆ™æ‰§è¡Œ onFulfilledï¼Œå¹¶å°†promiseçš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»</span>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-string">&quot;resolved&quot;</span>) &#123;    promise2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">try</span> &#123;          <span class="hljs-keyword">let</span> x = onResolved(<span class="hljs-built_in">this</span>.data);          resolvePromise(promise2, x, resolve, reject);        &#125; <span class="hljs-keyword">catch</span> (e) &#123;          reject(e);        &#125;      &#125;);    &#125;)  &#125;  <span class="hljs-comment">// å¦‚æœè°ƒç”¨ then æ—¶ï¼Œpromiseå·²ç»rejectï¼Œåˆ™æ‰§è¡Œ onRejectedï¼Œå¹¶å°†promiseçš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»</span>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-string">&quot;rejected&quot;</span>) &#123;    promise2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">try</span> &#123;          <span class="hljs-keyword">let</span> x = onRejected(<span class="hljs-built_in">this</span>.data);          resolvePromise(promise2, x, resolve, reject);        &#125; <span class="hljs-keyword">catch</span> (e) &#123;          reject(e);        &#125;      &#125;);    &#125;)  &#125;  <span class="hljs-comment">// promiseçŠ¶æ€è¿˜ä¹°æ”¹å˜åˆ™å°†ä¸¤ä¸ªå›è°ƒåˆ†åˆ«åŠ å…¥æ•°ç»„</span>  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.status === <span class="hljs-string">&quot;pending&quot;</span>) &#123;    promise2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;      <span class="hljs-built_in">this</span>.onResolvedCallback.push(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">try</span> &#123;          <span class="hljs-keyword">let</span> x = onResolved(<span class="hljs-built_in">this</span>.data);          resolvePromise(promise2, x, resolve, reject);        &#125; <span class="hljs-keyword">catch</span> (e) &#123;          reject(e);        &#125;      &#125;);      <span class="hljs-built_in">this</span>.onRejectedCallback.push(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">try</span> &#123;          <span class="hljs-keyword">let</span> x = onRejected(<span class="hljs-built_in">this</span>.data);          resolvePromise(promise2, x, resolve, reject);        &#125; <span class="hljs-keyword">catch</span> (e) &#123;          reject(e);        &#125;      &#125;);    &#125;)  &#125;  <span class="hljs-keyword">return</span> promise2&#125;;<span class="hljs-built_in">Promise</span>.prototype.catch = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onRejected</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.then(<span class="hljs-literal">null</span>, onRejected);&#125;;<span class="hljs-built_in">Promise</span>.promise.finally = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">callback</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.then(    (value) =&gt; &#123;      <span class="hljs-built_in">Promise</span>.resolve(callback()).then(<span class="hljs-function">() =&gt;</span> value);    &#125;,    (reason) =&gt; &#123;      <span class="hljs-built_in">Promise</span>.resolve(callback()).then(<span class="hljs-function">() =&gt;</span> &#123;        <span class="hljs-keyword">throw</span> reason;      &#125;);    &#125;  );&#125;;<span class="hljs-built_in">Promise</span>.resolve = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>) &#123;      <span class="hljs-keyword">return</span> value.then(resolve, reject);    &#125; <span class="hljs-keyword">else</span> &#123;      resolve(value);    &#125;  &#125;);&#125;;<span class="hljs-built_in">Promise</span>.reject = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;    reject(reason);  &#125;);&#125;;<span class="hljs-built_in">Promise</span>.race = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;    arr.forEach(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.then(resolve, reject));  &#125;);&#125;;<span class="hljs-built_in">Promise</span>.any = <span class="hljs-function"><span class="hljs-params">promises</span> =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-keyword">let</span> len = promises.length    <span class="hljs-keyword">if</span>(!len) <span class="hljs-keyword">return</span> reject(<span class="hljs-keyword">new</span> AggregateError([]))    <span class="hljs-keyword">const</span> res = []    promises.forEach(<span class="hljs-function">(<span class="hljs-params">pItem,index</span>)=&gt;</span>&#123;      pItem.then(<span class="hljs-function"><span class="hljs-params">v</span>=&gt;</span>&#123;        <span class="hljs-keyword">return</span> resolve(v)      &#125;,<span class="hljs-function"><span class="hljs-params">e</span>=&gt;</span>&#123;        res.push(e)        <span class="hljs-keyword">if</span>(--len===<span class="hljs-number">0</span>)&#123;          <span class="hljs-keyword">return</span> reject(<span class="hljs-keyword">new</span> AggregateError(res))        &#125;      &#125;)    &#125;)  &#125;)&#125;<span class="hljs-built_in">Promise</span>.all = <span class="hljs-function"><span class="hljs-params">promises</span> =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>    <span class="hljs-keyword">let</span> len = promises.length    <span class="hljs-keyword">if</span>(!len)<span class="hljs-keyword">return</span> resolve([])    <span class="hljs-keyword">const</span> res = <span class="hljs-built_in">Array</span>(len)    promises.forEach(<span class="hljs-function">(<span class="hljs-params">pItem,index</span>)=&gt;</span>&#123;      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve(pItem).then(<span class="hljs-function"><span class="hljs-params">value</span>=&gt;</span>&#123;        res[index] = value        <span class="hljs-keyword">if</span>(++count===len)&#123;          <span class="hljs-keyword">return</span> resolve(res)        &#125;      &#125;,<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;        <span class="hljs-keyword">return</span> reject(err)      &#125;)    &#125;)  &#125;)&#125;<span class="hljs-built_in">Promise</span>.allSettled = <span class="hljs-function"><span class="hljs-params">promises</span> =&gt;</span> &#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>&#123;    <span class="hljs-keyword">const</span> len = promises.length    <span class="hljs-keyword">if</span>(!len)    <span class="hljs-keyword">const</span> res = <span class="hljs-built_in">Array</span>(len)    <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>    promises.forEach(<span class="hljs-function">(<span class="hljs-params">pItem,index</span>)=&gt;</span>resolvePromise(pItem,index))    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">resolvePromise</span>(<span class="hljs-params">p,i</span>)</span>&#123;      <span class="hljs-keyword">if</span>(p <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Promise</span>)&#123;        p.then(<span class="hljs-function"><span class="hljs-params">value</span>=&gt;</span>&#123;          res[i] = &#123;<span class="hljs-attr">status</span>:<span class="hljs-string">&#x27;resolved&#x27;</span>,<span class="hljs-attr">value</span>:value&#125;          <span class="hljs-keyword">if</span>(++count===len)&#123;            <span class="hljs-keyword">return</span> resolve(res)          &#125;        &#125;,<span class="hljs-function"><span class="hljs-params">reason</span>=&gt;</span>&#123;          res[i] = &#123;<span class="hljs-attr">status</span>:<span class="hljs-string">&#x27;rejected&#x27;</span>,<span class="hljs-attr">reason</span>:reason&#125;          <span class="hljs-keyword">if</span>(++count===len)&#123;            <span class="hljs-keyword">return</span> resolve(res)          &#125;        &#125;)      &#125;<span class="hljs-keyword">else</span>&#123;        res[i] = &#123;<span class="hljs-attr">status</span>:<span class="hljs-string">&#x27;resolved&#x27;</span>,<span class="hljs-attr">value</span>:p&#125;        <span class="hljs-keyword">if</span>(++count===len)&#123;          <span class="hljs-keyword">return</span> resolve(res)        &#125;      &#125;    &#125;  &#125;)&#125;</code></pre></div><h2 id="åŒæ­¥å‡½æ•°-promise-åŒ–"><a href="#åŒæ­¥å‡½æ•°-promise-åŒ–" class="headerlink" title="åŒæ­¥å‡½æ•° promise åŒ–"></a>åŒæ­¥å‡½æ•° promise åŒ–</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> promisify = <span class="hljs-function">(<span class="hljs-params">func</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span>  <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;    args.push(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, value</span>) </span>&#123;      <span class="hljs-keyword">if</span> (err) reject(err);      <span class="hljs-keyword">else</span> resolve(value);    &#125;);    func.apply(<span class="hljs-literal">null</span>, args);  &#125;);</code></pre></div><h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;  <span class="hljs-comment">// ...</span>&#125;);<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;  <span class="hljs-comment">// ...</span>  resolve(p1);&#125;);<span class="hljs-comment">//p1çš„çŠ¶æ€å†³å®šäº†p2çš„çŠ¶æ€ã€‚å¦‚æœp1çš„çŠ¶æ€æ˜¯pendingï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…p1çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœp1çš„çŠ¶æ€å·²ç»æ˜¯resolvedæˆ–è€…rejectedï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œã€‚</span><span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> reject(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&quot;fail&quot;</span>)), <span class="hljs-number">3000</span>);&#125;);<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, reject</span>) </span>&#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> resolve(p1), <span class="hljs-number">1000</span>);&#125;);p2.then(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(result)).catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(error));<span class="hljs-comment">// Error: fail</span><span class="hljs-comment">// ä¸Šé¢ä»£ç ä¸­ï¼Œp1æ˜¯ä¸€ä¸ª Promiseï¼Œ3 ç§’ä¹‹åå˜ä¸ºrejectedã€‚p2çš„çŠ¶æ€åœ¨ 1 ç§’ä¹‹åæ”¹å˜ï¼Œresolveæ–¹æ³•è¿”å›çš„æ˜¯p1ã€‚ç”±äºp2è¿”å›çš„æ˜¯å¦ä¸€ä¸ª Promiseï¼Œå¯¼è‡´p2è‡ªå·±çš„çŠ¶æ€æ— æ•ˆäº†ï¼Œç”±p1çš„çŠ¶æ€å†³å®šp2çš„çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œåé¢çš„thenè¯­å¥éƒ½å˜æˆé’ˆå¯¹åè€…ï¼ˆp1ï¼‰ã€‚åˆè¿‡äº† 2 ç§’ï¼Œp1å˜ä¸ºrejectedï¼Œå¯¼è‡´è§¦å‘catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>es6</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç½‘ç»œåˆ†å±‚æ¨¡å‹</title>
    <link href="/2021/04/13/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B/"/>
    <url>/2021/04/13/%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="OSI-å‚è€ƒæ¨¡å‹"><a href="#OSI-å‚è€ƒæ¨¡å‹" class="headerlink" title="OSI å‚è€ƒæ¨¡å‹"></a>OSI å‚è€ƒæ¨¡å‹</h1><p><code>OSIå‚è€ƒæ¨¡å‹ï¼ˆOSI/RMï¼‰</code>çš„å…¨ç§°æ˜¯å¼€æ”¾ç³»ç»Ÿäº’è¿å‚è€ƒæ¨¡å‹<code>ï¼ˆOpen System Interconnection Reference Modelï¼ŒOSI/RMï¼‰</code>ï¼Œå®ƒæ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆInternational Standard Organizationï¼ŒISOï¼‰æå‡ºçš„ä¸€ä¸ªç½‘ç»œç³»ç»Ÿäº’è¿æ¨¡å‹ã€‚</p><ul><li><p>åœ¨è¿™ä¸ª OSI ä¸ƒå±‚æ¨¡å‹ä¸­ï¼Œæ¯ä¸€å±‚éƒ½ä¸ºå…¶ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€å¹¶ä¸ºå…¶ä¸Šä¸€å±‚æä¾›ä¸€ä¸ªè®¿é—®æ¥å£æˆ–ç•Œé¢ã€‚</p></li><li><p>ä¸åŒä¸»æœºä¹‹é—´çš„ç›¸åŒå±‚æ¬¡ç§°ä¸º<strong>å¯¹ç­‰å±‚</strong>ã€‚å¦‚ä¸»æœº A ä¸­çš„è¡¨ç¤ºå±‚å’Œä¸»æœº B ä¸­çš„è¡¨ç¤ºå±‚äº’ä¸ºå¯¹ç­‰å±‚ã€ä¸»æœº A ä¸­çš„ä¼šè¯å±‚å’Œä¸»æœº B ä¸­çš„ä¼šè¯å±‚äº’ä¸ºå¯¹ç­‰å±‚ç­‰ã€‚</p></li><li><p>å¯¹ç­‰å±‚ä¹‹é—´äº’ç›¸é€šä¿¡éœ€è¦éµå®ˆä¸€å®šçš„è§„åˆ™ï¼Œå¦‚é€šä¿¡çš„å†…å®¹ã€é€šä¿¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º<strong>åè®®</strong>ï¼ˆProtocolï¼‰ã€‚</p></li><li><p>æˆ‘ä»¬å°†æŸä¸ªä¸»æœºä¸Šè¿è¡Œçš„æŸç§åè®®çš„é›†åˆç§°ä¸º<strong>åè®®æ ˆ</strong>ã€‚ä¸»æœºæ­£æ˜¯åˆ©ç”¨è¿™ä¸ªåè®®æ ˆæ¥æ¥æ”¶å’Œå‘é€æ•°æ®çš„ã€‚</p></li><li><p>OSI å‚è€ƒæ¨¡å‹é€šè¿‡å°†åè®®æ ˆåˆ’åˆ†ä¸ºä¸åŒçš„å±‚æ¬¡ï¼Œå¯ä»¥ç®€åŒ–é—®é¢˜çš„åˆ†æã€å¤„ç†è¿‡ç¨‹ä»¥åŠç½‘ç»œç³»ç»Ÿè®¾è®¡çš„å¤æ‚æ€§ã€‚</p></li></ul><h2 id="OSI-å‚è€ƒæ¨¡å‹ä¸­å„å±‚çš„ä½œç”¨"><a href="#OSI-å‚è€ƒæ¨¡å‹ä¸­å„å±‚çš„ä½œç”¨" class="headerlink" title="OSI å‚è€ƒæ¨¡å‹ä¸­å„å±‚çš„ä½œç”¨"></a>OSI å‚è€ƒæ¨¡å‹ä¸­å„å±‚çš„ä½œç”¨</h2><h3 id="ç‰©ç†å±‚Physical-Layer"><a href="#ç‰©ç†å±‚Physical-Layer" class="headerlink" title="ç‰©ç†å±‚Physical Layer"></a>ç‰©ç†å±‚<code>Physical Layer</code></h3><ul><li>åˆ©ç”¨ä¼ è¾“ä»‹è´¨ä¸ºæ•°æ®é“¾è·¯å±‚æä¾›ç‰©ç†è¿æ¥ï¼Œä¼ è¾“äºŒè¿›åˆ¶æ•°æ®</li><li>æ•°æ®çš„å•ä½ç§°ä¸ºæ¯”ç‰¹<code>bit</code></li></ul><h3 id="æ•°æ®é“¾è·¯å±‚Data-Link-Layer"><a href="#æ•°æ®é“¾è·¯å±‚Data-Link-Layer" class="headerlink" title="æ•°æ®é“¾è·¯å±‚Data Link Layer"></a>æ•°æ®é“¾è·¯å±‚<code>Data Link Layer</code></h3><ul><li>ç‰©ç†åœ°å€å¯»å€ã€æ•°æ®çš„æˆå¸§ã€æµé‡æ§åˆ¶ã€æ•°æ®çš„æ£€é”™ã€é‡å‘ç­‰ã€‚</li><li>æ•°æ®çš„å•ä½ç§°ä¸ºå¸§<code>frame</code></li><li><code>ARP</code>ï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰</li><li><code>RARP</code>ï¼ˆReverse Address Resolution Protocolï¼Œé€†åœ°å€è§£æåè®®ï¼‰</li></ul><h3 id="ç½‘ç»œå±‚Network-Layer"><a href="#ç½‘ç»œå±‚Network-Layer" class="headerlink" title="ç½‘ç»œå±‚Network Layer"></a>ç½‘ç»œå±‚<code>Network Layer</code></h3><ul><li>æ•°æ®é“¾è·¯å±‚çš„æ•°æ®åœ¨è¿™ä¸€å±‚è¢«è½¬æ¢ä¸ºæ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡è·¯å¾„é€‰æ‹©ã€åˆ†æ®µç»„åˆã€é¡ºåºã€è¿›/å‡ºè·¯ç”±ç­‰æ§åˆ¶ï¼Œä¼ é€åˆ°å¦ä¸€ä¸ªç½‘ç»œè®¾å¤‡ã€‚</li><li>æ•°æ®çš„å•ä½ç§°ä¸ºåŒ…<code>packet</code></li><li><code>IP</code> åè®®ï¼ˆInternet Protocolï¼Œç½‘é™…åè®®ï¼‰</li><li><code>ICMP</code> åè®®ï¼ˆInternet Control Message Protocolï¼Œç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰</li><li><code>IGMP</code> åè®®ï¼ˆInternet Group Management Protocolï¼Œç½‘é™…ç»„ç®¡ç†åè®®ï¼‰</li></ul><h3 id="ä¼ è¾“å±‚Transport-Layer"><a href="#ä¼ è¾“å±‚Transport-Layer" class="headerlink" title="ä¼ è¾“å±‚Transport Layer"></a>ä¼ è¾“å±‚<code>Transport Layer</code></h3><ul><li><p>æä¾›ç«¯å¯¹ç«¯çš„æ¥å£</p></li><li><p>æ•°æ®çš„å•ä½ç§°ä¸ºæ•°æ®æ®µ<code>segment</code></p></li><li><p><code>TCP</code>é¢å‘è¿æ¥ï¼Œå¯é ä¼ è¾“ï¼Œæµé‡æ§åˆ¶å’Œæ‹¥å¡æœºåˆ¶ï¼Œä¸€å¯¹ä¸€é€šä¿¡ï¼Œå¤´éƒ¨è¾ƒå¤§</p></li><li><p><code>UDP</code>é¢å‘æŠ¥æ–‡ï¼Œä¸å¯é ä¼ è¾“ï¼Œä¸€å¯¹å¤šå¤šå¯¹ä¸€ï¼Œå¤´éƒ¨è¾ƒå°</p></li></ul><h3 id="ä¼šè¯å±‚Session-Layer"><a href="#ä¼šè¯å±‚Session-Layer" class="headerlink" title="ä¼šè¯å±‚Session Layer"></a>ä¼šè¯å±‚<code>Session Layer</code></h3><ul><li>ç®¡ç†è¡¨ç¤ºå±‚ä¹‹é—´çš„è¿æ¥ï¼ˆä¼šè¯ï¼‰</li><li>ç»„ç»‡å’Œåè°ƒä¸¤ä¸ªä¼šè¯è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡</li></ul><h3 id="è¡¨ç¤ºå±‚Presentation-Layer"><a href="#è¡¨ç¤ºå±‚Presentation-Layer" class="headerlink" title="è¡¨ç¤ºå±‚Presentation Layer"></a>è¡¨ç¤ºå±‚<code>Presentation Layer</code></h3><ul><li>å¤„ç†æ•°æ®ç¼–ç ã€æ•°æ®æ ¼å¼è½¬æ¢å’ŒåŠ å¯†è§£å¯†</li></ul><h3 id="åº”ç”¨å±‚Application-Layer"><a href="#åº”ç”¨å±‚Application-Layer" class="headerlink" title="åº”ç”¨å±‚Application Layer"></a>åº”ç”¨å±‚<code>Application Layer</code></h3><ul><li><p>åº”ç”¨ç¨‹åºè®¿é—®ç½‘ç»œæœåŠ¡çš„æ¥å£</p></li><li><p><code>HTTP</code>ã€<code>FTP</code>ã€<code>SMTP</code>ã€<code>POP3</code>ã€<code>IMAP4</code></p></li></ul><hr><h1 id="TCP-IP-åˆ†å±‚æ¨¡å‹"><a href="#TCP-IP-åˆ†å±‚æ¨¡å‹" class="headerlink" title="TCP/IP åˆ†å±‚æ¨¡å‹"></a>TCP/IP åˆ†å±‚æ¨¡å‹</h1><ul><li>TCP/IP åˆ†å±‚æ¨¡å‹ï¼ˆTCP/IP Layering Modelï¼‰è¢«ç§°ä½œå› ç‰¹ç½‘åˆ†å±‚æ¨¡å‹(Internet Layering Model)ã€å› ç‰¹ç½‘å‚è€ƒæ¨¡å‹(Internet Reference Model)</li></ul><h2 id="TCP-IP-ä¸­å„å±‚çš„ä½œç”¨"><a href="#TCP-IP-ä¸­å„å±‚çš„ä½œç”¨" class="headerlink" title="TCP/IP ä¸­å„å±‚çš„ä½œç”¨"></a>TCP/IP ä¸­å„å±‚çš„ä½œç”¨</h2><h3 id="é“¾è·¯å±‚"><a href="#é“¾è·¯å±‚" class="headerlink" title="é“¾è·¯å±‚"></a>é“¾è·¯å±‚</h3><blockquote><p>å¯¹åº”ç€ OSI/RM çš„æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚</p></blockquote><h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><h3 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h3><h3 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h3><ul><li><p><code>FTP</code>ï¼ˆFile Transfer Protocolï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼‰,</p></li><li><p><code>DNS</code>ï¼ˆDomain Name Systemï¼ŒåŸŸåç³»ç»Ÿï¼‰,</p></li><li><p><code>HTTP</code>ï¼ˆHyper Text Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰,</p></li><li><p><code>SMTP</code>ï¼ˆSimple Mail Transfer Protocolï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼‰</p></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>http</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsæ•°æ®ç±»å‹çš„åˆ¤æ–­ä¸è½¬æ¢</title>
    <link href="/2021/04/13/js%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"/>
    <url>/2021/04/13/js%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="ECAMScript-ä¸­ä¸èƒ½è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œåªèƒ½ä¸ºä¸‹åˆ—-7-ç§"><a href="#ECAMScript-ä¸­ä¸èƒ½è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œåªèƒ½ä¸ºä¸‹åˆ—-7-ç§" class="headerlink" title="ECAMScript ä¸­ä¸èƒ½è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œåªèƒ½ä¸ºä¸‹åˆ— 7 ç§"></a>ECAMScript ä¸­ä¸èƒ½è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œåªèƒ½ä¸ºä¸‹åˆ— 7 ç§</h1><h2 id="ç®€å•æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰"><a href="#ç®€å•æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰" class="headerlink" title="ç®€å•æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰"></a>ç®€å•æ•°æ®ç±»å‹ï¼ˆåŸå§‹ç±»å‹ï¼‰</h2><ul><li><p><code>String</code></p></li><li><p><code>Number</code></p><ul><li>ç‰¹æ®Šçš„<code>NaN</code><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">typeof</span> <span class="hljs-literal">NaN</span> === <span class="hljs-string">&#x27;number&#x27;</span>å”¯ä¸€ä¸€ä¸ªè‡ªç›¸åçš„å€¼<span class="hljs-literal">NaN</span> !== <span class="hljs-literal">NaN</span></code></pre></div></li></ul></li><li><p><code>Boolean</code></p><ul><li>åœ¨æ¡ä»¶åˆ¤æ–­æ—¶ï¼Œé™¤äº† <code>undefined</code>ï¼Œ <code>null</code>ï¼Œ <code>false</code>ï¼Œ <code>NaN</code>ï¼Œ <code>&#39;&#39;</code>ï¼Œ <code>0</code>ï¼Œ <code>-0</code>ï¼Œå…¶ä»–æ‰€æœ‰å€¼éƒ½è½¬ä¸º trueï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯¹è±¡ã€‚</li><li>å¸ƒå°”å€¼ä¸å…¶ä»–ç±»å‹æ¯”è¾ƒéƒ½ä¼šè½¬ä¸ºæ•°å­—</li></ul></li><li><p><code>Null</code></p><ul><li><code>typeof null = object</code>,<em>null è¡¨ç¤ºä¸€ä¸ªç©ºå¯¹è±¡æŒ‡é’ˆ</em></li><li>null å¿…é¡»æ‰‹åŠ¨è®¾ç½®ï¼Œå¸¸ç”¨äºä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¯´æ˜è¯¥å‚æ•°ä¸æ˜¯å¯¹è±¡</li><li>è®¾ç½®ä¸º null çš„å˜é‡æˆ–è€…å¯¹è±¡ä¼šè¢«å†…å­˜æ”¶é›†å™¨å›æ”¶</li><li>null è½¬ä¸ºæ•°å­—ç±»å‹å€¼ä¸º 0</li><li>Null å’Œ Undefined</li><li>if ä¸º false</li></ul></li><li><p><code>Undefined</code></p><ul><li>è°ƒç”¨ä¸€ä¸ªå€¼è€Œå®ƒæœ¬èº«æ²¡æœ‰èµ‹å€¼</li><li><code>undefined == null</code> ä¸¤ä¸ªç­‰å·</li><li>undefined è½¬ä¸ºæ•°å­—ç±»å‹ä¸º NaN</li><li>if ä¸º false</li></ul></li><li><p><code>Symbol</code>[ES6 æ–°å¢]</p><ul><li>è¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼</li></ul></li></ul><h2 id="å¤æ‚ç±»å‹"><a href="#å¤æ‚ç±»å‹" class="headerlink" title="å¤æ‚ç±»å‹"></a>å¤æ‚ç±»å‹</h2><p><code>Object</code></p><ul><li>å¼•ç”¨ç±»å‹çš„å€¼æ˜¯æŒ‡å‘ä¿å­˜åœ¨å †ä¸­çš„å¯¹è±¡çš„æŒ‡é’ˆ</li><li>ä½¿ç”¨æ—¶è¦å…ˆä»æ ˆä¸­è¯»å–å†…å­˜åœ°å€ï¼Œå†æ²¿ç€æŒ‡é’ˆæ‰¾åˆ°å †ä¸­çš„å¯¹è±¡</li><li>Object</li><li>Array<ul><li>æ•°ç»„çš„æ¯ä¸€é¡¹å¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½•ç±»å‹çš„æ•°æ®</li></ul></li><li>Function<ul><li>æ¯ä¸ªå‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹</li></ul></li></ul><h1 id="ç±»å‹åˆ¤æ–­"><a href="#ç±»å‹åˆ¤æ–­" class="headerlink" title="ç±»å‹åˆ¤æ–­"></a>ç±»å‹åˆ¤æ–­</h1><h2 id="typeOf"><a href="#typeOf" class="headerlink" title="typeOf"></a><code>typeOf</code></h2><ul><li>å¯¹æœªå£°æ˜çš„å˜é‡ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªæœ‰ç”¨çš„æ“ä½œï¼Œå°±æ˜¯å¯¹å®ƒè°ƒç”¨<code>typeof</code>,ä¸æŠ¥é”™ï¼Œreturn <code>undefined</code></li><li>ç‰¹æ®Šçš„å‡ ä¸ª</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">typeof</span> <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// &#x27;undefined&#x27;</span><span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span>(); <span class="hljs-comment">// &#x27;symbol&#x27;</span><span class="hljs-keyword">typeof</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// &#x27;object&#x27;</span><span class="hljs-keyword">typeof</span> <span class="hljs-literal">NaN</span>; <span class="hljs-comment">// number</span></code></pre></div><h2 id="isNaN"><a href="#isNaN" class="headerlink" title="isNaN"></a><code>isNaN</code></h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-literal">NaN</span>));    <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-number">10</span>));     <span class="hljs-comment">//false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-string">&quot;10&quot;</span>));   <span class="hljs-comment">//  false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-string">&quot;blue&quot;</span>)); <span class="hljs-comment">// true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">isNaN</span>(<span class="hljs-literal">true</span>));   <span class="hljs-comment">// false</span></code></pre></div><h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a><code>instanceof</code></h2><p><code>instanceof</code> è¿ç®—ç¬¦ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§ï¼Œä½†å®ƒä¸èƒ½æ£€æµ‹<code>null</code> å’Œ <code>undefined</code></p><div class="hljs code-wrapper"><pre><code class="hljs javascript">[] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Array</span> <span class="hljs-comment">// true</span>&#123;&#125; <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Object</span> <span class="hljs-comment">// true</span><span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span> <span class="hljs-comment">// true</span><span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>() <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span> <span class="hljs-comment">// true</span><span class="hljs-literal">null</span> <span class="hljs-keyword">instanceof</span> Null <span class="hljs-comment">// error</span><span class="hljs-literal">undefined</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-literal">undefined</span> <span class="hljs-comment">// error</span></code></pre></div><h2 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a><code>constructor</code></h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> arr = [];<span class="hljs-keyword">const</span> obj = &#123;&#125;;<span class="hljs-built_in">console</span>.log(arr.constructor); <span class="hljs-comment">// [Function: Array]</span><span class="hljs-built_in">console</span>.log(obj.constructor); <span class="hljs-comment">// [Function: Object]</span></code></pre></div><h2 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call()"></a><code>Object.prototype.toString.call()</code></h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Object</span>.prototype.toString.call(); <span class="hljs-comment">// [object Undefined]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// [object String]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-number">1</span>); <span class="hljs-comment">// [object Number]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-literal">true</span>); <span class="hljs-comment">// [object Boolean]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-literal">undefined</span>); <span class="hljs-comment">// [object Undefined]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-literal">null</span>); <span class="hljs-comment">// [object Null]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Function</span>()); <span class="hljs-comment">// [object Function]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()); <span class="hljs-comment">// [object Date]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>()); <span class="hljs-comment">// [object RegExp]</span><span class="hljs-built_in">Object</span>.prototype.toString.call([]); <span class="hljs-comment">// [object Array]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(&#123;&#125;); <span class="hljs-comment">// [object Object]</span><span class="hljs-built_in">Object</span>.prototype.toString.call(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>()); <span class="hljs-comment">// [object Error]</span></code></pre></div><h1 id="ç±»å‹è½¬æ¢"><a href="#ç±»å‹è½¬æ¢" class="headerlink" title="ç±»å‹è½¬æ¢"></a>ç±»å‹è½¬æ¢</h1><h2 id="è½¬ä¸ºæ•°å€¼"><a href="#è½¬ä¸ºæ•°å€¼" class="headerlink" title="è½¬ä¸ºæ•°å€¼"></a>è½¬ä¸ºæ•°å€¼</h2><h3 id="Number-é€‚ç”¨äºä»»ä½•ç±»å‹"><a href="#Number-é€‚ç”¨äºä»»ä½•ç±»å‹" class="headerlink" title="Number() é€‚ç”¨äºä»»ä½•ç±»å‹"></a>Number() é€‚ç”¨äºä»»ä½•ç±»å‹</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> num1 = <span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;Hello world!&quot;</span>);  <span class="hljs-comment">// NaN</span><span class="hljs-keyword">let</span> num2 = <span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// 0</span><span class="hljs-keyword">let</span> num3 = <span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;000011&quot;</span>); <span class="hljs-comment">// 11</span><span class="hljs-keyword">let</span> num4 = <span class="hljs-built_in">Number</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// 1</span></code></pre></div><h3 id="parseInt-ä¸»è¦ç”¨äºå­—ç¬¦ä¸²"><a href="#parseInt-ä¸»è¦ç”¨äºå­—ç¬¦ä¸²" class="headerlink" title="parseInt() ä¸»è¦ç”¨äºå­—ç¬¦ä¸²"></a>parseInt() ä¸»è¦ç”¨äºå­—ç¬¦ä¸²</h3><ul><li>å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯æ•°å€¼å­—ç¬¦ã€åŠ å·æˆ–å‡å·ï¼Œç«‹å³è¿”å›NaN<br>ã€‚è¿™æ„å‘³ç€ç©ºå­—ç¬¦ä¸²ä¹Ÿä¼šè¿”å› <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> num2 = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&quot;&quot;</span>);  <span class="hljs-comment">// NaN</span><span class="hljs-keyword">let</span> num3 = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&quot;0xA&quot;</span>); <span class="hljs-comment">// 10</span><span class="hljs-keyword">let</span> num4 = <span class="hljs-built_in">parseInt</span>(<span class="hljs-number">22.5</span>); <span class="hljs-comment">//22</span><span class="hljs-keyword">let</span> num5 = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&quot;abc&quot;</span>); <span class="hljs-comment">// NaN</span><span class="hljs-keyword">let</span> num6 = <span class="hljs-built_in">parseInt</span>(<span class="hljs-string">&quot;123abc&quot;</span>) <span class="hljs-comment">// 123</span></code></pre></div><h3 id="parseFloat-ä¸»è¦ç”¨äºå­—ç¬¦ä¸²"><a href="#parseFloat-ä¸»è¦ç”¨äºå­—ç¬¦ä¸²" class="headerlink" title="parseFloat() ä¸»è¦ç”¨äºå­—ç¬¦ä¸²"></a>parseFloat() ä¸»è¦ç”¨äºå­—ç¬¦ä¸²</h3></li><li>åªè§£æåè¿›åˆ¶</li><li>å¿½ç•¥å…¶æ¬¡å‡ºç°çš„å°æ•°ç‚¹<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> num1 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;1234blue&quot;</span>); <span class="hljs-comment">// 1234</span><span class="hljs-keyword">let</span> num2 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;0xA&quot;</span>); <span class="hljs-comment">// 0</span><span class="hljs-keyword">let</span> num3 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;22.5&quot;</span>); <span class="hljs-comment">// 22.5</span><span class="hljs-keyword">let</span> num4 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;22.34.5&quot;</span>); <span class="hljs-comment">// 22.34</span><span class="hljs-keyword">let</span> num5 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;0908.5&quot;</span>);  <span class="hljs-comment">//908.5</span><span class="hljs-keyword">let</span> num6 = <span class="hljs-built_in">parseFloat</span>(<span class="hljs-string">&quot;3.125e7&quot;</span>); <span class="hljs-comment">// 31250000</span></code></pre></div></li></ul><h2 id="è½¬ä¸ºå­—ç¬¦ä¸²"><a href="#è½¬ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="è½¬ä¸ºå­—ç¬¦ä¸²"></a>è½¬ä¸ºå­—ç¬¦ä¸²</h2><h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString()"></a>toString()</h3><ul><li>nullå’Œundefinedæ²¡æœ‰toString()æ–¹æ³•<br>String()<h3 id="String"><a href="#String" class="headerlink" title="String()"></a>String()</h3></li><li><em>ä¼˜å…ˆè°ƒç”¨toString()</em></li><li>null è½¬æ¢ä¸º â€˜nullâ€™</li><li>undefined è½¬æ¢ä¸º â€˜undefinedâ€™</li></ul><h2 id="è½¬ä¸ºå¸ƒå°”å€¼"><a href="#è½¬ä¸ºå¸ƒå°”å€¼" class="headerlink" title="è½¬ä¸ºå¸ƒå°”å€¼"></a>è½¬ä¸ºå¸ƒå°”å€¼</h2><ul><li>Boolean()<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//é™¤äº†ä»¥ä¸‹å…­ä¸ªè½¬ä¸º false å…¶ä»–å…¨éƒ¨éƒ½ä¸º true</span><span class="hljs-literal">undefined</span><span class="hljs-literal">null</span><span class="hljs-number">0</span><span class="hljs-literal">NaN</span><span class="hljs-string">&#x27;&#x27;</span></code></pre></div></li></ul><h1 id="éšå¼è½¬æ¢ä»‹ç»"><a href="#éšå¼è½¬æ¢ä»‹ç»" class="headerlink" title="éšå¼è½¬æ¢ä»‹ç»"></a>éšå¼è½¬æ¢ä»‹ç»</h1><ul><li>åœ¨ js ä¸­ï¼Œå½“è¿ç®—ç¬¦åœ¨è¿ç®—æ—¶ï¼Œå¦‚æœä¸¤è¾¹æ•°æ®ä¸ç»Ÿä¸€ï¼ŒCPU å°±æ— æ³•è®¡ç®—ï¼Œè¿™æ—¶æˆ‘ä»¬ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†è¿ç®—ç¬¦ä¸¤è¾¹çš„æ•°æ®åšä¸€ä¸ªæ•°æ®ç±»å‹è½¬æ¢ï¼Œè½¬æˆä¸€æ ·çš„æ•°æ®ç±»å‹å†è®¡ç®—</li><li>è¿™ç§æ— éœ€ç¨‹åºå‘˜æ‰‹åŠ¨è½¬æ¢ï¼Œè€Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨è½¬æ¢çš„æ–¹å¼å°±ç§°ä¸ºéšå¼è½¬æ¢</li><li>ä¾‹å¦‚ 1 &gt; â€œ0â€è¿™è¡Œä»£ç åœ¨ js ä¸­å¹¶ä¸ä¼šæŠ¥é”™ï¼Œç¼–è¯‘å™¨åœ¨è¿ç®—ç¬¦æ—¶ä¼šå…ˆæŠŠå³è¾¹çš„â€0â€è½¬æˆæ•°å­— 0`ç„¶ååœ¨æ¯”è¾ƒå¤§å°</li></ul><h2 id="éšå¼è½¬æ¢è§„åˆ™"><a href="#éšå¼è½¬æ¢è§„åˆ™" class="headerlink" title="éšå¼è½¬æ¢è§„åˆ™"></a>éšå¼è½¬æ¢è§„åˆ™</h2><ul><li>è½¬æˆ string ç±»å‹ï¼š +ï¼ˆå­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼‰</li><li>è½¬æˆ number ç±»å‹ï¼š++/â€“(è‡ªå¢è‡ªå‡è¿ç®—ç¬¦) + - * / %(ç®—æœ¯è¿ç®—ç¬¦) &gt; &lt; &gt;= &lt;= == != === !=== (å…³ç³»è¿ç®—ç¬¦)</li><li>è½¬æˆ boolean ç±»å‹ï¼š!ï¼ˆé€»è¾‘éè¿ç®—ç¬¦ï¼‰</li></ul><h2 id="å­—ç¬¦ä¸²è¿æ¥ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦éšå¼è½¬æ¢è§„åˆ™æ··æ·†"><a href="#å­—ç¬¦ä¸²è¿æ¥ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦éšå¼è½¬æ¢è§„åˆ™æ··æ·†" class="headerlink" title="å­—ç¬¦ä¸²è¿æ¥ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦éšå¼è½¬æ¢è§„åˆ™æ··æ·†"></a>å­—ç¬¦ä¸²è¿æ¥ç¬¦ä¸ç®—æœ¯è¿ç®—ç¬¦éšå¼è½¬æ¢è§„åˆ™æ··æ·†</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¸¸è§é¢è¯•é¢˜å¦‚ä¸‹</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-string">&quot;true&quot;</span>); <span class="hljs-comment">// â€˜1trueâ€˜â€™</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">true</span>); <span class="hljs-comment">//2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span>); <span class="hljs-comment">//   NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">null</span>); <span class="hljs-comment">//1</span></code></pre></div><ol><li>å­—ç¬¦ä¸²è¿æ¥ç¬¦+ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è°ƒç”¨ String()æ–¹æ³•è½¬æˆå­—ç¬¦ä¸²ç„¶åæ‹¼æ¥</li><li>ç®—æœ¯è¿ç®—ç¬¦+ ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è°ƒç”¨ Numberï¼ˆï¼‰æ–¹æ³•è½¬æˆæ•°å­—ç„¶ååšåŠ æ³•è®¡ç®—</li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//+æ˜¯å­—ç¬¦ä¸²è¿æ¥ç¬¦ï¼š String(1) + &#x27;true&#x27; = &#x27;1true&#x27;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-string">&quot;true&quot;</span>); <span class="hljs-comment">//1true</span><span class="hljs-comment">//+æ˜¯ç®—æœ¯è¿ç®—ç¬¦ ï¼š 1 + Number(true) = 1 + 1 = 2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">true</span>); <span class="hljs-comment">//2</span><span class="hljs-comment">// +æ˜¯ç®—æœ¯è¿ç®—ç¬¦ ï¼š 1 + Number(undefined) = 1 + NaN = NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">undefined</span>); <span class="hljs-comment">//   NaN</span><span class="hljs-comment">// +æ˜¯ç®—æœ¯è¿ç®—ç¬¦ ï¼š 1 + Number(null) = 1 + 0 = 1</span><span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span> + <span class="hljs-literal">null</span>); <span class="hljs-comment">//1</span><span class="hljs-comment">//</span></code></pre></div><h2 id="å…³ç³»è¿ç®—ç¬¦ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆ-number-ä¹‹åå†æ¯”è¾ƒå…³ç³»"><a href="#å…³ç³»è¿ç®—ç¬¦ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆ-number-ä¹‹åå†æ¯”è¾ƒå…³ç³»" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆ number ä¹‹åå†æ¯”è¾ƒå…³ç³»"></a>å…³ç³»è¿ç®—ç¬¦ï¼šä¼šæŠŠå…¶ä»–æ•°æ®ç±»å‹è½¬æ¢æˆ number ä¹‹åå†æ¯”è¾ƒå…³ç³»</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¸¸è§é¢è¯•é¢˜å¦‚ä¸‹</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> &gt; <span class="hljs-number">10</span>); <span class="hljs-comment">//false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> &gt; <span class="hljs-string">&quot;10&quot;</span>); <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span> &gt; <span class="hljs-string">&quot;b&quot;</span>); <span class="hljs-comment">//false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span> &gt; <span class="hljs-string">&quot;aad&quot;</span>); <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">NaN</span> == <span class="hljs-literal">NaN</span>); <span class="hljs-comment">//false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">undefined</span> == <span class="hljs-literal">null</span>); <span class="hljs-comment">//true</span></code></pre></div><ol><li>å½“å…³ç³»è¿ç®—ç¬¦ä¸¤è¾¹æœ‰ä¸€è¾¹æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼šå°†å…¶ä»–æ•°æ®ç±»å‹ä½¿ç”¨ Number()è½¬æ¢ï¼Œç„¶åæ¯”è¾ƒå…³ç³»<br><code>console.log ( &quot;2&quot; &gt; 10 );//false Number(&#39;2&#39;) &gt; 10 = 2 &gt; 10 = false</code></li><li>å½“å…³ç³»è¿ç®—ç¬¦ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ­¤æ—¶åŒæ—¶è½¬æˆ number ç„¶åæ¯”è¾ƒå…³ç³»<br><em>æ­¤æ—¶å¹¶ä¸æ˜¯æŒ‰ç…§ Number()çš„å½¢å¼è½¬æˆæ•°å­—ï¼Œè€Œæ˜¯æŒ‰ç…§å­—ç¬¦ä¸²å¯¹åº”çš„ unicode ç¼–ç æ¥è½¬æˆæ•°å­—</em><blockquote><p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥æŸ¥çœ‹å­—ç¬¦çš„ unicode ç¼–ç ï¼š å­—ç¬¦ä¸².charCodeAt(å­—ç¬¦ä¸‹æ ‡ï¼Œé»˜è®¤ä¸º 0)</p></blockquote></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> &gt; <span class="hljs-string">&quot;10&quot;</span>); <span class="hljs-comment">//true     &#x27;2&#x27;.charCodeAt() &gt; &#x27;10&#x27;.charCodeAt() = 50 &gt; 49 = true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span>.charCodeAt()); <span class="hljs-comment">//æ•°å­—50</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;10&quot;</span>.charCodeAt()); <span class="hljs-comment">//æ•°å­—49ï¼ˆé»˜è®¤è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç¼–ç ï¼Œå¦‚æœæƒ³è¦æŸ¥è¯¢ç¬¬äºŒä¸ªå­—ç¬¦å¯ä»¥ä¼ å‚ä¸‹æ ‡ï¼‰</span><span class="hljs-comment">//å¤šä¸ªå­—ç¬¦ä»å·¦å¾€å³ä¾æ¬¡æ¯”è¾ƒ</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span> &gt; <span class="hljs-string">&quot;b&quot;</span>); <span class="hljs-comment">//false     å…ˆæ¯”è¾ƒ&#x27;a&#x27; å’Œ &#x27;b&#x27;ï¼Œ &#x27;a&#x27; ä¸ &#x27;b&#x27;ä¸ç­‰ï¼Œåˆ™ç›´æ¥å¾—å‡ºç»“æœ</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span> &gt; <span class="hljs-string">&quot;aad&quot;</span>); <span class="hljs-comment">//true     å…ˆæ¯”è¾ƒ&#x27;a&#x27;å’Œ&#x27;a&#x27;ï¼Œä¸¤è€…ç›¸ç­‰ï¼Œç»§ç»­æ¯”è¾ƒç¬¬äºŒä¸ªå­—ç¬¦ &#x27;b&#x27; ä¸ &#x27;a&#x27; ,å¾—å‡ºç»“æœ</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;a&quot;</span>.charCodeAt()); <span class="hljs-comment">//æ•°å­—97</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;b&quot;</span>.charCodeAt()); <span class="hljs-comment">//æ•°å­—98</span><span class="hljs-comment">//2.3 ç‰¹æ®Šæƒ…å†µ(æ— è§†è§„åˆ™)ï¼šå¦‚æœæ•°æ®ç±»å‹æ˜¯undefinedä¸nullï¼Œï¼Œå¾—å‡ºå›ºå®šçš„ç»“æœ</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">undefined</span> == <span class="hljs-literal">undefined</span>); <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">undefined</span> == <span class="hljs-literal">null</span>); <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">null</span> == <span class="hljs-literal">null</span>); <span class="hljs-comment">//true</span><span class="hljs-comment">//2.4 ç‰¹æ®Šæƒ…å†µï¼ˆæ— è§†è§„åˆ™ï¼‰ï¼šNaNä¸ä»»ä½•æ•°æ®æ¯”è¾ƒéƒ½æ˜¯NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">NaN</span> == <span class="hljs-literal">NaN</span>); <span class="hljs-comment">//false</span></code></pre></div><h2 id="å¤æ‚æ•°æ®ç±»å‹åœ¨éšå¼è½¬æ¢æ—¶ä¼šå…ˆè½¬æˆ-Stringï¼Œç„¶åå†è½¬æˆ-Number-è¿ç®—"><a href="#å¤æ‚æ•°æ®ç±»å‹åœ¨éšå¼è½¬æ¢æ—¶ä¼šå…ˆè½¬æˆ-Stringï¼Œç„¶åå†è½¬æˆ-Number-è¿ç®—" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹åœ¨éšå¼è½¬æ¢æ—¶ä¼šå…ˆè½¬æˆ Stringï¼Œç„¶åå†è½¬æˆ Number è¿ç®—"></a>å¤æ‚æ•°æ®ç±»å‹åœ¨éšå¼è½¬æ¢æ—¶ä¼šå…ˆè½¬æˆ Stringï¼Œç„¶åå†è½¬æˆ Number è¿ç®—</h2><p>å¤æ‚æ•°æ®ç±»å‹è½¬ number é¡ºåºå¦‚ä¸‹</p><ol><li>å…ˆä½¿ç”¨<code>valueOf()</code>æ–¹æ³•è·å–å…¶åŸå§‹å€¼ï¼Œå¦‚æœåŸå§‹å€¼ä¸æ˜¯<code>number</code>ç±»å‹ï¼Œåˆ™ä½¿ç”¨ <code>toString()</code>æ–¹æ³•è½¬æˆ<code>string</code></li><li>å†å°† string è½¬æˆ number è¿ç®—</li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] == <span class="hljs-string">&quot;1,2&quot;</span>); <span class="hljs-comment">//true     å…ˆå°†å·¦è¾¹æ•°ç»„è½¬æˆstringï¼Œç„¶åå³è¾¹ä¹Ÿæ˜¯stringåˆ™è½¬æˆunicodeç¼–ç è¿ç®—</span><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>].valueOf()); <span class="hljs-comment">// [1,2]</span><span class="hljs-built_in">console</span>.log([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>].toString()); <span class="hljs-comment">// &#x27;1,2&#x27;</span><span class="hljs-keyword">var</span> a = &#123;&#125;;<span class="hljs-built_in">console</span>.log(a == <span class="hljs-string">&quot;[object Object]&quot;</span>); <span class="hljs-comment">//true</span><span class="hljs-built_in">console</span>.log(a.valueOf().toString()); <span class="hljs-comment">//[object Object]</span><span class="hljs-comment">//åˆ†æï¼šé€»è¾‘ä¸è¿ç®—ä¸€å‡åˆ™å‡ï¼Œè¦æƒ³ifåˆ†æ”¯è¯­å¥å°æ‹¬å·æ¡ä»¶æˆç«‹ï¼Œåˆ™å¿…é¡»è¦è®©açš„å€¼åŒæ—¶ç­‰äº1 ä¸” ç­‰äº 2 ä¸”ç­‰äº3ä¹çœ‹ä¹‹ä¸‹ï¼Œå¥½åƒæ ¹æœ¬ä¸å¯èƒ½å®ç°ï¼Œä½†æ˜¯å¤æ‚æ•°æ®ç±»å‹ä¼šå…ˆè°ƒç”¨valueOf()æ–¹æ³•,ç„¶åè½¬æˆnumberè¿ç®—è€Œå¯¹è±¡çš„</span></code></pre></div><h2 id="é€»è¾‘ééšå¼è½¬æ¢ä¸å…³ç³»è¿ç®—ç¬¦éšå¼è½¬æ¢ææ··æ·†"><a href="#é€»è¾‘ééšå¼è½¬æ¢ä¸å…³ç³»è¿ç®—ç¬¦éšå¼è½¬æ¢ææ··æ·†" class="headerlink" title="é€»è¾‘ééšå¼è½¬æ¢ä¸å…³ç³»è¿ç®—ç¬¦éšå¼è½¬æ¢ææ··æ·†"></a>é€»è¾‘ééšå¼è½¬æ¢ä¸å…³ç³»è¿ç®—ç¬¦éšå¼è½¬æ¢ææ··æ·†</h2><ul><li>ç©ºæ•°ç»„çš„ toString()æ–¹æ³•ä¼šå¾—åˆ°ç©ºå­—ç¬¦ä¸²ï¼Œè€Œç©ºå¯¹è±¡çš„ toString()æ–¹æ³•ä¼šå¾—åˆ°å­—ç¬¦ä¸²<code>[object Object]</code> ï¼ˆæ³¨æ„ç¬¬ä¸€ä¸ªå°å†™ oï¼Œç¬¬äºŒä¸ªå¤§å†™ O å“Ÿï¼‰</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Boolean</span>([])); <span class="hljs-comment">// true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Boolean</span>(![])); <span class="hljs-comment">// false</span><span class="hljs-comment">//å¤§å‘</span><span class="hljs-built_in">console</span>.log([] == <span class="hljs-number">0</span>); <span class="hljs-comment">//true []è½¬æ•°å­—ä¸º0</span><span class="hljs-built_in">console</span>.log(![] == <span class="hljs-number">0</span>); <span class="hljs-comment">//true  ![]è½¬å¸ƒå°”falseï¼Œè½¬æ•°å­—ä¸º0</span><span class="hljs-comment">//ç¥å‘</span><span class="hljs-built_in">console</span>.log([] == ![]); <span class="hljs-comment">//true</span><span class="hljs-comment">// [object Object] == false</span><span class="hljs-built_in">console</span>.log([] == []); <span class="hljs-comment">//false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Boolean</span>(!&#123;&#125;)); <span class="hljs-comment">// false</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Boolean</span>(&#123;&#125;)); <span class="hljs-comment">//  true</span><span class="hljs-comment">//å²è¯—çº§å‘</span><span class="hljs-built_in">console</span>.log(&#123;&#125; == !&#123;&#125;); <span class="hljs-comment">//false</span><span class="hljs-comment">// [object Object] == false</span><span class="hljs-built_in">console</span>.log(&#123;&#125; == &#123;&#125;); <span class="hljs-comment">//false</span></code></pre></div><h3 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h3><ol><li><p>å…³ç³»è¿ç®—ç¬¦ï¼šå°†å…¶ä»–æ•°æ®ç±»å‹è½¬æˆæ•°å­—</p></li><li><p>é€»è¾‘éï¼šå°†å…¶ä»–æ•°æ®ç±»å‹ä½¿ç”¨<code>Boolean()</code>è½¬æˆå¸ƒå°”ç±»å‹</p></li><li><p>ä»¥ä¸‹å…«ç§æƒ…å†µè½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ä¼šå¾—åˆ° false</p><p><code>0 ã€-0ã€NaNã€undefinedã€nullã€&#39;&#39;(ç©ºå­—ç¬¦ä¸²)ã€falseã€document.all()</code></p></li><li><p>é™¤ä»¥ä¸Šå…«ç§æƒ…å†µä¹‹å¤–æ‰€æœ‰æ•°æ®éƒ½ä¼šå¾—åˆ° true</p></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript">[].valueOf().toString(); <span class="hljs-comment">// å¾—åˆ°ç©ºå­—ç¬¦ä¸²</span><span class="hljs-comment">// Number(&#x27;&#x27;) == 0 æˆç«‹</span><span class="hljs-built_in">console</span>.log([] == <span class="hljs-number">0</span>); <span class="hljs-comment">//true</span>------------------------------------------------<span class="hljs-comment">// åŸç† :æœ¬è´¨æ˜¯ `![]` é€»è¾‘éè¡¨è¾¾å¼ç»“æœ ä¸   0 æ¯”è¾ƒå…³ç³»</span><span class="hljs-comment">// (1)é€»è¾‘éä¼˜å…ˆçº§é«˜äºå…³ç³»è¿ç®—ç¬¦</span>![] = <span class="hljs-literal">false</span>; <span class="hljs-comment">// ç©ºæ•°ç»„è½¬å¸ƒå°”å¾—åˆ°trueï¼Œç„¶åå–åå¾—åˆ°false</span><span class="hljs-comment">// (2)false == 0 æˆç«‹</span><span class="hljs-built_in">console</span>.log(![] == <span class="hljs-number">0</span>); <span class="hljs-comment">//true</span>------------------------------------------------<span class="hljs-comment">// åŸç† ï¼šæœ¬è´¨å…¶å®æ˜¯ `ç©ºå¯¹è±¡&#123;&#125;`   ä¸   `!&#123;&#125;`   è¿™ä¸ªé€»è¾‘éè¡¨è¾¾å¼ç»“æœåšæ¯”è¾ƒ</span>&#123;&#125;.valueOf().toString(); <span class="hljs-comment">// &#x27;[object Object]&#x27;</span>!&#123;&#125; = <span class="hljs-literal">false</span>;<span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;[object Object]&quot;</span>) == <span class="hljs-built_in">Number</span>(<span class="hljs-literal">false</span>);<span class="hljs-built_in">console</span>.log(&#123;&#125; == !&#123;&#125;); <span class="hljs-comment">//false</span>------------------------------------------------<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ•°æ®å­˜åœ¨å †ä¸­ï¼Œæ ˆä¸­å­˜å‚¨çš„æ˜¯åœ°å€ï¼Œæ‰€ä»¥ä»–ä»¬çš„ç»“æœæ˜¯false</span><span class="hljs-built_in">console</span>.log(&#123;&#125; == &#123;&#125;); <span class="hljs-comment">//false</span>------------------------------------------------<span class="hljs-comment">// åŸç†ï¼šæœ¬è´¨æ˜¯ `ç©ºæ•°ç»„[]`ä¸ `![]` è¿™ä¸ªé€»è¾‘éè¡¨è¾¾å¼ç»“æœåšæ¯”è¾ƒ</span>[].valueOf().toString(); <span class="hljs-comment">// &#x27;&#x27;</span>![] = <span class="hljs-literal">false</span>;<span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;&quot;</span>) == <span class="hljs-built_in">Number</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// 0 == 0</span><span class="hljs-built_in">console</span>.log([] == ![]); <span class="hljs-comment">//true</span>------------------------------------------------<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ•°æ®å­˜åœ¨å †ä¸­ï¼Œæ ˆä¸­å­˜å‚¨çš„æ˜¯åœ°å€ï¼Œæ‰€ä»¥ä»–ä»¬çš„ç»“æœæ˜¯false</span><span class="hljs-built_in">console</span>.log([] == []); <span class="hljs-comment">//false</span>------------------------------------------------<span class="hljs-built_in">console</span>.log(  &#123;&#125;.valueOf().toString()); <span class="hljs-comment">//[object Object]</span><span class="hljs-built_in">console</span>.log([].valueOf().toString()); <span class="hljs-comment">//&#x27;&#x27; ç©ºå­—ç¬¦ä¸²</span></code></pre></div><h1 id="ç±»å‹è½¬æ¢çš„åœºæ™¯"><a href="#ç±»å‹è½¬æ¢çš„åœºæ™¯" class="headerlink" title="ç±»å‹è½¬æ¢çš„åœºæ™¯"></a>ç±»å‹è½¬æ¢çš„åœºæ™¯</h1><h3 id="è½¬æ¢ä¸º-String-çš„åœºæ™¯"><a href="#è½¬æ¢ä¸º-String-çš„åœºæ™¯" class="headerlink" title="è½¬æ¢ä¸º String çš„åœºæ™¯"></a>è½¬æ¢ä¸º String çš„åœºæ™¯</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + <span class="hljs-number">1</span>); <span class="hljs-comment">//21</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + <span class="hljs-literal">true</span>); <span class="hljs-comment">// 2true</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + <span class="hljs-literal">null</span>); <span class="hljs-comment">// 2null</span><span class="hljs-keyword">var</span> obj2 = &#123;  toString: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;a&quot;</span>;  &#125;,&#125;;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + obj2); <span class="hljs-comment">// 2a</span><span class="hljs-keyword">var</span> obj1 = &#123;  a: <span class="hljs-number">1</span>,  b: <span class="hljs-number">2</span>,&#125;;<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + obj1); <span class="hljs-comment">//2obj1</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + &#123;&#125;); <span class="hljs-comment">// 2[object Object]</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + []); <span class="hljs-comment">// 2[object Object]</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;&#125;); <span class="hljs-comment">// 2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + [<span class="hljs-string">&quot;msy&quot;</span>, <span class="hljs-number">123</span>]); <span class="hljs-comment">// 2msy,123</span></code></pre></div><h3 id="è½¬æ¢ä¸º-Number-çš„åœºæ™¯"><a href="#è½¬æ¢ä¸º-Number-çš„åœºæ™¯" class="headerlink" title="è½¬æ¢ä¸º Number çš„åœºæ™¯"></a>è½¬æ¢ä¸º Number çš„åœºæ™¯</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(<span class="hljs-literal">false</span>)); <span class="hljs-comment">// 0</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(<span class="hljs-literal">true</span>)); <span class="hljs-comment">// 1</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">true</span> + <span class="hljs-number">1</span>); <span class="hljs-comment">// 2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;2&quot;</span> + <span class="hljs-string">&quot;5&quot;</span>); <span class="hljs-comment">// 25</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">false</span> - <span class="hljs-number">6</span>); <span class="hljs-comment">// -6</span><span class="hljs-built_in">console</span>.log([] * <span class="hljs-number">6</span>); <span class="hljs-comment">// 0</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">true</span> / <span class="hljs-string">&quot;5&quot;</span>); <span class="hljs-comment">// 0.2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">true</span> / <span class="hljs-number">5</span>); <span class="hljs-comment">// 0.2</span><span class="hljs-built_in">console</span>.log(<span class="hljs-literal">false</span> / <span class="hljs-number">5</span>); <span class="hljs-comment">// 0</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(<span class="hljs-string">&quot;abc&quot;</span>)); <span class="hljs-comment">// NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(<span class="hljs-literal">null</span>)); <span class="hljs-comment">// 0</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(<span class="hljs-literal">undefined</span>)); <span class="hljs-comment">// NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span> + <span class="hljs-literal">true</span>); <span class="hljs-comment">//abctrue</span></code></pre></div><h3 id=""><a href="#" class="headerlink" title="[]"></a>[]</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">[] == ![]; <span class="hljs-comment">// true</span><span class="hljs-comment">// &#x27;&#x27; == 0</span><span class="hljs-built_in">console</span>.log(![]); <span class="hljs-comment">// false</span><span class="hljs-built_in">console</span>.log([]); <span class="hljs-comment">// []</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>(![])); <span class="hljs-comment">// 0</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Number</span>([])); <span class="hljs-comment">// 0</span></code></pre></div><h3 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h3><p>ä»€ä¹ˆæ—¶å€™è¿”å› NaN ï¼ˆå¼€ç¯‡ç¬¬äºŒé“é¢˜ä¹Ÿå¾—åˆ°è§£å†³ï¼‰</p><ul><li>æ— ç©·å¤§é™¤ä»¥æ— ç©·å¤§</li><li>ç»™ä»»æ„è´Ÿæ•°åšå¼€æ–¹è¿ç®—</li><li>ç®—æ•°è¿ç®—ç¬¦ä¸ä¸æ˜¯æ•°å­—æˆ–æ— æ³•è½¬æ¢ä¸ºæ•°å­—çš„æ“ä½œæ•°ä¸€èµ·ä½¿ç”¨</li><li>å­—ç¬¦ä¸²è§£ææˆæ•°å­—</li><li>ä¸€å…ƒè¿ç®—ç¬¦</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(+<span class="hljs-string">&quot;abc&quot;</span>); <span class="hljs-comment">// NaN</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;abc&quot;</span>);</code></pre></div><h3 id="String-å’Œ-toString"><a href="#String-å’Œ-toString" class="headerlink" title="String å’Œ toString"></a>String å’Œ toString</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// toString()å¯ä»¥å°†æ•°æ®éƒ½è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œä½†æ˜¯nullå’Œundefinedä¸å¯ä»¥è½¬æ¢ã€‚</span><span class="hljs-comment">// å¯ä»¥è½¬è¿›åˆ¶</span><span class="hljs-literal">null</span>.toString(); <span class="hljs-comment">//æŠ¥é”™</span><span class="hljs-literal">undefined</span>.toString(); <span class="hljs-comment">//æŠ¥é”™</span></code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// String()å¯ä»¥å°†nullå’Œundefinedè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ²¡æ³•è½¬è¿›åˆ¶å­—ç¬¦ä¸²</span><span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">String</span>(<span class="hljs-literal">null</span>));<span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">String</span>(<span class="hljs-literal">undefined</span>));</code></pre></div><h2 id="å€¼çš„æ¯”è¾ƒ"><a href="#å€¼çš„æ¯”è¾ƒ" class="headerlink" title="å€¼çš„æ¯”è¾ƒ"></a>å€¼çš„æ¯”è¾ƒ</h2><h3 id="es6-æ–°å¢Object-is-åˆ¤æ–­"><a href="#es6-æ–°å¢Object-is-åˆ¤æ–­" class="headerlink" title="es6 æ–°å¢Object.is()åˆ¤æ–­"></a>es6 æ–°å¢<code>Object.is()</code>åˆ¤æ–­</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Object</span>.is(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">// true</span><span class="hljs-built_in">Object</span>.is(<span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>); <span class="hljs-comment">// true</span><span class="hljs-built_in">Object</span>.is(<span class="hljs-number">0</span>, -<span class="hljs-number">0</span>); <span class="hljs-comment">// false</span><span class="hljs-built_in">Object</span>.is(<span class="hljs-number">0</span>, +<span class="hljs-number">0</span>); <span class="hljs-comment">// true</span><span class="hljs-built_in">Object</span>.is(-<span class="hljs-number">0</span>, -<span class="hljs-number">0</span>); <span class="hljs-comment">// true</span><span class="hljs-built_in">Object</span>.is(<span class="hljs-literal">NaN</span>, <span class="hljs-number">0</span>); <span class="hljs-comment">// false</span><span class="hljs-built_in">Object</span>.is(<span class="hljs-literal">NaN</span>, <span class="hljs-number">0</span> / <span class="hljs-number">0</span>); <span class="hljs-comment">// true</span></code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Object</span>.<span class="hljs-title">is</span>(<span class="hljs-params">x,y</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">Object</span>.is)&#123;    <span class="hljs-keyword">if</span>(x===y)&#123;      <span class="hljs-keyword">return</span> x!==<span class="hljs-number">0</span> || <span class="hljs-number">1</span>/x === <span class="hljs-number">1</span>/y    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-keyword">return</span> x!==x &amp;&amp; y!== y    &#125;  &#125;&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åœ°å€ä¸­è¾“å…¥URLå›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ</title>
    <link href="/2021/04/13/URL%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B/"/>
    <url>/2021/04/13/URL%E8%A7%A3%E6%9E%90%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><h2 id="åˆ†æè¯·æ±‚èµ„æº"><a href="#åˆ†æè¯·æ±‚èµ„æº" class="headerlink" title="åˆ†æè¯·æ±‚èµ„æº"></a>åˆ†æè¯·æ±‚èµ„æº</h2><ul><li>ä¸åŒæµè§ˆå™¨å¯¹èµ„æºä¼˜å…ˆçº§åˆ†ç±»</li><li>å®‰å…¨ç­–ç•¥æ£€æŸ¥ </li></ul><blockquote><p>ç½‘é¡µå®‰å…¨æ”¿ç­–ï¼ˆContent Security Policyï¼Œç¼©å†™ CSPï¼‰   æ˜¯ç”±æµè§ˆå™¨æä¾›çš„ä¸€ç§ç™½åå•åˆ¶åº¦ã€‚å‘è€…é€šè¿‡é…ç½®ï¼Œæ¥å‘Šè¯‰æµ   è§ˆå™¨å„ç±»å¤–éƒ¨èµ„æºçš„åŠ è½½å’Œæ‰§è¡Œé™åˆ¶ï¼Œæ¥æé«˜ç½‘é¡µçš„å®‰å…¨æ€§ã€‚ä¸€ç§æœ€å¸¸ç”¨åº”ç”¨å°±æ˜¯é€šè¿‡é™åˆ¶éä¿¡ä»»åŸŸåè„šæœ¬çš„åŠ è½½æ¥é¢„é˜²XSSæ”»å‡»ã€‚</p></blockquote><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥é…ç½®CSPï¼š</p><ol><li>HTTPè¯·æ±‚å¤´çš„<code>Content-Security-Policy</code></li><li><code>meta</code>æ ‡ç­¾ <div class="hljs code-wrapper"><pre><code class="hljs javascript">&lt;meta http-equiv=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span> content=<span class="hljs-string">&quot;script-src &#x27;self&#x27;;style-src nos.netease.com kaola.com;&quot;</span>&gt;</code></pre></div></li></ol><ul><li>èµ„æºä¼˜å…ˆçº§è®¡ç®—<ol><li><code>html,font,css</code></li><li><code>preload</code></li><li><code>img,pic,video</code></li><li><code>prefetch</code></li></ol></li><li>é¡ºåºè°ƒæ•´<ol><li>åŒæ­¥XHRè¯·æ±‚ä¼˜å…ˆçº§è°ƒæ•´åˆ°æœ€é«˜</li><li>å›¾ç‰‡æ ¹æ®æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸ</li><li><code>async/defer</code>çš„<code>script</code>æ ‡ç­¾è¯·æ±‚ä¼˜å…ˆçº§é™ä½</li></ol></li></ul><h2 id="DNSè§£æ"><a href="#DNSè§£æ" class="headerlink" title="DNSè§£æ"></a>DNSè§£æ</h2><ol><li>æŸ¥æ‰¾æœ¬åœ°DNSç¼“å­˜(æµè§ˆå™¨ï¼Œç³»ç»Ÿï¼Œè·¯ç”±å™¨)</li><li>æŸ¥æ‰¾ç³»ç»ŸHOSTæ–‡ä»¶</li><li>DNSæœåŠ¡å™¨è¿›è¡ŒDNSæŸ¥è¯¢<ul><li>DNSæŸ¥è¯¢è¿‡ç¨‹<ol><li>DNSæœåŠ¡å™¨ç¼“å­˜</li><li>DNSæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ ¹åŸŸåæœåŠ¡å™¨è¿”å›é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€<code>.xxx.com</code></li><li>DNSæœåŠ¡å™¨å‘é¡¶çº§åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œé¡¶çº§åŸŸåè¿”å›äºŒçº§åŸŸåçš„æœåŠ¡å™¨åœ°å€<code>.baidu.com</code></li><li>DNSæœåŠ¡å™¨å‘äºŒçº§åŸŸåæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¾—åˆ°ä¸»æœºåœ°å€ï¼Œå­˜å…¥è‡ªèº«ç¼“å­˜å¹¶è¿”å›å®¢æˆ·</li></ol></li></ul></li></ol><h2 id="TCPæ¡æ‰‹"><a href="#TCPæ¡æ‰‹" class="headerlink" title="TCPæ¡æ‰‹"></a>TCPæ¡æ‰‹</h2><p>å¯¹åº”IPåœ°å€ï¼Œç«¯å£å»ºç«‹TCPè¿æ¥ï¼Œæ„é€ HTTPè¯·æ±‚å¹¶ä¸æœåŠ¡å™¨æ¡æ‰‹åå‘é€tcpæ•°æ®åŒ…</p><p>  TCPä¸‰æ¬¡æ¡æ‰‹</p><ol><li>client å‘é€<code>SYN</code>æŠ¥æ–‡ï¼ŒæŒ‡æ˜è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·<code>ISN(c)</code></li><li>server æ”¶åˆ°åï¼Œå°†clientå‘é€çš„<code>ISN(c)</code>+1ä½œä¸º<code>ACK</code>å­—ç¬¦ï¼Œå¹¶ä¸”ä¹Ÿç”Ÿæˆè‡ªå·±çš„`ISN(s)é€å›ã€ç¡®è®¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å‘é€èƒ½åŠ›ã€‘</li><li>client æ”¶åˆ°åï¼ŒåŒæ ·å°†<code>ISN(s)</code>+1ä½œä¸º<code>ACK</code>å­—ç¬¦å‘é€ç»™serverã€ç¡®è®¤å®¢æˆ·ç«¯å’Œå®¢æˆ·ç«¯çš„èƒ½åŠ›ã€‘</li></ol><h2 id="åº”ç”¨ç¼“å­˜ç­–ç•¥"><a href="#åº”ç”¨ç¼“å­˜ç­–ç•¥" class="headerlink" title="åº”ç”¨ç¼“å­˜ç­–ç•¥"></a>åº”ç”¨ç¼“å­˜ç­–ç•¥</h2><ul><li>å¼ºç¼“å­˜</li><li>åå•†ç¼“å­˜</li></ul><h2 id="æœåŠ¡å™¨å“åº”è¯·æ±‚è¿”å›èµ„æº"><a href="#æœåŠ¡å™¨å“åº”è¯·æ±‚è¿”å›èµ„æº" class="headerlink" title="æœåŠ¡å™¨å“åº”è¯·æ±‚è¿”å›èµ„æº"></a>æœåŠ¡å™¨å“åº”è¯·æ±‚è¿”å›èµ„æº</h2><h2 id="DOM-Tree"><a href="#DOM-Tree" class="headerlink" title="DOM Tree"></a>DOM Tree</h2><ul><li>å¤„ç†htmlæ ‡è®°ï¼Œç”ŸæˆDOMæ ‘ï¼Œæ‰€æœ‰æ ‡ç­¾éƒ½ä¼šåŒ…å«åœ¨å†…</li><li>è§£æå®Œä¸€ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ æ‰ä¼šè§£æä»–çš„å…„å¼Ÿå…ƒç´ </li><li>æ„å»ºè¿‡ç¨‹ä¸­é‡åˆ°jsåˆ™æ‰§è¡Œjsï¼Œæš‚åœæ„å»º</li></ul><h2 id="CSSOM-Tree"><a href="#CSSOM-Tree" class="headerlink" title="CSSOM Tree"></a>CSSOM Tree</h2><ul><li>æ„å»ºè¿‡ç¨‹ä¸­é‡åˆ°jsï¼Œjsè¦ç­‰å¾…CSSOMæ„å»ºå®Œæ‰ä¼šæ‰§è¡Œ</li><li>CSSé˜»å¡æ¸²æŸ“<blockquote><p>ç”±äºCSSOMè´Ÿè´£å­˜å‚¨æ¸²æŸ“ä¿¡æ¯ï¼Œæµè§ˆå™¨å¿…é¡»ä¿è¯åœ¨åˆæˆæ¸²æŸ“æ ‘ä¹‹å‰ï¼ŒCSSOMæ˜¯å®Œæ•´çš„ï¼Œè¿™ç§å®Œå¤‡æ˜¯æŒ‡æ‰€æœ‰çš„CSSï¼ˆå†…è”ã€å†…éƒ¨å’Œå¤–éƒ¨ï¼‰éƒ½å·²ç»ä¸‹è½½å®Œï¼Œå¹¶è§£æå®Œï¼Œåªæœ‰CSSOMå’ŒDOMçš„è§£æå®Œå…¨ç»“æŸï¼Œæµè§ˆå™¨æ‰ä¼šè¿›å…¥ä¸‹ä¸€æ­¥çš„æ¸²æŸ“ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„CSSé˜»å¡æ¸²æŸ“ã€‚</p></blockquote></li></ul><h2 id="Render-Tree"><a href="#Render-Tree" class="headerlink" title="Render Tree"></a>Render Tree</h2><ul><li>åªåŒ…å«DOMæ ‘ä¸­çš„å¯è§å…ƒç´ (å¿½ç•¥åƒ<code>displayï¼šnone/&lt;header&gt;</code>)</li><li>æ‰¾åˆ°ä¸å…¶åŒ¹é…çš„CSSOMè§„åˆ™å¹¶åº”ç”¨</li></ul><h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>æµè§ˆå™¨ä¾æ®Renderæ ‘å’Œè®¾å¤‡å±å¹•ä¿¡æ¯<strong>é‡æ’</strong>ä¸€æ¬¡ï¼Œè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å°ºå¯¸å’Œåœ¨å±å¹•ä¸Šçš„ä½ç½®</p><h2 id="Paint"><a href="#Paint" class="headerlink" title="Paint"></a>Paint</h2><p>æ ¹æ®ä¸Šä¸€æ­¥å¾—åˆ°çš„åƒç´ ä¿¡æ¯<strong>é‡ç»˜</strong>é¡µé¢</p><h2 id="Display"><a href="#Display" class="headerlink" title="Display"></a>Display</h2><p>GPUåˆæˆå„å›¾å±‚ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p><hr><h1 id="å…¶ä»–æ¦‚å¿µ"><a href="#å…¶ä»–æ¦‚å¿µ" class="headerlink" title="å…¶ä»–æ¦‚å¿µ"></a>å…¶ä»–æ¦‚å¿µ</h1><h2 id="é‡æ’"><a href="#é‡æ’" class="headerlink" title="é‡æ’"></a>é‡æ’</h2><ul><li>ä» <code>&lt;html&gt;æ ‡ç­¾</code> å¼€å§‹é€’å½’å¾€ä¸‹ï¼Œä¾æ¬¡è®¡ç®—æ‰€æœ‰çš„èŠ‚ç‚¹å‡ ä½•å°ºå¯¸å’Œä½ç½®</li><li>æœ‰äº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä¿®æ”¹äº†å…ƒç´ çš„æ ·å¼ï¼Œæµè§ˆå™¨å¹¶ä¸ä¼šç«‹åˆ»reflowï¼Œè€Œæ˜¯ä¼šæŠŠè¿™æ ·çš„æ“ä½œç§¯æ”’ä¸€æ‰¹ï¼Œç„¶ååšä¸€æ¬¡ å¤„ç†ï¼Œè¿™åˆå«å¼‚æ­¥ reflow æˆ–å¢é‡å¼‚æ­¥ reflowã€‚ä½†æ˜¯åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚resize çª—å£ï¼Œæ”¹å˜äº†é¡µé¢é»˜è®¤çš„å­—ä½“ç­‰ã€‚å¯¹äºè¿™äº›æ“ä½œï¼Œæµè§ˆå™¨ä¼šé©¬ä¸Šè¿›è¡Œ reflowã€‚</li><li>é™¤äº†æ¸²æŸ“æ ‘çš„ç›´æ¥å˜åŒ–ï¼Œå½“è·å–ä¸€äº›éœ€è¦è®¡ç®—çš„å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¸ºå–å¾— æ­£ç¡®çš„å€¼ä¹Ÿä¼šè§¦å‘é‡æ’ã€‚è¿™æ ·å°±ä½¿å¾—æµè§ˆå™¨çš„ä¼˜åŒ–å¤±æ•ˆäº†ã€‚</li><li>è¿™äº›å±æ€§åŒ…æ‹¬ï¼š<code>offsetTopã€offsetLeftã€ offsetWidthã€offsetHeightã€scrollTopã€scrollLeftã€scrollWidthã€scrollHeightã€ clientTopã€clientLeftã€clientWidthã€clientHeightã€getComputedStyle() (currentStyle in IE)ã€‚</code></li><li>é‡æ’å¿…å®šè§¦å‘é‡ç»˜</li></ul><h2 id="é‡ç»˜"><a href="#é‡ç»˜" class="headerlink" title="é‡ç»˜"></a>é‡ç»˜</h2><p>æ”¹å˜æŸä¸ªå…ƒç´ çš„èƒŒæ™¯è‰²ã€æ–‡å­—é¢œè‰²ã€è¾¹æ¡†é¢œè‰²ç­‰ç­‰ä¸å½±å“å®ƒå‘¨å›´æˆ–å†…éƒ¨å¸ƒå±€çš„å±æ€§æ—¶ï¼Œå±å¹•çš„ä¸€éƒ¨åˆ†è¦é‡ç»˜ï¼Œä½†æ˜¯å…ƒç´ çš„å‡ ä½•å°ºå¯¸æ²¡æœ‰å˜ã€‚</p><h2 id="åˆæˆå±‚"><a href="#åˆæˆå±‚" class="headerlink" title="åˆæˆå±‚"></a>åˆæˆå±‚</h2><p>åŒºåˆ«äºä¸€èˆ¬çš„å›¾å±‚ï¼Œåˆæˆå±‚ã€compositeã€‘ä½¿ç”¨GPUçº¿ç¨‹è¿›è¡Œå¤„ç†</p><h3 id="CSS3åŠ¨ç”»"><a href="#CSS3åŠ¨ç”»" class="headerlink" title="CSS3åŠ¨ç”»"></a>CSS3åŠ¨ç”»</h3><ul><li>åŠ¨ç”»æå‡åˆ°åˆæˆå±‚å¤„ç†ï¼Œä¸å ç”¨ JS ä¸»çº¿ç¨‹</li><li>æµè§ˆå™¨å¯¹CSS3åŠ¨ç”»æœ‰ä¼˜åŒ–</li><li>ä¸è§¦å‘é‡ç»˜å’Œé‡æ’<blockquote><p>å¦‚æœä¸¤å¼ å›¾å±‚å†…éƒ¨æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæµè§ˆå™¨å°±ä¸å†è¿›è¡Œå¸ƒå±€å’Œç»˜åˆ¶ï¼Œç›´æ¥ä½¿ç”¨GPUçš„ç¼“å­˜æ¥ç»˜åˆ¶ï¼ŒGPUåªè´Ÿè´£å°†å„ä¸ªå›¾å±‚åˆæˆæ¥å®ç°åŠ¨ç”»ï¼Œè¿™å°±å¯ä»¥å……åˆ†åˆ©ç”¨GPUçš„èµ„æºå’Œä¼˜åŠ¿ï¼Œå‡è½»CPUçš„è´Ÿè½½ï¼Œå¯ä»¥ä½¿åŠ¨ç”»æ›´æµç•…ã€‚</p></blockquote></li></ul><h3 id="æå‡åˆ°åˆæˆå±‚çš„æ¡ä»¶"><a href="#æå‡åˆ°åˆæˆå±‚çš„æ¡ä»¶" class="headerlink" title="æå‡åˆ°åˆæˆå±‚çš„æ¡ä»¶"></a>æå‡åˆ°åˆæˆå±‚çš„æ¡ä»¶</h3><ul><li>3D<code>transform</code></li><li><code>opacity</code></li><li><code>filter</code></li><li><code>will-change</code></li><li><code>&lt;video&gt;,&lt;audio&gt;,&lt;canvas&gt;</code></li><li><code>position:fixed</code></li></ul><h2 id="ä¼˜åŒ–é¡µé¢æ€§èƒ½"><a href="#ä¼˜åŒ–é¡µé¢æ€§èƒ½" class="headerlink" title="ä¼˜åŒ–é¡µé¢æ€§èƒ½"></a>ä¼˜åŒ–é¡µé¢æ€§èƒ½</h2><ol><li>CSSé˜»å¡ä¼˜åŒ–ï¼Œé…åˆåª’ä½“æŸ¥è¯¢ï¼Œåˆ†å‰²é¦–å±CSSæ–‡ä»¶ï¼Œä½™ä¸‹ä½¿ç”¨linkå¼•å…¥æ ·å¼</li><li>DOMæ ·å¼é€šè¿‡classä¿®æ”¹</li><li>DOMç¦»çº¿åä¿®æ”¹ï¼ˆ<code>display:none</code>,<code>Document Fragment</code>ï¼‰æˆ–è€…ä½¿ç”¨è™šæ‹ŸDOM</li><li>å‡å°‘è·å–DOMä½ç½®ä¿¡æ¯åƒoffsetHeightï¼ˆå¯¼è‡´ç«‹å³é‡æ’ï¼‰ï¼Œæˆ–è€…åŠ å…¥å¾ªç¯ã€‚ã€‚ã€‚</li><li>tableå¸ƒå±€ä¼šç–¯ç‹‚è§¦å‘é‡æ’</li><li>åˆç†ä½¿ç”¨GPUåŠ é€Ÿ<ul><li> <code>translate</code>ä»£æ›¿ä¿®æ”¹å‡ ä½•ä¿¡æ¯<code>left,top...</code></li><li> <code>opacity</code>ä»£æ›¿<code>visibility</code></li><li> åŠ¨ç”»å…ƒç´ è„±ç¦»æ–‡æ¡£æµ<code>position:absolute/fixed</code></li><li> <code>will-change</code>å±æ€§</li></ul></li></ol><h2 id="è§£æURLå‚æ•°"><a href="#è§£æURLå‚æ•°" class="headerlink" title="è§£æURLå‚æ•°"></a>è§£æURLå‚æ•°</h2><ol><li><p>æ­£åˆ™è§£æ</p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> rule = <span class="hljs-regexp">/([^?=&amp;]+)=([^&amp;#]*)/g</span>&lt;!-- (åŒ¹é…é[?=&amp;]ä¸”å‡ºç°å¤šæ¬¡çš„å­—ç¬¦) --&gt;&lt;!-- = --&gt;&lt;!-- (åŒ¹é…å‡ºç°<span class="hljs-number">0</span>æ¬¡æˆ–å¤šæ¬¡çš„é[&amp;]çš„å­—ç¬¦) --&gt;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseURL</span>(<span class="hljs-params">url</span>)</span>&#123;  <span class="hljs-keyword">return</span> url.match(rule).reduce(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>&#123;    <span class="hljs-keyword">let</span> [key,value] = b.split(<span class="hljs-string">&#x27;=&#x27;</span>)    key = <span class="hljs-built_in">decodeURIComponent</span>(key)    value = <span class="hljs-built_in">decodeURIComponent</span>(value)    <span class="hljs-keyword">if</span>(!a.hasOwnProperty(key))&#123;      a[key] = value    &#125;<span class="hljs-keyword">else</span>&#123;      a[key] = [].concat(value,a[key])    &#125;    <span class="hljs-keyword">return</span> a  &#125;,&#123;&#125;)&#125;</code></pre></div></li><li><p>APIè§£æ</p><p> URLSearchParams<br> <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams">https://developer.mozilla.org/zh-CN/docs/Web/API/URLSearchParams</a></p> <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseURL</span>(<span class="hljs-params">url</span>)</span>&#123;  <span class="hljs-keyword">const</span> urlObj = <span class="hljs-keyword">new</span> URLSearchParams(url.slice(url.indexOf(<span class="hljs-string">&#x27;?&#x27;</span>)))  <span class="hljs-keyword">const</span> res = []  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> urlObj.keys())&#123;    res[key] = urlObj.getAll(key)  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–‡ä»¶å¤¹å†…æ‰¹é‡æ˜ å°„ä¸ºæ¨¡å—</title>
    <link href="/2021/04/06/%E6%89%B9%E9%87%8F%E6%98%A0%E5%B0%84%E6%A8%A1%E5%9D%97/"/>
    <url>/2021/04/06/%E6%89%B9%E9%87%8F%E6%98%A0%E5%B0%84%E6%A8%A1%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript">./controllersä¸­controllerA.jscontrollerB.jscontrollerC.js</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript">./controllers/index.js<span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;lodash&#x27;</span>)<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ˜ å°„æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ºæ¨¡å—</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> mapDir = <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> &#123;    <span class="hljs-keyword">const</span> tree = &#123;&#125;    <span class="hljs-comment">// è·å¾—å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span>    <span class="hljs-keyword">const</span> [dirs, files] = _(fs.readdirSync(d))        .partition(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> fs.statSync(path.join(d, p)).isDirectory())    <span class="hljs-comment">// _(value)</span>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç» lodash åŒ…è£…åçš„å¯¹è±¡ä¼šå¯ç”¨éšå¼é“¾ã€‚è¿”å›çš„æ•°ç»„ã€é›†åˆã€æ–¹æ³•ç›¸äº’ä¹‹é—´èƒ½å¤Ÿé“¾å¼è°ƒç”¨</span>        <span class="hljs-comment">// é€’å½’æ˜ å°„æ–‡ä»¶å¤¹</span>    dirs.forEach(<span class="hljs-function"><span class="hljs-params">dir</span> =&gt;</span> &#123;        tree[dir] = mapDir(path.join(d, dir))    &#125;)    <span class="hljs-comment">// æ˜ å°„æ–‡ä»¶</span>    files.forEach(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> &#123;        <span class="hljs-keyword">if</span> (path.extname(file) === <span class="hljs-string">&#x27;.js&#x27;</span>) &#123;            tree[path.basename(file, <span class="hljs-string">&#x27;.js&#x27;</span>)] = <span class="hljs-built_in">require</span>(path.join(d, file))        &#125;    &#125;)    <span class="hljs-keyword">return</span> tree&#125;<span class="hljs-comment">// é»˜è®¤å¯¼å‡ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ˜ å°„</span><span class="hljs-built_in">module</span>.exports = mapDir(path.join(__dirname))</code></pre></div><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> controllers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../controllers&quot;</span>);router.get(<span class="hljs-string">&#x27;/A&#x27;</span>,controllers.controllerA)router.post(<span class="hljs-string">&#x27;/B&#x27;</span>,controllers.controllerB)router.post(<span class="hljs-string">&#x27;/C&#x27;</span>,controllers.controllerC)</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>divé«˜åº¦ä¸ºé«˜åº¦ä¸€åŠ</title>
    <link href="/2021/04/04/div%E9%AB%98%E5%BA%A6%E4%B8%BA%E9%AB%98%E5%BA%A6%E4%B8%80%E5%8D%8A/"/>
    <url>/2021/04/04/div%E9%AB%98%E5%BA%A6%E4%B8%BA%E9%AB%98%E5%BA%A6%E4%B8%80%E5%8D%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h1><h2 id="positionå±æ€§"><a href="#positionå±æ€§" class="headerlink" title="positionå±æ€§"></a>positionå±æ€§</h2><ul><li><code>static</code><ul><li>æ­£å¸¸æµï¼Œé»˜è®¤å€¼</li><li>top, right, bottom, left å’Œ z-index å±æ€§æ— æ•ˆã€‚</li></ul></li><li><code>relative</code><ul><li>ç›¸å¯¹æ­£å¸¸æµåç§»</li><li>åŸä½ç½®æœ‰é¢„ç•™ç©ºé—´</li></ul></li><li><code>absolute</code><ul><li>ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµ</li><li>ç›¸å¯¹äºæœ€è¿‘çš„é static å®šä½ç¥–å…ˆå…ƒç´ åç§»</li><li>ä¸ä¸ºå…ƒç´ é¢„ç•™ç©ºé—´</li></ul></li><li><code>fixed</code><ul><li>ç§»å‡ºæ­£å¸¸æ–‡æ¡£æµ</li><li>ç›¸å¯¹äºå±å¹•è§†å£ï¼ˆviewportï¼‰çš„ä½ç½®æ¥æŒ‡å®šå…ƒç´ ä½ç½®</li><li>ä¸ä¸ºå…ƒç´ é¢„ç•™ç©ºé—´<blockquote><p>å½“å…ƒç´ ç¥–å…ˆçš„ transform, perspective æˆ– filter å±æ€§é none æ—¶ï¼Œå®¹å™¨ç”±è§†å£æ”¹ä¸ºè¯¥ç¥–å…ˆã€‚</p></blockquote></li></ul></li><li><code>sticky</code><ul><li>ç›¸å¯¹å®šä½å’Œå›ºå®šå®šä½çš„æ··åˆ</li><li>é¡»æŒ‡å®š top, right, bottom æˆ– left å››ä¸ªé˜ˆå€¼å…¶ä¸­ä¹‹ä¸€ï¼Œæ‰å¯ä½¿ç²˜æ€§å®šä½ç”Ÿæ•ˆã€‚å¦åˆ™å…¶è¡Œä¸ºä¸ç›¸å¯¹å®šä½ç›¸åŒã€‚</li><li>è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½</li></ul></li></ul><h2 id="åŒ…å«å—"><a href="#åŒ…å«å—" class="headerlink" title="åŒ…å«å—"></a>åŒ…å«å—</h2><h3 id="åŒ…å«å—çš„ä½œç”¨"><a href="#åŒ…å«å—çš„ä½œç”¨" class="headerlink" title="åŒ…å«å—çš„ä½œç”¨"></a>åŒ…å«å—çš„ä½œç”¨</h3><p>  å…ƒç´ çš„å°ºå¯¸åŠä½ç½®ï¼Œå¸¸å¸¸ä¼šå—å®ƒçš„åŒ…å«å—æ‰€å½±å“ã€‚å¯¹äºä¸€äº›å±æ€§ï¼Œä¾‹å¦‚ width,height, padding, marginï¼Œç»å¯¹å®šä½å…ƒç´ çš„åç§»å€¼ ï¼ˆæ¯”å¦‚ position è¢«ç½®ä¸º absolute æˆ– fixedï¼‰ï¼Œå½“æˆ‘ä»¬å¯¹å…¶èµ‹äºˆç™¾åˆ†æ¯”å€¼æ—¶ï¼Œè¿™äº›å€¼çš„è®¡ç®—å€¼å°±æ˜¯é€šè¿‡å…ƒç´ çš„åŒ…å«å—è®¡ç®—å¾—æ¥</p><h3 id="ç¡®å®šåŒ…å«å—"><a href="#ç¡®å®šåŒ…å«å—" class="headerlink" title="ç¡®å®šåŒ…å«å—"></a>ç¡®å®šåŒ…å«å—</h3><blockquote><p>ä¸€ä¸ªå…ƒç´ çš„åŒ…å«å—å¹¶ä¸ä¸€å®šçˆ¶å…ƒç´ çš„å†…å®¹åŒº</p></blockquote><p>å…ƒç´ çš„åŒ…å«å—ç”±å…¶<code>position</code>å†³å®šï¼š</p><ul><li><code>static ã€ relative æˆ– sticky </code>ï¼ŒåŒ…å«å—å¯èƒ½ç”±å®ƒçš„æœ€è¿‘çš„ç¥–å…ˆå—å…ƒç´ ï¼ˆæ¯”å¦‚è¯´inline-block, block æˆ– list-itemå…ƒç´ ï¼‰çš„å†…å®¹åŒºçš„è¾¹ç¼˜ç»„æˆ<code>content</code></li><li><code>absolute</code> ï¼ŒåŒ…å«å—å°±æ˜¯ç”±å®ƒçš„æœ€è¿‘çš„ <code>position çš„å€¼ä¸æ˜¯ static</code> ï¼ˆä¹Ÿå°±æ˜¯å€¼ä¸ºfixed, absolute, relative æˆ– stickyï¼‰çš„ç¥–å…ˆå…ƒç´ çš„å†…è¾¹è·åŒºçš„è¾¹ç¼˜ç»„æˆ<code>content+padding</code></li><li><code>fixed</code>ï¼Œåœ¨è¿ç»­åª’ä½“çš„æƒ…å†µä¸‹(continuous media)åŒ…å«å—æ˜¯ viewport ,åœ¨åˆ†é¡µåª’ä½“(paged media)ä¸‹çš„æƒ…å†µä¸‹åŒ…å«å—æ˜¯åˆ†é¡µåŒºåŸŸ(page area)ã€‚<blockquote><p>å½“å…ƒç´ ç¥–å…ˆçš„ transform, perspective æˆ– filter å±æ€§é none æ—¶,åŒ…å«å—æ˜¯è¿™ä¸ªå…ƒç´ çš„å†…è¾¹è·åŒº content+padding</p></blockquote></li></ul><h3 id="æ ¹æ®åŒ…å«å—è®¡ç®—"><a href="#æ ¹æ®åŒ…å«å—è®¡ç®—" class="headerlink" title="æ ¹æ®åŒ…å«å—è®¡ç®—"></a>æ ¹æ®åŒ…å«å—è®¡ç®—</h3><ul><li>è¦è®¡ç®— <code>height</code> <code>top</code> åŠ <code>bottom</code> ä¸­çš„ç™¾åˆ†å€¼ï¼Œæ˜¯é€šè¿‡åŒ…å«å—çš„ <code>height</code> çš„å€¼</li><li>è¦è®¡ç®— <code>width</code>, <code>left</code>, <code>right</code>, <strong><code>padding</code>!, <code>margin</code></strong> è¿™äº›å±æ€§ç”±åŒ…å«å—çš„ <code>width</code> å±æ€§çš„å€¼æ¥è®¡ç®—å®ƒçš„ç™¾åˆ†å€¼ã€‚</li></ul><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><ol><li><p>å®ç°ä¸€ä¸ªdivå‚ç›´æ°´å¹³å±…ä¸­é«˜åº¦ä¸ºå®½åº¦çš„ä¸€åŠè‡ªé€‚åº”</p><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-comment">/* å¤–å±‚wrapper */</span><span class="hljs-selector-class">.outer-wrapper</span>&#123;  <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">display</span>:flex;  <span class="hljs-comment">/* flexé»˜è®¤è¡Œæ’åˆ—ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¾§è½´å¯¹é½ */</span>  <span class="hljs-attribute">align-items</span>:center&#125;<span class="hljs-comment">/* å†…å±‚wrapper */</span><span class="hljs-selector-class">.inner-wrapper</span>&#123;  <span class="hljs-attribute">position</span>:relative;  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">height</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">padding-bottom</span>:<span class="hljs-number">50%</span>;  <span class="hljs-comment">/* padding,marginå€¼çš„ç™¾åˆ†æ¯”æ˜¯ç›¸è¾ƒäºçˆ¶å…ƒç´ width */</span>&#125;<span class="hljs-selector-class">.div</span>&#123;  <span class="hljs-attribute">position</span>:absolute;  <span class="hljs-comment">/* ä¸¤ä¸ªpositionè®¾ç½®éƒ½æ˜¯ä¸ºäº†ç¡®å®šåŒ…å«å— */</span>  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;  <span class="hljs-comment">/* è¿™é‡Œçš„é«˜åº¦å°±=inner-wrapper[height+padding] */</span>&#125;</code></pre></div></li><li><p>å®ç°divæ­£æ–¹å½¢å¤§å°è‡ªé€‚åº”</p></li></ol><div class="hljs code-wrapper"><pre><code class="hljs css"><span class="hljs-selector-class">.wrapper</span>&#123;  <span class="hljs-attribute">position</span>:relative;  <span class="hljs-attribute">padding-top</span>:<span class="hljs-number">50%</span>;  <span class="hljs-attribute">width</span>:<span class="hljs-number">50%</span>;  <span class="hljs-comment">/* åŒæ ·ç›¸è¾ƒäºåŒ…å«å—çš„å°ºå¯¸ç™¾åˆ†æ¯” */</span>&#125;<span class="hljs-selector-class">.div</span>&#123;  <span class="hljs-attribute">position</span>:absolute;  <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;  <span class="hljs-comment">/* åç§»åˆ°wrapperä½ç½® */</span>  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;&#125;<span class="hljs-comment">/* ä¹Ÿå¯ä½¿ç”¨ä¼ªå…ƒç´ æ’‘å¼€é«˜åº¦ */</span><span class="hljs-selector-class">.div</span>&#123;  <span class="hljs-attribute">width</span>:<span class="hljs-number">50%</span>;  <span class="hljs-comment">/* è§¦å‘BFCé¿å…å¡Œé™· */</span>  <span class="hljs-comment">/* overflowä¸ä¸ºvisible */</span>  <span class="hljs-comment">/* positionä¸ºfixed,absolute[ç»å¯¹å®šä½] */</span>  <span class="hljs-comment">/* floatä¸ä¸ºnone[æµ®åŠ¨å…ƒç´ ] */</span>  <span class="hljs-comment">/* flex/grid/table */</span>  <span class="hljs-attribute">display</span>:flow-root&#125;<span class="hljs-selector-class">.div</span><span class="hljs-selector-pseudo">::after</span>&#123;  <span class="hljs-attribute">content</span>:<span class="hljs-string">&#x27;&#x27;</span>;  <span class="hljs-attribute">margin-top</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">display</span>:block&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>css</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>axios</title>
    <link href="/2021/01/27/axios/"/>
    <url>/2021/01/27/axios/</url>
    
    <content type="html"><![CDATA[<h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><ul><li><p>æ‹¦æˆªå™¨ä¸­å¯ä»¥ä¿®æ”¹configå’Œresponse</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.interceptors.request.use(  (config) =&gt; &#123;    &lt;!-- åŠ å…¥å‚æ•° --&gt;    config.params = &#123;<span class="hljs-attr">a</span>:<span class="hljs-number">666</span>&#125;    <span class="hljs-keyword">return</span> config  &#125;,  (err) =&gt; &#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.reject(err)  &#125;);</code></pre></div></li><li><p>æ‰§è¡Œé¡ºåº</p><ul><li>è¯·æ±‚æ‹¦æˆªå™¨ åé¢çš„æ‹¦æˆªå™¨å…ˆæ‰§è¡Œ</li><li>å“åº”æ‹¦æˆªå™¨ å‰é¢çš„æ‹¦æˆªå™¨å…ˆæ‰§è¡Œ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-params">config</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request1&#x27;</span>)&#125;,<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;err1&#x27;</span>)&#125;)axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-params">config</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;request2&#x27;</span>)&#125;,<span class="hljs-function"><span class="hljs-params">err</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;err2&#x27;</span>)&#125;)axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response1&#x27;</span>)&#125;ï¼Œerr=&gt;&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;resErr1&#x27;</span>)&#125;)axios.interceptors.response.use(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;response2&#x27;</span>)&#125;ï¼Œerr=&gt;&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;resErr2&#x27;</span>)&#125;)&lt;!-- <span class="hljs-built_in">console</span> --&gt;request2request1response1response2</code></pre></div></li><li><p>å–æ¶ˆè¯·æ±‚</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> CancelToken = axios.CancelToken;<span class="hljs-keyword">let</span> cancel = <span class="hljs-literal">null</span>btn.onclick = <span class="hljs-function">() =&gt;</span> &#123;  <span class="hljs-keyword">if</span>(cancel !== <span class="hljs-literal">null</span>) cancel()  &lt;!-- æ‰§è¡Œå–æ¶ˆå‡½æ•° --&gt;  axios(&#123;    method:<span class="hljs-string">&#x27;GET&#x27;</span>,    url:<span class="hljs-string">&#x27;http://xxxxxxx&#x27;</span>,    &lt;!--  --&gt;    cancelToken : <span class="hljs-keyword">new</span> CancelToken(<span class="hljs-function"><span class="hljs-params">c</span>=&gt;</span>&#123;      cancel = c      &lt;!-- cancelToken --&gt;    &#125;)  &#125;)&#125;.then(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>&#123;  cancel = <span class="hljs-literal">null</span>&#125;)</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ‰“åŒ…ä¼˜åŒ–</title>
    <link href="/2020/11/30/%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/"/>
    <url>/2020/11/30/%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><ul><li>é™æ€æ¨¡å—æ‰“åŒ…å·¥å…·</li><li>é«˜æ•ˆå¤„ç†å¼€å‘è¿‡ç¨‹ä¸­çš„å„ç§ç±»å‹èµ„æº</li><li>ç®¡ç†æ¨¡å—ä¾èµ–ï¼Œè¾“å‡ºä¼˜åŒ–åçš„é™æ€æ–‡ä»¶</li></ul><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ol><li><code>Entry</code>  åŠ è½½å…¥å£èµ„æºï¼Œåˆ†æå…¶ä¾èµ–å…³ç³»å¹¶å»ºç«‹ä¾èµ–å›¾</li><li><code>Loader</code> webpackè‡ªå·±åªèƒ½å¤„ç†jsæ–‡ä»¶ï¼Œloaderæä¾›äº†å¤„ç†å…¶ä»–æ–‡ä»¶ç±»å‹çš„èƒ½åŠ›<ul><li>cssé¢„å¤„ç†å™¨</li><li>babelè½¬è¯‘</li></ul></li><li><code>Plugin</code> æ‰“åŒ…è¿‡ç¨‹ä¸­ä¸åŒé˜¶æ®µå¯ä½¿ç”¨æ’ä»¶æ‰§è¡Œç‰¹å®šæ“ä½œï¼Œä¸ºwebpackå¢åŠ ä¸åŒåŠŸèƒ½<ul><li>devserver</li><li>çƒ­æ›´æ–°</li><li>ä»£ç åˆ†å‰²</li><li>ä»£ç å‹ç¼©</li></ul></li><li><code>Output</code><br> æŒ‡å®šåç§°å’Œä½ç½®è¾“å‡ºæ‰“åŒ…ç»“æœ<h1 id="ä¼˜åŒ–æ‰‹æ®µ"><a href="#ä¼˜åŒ–æ‰‹æ®µ" class="headerlink" title="ä¼˜åŒ–æ‰‹æ®µ"></a>ä¼˜åŒ–æ‰‹æ®µ</h1><h2 id="ä»£ç å‹ç¼©"><a href="#ä»£ç å‹ç¼©" class="headerlink" title="ä»£ç å‹ç¼©"></a>ä»£ç å‹ç¼©</h2><h2 id="è·¯ç”±æ‡’åŠ è½½"><a href="#è·¯ç”±æ‡’åŠ è½½" class="headerlink" title="è·¯ç”±æ‡’åŠ è½½"></a>è·¯ç”±æ‡’åŠ è½½</h2></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Router(&#123;  routes: [    &#123;      path: <span class="hljs-string">&#x27;/home&#x27;</span>,      component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/home&#x27;</span>),    &#125;,    &#123;      path: <span class="hljs-string">&#x27;/about&#x27;</span>,      component: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@/components/home&#x27;</span>),    &#125;,  ],&#125;)</code></pre></div><h2 id="æŒ‰éœ€å¼•å…¥"><a href="#æŒ‰éœ€å¼•å…¥" class="headerlink" title="æŒ‰éœ€å¼•å…¥"></a>æŒ‰éœ€å¼•å…¥</h2><ol><li>elementuiå®˜ç½‘é…ç½®æ–¹æ³•ä¸é€‚ç”¨</li><li>vuecliä¸­babelé…ç½®æ–‡ä»¶ä¸º<code>babel.config.js</code></li><li>å®‰è£…<code>babel-plugin-component</code></li><li>é…ç½®<code>babel.config.js</code></li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;  presets: [    <span class="hljs-string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>  ],  plugins: [    [      <span class="hljs-string">&quot;component&quot;</span>,<span class="hljs-comment">// æ’ä»¶ä½ç½®</span>      &#123;        <span class="hljs-string">&quot;libraryName&quot;</span>: <span class="hljs-string">&quot;element-ui&quot;</span>,        <span class="hljs-string">&quot;styleLibraryName&quot;</span>: <span class="hljs-string">&quot;theme-chalk&quot;</span>      &#125;    ]  ]&#125;</code></pre></div><ul><li>ä¿®æ”¹<code>main.js</code><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> &#123; MenuItem,Container,Header,Aside,Main,Input,Footer,Avatar, Menu, Table, TableColumn, Pagination ,Button&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;element-ui&quot;</span>;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> [MenuItem,Container,Header,Aside,Main,Input,Footer,Avatar, Menu, Table, TableColumn, Pagination,Button]) &#123;  Vue.use(item);&#125;</code></pre></div></li><li>ä¹Ÿå¯ä»¥å•ç‹¬ç‹¬ç«‹å‡ºè‡ªå®šä¹‰ç»„ä»¶,äºŒæ¬¡å°è£…<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// eleui.js</span><span class="hljs-keyword">import</span> &#123; MenuItem,Container,Header,Aside,Main,Input,Footer,Avatar, Menu, Table, TableColumn, Pagination ,Button&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;element-ui&quot;</span>;<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  install : <span class="hljs-function">(<span class="hljs-params">Vue</span>) =&gt;</span> &#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> co <span class="hljs-keyword">of</span> [MenuItem,Container,Header,Aside,Main,Input,Footer,Avatar, Menu, Table, TableColumn, Pagination ,Button])&#123;      Vue.use(co)    &#125;  &#125;&#125;<span class="hljs-comment">// main.js</span><span class="hljs-keyword">import</span> eleUI <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./eleUI.js&#x27;</span>Vue.use(eleUI)</code></pre></div><h2 id="æŠ½ç¦»ç»„ä»¶åº“-ä»£ç åˆ†å‰²"><a href="#æŠ½ç¦»ç»„ä»¶åº“-ä»£ç åˆ†å‰²" class="headerlink" title="æŠ½ç¦»ç»„ä»¶åº“(ä»£ç åˆ†å‰²)"></a>æŠ½ç¦»ç»„ä»¶åº“(ä»£ç åˆ†å‰²)</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">module</span>.exports = &#123;  chainWebpack: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;      config.optimization.splitChunks(&#123;        chunks: <span class="hljs-string">&#x27;all&#x27;</span>,        cacheGroups: &#123;          vendors: &#123;            name: <span class="hljs-string">&#x27;chunk-vendors&#x27;</span>,            test: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,            priority: <span class="hljs-number">10</span>,            chunks: <span class="hljs-string">&#x27;initial&#x27;</span>          &#125;,          echarts: &#123;            name: <span class="hljs-string">&#x27;chunk-echarts&#x27;</span>,            priority: <span class="hljs-number">20</span>,            test: <span class="hljs-regexp">/[\\/]node_modules[\\/]_?echarts(.*)/</span>          &#125;        &#125;      &#125;)    &#125;&#125;</code></pre></div><h2 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h2></li></ul><ol><li>å®‰è£…<code>html-webpack-plugin</code></li><li>ä¿®æ”¹<code>public/index.html</code><div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> /&gt;</span>    &lt;meta      name=&quot;viewport&quot;      content=&quot;width=device-width,initial-scale=1.0,user-scalable=no&quot;    /&gt;    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨CDNçš„CSSæ–‡ä»¶ --&gt;</span>    &lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp;    htmlWebpackPlugin.options.cdn.css) &#123; %&gt;    &lt;link      href=&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot;      rel=&quot;preload&quot;      as=&quot;style&quot;    /&gt;    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= htmlWebpackPlugin.options.cdn.css[i] %&gt;&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> /&gt;</span>    &lt;% &#125; %&gt;    <span class="hljs-comment">&lt;!-- ä½¿ç”¨CDNçš„CSSæ–‡ä»¶ --&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span>      &lt;strong        &gt;We&#x27;re sorry but moviapp doesn&#x27;t work properly without JavaScript        enabled. Please enable it to continue.&lt;/strong      &gt;    <span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-comment">&lt;!-- built files will be auto injected --&gt;</span>    <span class="hljs-comment">&lt;!-- ä½¿ç”¨CDNçš„JSæ–‡ä»¶ --&gt;</span>    &lt;% for (var i in htmlWebpackPlugin.options.cdn &amp;&amp;    htmlWebpackPlugin.options.cdn.js) &#123; %&gt;    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;&lt;%= htmlWebpackPlugin.options.cdn.js[i] %&gt;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>    &lt;% &#125; %&gt;    <span class="hljs-comment">&lt;!-- ä½¿ç”¨CDNçš„JSæ–‡ä»¶ --&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li></ol><ul><li>é…ç½®<code>vue.config.js</code></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// åˆ¤æ–­ç”Ÿäº§ç¯å¢ƒ</span><span class="hljs-keyword">const</span> isProduction = process.env.NODE_ENV === <span class="hljs-string">&quot;production&quot;</span>;<span class="hljs-keyword">const</span> cdn = &#123;  <span class="hljs-comment">// éšä¾¿æŠ“å‡ ä¸ª</span>  js: [    <span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/vue/2.6.0/vue.runtime.esm.js&quot;</span>,    <span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/vue-router/3.1.3/vue-router.esm.js&quot;</span>  ],&#125;;<span class="hljs-built_in">module</span>.exports = &#123;  configureWebpack: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (isProduction) &#123;      config.externals = &#123;        <span class="hljs-comment">// æ’é™¤çš„ä¾èµ–ï¼Œä¸ä»bundleä¸­å¼•å…¥çš„ä¾èµ–</span>        <span class="hljs-string">&quot;vue&quot;</span>: <span class="hljs-string">&quot;Vue&quot;</span>,        <span class="hljs-string">&quot;vue-router&quot;</span>: <span class="hljs-string">&quot;VueRouter&quot;</span>      &#125;;    &#125;  &#125;,  chainWebpack: <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (isProduction) &#123;      config.plugin(<span class="hljs-string">&quot;html&quot;</span>).tap(<span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> &#123;        <span class="hljs-comment">// ä¼ é€’ç»™ html-webpack-plugin&#x27;s æ„é€ å‡½æ•°çš„æ–°å‚æ•°</span>        args[<span class="hljs-number">0</span>].cdn = cdn;        <span class="hljs-keyword">return</span> args;      &#125;);    &#125;  &#125;,&#125;;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>webpack</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vueçš„diffç®—æ³•</title>
    <link href="/2020/11/25/vue_diff%E7%AE%97%E6%B3%95/"/>
    <url>/2020/11/25/vue_diff%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul><li>diffç®—æ³•ï¼ŒåŒ…å«æ¸²æŸ“å™¨å¦‚ä½•å¯¹å„ç§ç±»å‹çš„vNodeçš„å±æ€§ï¼Œtextï¼Œfragmentè¿›è¡Œpatchæ›´æ–°ï¼Œä»¥åŠåˆ¤æ–­æ˜¯patch vNodeï¼Œè¿˜æ˜¯æ–°å¢è¿˜æ˜¯åˆ é™¤</li><li>åŒçº§æ¯”è¾ƒ</li></ul><h3 id="åŸºç¡€çš„diff"><a href="#åŸºç¡€çš„diff" class="headerlink" title="åŸºç¡€çš„diff"></a>åŸºç¡€çš„diff</h3><ul><li>æ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹-&gt;åˆ é™¤ä¹…çš„</li><li>æ–°èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹-&gt;åˆ é™¤æ—§çš„å¹¶æ·»åŠ æ–°çš„</li></ul><h3 id="æ ¸å¿ƒdiff"><a href="#æ ¸å¿ƒdiff" class="headerlink" title="æ ¸å¿ƒdiff"></a>æ ¸å¿ƒdiff</h3><ul><li>æ–°æ—§èŠ‚ç‚¹éƒ½æœ‰å¤šä¸ªå­èŠ‚ç‚¹</li></ul><h4 id="æ²¡æœ‰key"><a href="#æ²¡æœ‰key" class="headerlink" title="æ²¡æœ‰key"></a>æ²¡æœ‰key</h4><ul><li>å°±åœ°æ›´æ–°<h4 id="keyçš„ä½œç”¨"><a href="#keyçš„ä½œç”¨" class="headerlink" title="keyçš„ä½œç”¨"></a>keyçš„ä½œç”¨</h4></li><li>vNodeä¸­çš„å”¯ä¸€æ ‡è¯†ç¬¦</li><li>ç”¨äºä¿å­˜æ–°æ—§vNodeçš„æ˜ å°„å…³ç³»</li><li>æ‰¾åˆ°å¯å¤ç”¨çš„vNode</li><li>ç”¨ç§»åŠ¨èŠ‚ç‚¹è¾¾åˆ°æ›´æ–°ç›®çš„â­ï¸</li></ul><h4 id="React-æœ€å¤§ç´¢å¼•å€¼k"><a href="#React-æœ€å¤§ç´¢å¼•å€¼k" class="headerlink" title="React æœ€å¤§ç´¢å¼•å€¼k"></a>React æœ€å¤§ç´¢å¼•å€¼k</h4><ul><li>ä¸¤æ¬¡å¾ªç¯ï¼Œéå†æ–°nodeå»æ—§nodeä¸­å¯»æ‰¾æ–°vnodeä½ç½®</li><li>å¦‚æœç´¢å¼•å‘ˆç°é€’å¢è¶‹åŠ¿<div class="hljs code-wrapper"><pre><code class="hljs javascript">old: key1 key2 key3<span class="hljs-keyword">new</span>: key1 key2 key3</code></pre></div>ï¼ˆnewA-&gt;oldA=&gt;0,newB-&gt;oldB=&gt;1,newC-&gt;oldC=&gt;2ï¼‰åˆ™è¯´æ˜æ–°æ—§ children ä¸­èŠ‚ç‚¹é¡ºåºç›¸åŒï¼Œä¸éœ€è¦ç§»åŠ¨æ“ä½œã€‚ç›¸åçš„ï¼Œå¦‚æœåœ¨å¯»æ‰¾çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„ç´¢å¼•å€¼ä¸å‘ˆç°é€’å¢è¶‹åŠ¿ï¼Œåˆ™è¯´æ˜éœ€è¦ç§»åŠ¨æ“ä½œ</li><li>å¦‚æœåŒ¹é…è¿‡ç¨‹ä¸­é€’å¢è§„å¾‹è¢«æ‰“ç ´</li></ul>  <div class="hljs code-wrapper"><pre><code class="hljs javascript">old: key2 key3 key1<span class="hljs-keyword">new</span>: key1 key2 key3k = <span class="hljs-number">2</span> ä¹‹å‰çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦ç§»åŠ¨</code></pre></div><p>  <code>k</code>ä¸ºåœ¨æ—§ children ä¸­æ‰€é‡åˆ°çš„æœ€å¤§ç´¢å¼•å€¼ï¼Œåˆ™åç»­åŒ¹é…çš„ç´¢å¼•å°äºè¿™ä¸ªå€¼æ„å‘³ç€éƒ½éœ€è¦ç§»åŠ¨</p><h3 id="Vue-åŒç«¯æ¯”è¾ƒ-snabbdom"><a href="#Vue-åŒç«¯æ¯”è¾ƒ-snabbdom" class="headerlink" title="Vue åŒç«¯æ¯”è¾ƒ snabbdom"></a>Vue åŒç«¯æ¯”è¾ƒ snabbdom</h3><div class="hljs code-wrapper"><pre><code class="hljs javascript">(oStart)               [oEnd] oldA   oldB   oldC    oldD newB   newC   newD    newA(nStart)               [nEnd]<span class="hljs-comment">// oStartä¸nEndåŒ¹é…ä¸Šäº†keyï¼Œå°†oldAçš„DOMç§»åŠ¨åˆ°æ–°domæœ€å</span>      (oStart)        [oEnd] oldA   oldB   oldC    oldD ï½œ  ----------------------&gt;                        ï½œ newB   newC   newD    newA(nStart)      [nEnd]</code></pre></div><ul><li><p>vueåŒæ—¶ä»æ–°æ—§childrençš„ä¸¤ç«¯å¼€å§‹æ¯”è¾ƒ</p></li><li><p>å››ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŸ¥æ‰¾æ˜¯å¦keyç›¸åŒ</p></li><li><p>åŒ¹é…åˆ°äº†ç›¸åŒçš„keyï¼Œåˆ™å°†çœŸå®domç§»åŠ¨,åŒæ—¶å››ä¸ªæŒ‡é’ˆå¯¹æ’ç§»åŠ¨</p></li><li><p>å¦‚æœç¬¬ä¸€è½®å››æ¬¡åŒ¹é…ä¸ä¸Šï¼Œåˆ™éå†æ—§nodeå¯»æ‰¾<code>nStart</code></p></li><li><p>if æ‰¾åˆ°å°†å…¶çœŸå®DOMç§»åŠ¨åˆ°<code>oStart</code>ä¹‹å‰ï¼Œå¹¶åœ¨åŸvnodeä½ç½®ç½®ç©ºundefinedï¼Œååºæ¯”è¾ƒä¼šè·³è¿‡ä»–</p></li><li><p>else æ‰¾ä¸åˆ°åˆ™æ·»åŠ æ–°å¢æ–°å…ƒç´ <code>nStart</code>åˆ°<code>oStart</code>ä¹‹å‰</p></li><li><p>åŒ¹é…ç»“æŸå<code>oEnd&lt;oStart</code>,æ–°å¢<code>nStartåˆ°nEnd</code>æ–°å…ƒç´ åˆ°<code>oStart</code>ä¹‹å‰</p></li><li><p>åŒ¹é…ç»“æŸå<code>nStart&gt;nEnd</code>,åˆ é™¤<code>oStartåˆ°oEnd</code>ä¹‹é—´å…ƒç´ </p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isUndef</span> (<span class="hljs-params">v</span>) </span>&#123;  <span class="hljs-keyword">return</span> v === <span class="hljs-literal">undefined</span> || v === <span class="hljs-literal">null</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDef</span> (<span class="hljs-params">v</span>) </span>&#123;  <span class="hljs-keyword">return</span> v !== <span class="hljs-literal">undefined</span> &amp;&amp; v !== <span class="hljs-literal">null</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sameVnode</span> (<span class="hljs-params">a, b</span>) </span>&#123;  <span class="hljs-keyword">return</span> (    a.key === b.key &amp;&amp; (      (        a.tag === b.tag &amp;&amp;        a.isComment === b.isComment &amp;&amp;        isDef(a.data) === isDef(b.data) &amp;&amp;        !childrenIgnored(a) &amp;&amp; !childrenIgnored(b) &amp;&amp;        sameInputType(a, b)      ) || (        isTrue(a.isAsyncPlaceholder) &amp;&amp;        a.asyncFactory === b.asyncFactory &amp;&amp;        isUndef(b.asyncFactory.error)      )    )  )&#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateChildren</span> (<span class="hljs-params">parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly</span>) </span>&#123;    <span class="hljs-keyword">let</span> oldStartIdx = <span class="hljs-number">0</span>    <span class="hljs-keyword">let</span> newStartIdx = <span class="hljs-number">0</span>    <span class="hljs-keyword">let</span> oldEndIdx = oldCh.length - <span class="hljs-number">1</span>    <span class="hljs-keyword">let</span> oldStartVnode = oldCh[<span class="hljs-number">0</span>]    <span class="hljs-keyword">let</span> oldEndVnode = oldCh[oldEndIdx]    <span class="hljs-keyword">let</span> newEndIdx = newCh.length - <span class="hljs-number">1</span>    <span class="hljs-keyword">let</span> newStartVnode = newCh[<span class="hljs-number">0</span>]    <span class="hljs-keyword">let</span> newEndVnode = newCh[newEndIdx]    <span class="hljs-keyword">let</span> oldKeyToIdx, idxInOld, vnodeToMove, refElm    <span class="hljs-keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) &#123;      <span class="hljs-keyword">if</span> (isUndef(oldStartVnode)) &#123;        oldStartVnode = oldCh[++oldStartIdx] <span class="hljs-comment">// Vnode has been moved left</span>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isUndef(oldEndVnode)) &#123;        oldEndVnode = oldCh[--oldEndIdx]      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldStartVnode, newStartVnode)) &#123;        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)        oldStartVnode = oldCh[++oldStartIdx]        newStartVnode = newCh[++newStartIdx]      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldEndVnode, newEndVnode)) &#123;        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)        oldEndVnode = oldCh[--oldEndIdx]        newEndVnode = newCh[--newEndIdx]      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldStartVnode, newEndVnode)) &#123; <span class="hljs-comment">// Vnode moved right</span>      <span class="hljs-comment">// è¯´æ˜oldStartVnodeèŠ‚ç‚¹æ›´æ–°åè¦ç§»åŠ¨å»æœ«å°¾ä½ç½®</span>        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx)        canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm))        oldStartVnode = oldCh[++oldStartIdx]        newEndVnode = newCh[--newEndIdx]      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sameVnode(oldEndVnode, newStartVnode)) &#123; <span class="hljs-comment">// Vnode moved left</span>      <span class="hljs-comment">// è¯´æ˜oldEndVnodeèŠ‚ç‚¹æ›´æ–°åè¦ç§»åŠ¨åˆ°æœ€å‰æ–¹</span>        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)        canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm)        oldEndVnode = oldCh[--oldEndIdx]        newStartVnode = newCh[++newStartIdx]      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">if</span> (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx)        <span class="hljs-comment">// oldKeyToIndexæ˜¯æ—§èŠ‚ç‚¹çš„key2indexæ˜ å°„map</span>        idxInOld = isDef(newStartVnode.key)          ? oldKeyToIdx[newStartVnode.key]          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx)          <span class="hljs-comment">// å»æ—§èŠ‚ç‚¹ä¸­å¯»æ‰¾newStartVnode</span>        <span class="hljs-keyword">if</span> (isUndef(idxInOld)) &#123; <span class="hljs-comment">// æ‰¾ä¸åˆ°åˆ™æ–°å¢newStartVnodeå…ƒç´ åˆ°oldStartä¹‹å‰</span>          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, <span class="hljs-literal">false</span>, newCh, newStartIdx)        &#125; <span class="hljs-keyword">else</span> &#123;          <span class="hljs-comment">// æ‰¾å¾—åˆ°åˆ™è¿›è¡Œç§»åŠ¨</span>          vnodeToMove = oldCh[idxInOld]          <span class="hljs-keyword">if</span> (sameVnode(vnodeToMove, newStartVnode)) &#123;            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx)            oldCh[idxInOld] = <span class="hljs-literal">undefined</span>            <span class="hljs-comment">// å°†æ—§èŠ‚ç‚¹ä¸­åŒ¹é…åˆ°çš„ä½ç½®ç½®ç©ºï¼Œä»¥åçš„æŸ¥æ‰¾ä¼šè·³è¿‡</span>            canMove &amp;&amp; nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm)            <span class="hljs-comment">// åŒ¹é…åˆ°çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°oldStartä¹‹å‰</span>          &#125; <span class="hljs-keyword">else</span> &#123;            <span class="hljs-comment">// keyç›¸åŒä½†ä¸æ˜¯åŒä¸€ç§å…ƒç´ </span>            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, <span class="hljs-literal">false</span>, newCh, newStartIdx)          &#125;        &#125;        newStartVnode = newCh[++newStartIdx]      &#125;    &#125;    <span class="hljs-comment">// è·³å‡ºåŒ¹é…å</span>    <span class="hljs-keyword">if</span> (oldStartIdx &gt; oldEndIdx) &#123;      refElm = isUndef(newCh[newEndIdx + <span class="hljs-number">1</span>]) ? <span class="hljs-literal">null</span> : newCh[newEndIdx + <span class="hljs-number">1</span>].elm      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue)    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newStartIdx &gt; newEndIdx) &#123;      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx)    &#125;  &#125;</code></pre></div><h3 id="Vue3çš„inferno"><a href="#Vue3çš„inferno" class="headerlink" title="Vue3çš„inferno"></a>Vue3çš„inferno</h3></li><li><p>æ’é™¤ç›¸åŒçš„å‰ç½®å’Œåç½®å…ƒç´ </p><div class="hljs code-wrapper"><pre><code class="hljs javascript">[j]   [preEnd] |       | a   b   c |       |-------------- |           | a   e   b   c |           |   [j]       [nextEnd][j][preEnd] |   | a   b   c |   |---------------- |         | a  ã€eã€‘   b   c |         |   [j]     [nextEnd]</code></pre></div><ul><li>åˆ†åˆ«ä»æ–°æ—§èŠ‚ç‚¹çš„å¤´å’Œå°¾å‡ºå‘</li><li>ä¾æ¬¡éå†åˆ°keyå€¼ä¸ä¸€æ ·æ—¶åœæ­¢ </li><li>è¿™æ ·åŒ¹é…æˆåŠŸåå‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯éœ€è¦æ–°å¢/åˆ é™¤çš„vNode</li></ul></li><li><p>ä½¿ç”¨å‰©ä½™æ–°childrençš„é•¿åº¦å»ºç«‹sourceç´¢å¼•æ•°ç»„</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">oldChildren = [b,c,d,f]newChildren = [c,d,b,g]  <span class="hljs-comment">// é»˜è®¤å…¨ä¸º-1</span>source = [-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>]<span class="hljs-comment">//ä¸ºæ–°vnodeå»ºç«‹keyï¼Œindexç´¢å¼•è¡¨</span>keyIndex = &#123;<span class="hljs-attr">c</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">d</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">b</span>:<span class="hljs-number">2</span>,<span class="hljs-attr">g</span>:<span class="hljs-number">3</span>&#125;<span class="hljs-comment">// éå†æ—§childrenä¸­keyå»keyIndexä¸­æŸ¥æ‰¾ï¼Œæœ‰è¿™ä¸ªkeyåˆ™æŠŠè¯¥ä½ç½®çš„-1æ”¹ä¸ºæ—§vNodeçš„ç´¢å¼•ï¼Œå¹¶ä¸”patchè¯¥èŠ‚ç‚¹  </span>source = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>]</code></pre></div></li><li><p>åˆ¤æ–­æ˜¯å¦éœ€è¦ç§»åŠ¨</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">source = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>]<span class="hljs-comment">//sourceä¸­ï¼Œæœ€å¤§ç´¢å¼•ä¸º2ï¼Œ2ä¹‹åæœ‰å°äº2çš„ç´¢å¼•ï¼Œè¯´æ˜éœ€è¦ç§»åŠ¨</span></code></pre></div></li><li><p>æ ¹æ®sourceæ•°ç»„æ±‚å‡ºæœ€é•¿é€’å¢å­åºåˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">LIS = [<span class="hljs-number">0</span>ï¼Œ<span class="hljs-number">1</span>]<span class="hljs-comment">// LISä¸­å­˜å‚¨çš„æ˜¯sourceç´¢å¼•</span><span class="hljs-comment">// è¡¨ç¤ºæ–°æ—§childrenä¸­è¿™å‡ ä¸ªèŠ‚ç‚¹é€’å¢</span></code></pre></div></li><li><p>æ ¹æ®LISå¾—å‡ºä¸è¿›è¡Œç§»åŠ¨çš„èŠ‚ç‚¹</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">newChildren[LIS] = [c,d]</code></pre></div></li><li><p>ä»LISå’Œæ–°childrenå°¾å¤„å»ºç«‹æŒ‡é’ˆå¤„ç†ä½™ä¸‹èŠ‚ç‚¹</p></li></ul><blockquote><p>æœ€é•¿ä¸Šå‡å­åºåˆ—</p></blockquote><ul><li>å­åºåˆ—ï¼šä¸è¦æ±‚è¿ç»­</li><li>å­—ä¸²ï¼šè¦æ±‚è¿ç»­</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// åŠ¨æ€è§„åˆ’</span><span class="hljs-keyword">const</span> longestChildSequence = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> &#123;  <span class="hljs-keyword">let</span> len = arr.length  <span class="hljs-keyword">if</span>(len &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>  <span class="hljs-keyword">const</span> dp = <span class="hljs-built_in">Array</span>(len).fill(<span class="hljs-number">1</span>)  <span class="hljs-comment">// dp[i]ä»£è¡¨åŸå§‹æ•°ç»„è¯¥ä½ç½®çš„æœ€é•¿å­åºåˆ—é•¿åº¦</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span> ; i &lt; len ; i++)&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span> ; j &lt; i ; j++)&#123;      <span class="hljs-comment">// jéå†ä¹‹å‰éå†è¿‡çš„æ‰€æœ‰å…ƒç´ </span>      <span class="hljs-comment">// å¯èƒ½å­˜åœ¨å¤§å°ä¸ä¸€çš„é€’å¢åºåˆ—ï¼Œä½¿ç”¨maxå–å¾—æœ€å¤§å€¼</span>      <span class="hljs-keyword">if</span>(arr[i] &gt; arr [j])&#123;        dp[i] = <span class="hljs-built_in">Math</span>.max(dp[i],dp[j]+<span class="hljs-number">1</span>)        <span class="hljs-comment">// [1,2,3,4,1,2,5]</span>        <span class="hljs-comment">// å¦‚æœåªä½¿ç”¨dp[j]+1 ï¼Œdp[6]ä¼šåœ¨[1,2,5]ä¸­å¾—å‡ºç»“æœ3</span>        <span class="hljs-comment">// ä½¿ç”¨maxæ¯”è¾ƒä¹‹å‰æ›´é•¿çš„åºåˆ—[1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5]å¾—åˆ°5</span>      &#125;    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(...dp)&#125;<span class="hljs-comment">// è´ªå¿ƒ+äºŒåˆ†</span><span class="hljs-keyword">const</span> longestChildSequence = <span class="hljs-function"><span class="hljs-params">arr</span> =&gt;</span> &#123;  <span class="hljs-keyword">let</span> len = arr.length  <span class="hljs-keyword">if</span>(len &lt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>  <span class="hljs-keyword">const</span> res = [arr[<span class="hljs-number">0</span>]]  <span class="hljs-comment">//å°†arrä¸­åç»­å…ƒç´ arr[i]ä¸resæœ«å°¾å…ƒç´ æ¯”è¾ƒ</span>  <span class="hljs-comment">//å¤§äºåˆ™pushè¿›res</span>  <span class="hljs-comment">//å°äºåˆ™æŸ¥æ‰¾resä¸­ç¬¬ä¸€ä¸ªæ¯”arr[i]å¤§çš„å…ƒç´ å¹¶æ›¿æ¢</span>  <span class="hljs-comment">//ç”±äºå­˜åœ¨æ›¿æ¢ï¼Œå­åºåˆ—å€¼ä¸ä¸€å®šæ­£ç¡®ï¼Œä½†é•¿åº¦æ˜¯æ­£ç¡®çš„</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i&lt; len ;i++)&#123;    <span class="hljs-keyword">if</span>(arr[i]&gt;res[res.length-<span class="hljs-number">1</span>])&#123;      res.push(arr[i])    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-comment">// resä¸­å·¦å³æŒ‡é’ˆçš„index</span>      <span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾</span>      <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>      <span class="hljs-keyword">let</span> right = res.length - <span class="hljs-number">1</span>      <span class="hljs-keyword">while</span>(left&lt;right)&#123;        <span class="hljs-keyword">let</span> mid = <span class="hljs-built_in">Math</span>.floor((left+right)/<span class="hljs-number">2</span>)        <span class="hljs-comment">// let mid = ((left+right)/2) | 0</span>        <span class="hljs-comment">// æµ®ç‚¹å°æ•°å‘ä¸‹æ±‚æ•´</span>        <span class="hljs-keyword">if</span>(arr[i]&gt;res[mid])&#123;          left = mid + <span class="hljs-number">1</span>        &#125;<span class="hljs-keyword">else</span>&#123;          right = mid        &#125;      &#125;      res[left] = arr[i]    &#125;  &#125;  <span class="hljs-keyword">return</span> res.length &#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>vue</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nodeä¸‹å•æ–‡ä»¶æ¨¡å—æ‰¹é‡æ˜ å°„åˆ°å¤„</title>
    <link href="/2020/11/20/node%E4%B8%8B%E7%9A%84%E6%89%B9%E9%87%8F%E6%98%A0%E5%B0%84/"/>
    <url>/2020/11/20/node%E4%B8%8B%E7%9A%84%E6%89%B9%E9%87%8F%E6%98%A0%E5%B0%84/</url>
    
    <content type="html"><![CDATA[<p><img src="../images/controllers.png" alt="controllers"></p><ul><li><p>ä»¥koaä¸ºä¾‹</p></li><li><p>controllerså†™æˆå•æ–‡ä»¶</p></li><li><p>ä½¿ç”¨index.jsæ‰¹é‡æ˜ å°„</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//index.js</span><span class="hljs-keyword">const</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;lodash&#x27;</span>)<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)<span class="hljs-comment">/**</span><span class="hljs-comment"> * æ˜ å°„æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ºæ¨¡å—</span><span class="hljs-comment"> */</span><span class="hljs-keyword">const</span> mapDir = <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> &#123;    <span class="hljs-keyword">const</span> tree = &#123;&#125;    <span class="hljs-comment">// è·å¾—å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span>    <span class="hljs-keyword">const</span> [dirs, files] = _(fs.readdirSync(d))        .partition(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> fs.statSync(path.join(d, p)).isDirectory())    <span class="hljs-comment">// _( ...)</span>    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç» lodash åŒ…è£…åçš„å¯¹è±¡ä¼šå¯ç”¨éšå¼é“¾ã€‚è¿”å›çš„æ•°ç»„ã€é›†åˆã€æ–¹æ³•ç›¸äº’ä¹‹é—´èƒ½å¤Ÿé“¾å¼è°ƒç”¨</span>        <span class="hljs-comment">// é€’å½’æ˜ å°„æ–‡ä»¶å¤¹</span>    dirs.forEach(<span class="hljs-function"><span class="hljs-params">dir</span> =&gt;</span> &#123;        tree[dir] = mapDir(path.join(d, dir))    &#125;)    <span class="hljs-comment">// æ˜ å°„æ–‡ä»¶</span>    files.forEach(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> &#123;        <span class="hljs-keyword">if</span> (path.extname(file) === <span class="hljs-string">&#x27;.js&#x27;</span>) &#123;            tree[path.basename(file, <span class="hljs-string">&#x27;.js&#x27;</span>)] = <span class="hljs-built_in">require</span>(path.join(d, file))        &#125;    &#125;)    <span class="hljs-keyword">return</span> tree&#125;<span class="hljs-built_in">module</span>.exports = mapDir(path.join(__dirname<span class="hljs-comment">//å½“å‰æ–‡ä»¶å¤¹ç›®å½•))</span></code></pre></div></li><li><p>ä½¿ç”¨æ—¶å€™åªéœ€require(index.js)å.[module]å³å¯</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> controllers = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../controllers&quot;</span>);router.get(<span class="hljs-string">&quot;/&quot;</span>, controllers.admin);router.get(<span class="hljs-string">&#x27;/userList&#x27;</span>,controllers.adminUser)router.post(<span class="hljs-string">&#x27;/userFreeze&#x27;</span>,controllers.adminFreeze)router.post(<span class="hljs-string">&#x27;/userDelete&#x27;</span>,controllers.adminDelete)</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>node</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é˜Ÿåˆ—ç®—æ³•é¢˜</title>
    <link href="/2020/09/29/%E9%98%9F%E5%88%97/"/>
    <url>/2020/09/29/%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<h2 id="é˜Ÿåˆ—ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º"><a href="#é˜Ÿåˆ—ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º" class="headerlink" title="é˜Ÿåˆ—ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º"></a>é˜Ÿåˆ—ç»“æ„ï¼Œå…ˆè¿›å…ˆå‡º</h2><ul><li><p>ç”¨æ•°ç»„å®ç°-é¡ºåºé˜Ÿåˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ArrayQueue</span>(<span class="hljs-params">len</span>)</span>&#123;  <span class="hljs-built_in">this</span>.items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len)  <span class="hljs-built_in">this</span>.n = len  <span class="hljs-built_in">this</span>.head = <span class="hljs-number">0</span>  <span class="hljs-built_in">this</span>.tail = <span class="hljs-number">0</span>&#125;ArrayQueue.prototype.enqueue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>)</span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.tail === <span class="hljs-built_in">this</span>.n)&#123;<span class="hljs-comment">// tailåæ²¡æœ‰ç©ºä½™ç©ºé—´</span>    <span class="hljs-keyword">if</span>(head === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><span class="hljs-comment">// headä¹Ÿåœ¨0ä½ï¼Œè¡¨ç¤ºéƒ½æ˜¯æ»¡çš„</span>    <span class="hljs-comment">//å‡ºé˜Ÿåheadä¸åœ¨0äº†</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = head;i&lt;<span class="hljs-built_in">this</span>.tail;i++)&#123;      <span class="hljs-built_in">this</span>.items[i-head] = <span class="hljs-built_in">this</span>.items[i]    &#125;<span class="hljs-comment">// å¾€å‰æ¬ç§»</span>    tail = tail-head    head = <span class="hljs-number">0</span>  &#125;  <span class="hljs-built_in">this</span>.items[<span class="hljs-built_in">this</span>.tail] = item  <span class="hljs-built_in">this</span>.tail ++  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>&#125;ArrayQueue.prototype.dequeue = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">if</span>(head === tail) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>  <span class="hljs-keyword">const</span> ret = items.shift()  head ++  <span class="hljs-keyword">return</span> ret&#125;</code></pre></div></li><li><p>!å¾ªç¯é˜Ÿåˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// é¿å…äº†é¡ºåºé˜Ÿåˆ—ä¸­çš„æ•°æ®æ¬ç§»æ“ä½œ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CircularQueue</span>(<span class="hljs-params">len</span>)</span>&#123;  <span class="hljs-built_in">this</span>.items = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len)  <span class="hljs-built_in">this</span>.n = len  <span class="hljs-built_in">this</span>.head = <span class="hljs-number">0</span>  <span class="hljs-built_in">this</span>.tail = <span class="hljs-number">0</span>&#125;CircularQueue.prototype = &#123;  enqueue:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>)</span>&#123;    <span class="hljs-keyword">if</span>((<span class="hljs-built_in">this</span>.tail+<span class="hljs-number">1</span>)%n===<span class="hljs-built_in">this</span>.head) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    <span class="hljs-built_in">this</span>.items[<span class="hljs-built_in">this</span>.tail] = item    <span class="hljs-built_in">this</span>.tail = (<span class="hljs-built_in">this</span>.tail+<span class="hljs-number">1</span>)%n    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  &#125;,  dequeue:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.head===<span class="hljs-built_in">this</span>.tail) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>    <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">this</span>.items[head]    <span class="hljs-built_in">this</span>.head = (<span class="hljs-built_in">this</span>.head+<span class="hljs-number">1</span>)%n    <span class="hljs-keyword">return</span> ret  &#125;&#125;</code></pre></div></li><li><p>ç”¨é“¾è¡¨å®ç°-é“¾å¼é˜Ÿåˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Node</span>(<span class="hljs-params">val</span>)</span>&#123;  <span class="hljs-built_in">this</span>.val = val  <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LinkedListQueue</span>(<span class="hljs-params">len</span>)</span>&#123;  <span class="hljs-built_in">this</span>.head = <span class="hljs-literal">null</span>  <span class="hljs-built_in">this</span>.tail = <span class="hljs-literal">null</span>  <span class="hljs-built_in">this</span>.curLen = <span class="hljs-number">0</span>  <span class="hljs-built_in">this</span>.maxLen = len&#125;LinkedListQueue.prototype = &#123;  enqueue: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>)</span>&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.head===<span class="hljs-literal">null</span>)&#123;      <span class="hljs-built_in">this</span>.head = node      <span class="hljs-built_in">this</span>.tail = node      <span class="hljs-built_in">this</span>.curLen = <span class="hljs-number">1</span>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>    &#125;    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.curLen &gt;= <span class="hljs-built_in">this</span>.len) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head    <span class="hljs-keyword">while</span>(cur.next)&#123;      cur = cur.next    &#125;    cur.next = node    <span class="hljs-built_in">this</span>.tail = node    <span class="hljs-built_in">this</span>.curLen ++    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  &#125;,  dequeue : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head    <span class="hljs-built_in">this</span>.head = cur.next    <span class="hljs-built_in">this</span>.curLen --    <span class="hljs-keyword">return</span> cur  &#125;&#125;</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>topKé—®é¢˜</title>
    <link href="/2020/09/24/topK/"/>
    <url>/2020/09/24/topK/</url>
    
    <content type="html"><![CDATA[<h2 id="æœ€å¤§-å°çš„-K-ä¸ªæ•°ï¼Œç¬¬-K-ä¸ªæœ€å¤§-æœ€å°å€¼"><a href="#æœ€å¤§-å°çš„-K-ä¸ªæ•°ï¼Œç¬¬-K-ä¸ªæœ€å¤§-æœ€å°å€¼" class="headerlink" title="æœ€å¤§/å°çš„ K ä¸ªæ•°ï¼Œç¬¬ K ä¸ªæœ€å¤§/æœ€å°å€¼"></a>æœ€å¤§/å°çš„ K ä¸ªæ•°ï¼Œç¬¬ K ä¸ªæœ€å¤§/æœ€å°å€¼</h2><ul><li><p>å±€éƒ¨å†’æ³¡<br>ï¼ï¼è¾“å‡ºç»“æœæ— åº</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bubbleSort</span>(<span class="hljs-params">arr, k</span>) </span>&#123;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; k; i++) &#123;    <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">false</span>;    <span class="hljs-comment">// å†’æ³¡æ‰§è¡Œkæ¬¡</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = arr.length - <span class="hljs-number">1</span>; j &gt; <span class="hljs-number">0</span> + i; j--) &#123;      <span class="hljs-keyword">if</span> (arr[j] &lt; arr[j - <span class="hljs-number">1</span>]) &#123;        [arr[j], arr[j - <span class="hljs-number">1</span>]] = [arr[j - <span class="hljs-number">1</span>], arr[j]];        flag = <span class="hljs-literal">true</span>;      &#125;    &#125;    <span class="hljs-keyword">if</span> (!flag) <span class="hljs-keyword">break</span>;  &#125;&#125;<span class="hljs-comment">// Kç›¸å½“äºå†’æ³¡æ¬¡æ•°</span><span class="hljs-comment">//å‰kä¸ªå°å€¼</span>data.slice(<span class="hljs-number">0</span>, k);<span class="hljs-comment">//ç¬¬kå°çš„å€¼</span>data[k - <span class="hljs-number">1</span>];</code></pre></div></li><li><p>å †æ’åº</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// topk</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapObj</span>(<span class="hljs-params">items,k</span>)</span>&#123;  <span class="hljs-keyword">const</span> heap = [,...items.slice(<span class="hljs-number">0</span>,k)]  <span class="hljs-keyword">const</span> heapSize = k  buildHeap(heap,heapSize)  <span class="hljs-comment">// æ±‚å¤§å€¼ï¼Œå»ºç«‹æœ€å°å †</span>  <span class="hljs-comment">// åç»­ä¸æœ€å°å †å †é¡¶æ¯”è¾ƒ</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = k ; j &lt; items.length ; j++)&#123;    <span class="hljs-keyword">if</span>(heap[<span class="hljs-number">1</span>] &lt; items[j])&#123;      <span class="hljs-comment">// å¦‚æœå¤§äºæœ€å°</span>      <span class="hljs-comment">// ä½œä¸ºå †é¡¶çš„æ–°å€¼ï¼Œè°ƒæ•´å †</span>      heap[<span class="hljs-number">1</span>] = items[j]      heapify(heap,heapSize,<span class="hljs-number">1</span>)    &#125;  &#125;  <span class="hljs-keyword">return</span> heap.slice(<span class="hljs-number">1</span>)  <span class="hljs-comment">// å‰kä¸ªå¤§å€¼</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">items,heapSize</span>)</span>&#123;  <span class="hljs-keyword">if</span>(heapSize === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">Math</span>.floor(heapSize/<span class="hljs-number">2</span>) ; i &gt; <span class="hljs-number">0</span> ; i --)&#123;    heapify(items,heapSize,i)  &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">items,heapSize,i</span>)</span>&#123;  <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;    <span class="hljs-keyword">let</span> minIndex = i    <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i &lt;= heapSize &amp;&amp; items[<span class="hljs-number">2</span>*i] &lt; items[i]) minIndex = <span class="hljs-number">2</span>*i    <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; items[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>] &lt; items[minIndex]) minIndex = <span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>    <span class="hljs-keyword">if</span>(minIndex===i) <span class="hljs-keyword">break</span>    [items[i],items[minIndex]] = [items[minIndex],items[i]]    i = minIndex  &#125;&#125;</code></pre></div><ul><li>å¿«é€Ÿæ’åº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//åˆ†å‰²å‡ºæ¥çš„ç´¢å¼•ä½ç½®ï¼Œä¸kçš„ç´¢å¼•ä½ç½®æ¯”è¾ƒ</span><span class="hljs-comment">//ç¬¬kå¤§çš„å€¼ï¼Œå°åˆ°å¤§æ’åºåå°±æ˜¯ [nums.length - k] ç´¢å¼•çš„ä½ç½®</span><span class="hljs-comment">//å‡å°‘æ“ä½œæ¬¡æ•°ï¼Œä¸ç”¨å®Œå…¨æ’åºä¸€é</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findK</span>(<span class="hljs-params">nums, k</span>) </span>&#123;  <span class="hljs-keyword">return</span> quickSelect(nums, nums.length - k);&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quickSelect</span>(<span class="hljs-params">arr, k</span>) </span>&#123;  <span class="hljs-keyword">return</span> quick(arr, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>, k);&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">quick</span>(<span class="hljs-params">arr, left, right, k</span>) </span>&#123;  <span class="hljs-keyword">let</span> index;  <span class="hljs-keyword">if</span> (left &lt; right) &#123;    index = partition(arr, left, right);    <span class="hljs-keyword">if</span> (k === index) &#123;      <span class="hljs-keyword">return</span> arr[index];    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &lt; index) &#123;      <span class="hljs-keyword">return</span> quick(arr, left, index - <span class="hljs-number">1</span>, k);    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">return</span> quick(arr, index + <span class="hljs-number">1</span>, right, k);    &#125;  &#125;  <span class="hljs-keyword">return</span> arr[left];&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">partition</span>(<span class="hljs-params">arr, left, right</span>) </span>&#123;  <span class="hljs-keyword">let</span> base = arr[<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * (right - left + <span class="hljs-number">1</span>)) + left];  <span class="hljs-keyword">let</span> L = left,    R = right;  <span class="hljs-keyword">while</span> (L &lt; R) &#123;    <span class="hljs-keyword">while</span> (arr[L] &lt; base) &#123;      L++;    &#125;    <span class="hljs-keyword">while</span> (arr[R] &gt; base) &#123;      R--;    &#125;    <span class="hljs-keyword">if</span> (L &lt; R) [arr[L], arr[R]] = [arr[R], arr[L]];    <span class="hljs-keyword">if</span> (arr[L] === arr[R] &amp;&amp; L !== R) L++;  &#125;  <span class="hljs-keyword">return</span> L;&#125;</code></pre></div><h2 id="å‡ºç°æœ€å¤š-æœ€å°‘çš„-K-ä¸ªå…ƒç´ "><a href="#å‡ºç°æœ€å¤š-æœ€å°‘çš„-K-ä¸ªå…ƒç´ " class="headerlink" title="å‡ºç°æœ€å¤š/æœ€å°‘çš„ K ä¸ªå…ƒç´ "></a>å‡ºç°æœ€å¤š/æœ€å°‘çš„ K ä¸ªå…ƒç´ </h2><ul><li>å‚»ç“œ map æ˜ å°„ä¸€ä¸ª arr è¿›è¡Œæ’åº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showMost</span>(<span class="hljs-params">arr, k</span>) </span>&#123;  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();  <span class="hljs-keyword">const</span> ret = [...new <span class="hljs-built_in">Set</span>(arr)];  arr.map(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (map.has(num)) &#123;      map.set(num, map.get(num) + <span class="hljs-number">1</span>);    &#125; <span class="hljs-keyword">else</span> &#123;      map.set(num, <span class="hljs-number">1</span>);    &#125;  &#125;);  ret.sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> map.get(b) - map.get(a));  <span class="hljs-keyword">return</span> ret.slice(<span class="hljs-number">0</span>, k);&#125;</code></pre></div><ul><li>map æ˜ å°„å †æ’åº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showMost</span>(<span class="hljs-params">arr, k</span>) </span>&#123;  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();  <span class="hljs-keyword">const</span> heap = [,];  arr.map(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (map.has(num)) &#123;      map.set(num, map.get(num) + <span class="hljs-number">1</span>);    &#125; <span class="hljs-keyword">else</span> &#123;      map.set(num, <span class="hljs-number">1</span>);    &#125;  &#125;);  <span class="hljs-keyword">if</span> (map.size &lt;= k) <span class="hljs-keyword">return</span> [...map.keys()];  <span class="hljs-comment">//kå¤§äºå…ƒç´ æ•°ï¼Œç›´æ¥è¾“å‡º</span>  <span class="hljs-keyword">let</span> times = <span class="hljs-number">1</span>;  <span class="hljs-comment">//è®°æ•°å™¨</span>  <span class="hljs-comment">//å°äºkçš„éƒ¨åˆ†ç›´æ¥å»ºç«‹å †ï¼Œå¤§äºçš„éƒ¨åˆ†å¼€å§‹ä¸å †topæ¯”è¾ƒ</span>  map.forEach(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (times &lt;= k) &#123;      heap.push(key);      <span class="hljs-keyword">if</span> (times === k) &#123;        <span class="hljs-comment">//å †åŒ–</span>        buildHeap(heap, map, k);      &#125;    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (map.get(heap[<span class="hljs-number">1</span>]) &lt; value) &#123;      <span class="hljs-comment">// ä¸å°é¡¶å †é¡¶äº¤æ¢</span>      heap[<span class="hljs-number">1</span>] = key;      heapify(heap, map, k, <span class="hljs-number">1</span>);    &#125;    times++;  &#125;);  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">heap, map, heapSize</span>) </span>&#123;    <span class="hljs-keyword">if</span> (k === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">Math</span>.floor(heapSize / <span class="hljs-number">2</span>); i &gt;= <span class="hljs-number">1</span>; i--) &#123;      heapify(heap, map, heapSize, i);    &#125;  &#125;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">heap, map, heapSize, i</span>) </span>&#123;    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;      <span class="hljs-keyword">let</span> minIndex = i;      <span class="hljs-keyword">if</span> (<span class="hljs-number">2</span> * i &lt;= heapSize &amp;&amp; map.get(heap[<span class="hljs-number">2</span> * i]) &lt; map.get(heap[minIndex]))        minIndex = <span class="hljs-number">2</span> * i;      <span class="hljs-keyword">if</span> (        <span class="hljs-number">2</span> * i + <span class="hljs-number">1</span> &lt;= heapSize &amp;&amp;        map.get(heap[<span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>]) &lt; map.get(heap[minIndex])      )        minIndex = <span class="hljs-number">2</span> * i + <span class="hljs-number">1</span>;      <span class="hljs-keyword">if</span> (minIndex === i) <span class="hljs-keyword">break</span>;      swap(heap, minIndex, i);      i = minIndex;    &#125;  &#125;  heap.shift();  <span class="hljs-keyword">return</span> heap;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">swap</span>(<span class="hljs-params">data, l, r</span>) </span>&#123;  <span class="hljs-keyword">let</span> temp = data[l];  data[l] = data[r];  data[r] = temp;&#125;</code></pre></div><ul><li>æ¡¶æ’åº<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showMost</span>(<span class="hljs-params">arr,k</span>)</span>&#123;  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  arr.map(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (map.has(num)) &#123;      map.set(num, map.get(num) + <span class="hljs-number">1</span>);    &#125; <span class="hljs-keyword">else</span> &#123;      map.set(num, <span class="hljs-number">1</span>);    &#125;  &#125;);  <span class="hljs-keyword">if</span>(map.size&lt;=k) <span class="hljs-keyword">return</span> [...map.keys()]  <span class="hljs-keyword">return</span> buckerSort(map,k)&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buckerSort</span>(<span class="hljs-params">map,k</span>)</span>&#123;  <span class="hljs-keyword">let</span> arr = []  <span class="hljs-keyword">let</span> res = []  map.forEach(<span class="hljs-function">(<span class="hljs-params">value,key</span>)=&gt;</span>&#123;    <span class="hljs-keyword">if</span>(!arr[value])&#123;      arr[value] = [key]    &#125;<span class="hljs-keyword">else</span>&#123;      arr[value].push(key)    &#125;  &#125;)  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = arr.length - <span class="hljs-number">1</span> ; i&gt;=<span class="hljs-number">0</span> &amp;&amp; res.length &lt; k ; i--)&#123;    <span class="hljs-keyword">if</span>(arr[i])&#123;      res.push(...arr[i])    &#125;  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æµè§ˆå™¨ç¼“å­˜ç­–ç•¥</title>
    <link href="/2020/09/17/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/"/>
    <url>/2020/09/17/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h2><ul><li> æµè§ˆå™¨ç›´æ¥éªŒè¯æœ¬åœ°èµ„æºçœ‹æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡è¿‡æœŸç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œå¹¶è¿”å›<code>200</code></li><li> éªŒè¯ä¸¤ç§å­—æ®µ<h3 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a><code>Expires</code></h3></li></ul><ol><li>http 1.0</li><li>æ—¶é—´æˆ³æ ¼å¼<code>Expires: Wed, 22 Oct 2018 08:41:00 GMT</code></li><li>ä½¿ç”¨æœ¬åœ°æ—¶é—´éªŒè¯ï¼Œä¸æœåŠ¡å™¨æ—¶é—´ä¹‹é—´çš„è¯¯å·®æˆ–è€…æœ¬åœ°æ—¶é—´çš„ä¿®æ”¹éƒ½åä¼šé€ æˆç¼“å­˜å¤±æ•ˆ</li></ol><h3 id="Cache-control"><a href="#Cache-control" class="headerlink" title="Cache-control"></a><code>Cache-control</code></h3><ol><li><p>http 1.1</p></li><li><p>å¯é€‰å‚æ•°ï¼š</p><ul><li><code>max-age</code><ul><li>å•ä½ä¸ºæ¯«ç§’ï¼Œè¡¨ç¤ºå¤šé•¿æ—¶é—´åè¿‡æœŸ</li><li>å¯è®¾ç½®ä¸º <strong>0</strong> ç«‹å³è¯·æ±‚æ–°èµ„æº</li></ul></li><li><code>public</code>,<code>private</code><ul><li><code>public</code> è¡¨ç¤ºè¯¥èµ„æºå¯ä»¥è¢«æ‰€æœ‰å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ç¼“å­˜</li><li><code>private</code> è¡¨ç¤ºè¯¥èµ„æºä»…èƒ½å®¢æˆ·ç«¯ç¼“å­˜[<em>é»˜è®¤å€¼</em>]</li><li>å½“è®¾ç½®äº† <code>s-maxage</code> çš„æ—¶å€™è¡¨ç¤ºå…è®¸ä»£ç†æœåŠ¡å™¨ç¼“å­˜ï¼Œç›¸å½“äº <code>public</code></li></ul></li><li><code>no-cache</code>,<code>no-store</code><ul><li><code>no-cache</code> ä¼šç¼“å­˜èµ„æºï¼Œä½†è¦åå•†ç¼“å­˜éªŒè¯</li><li><code>no-store</code> ä¸ç¼“å­˜</li><li>ä¸¤ä¸ªå­—æ®µå­˜åœ¨æ—¶å¿½ç•¥<code>max-age</code>é•¿åº¦å’Œ<code>Expire</code>æ—¶é—´æˆ³</li></ul></li></ul></li></ol><h3 id="Pragma"><a href="#Pragma" class="headerlink" title="Pragma"></a><code>Pragma</code></h3><p><code>Pragma = no-cache</code>ä¸<code>Cache-Control: no-cache</code>æ•ˆæœä¸€è‡´</p><h3 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h3><p><code>pragma -&gt; cache-control -&gt; expires</code></p><h2 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h2><ul><li>æµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè¯¢é—®æœåŠ¡å™¨ç¼“å­˜æœ‰æ•ˆæ€§</li><li>åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›<code>304</code>å’Œ<code>Not Modified</code></li><li>åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›<code>200</code>å’Œè¯·æ±‚ç»“æœ<h3 id="Last-modified-If-Modified-Since"><a href="#Last-modified-If-Modified-Since" class="headerlink" title="Last-modified + If-Modified-Since"></a><code>Last-modified + If-Modified-Since</code></h3></li></ul><ol><li><p>æœåŠ¡å™¨è¿”å›èµ„æºçš„åŒæ—¶åœ¨<code>response header</code>ä¸­æ·»åŠ  <code>Last-Modified</code>ï¼Œå€¼æ˜¯è¿™ä¸ªèµ„æºåœ¨æœåŠ¡å™¨ä¸Šçš„æœ€åä¿®æ”¹æ—¶é—´<br> <code>Last-Modified: Fri, 22 Jul 2016 01:47:00 GMT</code></p></li><li><p>å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œæµè§ˆå™¨æ£€æµ‹åˆ°èµ„æºä¸­å­˜åœ¨ <code>Last-Modified</code>å­—æ®µï¼Œåˆ™ä¼šå°†è¿™ä¸ªæ—¶é—´æˆ³ä½œä¸º<code>If-Modified-Since</code>çš„å€¼åŠ å…¥è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨</p></li><li><p>æœåŠ¡å™¨æ ¹æ®è‡ªèº«èµ„æºçš„ä¿®æ”¹æ—¶é—´å’Œæ¥è‡ªè¯·æ±‚çš„æ—¶é—´æˆ³åˆ¤æ–­èµ„æºæ˜¯å¦æ›´æ–°ï¼Œè¿”å›ç›¸å¯¹åº”çš„ç»“æœ</p></li></ol><h4 id="ä¼˜åŠ£"><a href="#ä¼˜åŠ£" class="headerlink" title="@ä¼˜åŠ£"></a>@ä¼˜åŠ£</h4><ul><li>æœ¬åœ°æ‰“å¼€ç¼“å­˜æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œä½†è¿˜æ˜¯ä¼šé€ æˆ <code>Last-Modified</code> è¢«ä¿®æ”¹</li><li><code>Last-Modified</code> åªèƒ½ä»¥ç§’è®¡æ—¶ï¼Œå¦‚æœåœ¨ä¸å¯æ„ŸçŸ¥çš„æ—¶é—´å†…ä¿®æ”¹å®Œæˆæ–‡ä»¶ï¼Œåˆ™ä¸èƒ½ä½“ç°è¢«ä¿®æ”¹è¿‡</li></ul><h3 id="ETag-If-Not-Match"><a href="#ETag-If-Not-Match" class="headerlink" title="ETag + If-Not-Match"></a><code>ETag + If-Not-Match</code></h3><ol><li>æœåŠ¡å™¨ä¸ºèµ„æºè¿›è¡Œhashè®¡ç®—ç”Ÿæˆå”¯ä¸€çš„æ ‡è¯†ç¬¦<code>Etag</code>åŠ å…¥è¿”å›å¤´ï¼Œèµ„æºçš„ä¿®æ”¹ä¼šå¯¼è‡´æ ‡è¯†æ”¹å˜</li><li>æµè§ˆå™¨è¯·æ±‚æ—¶å°†èµ„æºè‡ªå¸¦çš„æ ‡è¯†ä½œä¸º<code>If-None-Match</code>çš„å€¼åŠ å…¥è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨</li><li>æœåŠ¡å™¨æ ¹æ®åŒä¸€èµ„æºæ ‡è¯†æ˜¯å¦ä¸€è‡´è¿”å›ç›¸åº”ç»“æœ</li></ol><h2 id="ç¼“å­˜ç­–ç•¥"><a href="#ç¼“å­˜ç­–ç•¥" class="headerlink" title="ç¼“å­˜ç­–ç•¥"></a>ç¼“å­˜ç­–ç•¥</h2><ol><li><p>å…ˆåˆ¤æ–­<code>Cache-Control</code>ï¼Œåœ¨<code>Cache-Control</code>çš„<code>max-age</code>ä¹‹å†…ï¼Œç›´æ¥è¿”å›<code>200 from cache</code>ï¼›</p></li><li><p>æ²¡æœ‰<code>Cache-Control</code>å†åˆ¤æ–­<code>Expires</code>ï¼Œåœ¨<code>Expires</code>ä¹‹å†…ï¼Œç›´æ¥è¿”å›<code>200 from cache</code></p></li><li><p><code>Cache-Control=no-cache</code>æˆ–è€…ä¸ç¬¦åˆ<code>Expires</code>ï¼Œæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</p></li><li><p> æœåŠ¡å™¨åˆ¤æ–­<code>If-Modified-Since</code>å’Œ<code>If-None-Match</code>ï¼Œä¸¤è€…åŒæ—¶å‡ºç°æ—¶ä¼šå¿½ç•¥<code>If-Modified-Since</code>ï¼Œæœ‰æ•ˆåˆ™è¿”å›<code>304</code>ï¼Œå¤±æ•ˆåˆ™è¿”å›æ–°èµ„æºã€‚</p></li></ol><h2 id="ç”¨æˆ·è¡Œä¸ºçš„å½±å“"><a href="#ç”¨æˆ·è¡Œä¸ºçš„å½±å“" class="headerlink" title="ç”¨æˆ·è¡Œä¸ºçš„å½±å“"></a>ç”¨æˆ·è¡Œä¸ºçš„å½±å“</h2><ol><li><em>åœ°å€æ </em>è®¿é—®ï¼Œé“¾æ¥è·³è½¬æ˜¯æ­£å¸¸ç”¨æˆ·è¡Œä¸ºï¼Œå°†ä¼šè§¦å‘æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ï¼›</li><li><em>F5</em>åˆ·æ–°ï¼Œæµè§ˆå™¨ä¼šè®¾ç½®max-age=0ï¼Œå¼ºç¼“å­˜å¤±æ•ˆï¼Œè¿›è¡Œåå•†ç¼“å­˜åˆ¤æ–­ï¼›</li><li><em>ctrl+F5</em>åˆ·æ–°ï¼Œè·³è¿‡å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œç›´æ¥ä»æœåŠ¡å™¨æ‹‰å–èµ„æºã€‚</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vue3proxy</title>
    <link href="/2020/09/07/vue3/"/>
    <url>/2020/09/07/vue3/</url>
    
    <content type="html"><![CDATA[<h1 id="VUEå†²å†²å†²"><a href="#VUEå†²å†²å†²" class="headerlink" title="VUEå†²å†²å†²"></a>VUEå†²å†²å†²</h1><h2 id="ä»£æ›¿definePropertyçš„Proxy"><a href="#ä»£æ›¿definePropertyçš„Proxy" class="headerlink" title="ä»£æ›¿definePropertyçš„Proxy"></a>ä»£æ›¿definePropertyçš„Proxy</h2><h3 id="vue2-Xå­˜åœ¨çš„ç¼ºé™·"><a href="#vue2-Xå­˜åœ¨çš„ç¼ºé™·" class="headerlink" title="vue2.Xå­˜åœ¨çš„ç¼ºé™·"></a>vue2.Xå­˜åœ¨çš„ç¼ºé™·</h3><ul><li><p>æ— æ³•æ£€æµ‹å¯¹è±¡ä¸­ <code>property</code> çš„æ·»åŠ æˆ–ç§»é™¤</p></li><li><p>é€šè¿‡ä¸‹æ ‡æ“ä½œæ•°ç»„ï¼Œä¾‹å¦‚ï¼š<code>vm.items[indexOfItem] = newValue ï¼ˆæ€§èƒ½è€ƒè™‘æ”¾å¼ƒï¼‰</code></p></li><li><p>ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚ï¼š<code>vm.items.length = newLength</code></p></li><li><p>å˜é€š</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// Objectæ–°å¢å…ƒç´ </span>Vue.set(object, propertyName, value)<span class="hljs-comment">// or</span><span class="hljs-built_in">this</span>.$set(<span class="hljs-built_in">this</span>.someObject,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-number">2</span>)<span class="hljs-comment">// ä¸‹æ ‡ä¿®æ”¹æ•°ç»„</span>Vue.set(vm.array1, indexOfItem, newValue)<span class="hljs-comment">// or</span><span class="hljs-built_in">this</span>.$set(<span class="hljs-built_in">this</span>.array1, indexOfItem, newValue)<span class="hljs-comment">// or</span><span class="hljs-built_in">this</span>.array1.splice(indexOfItem, <span class="hljs-number">1</span>, newValue)<span class="hljs-comment">// ä¿®æ”¹æ•°ç»„é•¿åº¦</span><span class="hljs-built_in">this</span>.array1.splice(newLength)</code></pre></div></li><li><p>åŒ…è£¹æ•°ç»„éƒ¨åˆ†æ–¹æ³•ä»¥æ”¯æŒå“åº”å¼</p><div class="hljs code-wrapper"><pre><code class="hljs javascript">pop()push()shift()unshift()splice()sort()reverse()</code></pre></div><h3 id="defineProperty"><a href="#defineProperty" class="headerlink" title="defineProperty"></a><code>defineProperty</code></h3></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">Object</span>.defineProperty(obj<span class="hljs-comment">/* å¯¹è±¡*/</span>, prop<span class="hljs-comment">/* å±æ€§*/</span>, descriptor<span class="hljs-comment">/*æè¿°ç¬¦*/</span>)&#123;  <span class="hljs-comment">//å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼šæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ã€‚</span>  <span class="hljs-comment">//æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±æ€§ï¼Œè¯¥å€¼å¯ä»¥æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸å¯å†™çš„ã€‚</span>  <span class="hljs-comment">//å­˜å–æè¿°ç¬¦æ˜¯ç”± getter å‡½æ•°å’Œ setter å‡½æ•°æ‰€æè¿°çš„å±æ€§ã€‚</span>  <span class="hljs-comment">//ä¸€ä¸ªæè¿°ç¬¦åªèƒ½æ˜¯è¿™ä¸¤è€…å…¶ä¸­ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚</span>  configurable: <span class="hljs-literal">true</span>,  <span class="hljs-comment">//configurable ç‰¹æ€§è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œä»¥åŠé™¤ value å’Œ writable ç‰¹æ€§å¤–çš„å…¶ä»–ç‰¹æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚</span>  enumerable: <span class="hljs-literal">true</span>,  <span class="hljs-comment">//enumerable å®šä¹‰äº†å¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥åœ¨ for...in å¾ªç¯å’Œ Object.keys() ä¸­è¢«æšä¸¾ã€‚</span>  value: <span class="hljs-literal">true</span>,  writable: <span class="hljs-literal">true</span>,  <span class="hljs-comment">//å½“ writable å±æ€§è®¾ç½®ä¸º false æ—¶ï¼Œè¯¥å±æ€§è¢«ç§°ä¸ºâ€œä¸å¯å†™çš„â€ã€‚å®ƒä¸èƒ½è¢«é‡æ–°èµ‹å€¼ã€‚</span>  <span class="hljs-comment">//</span>  <span class="hljs-comment">// æˆ–è€…</span>  <span class="hljs-comment">//</span>  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params"></span>)</span> &#123; ... &#125;,  <span class="hljs-function"><span class="hljs-title">set</span>(<span class="hljs-params">newValue</span>)</span> &#123; ... &#125;,  enumerable : <span class="hljs-literal">true</span>,  configurable : <span class="hljs-literal">true</span>&#125;</code></pre></div><h4 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h4><ol><li>å…¼å®¹<code>IE9</code></li><li>åŠ«æŒäº†å¯¹è±¡ä¸Šçš„<code>å±æ€§</code></li><li>æ•°æ®ç»“æ„è¶Šå¤æ‚åˆå§‹æ€§èƒ½ä¼šè¶Šå·®,éœ€è¦é€’å½’éå†ç»‘å®š<code>defineProperty</code></li><li>ä¸ºä¿æŒå“åº”å¼è¿˜éœ€è¦ä¸ºæ–°å¢æ•°æ®å†æ¬¡ç»‘å®š<code>defineProperty</code></li><li>åŸæ•°æ®çš„ä¿®æ”¹å³å¯è§¦å‘æ‹¦æˆªå™¨</li></ol><h3 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a><code>proxy</code></h3><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(target, handler)handler.getPrototypeOf()<span class="hljs-comment">//Object.getPrototypeOf æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.setPrototypeOf()<span class="hljs-comment">//Object.setPrototypeOf æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.isExtensible()<span class="hljs-comment">//Object.isExtensible æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.preventExtensions()<span class="hljs-comment">//Object.preventExtensions æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.getOwnPropertyDescriptor()<span class="hljs-comment">//Object.getOwnPropertyDescriptor æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.defineProperty()<span class="hljs-comment">//Object.defineProperty æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.has()<span class="hljs-comment">//in æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span>handler.get()<span class="hljs-comment">//å±æ€§è¯»å–æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.set()<span class="hljs-comment">//å±æ€§è®¾ç½®æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.deleteProperty()<span class="hljs-comment">//delete æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span>handler.ownKeys()<span class="hljs-comment">//Object.getOwnPropertyNames æ–¹æ³•å’Œ Object.getOwnPropertySymbols æ–¹æ³•çš„æ•æ‰å™¨ã€‚</span>handler.apply()<span class="hljs-comment">//å‡½æ•°è°ƒç”¨æ“ä½œçš„æ•æ‰å™¨ã€‚</span>handler.construct()<span class="hljs-comment">//new æ“ä½œç¬¦çš„æ•æ‰å™¨ã€‚</span></code></pre></div><ol><li>ä¸å…¼å®¹<code>IE</code></li><li>åŠ«æŒ<code>æ•´ä¸ªå¯¹è±¡</code>ï¼Œæ— éœ€å¯¹å¯¹è±¡æœ¬ä½“çš„å˜åŒ–ä½œå‡ºä¿®æ”¹</li><li>æ‹¦æˆªå™¨å“åº”çš„æ˜¯<code>proxy</code>ç”Ÿæˆçš„ä»£ç†å¯¹è±¡ï¼ŒåŸæ•°æ®çš„ä¿®æ”¹å°†ä¸ä¼šè§¦å‘æ‹¦æˆªå™¨</li><li>æ‹¦æˆªå™¨ç§ç±»ç¹å¤š</li></ol><h2 id="ç®€å•å®ç°reactive"><a href="#ç®€å•å®ç°reactive" class="headerlink" title="ç®€å•å®ç°reactive"></a>ç®€å•å®ç°reactive</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// monkeyVersionReactivity.jsçŒ´ç‰ˆå“åº”å¼æ¡†æ¶</span><span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>();<span class="hljs-keyword">const</span> effectStack = [];<span class="hljs-keyword">const</span> isObject = <span class="hljs-function"><span class="hljs-params">obj</span> =&gt;</span> obj !== <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;object&quot;</span>;<span class="hljs-keyword">const</span> baseHandler = &#123;  <span class="hljs-function"><span class="hljs-title">get</span>(<span class="hljs-params">target, key</span>)</span> &#123;    <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">Reflect</span>.get(target, key);    track(target, key);    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ret === <span class="hljs-string">&quot;object&quot;</span>) &#123;      <span class="hljs-keyword">return</span> reactive(ret);    &#125;    <span class="hljs-keyword">return</span> ret;  &#125;,  <span class="hljs-function"><span class="hljs-title">set</span>(<span class="hljs-params">target, key, val</span>)</span> &#123;    <span class="hljs-built_in">Reflect</span>.set(target, key, val);    trigger(target, key, val);  &#125;,&#125;;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">track</span>(<span class="hljs-params">target, key</span>) </span>&#123;  <span class="hljs-keyword">let</span> activeEffect = effectStack[effectStack.length - <span class="hljs-number">1</span>];  <span class="hljs-keyword">if</span> (!activeEffect) <span class="hljs-keyword">return</span>;  <span class="hljs-keyword">let</span> depsMap = targetMap.get(target);  <span class="hljs-keyword">if</span> (!depsMap) &#123;    targetMap.set(target, (depsMap = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()));  &#125;  <span class="hljs-keyword">let</span> dep = depsMap.get(key);  <span class="hljs-keyword">if</span> (!dep) &#123;    depsMap.set(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()));  &#125;  <span class="hljs-keyword">if</span> (!dep.has(activeEffect)) &#123;    dep.add(activeEffect);    <span class="hljs-comment">// TODO</span>    activeEffect.deps.push(dep);  &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trigger</span>(<span class="hljs-params">target, key, val</span>) </span>&#123;  <span class="hljs-keyword">const</span> depsMap = targetMap.get(target);  <span class="hljs-keyword">if</span> (!depsMap) &#123;    <span class="hljs-comment">// never been tracked</span>    <span class="hljs-keyword">return</span>;  &#125;  <span class="hljs-keyword">const</span> effects = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();  <span class="hljs-keyword">if</span> (key) &#123;    <span class="hljs-keyword">const</span> dep = depsMap.get(key);    dep.forEach(<span class="hljs-function">(<span class="hljs-params">effect</span>) =&gt;</span> &#123;      effects.add(effect);    &#125;);  &#125;  effects.forEach(<span class="hljs-function">(<span class="hljs-params">ef</span>) =&gt;</span> ef());&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createReactiveEffect</span>(<span class="hljs-params">fn,options</span>)</span>&#123;  <span class="hljs-keyword">const</span> effect = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactiveEffect</span>(<span class="hljs-params"></span>)</span>&#123;      <span class="hljs-keyword">try</span> &#123;        effectStack.push(effect)        <span class="hljs-keyword">return</span> fn()      &#125; <span class="hljs-keyword">finally</span> &#123;        effectStack.pop()      &#125;  &#125;  effect.deps = []  effect.options = options  <span class="hljs-keyword">return</span> effect&#125;<span class="hljs-comment">// ---------</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reactive</span>(<span class="hljs-params">target</span>) </span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Proxy</span>(target, baseHandler);&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">effect</span>(<span class="hljs-params">fn, options=&#123;&#125;</span>) </span>&#123;  <span class="hljs-keyword">const</span> effect = createReactiveEffect(fn, options);  <span class="hljs-keyword">if</span> (!options.lazy) &#123;    effect();  &#125;  <span class="hljs-keyword">return</span> effect;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">computed</span>(<span class="hljs-params">fn</span>)</span>&#123;  <span class="hljs-keyword">const</span> runner = effect(fn,&#123;<span class="hljs-attr">computed</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">lazy</span>:<span class="hljs-literal">true</span>&#125;)  <span class="hljs-keyword">return</span> &#123;    effect:runner,    <span class="hljs-keyword">get</span> <span class="hljs-title">val</span>()&#123;      <span class="hljs-keyword">return</span> runner()    &#125;  &#125;&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>require.context()</title>
    <link href="/2020/09/03/require.context%E4%BD%BF%E7%94%A8/"/>
    <url>/2020/09/03/require.context%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<ul><li><p>è‡ªåŠ¨åŒ–æ³¨å†Œç»„ä»¶</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// global.js</span><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><span class="hljs-keyword">import</span> upperFirst <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash/upperFirst&#x27;</span><span class="hljs-keyword">import</span> camelCase <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;lodash/camelCase&#x27;</span><span class="hljs-keyword">const</span> requireComponent = <span class="hljs-built_in">require</span>.context(  <span class="hljs-comment">// å…¶ç»„ä»¶ç›®å½•çš„ç›¸å¯¹è·¯å¾„</span>  <span class="hljs-comment">// å…¨å±€æ³¨å†Œçš„ç›®å½•</span>  .,  <span class="hljs-comment">// æ˜¯å¦æŸ¥è¯¢å…¶å­ç›®å½•</span>  <span class="hljs-literal">false</span>,  <span class="hljs-comment">// åŒ¹é…åŸºç¡€ç»„ä»¶æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼</span>  <span class="hljs-comment">// /Base[A-Z]\w+\.(vue|js)$/</span>  /\.vue$/)requireComponent.keys().forEach(<span class="hljs-function"><span class="hljs-params">fileName</span> =&gt;</span> &#123;  <span class="hljs-comment">// è·å–ç»„ä»¶é…ç½®</span>  <span class="hljs-keyword">const</span> componentConfig = requireComponent(fileName)  <span class="hljs-comment">// è·å–ç»„ä»¶çš„ PascalCase å‘½å</span>  <span class="hljs-keyword">const</span> componentName = upperFirst(    camelCase(      <span class="hljs-comment">// è·å–å’Œç›®å½•æ·±åº¦æ— å…³çš„æ–‡ä»¶å</span>      fileName        <span class="hljs-comment">// .split(&#x27;/&#x27;)</span>        <span class="hljs-comment">// .pop()</span>        .replace(<span class="hljs-regexp">/^\.\//</span>,<span class="hljs-string">&#x27;&#x27;</span>)        <span class="hljs-comment">// â€˜./ComA.vueâ€™ =&gt; &#x27;ComA.vue&#x27;</span>        .replace(<span class="hljs-regexp">/\.\w+$/</span>, <span class="hljs-string">&#x27;&#x27;</span>)        <span class="hljs-comment">// =&gt; &#x27;ComA&#x27;</span>    )  )  <span class="hljs-comment">// å…¨å±€æ³¨å†Œç»„ä»¶</span>  Vue.component(    componentName,    <span class="hljs-comment">// å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ `export default` å¯¼å‡ºçš„ï¼Œ</span>    <span class="hljs-comment">// é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ `.default`ï¼Œ</span>    <span class="hljs-comment">// å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹ã€‚</span>    componentConfig.default || componentConfig  )&#125;)</code></pre></div></li><li><p>è‡ªåŠ¨åŒ–æ³¨å†Œè·¯ç”±</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// router.js</span><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><span class="hljs-keyword">import</span> Router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>Vue.use(Router)<span class="hljs-keyword">const</span> routerList = []<span class="hljs-keyword">const</span> importAllRouter = <span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> &#123;  r.keys().forEach(<span class="hljs-function"><span class="hljs-params">key</span>=&gt;</span>&#123;    routerList.push(r[key].default  <span class="hljs-comment">/*export default*/</span>)  &#125;)&#125;importAllRouter(<span class="hljs-built_in">require</span>.context(.<span class="hljs-comment">/* æŸ¥è¯¢ç›®å½•*/</span>,<span class="hljs-literal">true</span><span class="hljs-comment">/*æ˜¯å¦åŒ…å«å­ç›®å½•*/</span>,<span class="hljs-regexp">/\.router\.js/</span><span class="hljs-regexp">/*åŒ¹é…æ­£åˆ™*/</span>))<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Router(&#123;  ...routerList&#125;)</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å †åŠç›¸å…³ç®—æ³•</title>
    <link href="/2020/08/31/%E5%A0%86/"/>
    <url>/2020/08/31/%E5%A0%86/</url>
    
    <content type="html"><![CDATA[<h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><ul><li><p>å †å°±æ˜¯å®Œå…¨äºŒå‰æ ‘</p><div class="hljs code-wrapper"><pre><code>å®Œå…¨äºŒå‰æ ‘ï¼šé™¤äº†æ·±åº¦æœ€æ·±çš„ä¸€å±‚å¤–æ‰€æœ‰å±‚èŠ‚ç‚¹æ•°éƒ½æ»¡å‘˜æ·±åº¦ï¼šä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹ç»å†çš„èŠ‚ç‚¹ä¸ªæ•°</code></pre></div></li><li><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ¯”å·¦å³å­èŠ‚ç‚¹å¤§â€“&gt;æœ€å¤§å †ï¼Œæœ€å¤§å€¼åœ¨æ ¹èŠ‚ç‚¹</p></li><li><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ¯”å·¦å³å­èŠ‚ç‚¹å°â€“&gt;æœ€å°å †ï¼Œæœ€å°å€¼åœ¨æ ¹èŠ‚ç‚¹</p></li><li><p>å®Œå…¨äºŒå‰æ ‘å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨</p></li></ul><h3 id="å»ºç«‹å †"><a href="#å»ºç«‹å †" class="headerlink" title="å»ºç«‹å †"></a>å»ºç«‹å †</h3><ul><li>å°†èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//å°é¡¶å †</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">items,heapSize</span>)</span>&#123;  <span class="hljs-keyword">while</span>(heapSize&lt;items.length - <span class="hljs-number">1</span>)&#123;  <span class="hljs-comment">// items ç¬¬ä¸€ä¸ªæ˜¯&lt;empty item&gt;</span>    heapSize++    heapify(items,heapSize)  &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">items,i</span>)</span>&#123;  <span class="hljs-keyword">while</span>(<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>) &gt; <span class="hljs-number">0</span> &amp;&amp; items[i] &lt; items[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)])&#123;    [items[i],items[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)]] =  [items[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)],items[i]]    <span class="hljs-comment">// äº¤æ¢ä½ç½®</span>    i = <span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)  &#125; &#125;</code></pre></div><ul><li>å°†èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹æ¯”è¾ƒ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//å¤§é¡¶å †</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">items</span>)</span>&#123;  <span class="hljs-keyword">const</span> heapSize = items.length - <span class="hljs-number">1</span>  <span class="hljs-comment">// &lt;-- items.length - 1 !</span>  <span class="hljs-comment">// æœ€åå¶å­èŠ‚ç‚¹çš„ç´¢å¼•å€¼</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">Math</span>.floor(heapSize/<span class="hljs-number">2</span>) ; i &gt;= <span class="hljs-number">1</span> ; i--)&#123; <span class="hljs-comment">// &lt;-i&gt;=1 !</span>    <span class="hljs-comment">// i ä¸ºæœ€åä¸€ä¸ªé å¶å­ èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œiè¿˜æœ‰å­èŠ‚ç‚¹</span>    heapify(items,heapSize,i)  &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">items, heapSize, i</span>) </span>&#123;  <span class="hljs-comment">// è‡ªä¸Šè€Œä¸‹å¼å †åŒ–</span>  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;      <span class="hljs-keyword">var</span> maxIndex = i;      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i &lt;= heapSize &amp;&amp; items[maxIndex] &lt; items[i*<span class="hljs-number">2</span>] ) &#123;        <span class="hljs-comment">// è¿™é‡Œçš„ç­‰å·æ„å‘³ç€ä¸‡ä¸€è¿™ä¸ªèŠ‚ç‚¹æ˜¯æœ€åçš„èŠ‚ç‚¹å‘¢</span>          maxIndex = i*<span class="hljs-number">2</span>;      &#125;      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; items[maxIndex] &lt; items[i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>] ) &#123;          maxIndex = i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;      &#125;      <span class="hljs-keyword">if</span> (maxIndex === i) <span class="hljs-keyword">break</span>;      [items[i],items[maxIndex]] = [items[maxIndex],items[i]]      i = maxIndex;   &#125;&#125;</code></pre></div><h3 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h3><ol><li>å»ºç«‹å¤§é¡¶å †/å°é¡¶å †</li><li>åˆ™ç´¢å¼•1ä½ç½®ä¸ºå½“å‰å †çš„ æœ€å¤§å€¼/æœ€å°å€¼</li><li>å¾ªç¯å°†[1]ä¸[æœ«å°¾]äº¤æ¢ä½ç½®ï¼Œå¹¶ä¸”ç¼©å°å †çš„å¤§å°ï¼ˆç›¸å½“äºå°†ä¸Šä¸€æ¬¡çš„æœ€å€¼ç§»å‡ºå †ï¼‰</li><li>ä¸€ç›´å †åŒ–</li><li>å¤§é¡¶å †å¾—åˆ°å‡åº / å°é¡¶å †å¾—åˆ°é™åºæ’åˆ—</li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapSort</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-comment">// è¾“å…¥éœ€è¦ä¸º[,]</span>  <span class="hljs-comment">// const heap = [,]</span>  <span class="hljs-comment">// let i = 0</span>  <span class="hljs-comment">// while(i&lt;arr.length)&#123;</span>  <span class="hljs-comment">//   heap.push(arr[i++])</span>  <span class="hljs-comment">// &#125;</span>  <span class="hljs-keyword">const</span> heapSize  =  arr.length - <span class="hljs-number">1</span>  buildHeap(arr,heapSize)    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = heapSize ; i&gt;<span class="hljs-number">1</span> ;i--)&#123;    [arr[i],arr[<span class="hljs-number">1</span>]]=[arr[<span class="hljs-number">1</span>],arr[i]]    heapSize --    heapify(arr,heapSize,<span class="hljs-number">1</span>)  &#125;  <span class="hljs-keyword">return</span> arr&#125;</code></pre></div><h3 id="topKé—®é¢˜"><a href="#topKé—®é¢˜" class="headerlink" title="topKé—®é¢˜"></a>topKé—®é¢˜</h3><p>æ±‚å‡ºå‰kä¸ªæœ€å¤§/æœ€å°å€¼ï¼Œæˆ–è€…å‡ºç°æ¬¡æ•°æœ€å¤š/æœ€å°‘çš„kä¸ªå€¼</p><ul><li>æ±‚å¤§å€¼ï¼Œå»ºç«‹æœ€å°å †</li><li>æ±‚å°å€¼ï¼Œå»ºç«‹æœ€å¤§å †<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// æ¯”å¦‚æ±‚å‰kä¸ªæœ€å¤§å€¼</span><span class="hljs-comment">// å…ˆç”¨å‰kä¸ªæ•°æ®å»ºç«‹å°é¡¶å †</span><span class="hljs-comment">// ä¸ºä»€ä¹ˆæ±‚å‰kå¤§å»ºç«‹å°é¡¶å †ï¼Ÿï¼Ÿï¼Ÿ</span><span class="hljs-comment">// å¦‚æœå»ºç«‹å¤§é¡¶å †ï¼Œäº¤æ¢å †é¡¶åï¼Œå †é¡¶ä¾ç„¶æ˜¯æœ€å¤§çš„ï¼Œä¾æ¬¡æ¯”è¾ƒä¹‹åçš„æ•°æ®åªä¼šæ”¹å˜å †é¡¶è€Œå·²ï¼Œæ”¶é›†ä¸äº†åˆ«çš„å€¼</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">topK</span>(<span class="hljs-params">data,k</span>)</span>&#123;  <span class="hljs-keyword">let</span> heap = [,...data]  <span class="hljs-keyword">const</span> heapSize = k  buildHeap(heap,heapSize)  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = k ; j &lt;data.length ;j++)&#123;    <span class="hljs-comment">// å°†ä½™ä¸‹çš„æ•°æ®ä¾æ¬¡ä¸å †é¡¶æ¯”è¾ƒ</span>    <span class="hljs-comment">// æ¯”å°é¡¶å †çš„å †é¡¶å¤§åˆ™äº¤æ¢</span>    <span class="hljs-keyword">if</span>(heap[<span class="hljs-number">1</span>] &lt; data[j])&#123;      heap[<span class="hljs-number">1</span>] = data[j]      heapify(heap,k,<span class="hljs-number">1</span>)    &#125;  &#125;  heap.shift()  <span class="hljs-keyword">return</span> heap&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildHeap</span>(<span class="hljs-params">items ,heapSize</span>)</span>&#123;  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-built_in">Math</span>.floor(heapSize/<span class="hljs-number">2</span>) ; i &gt;= <span class="hljs-number">1</span> ; i--)&#123;    heapify(items,heapSize,i)  &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">heapify</span>(<span class="hljs-params">items,heapSize,i</span>)</span>&#123;  <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;    <span class="hljs-keyword">let</span> minIndex = i    <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i &lt;= heapSize &amp;&amp; items[minIndex] &gt; items[i*<span class="hljs-number">2</span>] ) &#123;        <span class="hljs-comment">// è¿™é‡Œçš„ç­‰å·æ„å‘³ç€ä¸‡ä¸€è¿™ä¸ªèŠ‚ç‚¹æ˜¯æœ€åçš„èŠ‚ç‚¹å‘¢</span>        minIndex = i*<span class="hljs-number">2</span>;      &#125;      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; items[minIndex] &gt; items[i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>] ) &#123;        minIndex = i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>;      &#125;      <span class="hljs-keyword">if</span> (minIndex === i) <span class="hljs-keyword">break</span>;      [items[i],items[minIndex]] = [items[minIndex],items[i]]      i = minIndex;   &#125;&#125;</code></pre></div></li></ul><h3 id="ä¸­ä½æ•°é—®é¢˜"><a href="#ä¸­ä½æ•°é—®é¢˜" class="headerlink" title="ä¸­ä½æ•°é—®é¢˜"></a>ä¸­ä½æ•°é—®é¢˜</h3><p><code>n</code>ä¸ªæ•°æ®ä¸­çš„ä¸­ä½æ•°</p><div class="hljs code-wrapper"><pre><code>  [1,2,3] =&gt; 2  [1,2,3,4] =&gt; 2,3  å½“ n % 2 !== 0 æ—¶ï¼Œä¸­ä½æ•°ä¸ºï¼šarr[(n-1)/2]  å½“ n % 2 === 0 æ—¶ï¼Œä¸­ä½æ•°ä¸ºï¼šarr[n/2], arr[n/2 + 1]</code></pre></div><ul><li><p>å°†å‰<code>n/2//å¶æ•°</code>||<code>ï¼ˆMath.floor(n/2)ï¼‰+ 1//å¥‡æ•°</code>å †åŒ–ä¸ºå¤§é¡¶å †ï¼Œå<code>Math.floor(n/2)</code>å †åŒ–ä¸ºå°é¡¶å †ã€‚</p></li><li><p>ç»“æœåˆ†åˆ«ä¸ºä¸¤ä¸ªå †é¡¶<code>å¶æ•°</code>/å‰é¢çš„å †é¡¶<code>å¥‡æ•°</code></p></li><li><p>åŠ¨æ€æ•°ç»„ï¼Œåˆ™æŠŠæ’å…¥çš„æ•°æ®ä¸å †é¡¶æ¯”è¾ƒ</p><ul><li>ã€å‡åºã€‘å¤§äºå¤§é¡¶å †çš„é¡¶åˆ™åŠ å…¥å°é¡¶å †</li><li>ã€é™åºã€‘å°äºå°é¡¶å †åˆ™åŠ å…¥å¤§é¡¶å †</li><li> åŠ å…¥åå†æ¬¡å †åŒ–ï¼Œå¦‚æœå †å¤§å°ä¸æ»¡è¶³åˆ†å‰²ä¸­ä½æ•°è¦æ±‚åˆ™ç»§ç»­è°ƒæ•´</li></ul></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Median</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.maxHeap = <span class="hljs-keyword">new</span> MaxHeap()  <span class="hljs-built_in">this</span>.minHeap = <span class="hljs-keyword">new</span> MinHeap()&#125;Median.prototype.addNum = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">num</span>)</span>&#123;  <span class="hljs-keyword">if</span>(num &lt; <span class="hljs-built_in">this</span>.maxHeap.getTop() || !<span class="hljs-built_in">this</span>.maxHeap.getSize())&#123;    <span class="hljs-built_in">this</span>.maxHeap.insert(num)  &#125;<span class="hljs-keyword">else</span>&#123;    <span class="hljs-built_in">this</span>.minHeap.insert(num)  &#125;  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.maxHeap.getSize() - <span class="hljs-built_in">this</span>.minHeap.getSize() &gt; <span class="hljs-number">1</span>)&#123;    <span class="hljs-comment">//å¥‡æ•°åˆ†å¸ƒ</span>    <span class="hljs-comment">//å¤§é¡¶å †sizeæ¯”å°é¡¶å †å¤§1</span>    <span class="hljs-built_in">this</span>.minHeap.insert(<span class="hljs-built_in">this</span>.maxHeap.rmTop())    <span class="hljs-comment">//ä¸ç¬¦åˆåˆ™å¤§é¡¶å †é¡¶æ’å…¥å°é¡¶å †</span>  &#125;  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.minHeap.getSize() &gt; <span class="hljs-built_in">this</span>.maxHeap.getSize())&#123;    <span class="hljs-built_in">this</span>.maxHeap.insert(<span class="hljs-built_in">this</span>.minHeap.rmTop())    <span class="hljs-comment">// </span>  &#125;&#125;Median.prototype.getMedianNum = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-comment">// return console.log(this.maxHeap.getSize());</span>  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.maxHeap.getSize() &amp;&amp; <span class="hljs-built_in">this</span>.maxHeap.getSize() === <span class="hljs-built_in">this</span>.minHeap.getSize())&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-number">1</span>);    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.maxHeap.getTop() + <span class="hljs-built_in">this</span>.minHeap.getTop())/<span class="hljs-number">2</span>  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.maxHeap.getTop()&#125;<span class="hljs-comment">// å¤§é¡¶å †</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MaxHeap</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">const</span> heap = [,]  <span class="hljs-built_in">this</span>.getSize = <span class="hljs-function">() =&gt;</span> heap.length - <span class="hljs-number">1</span>  <span class="hljs-built_in">this</span>.getTop = <span class="hljs-function">() =&gt;</span> heap.length &gt; <span class="hljs-number">1</span> ? heap[<span class="hljs-number">1</span>] : <span class="hljs-literal">null</span>  <span class="hljs-built_in">this</span>.insert = <span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> &#123;    <span class="hljs-comment">//æ’å…¥å¼å»ºå †</span>    heap.push(num)    <span class="hljs-keyword">let</span> i = heap.length - <span class="hljs-number">1</span>    <span class="hljs-comment">// push è¿›å»çš„ç´¢å¼•</span>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)&gt;<span class="hljs-number">0</span> &amp;&amp; heap[i] &gt; heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)])&#123;      <span class="hljs-comment">// å¤§é¡¶å †ï¼Œä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå¤§äºåˆ™äº¤æ¢</span>      [heap[i],heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)]] = [heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)],heap[i]]      i = <span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)    &#125;  &#125;  <span class="hljs-built_in">this</span>.rmTop = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(!heap.length &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>    <span class="hljs-keyword">if</span>(heap.length === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> heap.pop()    <span class="hljs-keyword">const</span> num = heap[<span class="hljs-number">1</span>]    heap[<span class="hljs-number">1</span>] = heap.pop()<span class="hljs-comment">// æ‹¿èµ°äº†topå€¼ï¼Œå¹¶ç”¨æœ«å°¾èŠ‚ç‚¹å¡«å……</span>    heapify(<span class="hljs-number">1</span>)    <span class="hljs-keyword">return</span> num  &#125;  <span class="hljs-keyword">const</span> heapify = <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> &#123;    <span class="hljs-comment">// å †åŒ–</span>    <span class="hljs-keyword">const</span> heapSize = heap.length - <span class="hljs-number">1</span>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;      <span class="hljs-keyword">let</span> maxIndex = i      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i] &gt; heap[i]) maxIndex = <span class="hljs-number">2</span>*i      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>] &gt; heap[maxIndex]) maxIndex = <span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> <span class="hljs-comment">// !!!!!!</span>      <span class="hljs-keyword">if</span>(maxIndex === i) <span class="hljs-keyword">break</span>      [heap[i],heap[maxIndex]] = [heap[maxIndex],heap[i]]      <span class="hljs-comment">// é‡æ–°èµ‹å€¼iå¼€å§‹ä¸‹çº§å¾ªç¯</span>      i = maxIndex    &#125;  &#125;&#125;<span class="hljs-comment">// å°é¡¶å †</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MinHeap</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">const</span> heap = [,]  <span class="hljs-built_in">this</span>.getSize = <span class="hljs-function">() =&gt;</span> heap.length - <span class="hljs-number">1</span>  <span class="hljs-built_in">this</span>.getTop = <span class="hljs-function">() =&gt;</span> heap.length &gt; <span class="hljs-number">1</span> ? heap[<span class="hljs-number">1</span>] : <span class="hljs-literal">null</span>  <span class="hljs-built_in">this</span>.insert = <span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> &#123;    heap.push(num)    <span class="hljs-keyword">let</span> i = heap.length - <span class="hljs-number">1</span>    <span class="hljs-keyword">while</span>(<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)&gt;<span class="hljs-number">0</span> &amp;&amp; heap[i] &lt; heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)])&#123;      <span class="hljs-comment">// å°é¡¶å †ï¼Œä¸çˆ¶èŠ‚ç‚¹æ¯”è¾ƒï¼Œå°äºåˆ™äº¤æ¢</span>      [heap[i],heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)]] = [heap[<span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)],heap[i]]      i = <span class="hljs-built_in">Math</span>.floor(i/<span class="hljs-number">2</span>)    &#125;  &#125;  <span class="hljs-built_in">this</span>.rmTop = <span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(!heap.length&gt;<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>    <span class="hljs-keyword">if</span>(heap.length === <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> heap.pop()    <span class="hljs-keyword">const</span> num = heap[<span class="hljs-number">1</span>]    heap[<span class="hljs-number">1</span>] = heap.pop()    heapify(<span class="hljs-number">1</span>)    <span class="hljs-keyword">return</span> num  &#125;  <span class="hljs-keyword">const</span> heapify = <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> &#123;    <span class="hljs-keyword">const</span> heapSize = heap.length - <span class="hljs-number">1</span>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)&#123;      <span class="hljs-keyword">let</span> minIndex = i      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i] &lt; heap[i]) minIndex = <span class="hljs-number">2</span>*i      <span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span> &lt;= heapSize &amp;&amp; heap[<span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>] &lt; heap[minIndex]) minIndex = <span class="hljs-number">2</span>*i+<span class="hljs-number">1</span>      <span class="hljs-keyword">if</span>(minIndex === i) <span class="hljs-keyword">break</span>      [heap[i],heap[minIndex]] = [heap[minIndex],heap[i]]      <span class="hljs-comment">// é‡æ–°èµ‹å€¼iå¼€å§‹ä¸‹çº§å¾ªç¯</span>      i = minIndex    &#125;  &#125;&#125;<span class="hljs-comment">// äºŒåˆ†æŸ¥æ‰¾æ³•</span><span class="hljs-keyword">const</span> MedianFinder = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.data = []&#125;MedianFinder.prototype.addMun = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">num</span>)</span>&#123;  <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">this</span>.data  <span class="hljs-keyword">if</span>(data.length&lt;<span class="hljs-number">1</span>)&#123;    data.push(num)    <span class="hljs-keyword">return</span>   &#125;  <span class="hljs-keyword">let</span> L = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> R = data.length - <span class="hljs-number">1</span>  <span class="hljs-keyword">while</span>(L&lt;=R)&#123;    <span class="hljs-keyword">let</span> M = <span class="hljs-built_in">Math</span>.floor((L+R)/<span class="hljs-number">2</span>)    <span class="hljs-keyword">if</span>(data[M]===num)&#123;      data.splice(M,<span class="hljs-number">0</span>,num)      <span class="hljs-keyword">return</span>     &#125;    <span class="hljs-keyword">if</span>(data[M]&lt;num)&#123;      L ++    &#125;<span class="hljs-keyword">else</span>&#123;      R --    &#125;  &#125;  data.splice(R+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,num)&#125;MedianFinder.prototype.findMedian = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">const</span> len = <span class="hljs-built_in">this</span>.data.length  <span class="hljs-keyword">if</span>(!len) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>  <span class="hljs-keyword">const</span> mid = <span class="hljs-built_in">Math</span>.floor((len-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)  <span class="hljs-keyword">if</span>(len%<span class="hljs-number">2</span>===<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">this</span>.data[mid]+ <span class="hljs-built_in">this</span>.data[mid+<span class="hljs-number">1</span>])/<span class="hljs-number">2</span>  &#125;<span class="hljs-keyword">else</span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.data[mid]  &#125;&#125;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒå‰æ ‘</title>
    <link href="/2020/08/28/%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
    <url>/2020/08/28/%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h2 id="æ ‘å‹ç»“æ„"><a href="#æ ‘å‹ç»“æ„" class="headerlink" title="æ ‘å‹ç»“æ„"></a>æ ‘å‹ç»“æ„</h2><ul><li><p>èŠ‚ç‚¹ä¸èƒ½é—­ç¯</p></li><li><p>åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹</p></li><li><p>é™¤äº†æ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</p></li><li><p>æ·±åº¦ï¼šèŠ‚ç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ç»è¿‡èŠ‚ç‚¹ä¸ªæ•°</p></li><li><p>é«˜åº¦ï¼šèŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æœ€é•¿è·¯å¾„ç»è¿‡èŠ‚ç‚¹ä¸ªæ•°</p></li><li><p>æ ‘çš„é«˜åº¦ï¼šæ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ç»è¿‡èŠ‚ç‚¹ä¸ªæ•°</p></li></ul><h2 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h2><p>æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„æ ‘ç»“æ„</p><ul><li>å¹³è¡¡äºŒå‰æ ‘</li><li>æ»¡äºŒå‰æ ‘</li><li>å®Œå…¨äºŒå‰æ ‘</li><li>äºŒå‰æœç´¢æ ‘ã€BSTã€‘ï¼šå³å­å¤§äºçˆ¶å¤§äºå·¦å­<ul><li>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†å¾—åˆ°å‡åºæ’åˆ—</li></ul></li></ul><h2 id="äºŒå‰æ ‘éå†"><a href="#äºŒå‰æ ‘éå†" class="headerlink" title="äºŒå‰æ ‘éå†"></a>äºŒå‰æ ‘éå†</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BinaryTree</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">const</span> Node = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>&#123;    <span class="hljs-built_in">this</span>.val = val;    <span class="hljs-built_in">this</span>.left = <span class="hljs-literal">null</span>;    <span class="hljs-built_in">this</span>.right = <span class="hljs-literal">null</span>;  &#125;;  <span class="hljs-keyword">let</span> root = <span class="hljs-literal">null</span>;&#125;</code></pre></div><ul><li>å‰åºéå†<blockquote><p>root -&gt; left -&gt; right</p></blockquote></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preOrderTraverse</span>(<span class="hljs-params">node</span>) </span>&#123;  <span class="hljs-keyword">let</span> res = [];  <span class="hljs-keyword">let</span> stack = [];  <span class="hljs-keyword">if</span> (node) stack.push(node);  <span class="hljs-keyword">while</span> (stack.length &gt; <span class="hljs-number">0</span>) &#123;    <span class="hljs-keyword">let</span> curNode = stack.pop();    res.push(curNode.val);    <span class="hljs-keyword">if</span> (curNode.right !== <span class="hljs-literal">null</span>) &#123;      stack.push(curNode.right);    &#125;    <span class="hljs-keyword">if</span> (curNode.left !== <span class="hljs-literal">null</span>) &#123;      stack.push(curNode.left);    &#125;  &#125;  <span class="hljs-keyword">return</span> res;&#125;</code></pre></div><ul><li>ä¸­åºéå†<blockquote><p>left -&gt; root -&gt; right</p></blockquote></li><li>ååºéå†<blockquote><p>left -&gt; right -&gt; root</p></blockquote></li></ul><h2 id="äºŒå‰æ ‘ç®—æ³•é¢˜"><a href="#äºŒå‰æ ‘ç®—æ³•é¢˜" class="headerlink" title="äºŒå‰æ ‘ç®—æ³•é¢˜"></a>äºŒå‰æ ‘ç®—æ³•é¢˜</h2><ul><li>è®¡ç®—è·¯å¾„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// è¾“å…¥äºŒå‰æ ‘å’Œä¸€ä¸ªå€¼ï¼Œæ±‚å‡ºæŒ‰ç…§äºŒå‰æ ‘è·¯å¾„æ±‚å’Œç­‰äºè¯¥å€¼çš„è·¯å¾„</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pathSum</span>(<span class="hljs-params">root,sum</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> []  <span class="hljs-keyword">if</span>(root.value===sum) <span class="hljs-keyword">return</span> [root.value]  <span class="hljs-keyword">const</span> paths = []  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">searchPath</span>(<span class="hljs-params">node,target,prePath</span>)</span>&#123;    <span class="hljs-comment">/**</span><span class="hljs-comment">    / <span class="hljs-doctag">@parma </span>target ä¸æœ€ç»ˆsumçš„å·®å€¼</span><span class="hljs-comment">    / <span class="hljs-doctag">@parma </span>prePath åˆ°æ­¤çš„è·¯å¾„</span><span class="hljs-comment">    */</span>    <span class="hljs-keyword">const</span>  = target-node.val    <span class="hljs-keyword">const</span> curPath = [...prePath,node.val]    <span class="hljs-keyword">if</span>(!node.left &amp;&amp; !node.right &amp;&amp; ===<span class="hljs-number">0</span>)&#123;      paths.push(curPath)    &#125;    <span class="hljs-keyword">if</span>(node.left)&#123;      searchPath(node.left,,curPath)    &#125;    <span class="hljs-keyword">if</span>(node.right)&#123;      searchPath(node.right,,curPath)    &#125;  &#125;&#125;</code></pre></div><ul><li>äºŒå‰æ ‘é•œåƒ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// é€’å½’</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mirrorTree</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mirror</span>(<span class="hljs-params">node</span>)</span>&#123;    <span class="hljs-keyword">if</span>(!node) <span class="hljs-keyword">return</span>    [node.left,node.right] = [node.right,node.left]    mirror(node.left)    mirror(node.right)  &#125;  mirror(rootï¼‰  <span class="hljs-keyword">return</span> root&#125;<span class="hljs-comment">// stack</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mirrorTree</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> root  <span class="hljs-keyword">const</span> swap = <span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> [node.left,node.right] = [node.right,node.left]  <span class="hljs-keyword">const</span> stack = [root]  <span class="hljs-keyword">while</span>(stack.length&gt;<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">const</span> node = stack.pop()    swap(node)    node.left &amp;&amp; stack.push(node.left)    node.right &amp;&amp; stack.push(node.right)  &#125;  <span class="hljs-keyword">return</span> root&#125;</code></pre></div><ul><li>è®¡ç®—äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ååºéå†</span><span class="hljs-comment">// DFS</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">return</span> root?<span class="hljs-built_in">Math</span>.max(maxDepth(root.left),maxDepth(root.right))+<span class="hljs-number">1</span>:<span class="hljs-number">0</span>  <span class="hljs-comment">// é€’å½’æ·±åº¦åŠ 1</span>  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>  <span class="hljs-keyword">const</span> left = maxDepth(root.left)  <span class="hljs-keyword">const</span> right = maxDepth(root.right)  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.max(left,right)+<span class="hljs-number">1</span>  )&#125;<span class="hljs-comment">// BFS</span><span class="hljs-comment">//é€’å½’å®ç°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> max  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">node,dep</span>)</span>&#123;    <span class="hljs-keyword">if</span>(!node) <span class="hljs-keyword">return</span>    max = <span class="hljs-built_in">Math</span>.max(max,++dep)    search(node.left)    search(node.right)  &#125;  search(root,<span class="hljs-number">0</span>)  <span class="hljs-keyword">return</span> max&#125;<span class="hljs-comment">// æ ˆå®ç°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxDepth</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>  <span class="hljs-keyword">const</span> stack = [[root,<span class="hljs-number">0</span>]]  <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(stack.length&gt;<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">const</span> [node,dep] = stack.pop()    max = <span class="hljs-built_in">Math</span>.max(max,dep+<span class="hljs-number">1</span>)    node.left &amp;&amp; stack.push(node.left,dep+<span class="hljs-number">1</span>)    node.right &amp;&amp; stack.push(node.right,dep+<span class="hljs-number">1</span>)  &#125;  <span class="hljs-keyword">return</span> max&#125;</code></pre></div><ul><li>äºŒå‰æœç´ æ ‘ä¸­ç¬¬ k å¤§çš„å€¼<blockquote><p>äºŒå‰æœç´¢æ ‘ + é€†å‘ä¸­åºéå† =&gt; é™åºæ’åˆ— val</p></blockquote></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">kthLargest</span>(<span class="hljs-params">root, k</span>) </span>&#123;  <span class="hljs-keyword">if</span> (!root) <span class="hljs-keyword">return</span>;  <span class="hljs-keyword">let</span> kth;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DFS</span>(<span class="hljs-params">node</span>) </span>&#123;    <span class="hljs-keyword">if</span> (!node) <span class="hljs-keyword">return</span>;    DFS(node.right);    <span class="hljs-keyword">if</span> (--k === <span class="hljs-number">0</span>) &#123;      kth = node.val;      <span class="hljs-keyword">return</span>;    &#125;    DFS(node.right);  &#125;  <span class="hljs-keyword">return</span> kth;&#125;</code></pre></div><ul><li>äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">root, p, q</span>) </span>&#123;  <span class="hljs-keyword">if</span> (!root || root.val === p || root.val === q) <span class="hljs-keyword">return</span> root;  <span class="hljs-keyword">const</span> l = lowerCommonAncestor(root.left, p, q);  <span class="hljs-keyword">const</span> r = lowerCommonAncestor(root.right, p, q);  <span class="hljs-keyword">if</span>(!l) <span class="hljs-keyword">return</span> r  <span class="hljs-keyword">if</span>(!r) <span class="hljs-keyword">return</span> l  <span class="hljs-keyword">return</span> root&#125;</code></pre></div><ul><li>äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// é€’å½’</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">root, p, q</span>) </span>&#123;  <span class="hljs-keyword">if</span> (root.val &lt; p.val &amp;&amp; root.val &lt; q.val) &#123;    <span class="hljs-keyword">return</span> lowestCommonAncestor(root.right, p, q);  &#125;  <span class="hljs-keyword">if</span> (root.val &gt; p.val &amp;&amp; root.val &gt; q.val) &#123;    <span class="hljs-keyword">return</span> lowestCommonAncestor(root.left, p, q);  &#125;  <span class="hljs-keyword">return</span> root;&#125;<span class="hljs-comment">// è¿­ä»£</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lowestCommonAncestor</span>(<span class="hljs-params">root, p, q</span>) </span>&#123;  <span class="hljs-keyword">while</span> (root) &#123;    <span class="hljs-keyword">if</span> (root.val &lt; p.val &amp;&amp; root.val &lt; q.val) &#123;      root = root.right    &#125;    <span class="hljs-keyword">if</span> (root.val &gt; p.val &amp;&amp; root.val &gt; q.val) &#123;      root = root.left    &#125;  &#125;  <span class="hljs-keyword">return</span> root;&#125;</code></pre></div><ul><li>äºŒå‰æœç´¢æ ‘èŠ‚ç‚¹é—´æœ€å°å·®<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸­åºæ’åˆ—åï¼Œæœ€å°å·®å°±æ˜¯è¯¥æ•°ç»„ä¸­ç›¸é‚»å…ƒç´ æœ€å°å·®</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minDiffInBST</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-comment">// ä½¿ç”¨è¾…åŠ©æ ˆ</span>  <span class="hljs-keyword">const</span> stack = []  <span class="hljs-keyword">let</span> pre = <span class="hljs-literal">null</span>  <span class="hljs-keyword">let</span> min = <span class="hljs-built_in">Number</span>.MAX_SAFE_INTEGER  <span class="hljs-keyword">while</span>(root || stack.length)&#123;    <span class="hljs-keyword">while</span>(root)&#123;      stack.push(root)      root = root.left    &#125;    root = stack.pop()    pre!==<span class="hljs-literal">null</span> &amp;&amp; min = <span class="hljs-built_in">Math</span>.min(min,root.val-pre)    pre = root.val    root = root.right  &#125;  <span class="hljs-keyword">return</span> min&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">minDiffInBST</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">let</span> pre = <span class="hljs-literal">null</span>  <span class="hljs-keyword">let</span> min = MAX_SAFE_INTEGER  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DFS</span>(<span class="hljs-params">node</span>)</span>&#123;    <span class="hljs-keyword">if</span>(!node) <span class="hljs-keyword">return</span>    DFS(node.left)    <span class="hljs-keyword">if</span>(pre===<span class="hljs-literal">null</span>)&#123;      pre = node.val    &#125;<span class="hljs-keyword">else</span>&#123;      min = <span class="hljs-built_in">Math</span>.min(min,node.val-pre)      pre = node.val    &#125;    <span class="hljs-comment">// ä¸­åºåˆ—éå†ï¼Œpreå­˜å‚¨ä¸Šä¸€ä¸ªå€¼ï¼Œç”±äºBSTç‰¹æ€§ï¼Œcur.valæ°¸è¿œå¤§äºpre</span>    DFS(node.right)  &#125;&#125;</code></pre></div></li></ul><ul><li>ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printTree</span>(<span class="hljs-params">root</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!root) <span class="hljs-keyword">return</span> []  <span class="hljs-keyword">const</span> queue = [[root,<span class="hljs-number">0</span>]]  <span class="hljs-keyword">const</span> res = []  <span class="hljs-keyword">while</span>(queue.length&gt;<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">const</span> [node,level] = queue.shift()    <span class="hljs-keyword">if</span>(res[level]) res[level] = []    res[level].push(node.val)    node.left &amp;&amp; queue.push([node.left,level+<span class="hljs-number">1</span>])    node.right &amp;&amp; queue.push(node.right,level+<span class="hljs-number">1</span>)  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ ˆç®—æ³•é¢˜</title>
    <link href="/2020/08/27/%E6%A0%88%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    <url>/2020/08/27/%E6%A0%88%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="æ ˆç»“æ„ï¼Œå…ˆè¿›åå‡º"><a href="#æ ˆç»“æ„ï¼Œå…ˆè¿›åå‡º" class="headerlink" title="æ ˆç»“æ„ï¼Œå…ˆè¿›åå‡º"></a>æ ˆç»“æ„ï¼Œå…ˆè¿›åå‡º</h2><ul><li><p>æœ€å°æ ˆ</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MinStack</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.stack = []  <span class="hljs-built_in">this</span>.min = [<span class="hljs-literal">Infinity</span>]&#125;MinStack.prototype.push = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>)</span>&#123;  <span class="hljs-built_in">this</span>.stack.push(item)  <span class="hljs-built_in">this</span>.min.push(<span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">this</span>.min[<span class="hljs-built_in">this</span>.min.length-<span class="hljs-number">1</span>],item))&#125;MinStack.prototype.pop = <span class="hljs-function"><span class="hljs-keyword">function</span></span>&#123;  <span class="hljs-built_in">this</span>.stack.pop()  <span class="hljs-built_in">this</span>.min.pop()&#125;MinStack.prototype.top = <span class="hljs-function"><span class="hljs-keyword">function</span></span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.stack[<span class="hljs-built_in">this</span>.stack.length-<span class="hljs-number">1</span>]&#125;MinStack.prototype.min = <span class="hljs-function"><span class="hljs-keyword">function</span></span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.min[<span class="hljs-built_in">this</span>.min.length-<span class="hljs-number">1</span>]&#125;</code></pre></div></li><li><p>åˆ¤æ–­æ‹¬å·æ˜¯å¦é—­åˆ</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ()</span><span class="hljs-comment">// []</span><span class="hljs-comment">// &#123;&#125;</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bracketCheck</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">const</span> brackets = &#123;    <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-string">&#x27;)&#x27;</span>,    <span class="hljs-string">&#x27;&#123;&#x27;</span>:<span class="hljs-string">&#x27;&#125;&#x27;</span>,    <span class="hljs-string">&#x27;[&#x27;</span>:<span class="hljs-string">&#x27;]&#x27;</span>  &#125;  <span class="hljs-keyword">let</span> stack = []  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ;i&lt;str.length;i++)&#123;    <span class="hljs-keyword">if</span>(brackets[str[i]])&#123;      stack.push([str[i]])    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(str[i] !== brackets[stack.pop()])&#123;      <span class="hljs-comment">// è¿™ä¸ªå†™æ³•6âƒ£ï¸å•Š</span>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    &#125;  &#125;  <span class="hljs-keyword">return</span> stack.length === <span class="hljs-number">0</span>&#125;</code></pre></div><ul><li>ç”Ÿæˆnå¯¹æ‹¬å·<br>æ•°å­— nÂ ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” æœ‰æ•ˆçš„ æ‹¬å·ç»„åˆã€‚</li></ul><p>è¾“å…¥ï¼šn = 3<br>è¾“å‡ºï¼š[â€œ((()))â€,â€(()())â€,â€(())()â€,â€()(())â€,â€()()()â€]</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateParenthesis</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-keyword">const</span> res = []  DFS(l,r,<span class="hljs-string">&#x27;&#x27;</span>)  <span class="hljs-keyword">return</span> res  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DFS</span>(<span class="hljs-params">l,r,str</span>)</span>&#123;    <span class="hljs-comment">// è€ƒè™‘åˆç†é—­åˆçš„æ‹¬å·ç»„åˆ</span>    <span class="hljs-comment">// ç”Ÿæˆè¿‡ç¨‹ä¸­å·¦å³æ‹¬å·å¯ä½¿ç”¨çš„æ•°é‡</span>    <span class="hljs-keyword">if</span>(str.length===<span class="hljs-number">2</span>*n)&#123;      <span class="hljs-keyword">return</span> res.push(str)    &#125;    <span class="hljs-keyword">if</span>(l&gt;<span class="hljs-number">0</span>)&#123;      <span class="hljs-comment">// å·¦æ‹¬å·æœ‰å°±èƒ½ç”¨</span>      DFS(l-<span class="hljs-number">1</span>,r,str+<span class="hljs-string">&#x27;(&#x27;</span>)    &#125;    <span class="hljs-keyword">if</span>(l&lt;r)&#123;      DFS(l,r-<span class="hljs-number">1</span>,str+<span class="hljs-string">&#x27;)&#x27;</span>)    &#125;  &#125;&#125;</code></pre></div><ul><li>åˆ é™¤å­—ç¬¦ä¸²å†…ç›¸é‚»é‡å¤é¡¹<div class="hljs code-wrapper"><pre><code class="hljs javascript">ç»™å‡ºç”±å°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² S ï¼Œé‡å¤é¡¹åˆ é™¤æ“ä½œ ä¼šé€‰æ‹©ä¸¤ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„å­—æ¯ï¼Œå¹¶åˆ é™¤å®ƒä»¬ã€‚åœ¨ S ä¸Šåå¤æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œç›´åˆ°æ— æ³•ç»§ç»­åˆ é™¤ã€‚åœ¨å®Œæˆæ‰€æœ‰é‡å¤é¡¹åˆ é™¤æ“ä½œåè¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ç­”æ¡ˆä¿è¯å”¯ä¸€ã€‚<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delDup</span>(<span class="hljs-params">S</span>)</span>&#123;  <span class="hljs-keyword">let</span> stack = [],pre = <span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> c <span class="hljs-keyword">of</span> S)&#123;    pre = stack.pop()    <span class="hljs-keyword">if</span>(c !== pre)&#123;      stack.push(pre)      stack.push(c)    &#125;  &#125;  <span class="hljs-keyword">return</span> stack.join(<span class="hljs-string">&#x27;&#x27;</span>)&#125;</code></pre></div></li></ul><ul><li>æ»‘åŠ¨çª—å£æœ€å¤§å€¼<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// k ä¸ºçª—å£å¤§å°</span><span class="hljs-comment">// windowå­˜å‚¨æ•°ç»„ç´¢å¼•</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxInSlideWin</span>(<span class="hljs-params">arr,k</span>)</span>&#123;  <span class="hljs-keyword">let</span> res = []  <span class="hljs-keyword">let</span> <span class="hljs-built_in">window</span> = []  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i &lt; arr.length ; i++)&#123;    <span class="hljs-keyword">if</span>(i-<span class="hljs-built_in">window</span>[<span class="hljs-number">0</span>]&gt;=k)&#123;      <span class="hljs-comment">// çª—å£å¤§å°è¶…è¿‡é™åˆ¶</span>      <span class="hljs-built_in">window</span>.shift()    &#125;    <span class="hljs-keyword">while</span>(arr[<span class="hljs-built_in">window</span>[<span class="hljs-built_in">window</span>.length-<span class="hljs-number">1</span>]]&lt;=arr[i])&#123;      <span class="hljs-comment">// ç”¨æŒ‡é’ˆä½ç½®çš„å€¼ä¸çª—å£ç´¢å¼•å€¼æ¯”è¾ƒ</span>      <span class="hljs-comment">// å¾ªç¯åˆ é™¤æ¯”æŒ‡é’ˆå°çš„å€¼ç´¢å¼•</span>      <span class="hljs-built_in">window</span>.pop()    &#125;    <span class="hljs-built_in">window</span>.push(i)    <span class="hljs-keyword">if</span>(i&gt;=k-<span class="hljs-number">1</span>)&#123;      res.push(arr[<span class="hljs-built_in">window</span>[<span class="hljs-number">0</span>]])      <span class="hljs-comment">// ä¿è¯çª—å£å†…æœ€å·¦å€¼=è¾¹ç´¢å¼•ä¸ºæœ€å¤§å€¼</span>    &#125;  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ“ä½œå­—ç¬¦ä¸²ç®—æ³•é¢˜</title>
    <link href="/2020/08/27/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    <url>/2020/08/27/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<ul><li><p>å¯»æ‰¾æœ€é•¿å…¬å…¬å‰ç¼€</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// è¾“å…¥: [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]</span><span class="hljs-comment">// è¾“å‡º: &quot;fl&quot;</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commonPrefix</span>(<span class="hljs-params">...strs</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!strs.length || strs.length===<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>  <span class="hljs-keyword">let</span> ref = strs[<span class="hljs-number">0</span>]  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;i&lt;strs.length;i++)&#123;    <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>    <span class="hljs-keyword">for</span>(;j&lt;ref.length &amp;&amp; j&lt;strs[i].length;j++)&#123;      <span class="hljs-keyword">if</span>(ref.chartAt(j)!==strs[i].chartAt(j)) <span class="hljs-keyword">break</span>    &#125;    ref = ref.subString(<span class="hljs-number">0</span>,j)  &#125;  <span class="hljs-keyword">return</span> ref&#125;</code></pre></div></li><li><p>è¿å­—ç¬¦è½¬ä¸ºé©¼å³°</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hump</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">return</span> str.replace(<span class="hljs-regexp">/-\w/g</span>,$<span class="hljs-number">1</span>=&gt;&#123;    <span class="hljs-keyword">return</span> $<span class="hljs-number">1.</span>slice(<span class="hljs-number">1</span>).toUpperCase()  &#125;)&#125;</code></pre></div></li></ul><ul><li>å°†å­—ç¬¦ä¸²æ”¹ä¸ºé¦–å­—æ¯å¤§å†™<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//-i-hate -_you_</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Upper</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">let</span> rule = <span class="hljs-regexp">/\b_?(\w)/g</span>  <span class="hljs-keyword">return</span> str.replace(rule,($<span class="hljs-number">1</span>=&gt;&#123;    <span class="hljs-keyword">return</span> $<span class="hljs-number">1.</span>toUpperCase()  &#125;))&#125;</code></pre></div></li></ul><ul><li>åè½¬å¥å­<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//  æ­£åˆ™</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseWords</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">return</span> str.trim().replace(<span class="hljs-regexp">/\s+/g</span>,<span class="hljs-string">&#x27; &#x27;</span>).split(<span class="hljs-string">&#x27; &#x27;</span>).reverse().join(<span class="hljs-string">&#x27; &#x27;</span>)  <span class="hljs-comment">// \s \sæ˜¯æŒ‡ç©ºç™½,åŒ…æ‹¬ç©ºæ ¼ã€æ¢è¡Œã€tabç¼©è¿›ç­‰æ‰€æœ‰çš„ç©ºç™½</span>  <span class="hljs-comment">// å»é™¤å•è¯ä¹‹é—´å¤šä½™çš„ç©ºç™½</span>&#125;<span class="hljs-comment">//</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseWords</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">let</span> arr = []  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> right = str.length-<span class="hljs-number">1</span>  <span class="hljs-keyword">let</span> word = <span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-keyword">while</span>(str.charAt(left)===<span class="hljs-string">&#x27; &#x27;</span>) left++  <span class="hljs-keyword">while</span>(str.charAt(right)===<span class="hljs-string">&#x27; &#x27;</span>) right--  <span class="hljs-comment">// å»é™¤å¤´å°¾å¤šä½™ç©ºæ ¼</span>  <span class="hljs-keyword">while</span>(left&lt;=right)&#123;    <span class="hljs-keyword">let</span> char = str.charAt(left)    <span class="hljs-keyword">if</span>(char===<span class="hljs-string">&#x27; &#x27;</span> &amp;&amp; word)&#123;      arr.unshift(word)      word = <span class="hljs-string">&#x27;&#x27;</span>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(char!== <span class="hljs-string">&#x27; &#x27;</span>)&#123;      word += char    &#125;    left ++  &#125;  arr.unshift(word)  <span class="hljs-keyword">return</span> arr.join(<span class="hljs-string">&#x27; &#x27;</span>)&#125;</code></pre></div></li></ul><ul><li>æ£€æŸ¥å›æ–‡</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseCheck</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">let</span> s = str.toLowerCase().replace(<span class="hljs-regexp">/[\W_]/g</span>,<span class="hljs-string">&#x27;&#x27;</span>)  <span class="hljs-comment">// æ ¼å¼æ‰ä¸æ˜¯å­—æ¯çš„åˆ«çš„ç©æ„</span>  <span class="hljs-comment">// | `\W`   | åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ |</span>  <span class="hljs-comment">// `[]` å­—ç¬¦ä¸²ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥ï¼Œè¡¨ç¤ºåŒ¹é…å…¶ä¸­çš„ä»»ä¸€å­—ç¬¦</span>  <span class="hljs-keyword">return</span> s === s.split(<span class="hljs-string">&#x27;&#x27;</span>).reverse().join(<span class="hljs-string">&#x27;&#x27;</span>)&#125;</code></pre></div><ul><li>æœ€é•¿ä¸é‡å¤å­ä¸²é•¿åº¦</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">longest1</span>(<span class="hljs-params">str</span>) </span>&#123;  <span class="hljs-keyword">const</span> <span class="hljs-built_in">window</span> = [];  <span class="hljs-comment">// æ»‘åŠ¨çª—å£</span>  <span class="hljs-keyword">let</span> maxLen = <span class="hljs-number">0</span>;  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.length; i++) &#123;    <span class="hljs-keyword">const</span> index = <span class="hljs-built_in">window</span>.indexOf(str[i]);    <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) &#123;      <span class="hljs-built_in">window</span>.splice(<span class="hljs-number">0</span>, index + <span class="hljs-number">1</span>);      <span class="hljs-comment">// æœ‰é‡å¤å€¼æ—¶ç¼©å°çª—å£</span>    &#125;    <span class="hljs-built_in">window</span>.push(str[i])    <span class="hljs-comment">// æ— é‡å¤æ‰©å¤§çª—å£</span>    maxLen = <span class="hljs-built_in">Math</span>.max(maxLen, <span class="hljs-built_in">window</span>.length);  &#125;  <span class="hljs-keyword">return</span> maxLen;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">longest2</span>(<span class="hljs-params">str</span>)</span>&#123;  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  <span class="hljs-keyword">let</span> maxLen = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>  <span class="hljs-comment">// è®¾ i ä½ç½®å³ä¾§å­—ç¬¦æ— é‡å¤</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j =<span class="hljs-number">0</span>;j&lt;str.length;j++)&#123;    <span class="hljs-keyword">if</span>(map.has(str[j]))&#123;      i = <span class="hljs-built_in">Math</span>.max(map.get(str[j])+<span class="hljs-number">1</span>,i)      <span class="hljs-comment">// æ£€æµ‹åˆ°é‡å¤ï¼Œæ›´æ–°içš„ä½ç½®ï¼Œæ³¨æ„ä¸ä¸€å®šæ˜¯str[j]+1ï¼Œstr[j]+1ä¸ä¸€å®šæ¯”ä¸Šä¸€ä¸ªé‡å¤å…ƒç´ çš„æŸ¥é‡ä½ç½®æ›´é å</span>      <span class="hljs-comment">// [3,2,1,1,3,2] 3æŸ¥é‡çš„ä½ç½®æ˜æ˜¾å°äº1æŸ¥é‡</span>    &#125;    map.set(str[j],j)    maxLen = <span class="hljs-built_in">Math</span>.max((j-i)+<span class="hljs-number">1</span>,maxLen)  &#125;&#125;</code></pre></div><ul><li><p>è®¡ç®—äºŒè¿›åˆ¶æ•°ä¸­1çš„ä¸ªæ•°</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// n ä¸º32ä½äºŒè¿›åˆ¶æ•°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hammingWeight1</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-keyword">const</span> numStr = n.toString(<span class="hljs-number">2</span>).toString()  <span class="hljs-comment">// å‘ˆç°å­—ç¬¦ä¸²æˆ–æ•°ç»„</span>  <span class="hljs-comment">//const numStr = n.toString(2).split(&#x27;â€™)</span>  <span class="hljs-comment">// ç„¶åå°±æ˜¯éå†åˆ¤æ–­</span>  <span class="hljs-keyword">let</span> showTimes = <span class="hljs-number">0</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i =<span class="hljs-number">0</span>;i&lt;numStr.length;i++)&#123;    <span class="hljs-keyword">if</span>(i===<span class="hljs-string">&#x27;1&#x27;</span>)&#123;      showTimes++    &#125;  &#125;  <span class="hljs-keyword">return</span> showTimes&#125;<span class="hljs-comment">// ä½è¿ç®—</span><span class="hljs-comment">// &gt;&gt;&gt; æ— ç¬¦å·å‘å³ç§»</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hammingWeight2</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-keyword">let</span> showTimes = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(n!=<span class="hljs-number">0</span>)&#123;<span class="hljs-comment">// è‹¥n&amp;1=0 ï¼Œåˆ™ n äºŒè¿›åˆ¶ æœ€å³ä¸€ä½ ä¸º 0 ï¼›</span><span class="hljs-comment">// è‹¥n&amp;1=1 ï¼Œåˆ™ n äºŒè¿›åˆ¶ æœ€å³ä¸€ä½ ä¸º 1 ã€‚</span>    showTimes += n&amp;<span class="hljs-number">1</span>    n&gt;&gt;&gt;=<span class="hljs-number">1</span>  &#125;  <span class="hljs-keyword">return</span> showTimes&#125;<span class="hljs-comment">// æ•´ä½“n &amp;</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hammingWeight3</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-keyword">let</span> showTimes = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(n!=<span class="hljs-number">0</span>)&#123;    showTimes ++     n  = n &amp; (n-<span class="hljs-number">1</span>)    <span class="hljs-comment">// äºŒè¿›åˆ¶ - ä¸­</span>    <span class="hljs-comment">// n-1 ç›¸å½“ äºnæŠŠæœ€å³è¾¹çš„1å˜ä¸º0,å…¶åé¢çš„0å˜ä¸º1</span>    <span class="hljs-comment">// nä¸n-1è¿›è¡Œä¸è¿ç®—,1&amp;1=1,å³åªæ”¹å˜äº†æœ€å³è¾¹ç¬¬ä¸€ä¸ª1</span>    <span class="hljs-comment">// 0001000</span>    <span class="hljs-comment">// 0000111</span>    <span class="hljs-comment">// 0000000</span>    <span class="hljs-comment">// å¾ªç¯åˆ é™¤å³è¾¹çš„1</span>  &#125;  <span class="hljs-keyword">return</span> showTimes&#125;</code></pre></div></li><li><p>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤ºæ•°å€¼ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numberCheck</span>(<span class="hljs-params">s</span>)</span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-regexp">/^\s$/</span>.test(s)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Number</span>(s).toString() !== <span class="hljs-string">&#x27;NaN&#x27;</span>&#125;</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é“¾è¡¨</title>
    <link href="/2020/08/27/%E9%93%BE%E8%A1%A8/"/>
    <url>/2020/08/27/%E9%93%BE%E8%A1%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>æ•°ç»„éœ€è¦ç”³è¯·è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé“¾è¡¨å¯ä»¥ä½¿ç”¨â€œé›¶æ•£çš„â€å†…å­˜ç©ºé—´</li><li>æ’å…¥/åˆ é™¤æ—¶é—´å¤æ‚åº¦<code>O(1)</code></li><li>éšæœºè®¿é—®æ—¶é—´å¤æ‚åº¦<code>O(n)</code></li></ul><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><ul><li>é›¶æ•£çš„å†…å­˜å—ç§°ä¸º<code>ç»“ç‚¹</code></li><li>è®°å½•ä¸‹ä¸€ä¸ªç»“ç‚¹åœ°å€çš„æŒ‡é’ˆå«åš<code>åç»§æŒ‡é’ˆnext</code></li><li><code>headNode</code></li><li><code>tailNode.next = null</code></li></ul><h2 id="ç§ç±»"><a href="#ç§ç±»" class="headerlink" title="ç§ç±»"></a>ç§ç±»</h2><ul><li>å•é“¾è¡¨</li><li>å¾ªç¯é“¾è¡¨</li></ul><p>  <code>tailNode.next = headNode</code></p><p>  é€‚åˆå¤„ç†ç¯çŠ¶ç»“æ„çš„æ•°æ®</p><ul><li><p>åŒå‘é“¾è¡¨</p><p>ç»“ç‚¹æ‹¥æœ‰ä¸¤ä¸ªæŒ‡é’ˆ<br><code>curNode.prev</code><br><code>curNode.next</code></p><p><code>O(1)</code>æ—¶é—´å¤æ‚åº¦å³å¯è®¿é—®å‰åºç»“ç‚¹</p></li><li><p>åŒå‘å¾ªç¯é“¾è¡¨</p><p><code>headNode.prev = tailNode</code><br><code>tailNode.next = headNode</code></p></li></ul><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å•å‘é“¾è¡¨</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">linkedList</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;    <span class="hljs-built_in">this</span>.head = <span class="hljs-literal">null</span>;    <span class="hljs-built_in">this</span>.length = <span class="hljs-number">0</span>;  &#125;  <span class="hljs-comment">// è¿½åŠ </span>  <span class="hljs-function"><span class="hljs-title">append</span>(<span class="hljs-params">element</span>)</span> &#123;    <span class="hljs-keyword">const</span> n = <span class="hljs-keyword">new</span> Node(element);    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head;    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.head) &#123;      <span class="hljs-built_in">this</span>.head = n;    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">while</span> (cur.next) &#123;        cur = cur.next;      &#125;      cur.next = n;      <span class="hljs-built_in">this</span>.length++;    &#125;  &#125;  <span class="hljs-comment">// æŸ¥æ‰¾</span>  <span class="hljs-function"><span class="hljs-title">search</span>(<span class="hljs-params">element</span>)</span> &#123;    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head;    <span class="hljs-keyword">if</span> (!cur) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    <span class="hljs-keyword">while</span> (cur) &#123;      <span class="hljs-keyword">if</span> (cur.element === element) &#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;      &#125;      cur = cur.next;    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  &#125;  <span class="hljs-comment">// æ’å…¥</span>  <span class="hljs-comment">// positionä¹‹å‰æ’å…¥æ–°node</span>  <span class="hljs-function"><span class="hljs-title">insert</span>(<span class="hljs-params">position, element</span>)</span> &#123;    <span class="hljs-keyword">if</span> (position &gt;= <span class="hljs-number">0</span> &amp;&amp; position &lt;= <span class="hljs-built_in">this</span>.length) &#123;      <span class="hljs-keyword">let</span> n = <span class="hljs-keyword">new</span> Node(element);      <span class="hljs-keyword">if</span> (position === <span class="hljs-number">0</span>) &#123;        n.next = <span class="hljs-built_in">this</span>.head;        <span class="hljs-built_in">this</span>.head = n;      &#125; <span class="hljs-keyword">else</span> &#123;        <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head,pre        <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;        <span class="hljs-keyword">while</span> (index &lt; position) &#123;          pre = cur;          cur = cur.next;          index++;        &#125;        pre.next = n;        n.next = cur;      &#125;      <span class="hljs-built_in">this</span>.length++;    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;    &#125;  &#125;  <span class="hljs-comment">// åˆ é™¤</span>  <span class="hljs-function"><span class="hljs-title">remove</span>(<span class="hljs-params">element</span>)</span> &#123;    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head,      pre = <span class="hljs-built_in">this</span>.head    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.head) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    <span class="hljs-keyword">while</span> (cur) &#123;      <span class="hljs-keyword">if</span> (cur.element === element) &#123;        cur = cur.next;        pre.next = cur;        <span class="hljs-built_in">this</span>.length --       &#125;      pre = cur      cur = cur.next;    &#125;  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">element</span>)</span> &#123;    <span class="hljs-built_in">this</span>.element = element;    <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>;  &#125;&#125;<span class="hljs-comment">// åŒå‘é“¾è¡¨</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DubLinkedList</span>(<span class="hljs-params">params</span>) </span>&#123;  <span class="hljs-keyword">const</span> Node = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">element</span>) </span>&#123;    <span class="hljs-built_in">this</span>.prev = <span class="hljs-literal">null</span>;    <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>;    <span class="hljs-built_in">this</span>.element = element;  &#125;;  <span class="hljs-built_in">this</span>.head = <span class="hljs-literal">null</span>;  <span class="hljs-built_in">this</span>.tail = <span class="hljs-literal">null</span>;  <span class="hljs-built_in">this</span>.length = <span class="hljs-number">0</span>;  <span class="hljs-built_in">this</span>.append = <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> &#123;    <span class="hljs-keyword">let</span> newNode = <span class="hljs-keyword">new</span> Node(element);    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head;    <span class="hljs-keyword">if</span> (!cur) &#123;      <span class="hljs-built_in">this</span>.head = newNode;      <span class="hljs-built_in">this</span>.tail = newNode;    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">while</span> (cur.next) &#123;        cur = cur.next;      &#125;      cur.next = newNode      newNode.prev = cur      <span class="hljs-built_in">this</span>.tail = newNode    &#125;    <span class="hljs-built_in">this</span>.length++;  &#125;  <span class="hljs-built_in">this</span>.insert = <span class="hljs-function">(<span class="hljs-params">position,element</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(position&gt;=<span class="hljs-number">0</span> &amp;&amp; position &lt;=<span class="hljs-built_in">this</span>.length)&#123;      <span class="hljs-keyword">let</span> newNode = <span class="hljs-keyword">new</span> Node(element)      <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head,pre      <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>      <span class="hljs-keyword">if</span>(position===<span class="hljs-number">0</span>)&#123;        <span class="hljs-comment">//å¤´</span>        <span class="hljs-keyword">if</span>(!cur)&#123;          <span class="hljs-built_in">this</span>.head = newNode;          <span class="hljs-built_in">this</span>.tail = newNode;        &#125;<span class="hljs-keyword">else</span>&#123;          newNode.next = <span class="hljs-built_in">this</span>.head          cur.prev = newNode          <span class="hljs-built_in">this</span>.head = newNode        &#125;      &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(position===<span class="hljs-built_in">this</span>.length)&#123;        <span class="hljs-comment">//å°¾å·´</span>        cur = <span class="hljs-built_in">this</span>.tail        cur.prev = newNode        newNode.next = cur        <span class="hljs-built_in">this</span>.tail = newNode      &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">while</span>(index&lt;position)&#123;          pre = cur          cur = cur.next          index++        &#125;        cur.prev = newNode        pre.next = newNode        newNode.next = cur        newNode.prev = pre      &#125;      <span class="hljs-built_in">this</span>.length ++    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    &#125;  &#125;  <span class="hljs-built_in">this</span>.remove = <span class="hljs-function"><span class="hljs-params">position</span> =&gt;</span> &#123;    <span class="hljs-keyword">if</span>(position&gt;=<span class="hljs-number">0</span> &amp;&amp; position&lt;<span class="hljs-built_in">this</span>.length &amp;&amp; <span class="hljs-built_in">this</span>.length&gt;<span class="hljs-number">0</span>)&#123;      <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head,pre,index = <span class="hljs-number">0</span>      <span class="hljs-keyword">if</span>(position===<span class="hljs-number">0</span>)&#123;        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.length === <span class="hljs-number">1</span>)&#123;          <span class="hljs-built_in">this</span>.head = <span class="hljs-literal">null</span>          <span class="hljs-built_in">this</span>.tail = <span class="hljs-literal">null</span>        &#125;<span class="hljs-keyword">else</span>&#123;          cur = cur.next          cur.prev = <span class="hljs-literal">null</span>          <span class="hljs-built_in">this</span>.head = cur        &#125;      &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(position===<span class="hljs-built_in">this</span>.length-<span class="hljs-number">1</span>)&#123;        cur = <span class="hljs-built_in">this</span>.tail        pre = cur.prev        pre.next = <span class="hljs-literal">null</span>        <span class="hljs-built_in">this</span>.tail = pre      &#125;<span class="hljs-keyword">else</span>&#123;        <span class="hljs-keyword">while</span>(index&lt;position)&#123;          pre = cur          cur = cur.next          index ++        &#125;        cur = cur.next        pre.next = cur        cur.prev = pre      &#125;      <span class="hljs-built_in">this</span>.length --      <span class="hljs-keyword">return</span> cur.element    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>    &#125;  &#125;  <span class="hljs-built_in">this</span>.search = <span class="hljs-function"><span class="hljs-params">element</span> =&gt;</span>&#123;    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">this</span>.head) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head    <span class="hljs-keyword">while</span>(cur)&#123;      <span class="hljs-keyword">if</span>(cur.element === element)&#123;        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>      &#125;      cur = cur.next    &#125;    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  &#125;&#125;</code></pre></div><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><h3 id="æ³¨æ„è¾¹ç•Œæƒ…å†µ"><a href="#æ³¨æ„è¾¹ç•Œæƒ…å†µ" class="headerlink" title="æ³¨æ„è¾¹ç•Œæƒ…å†µ"></a>æ³¨æ„è¾¹ç•Œæƒ…å†µ</h3><ul><li>é“¾è¡¨ä¸ºç©º</li><li>é“¾è¡¨åªæœ‰ä¸€ä¸ªç»“ç‚¹</li><li>é“¾è¡¨åªæœ‰ä¸¤ä¸ªç»“ç‚¹</li><li>å¤„ç†å¤´éƒ¨ç»“ç‚¹å’Œå°¾éƒ¨ç»“ç‚¹</li></ul><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><ul><li>å•é“¾è¡¨åè½¬<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseLinkedList</span>(<span class="hljs-params">head</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!head.next) <span class="hljs-keyword">return</span> head  <span class="hljs-keyword">let</span> pre = <span class="hljs-literal">null</span>  <span class="hljs-keyword">let</span> cur = head  <span class="hljs-keyword">while</span>(cur)&#123;    <span class="hljs-keyword">const</span> n = cur.next    cur.next = pre    pre = cur    cur = n  &#125;  <span class="hljs-keyword">return</span> pre&#125;<span class="hljs-comment">// es6</span><span class="hljs-keyword">let</span> [pre,cur] = [<span class="hljs-literal">null</span>,head]<span class="hljs-keyword">while</span>(cur)&#123;  [cur.next,pre,cur] = [pre,cur,cur.next]&#125;<span class="hljs-keyword">return</span> pre</code></pre></div></li><li>æ£€æµ‹é“¾è¡¨æ˜¯å¦å¾ªç¯<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//</span><span class="hljs-built_in">JSON</span>.stringify() <span class="hljs-comment">//ä¸èƒ½åºåˆ—åŒ–å¾ªç¯é“¾è¡¨</span><span class="hljs-comment">//æ ‡è®°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLoop</span>(<span class="hljs-params">head</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!head) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-keyword">let</span> cur = head  <span class="hljs-keyword">while</span>(cur)&#123;    <span class="hljs-keyword">if</span>(cur.flag) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>    cur.flag = <span class="hljs-literal">true</span>    cur = cur.next  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>&#125;<span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLoop2</span>(<span class="hljs-params">head</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!head || !head.next) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-keyword">let</span> fast = head.next.next  <span class="hljs-keyword">let</span> slow = head.next  <span class="hljs-keyword">while</span>(slow!==fast)&#123;    <span class="hljs-keyword">if</span>(!fast || !fast.next)&#123;      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    &#125;    fast = fast.next.next    slow = slow.next  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>&#125;</code></pre></div></li></ul><ul><li><p>å®ç°LRUç¼“å­˜æ·˜æ±°ç­–ç•¥</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Node</span>(<span class="hljs-params">value</span>)</span>&#123;  <span class="hljs-built_in">this</span>.value = value  <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">LRULinkedList</span>(<span class="hljs-params">maxSize</span>)</span>&#123;  <span class="hljs-built_in">this</span>.maxSize = maxSize  <span class="hljs-built_in">this</span>.head = <span class="hljs-literal">null</span>  <span class="hljs-built_in">this</span>.curSize = <span class="hljs-number">0</span>  <span class="hljs-built_in">this</span>.visit = <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;    <span class="hljs-keyword">const</span> n = <span class="hljs-keyword">new</span> Node(value)    <span class="hljs-keyword">let</span> cur = <span class="hljs-built_in">this</span>.head,pre = <span class="hljs-built_in">this</span>.head    <span class="hljs-keyword">let</span> preCatch,curCatch    <span class="hljs-keyword">if</span>(!cur)&#123;      <span class="hljs-built_in">this</span>.head = n      <span class="hljs-built_in">this</span>.curSize = <span class="hljs-number">1</span>      <span class="hljs-keyword">return</span>     &#125;    <span class="hljs-keyword">if</span>(cur.value===value) <span class="hljs-keyword">return</span>     <span class="hljs-keyword">while</span>(cur)&#123;      <span class="hljs-keyword">if</span>(cur.value === value)&#123;          <span class="hljs-comment">// æ‰¾åˆ°äº†</span>          <span class="hljs-comment">// ä»åŸæ¥ä½ç½®åˆ é™¤å¹¶ä½œä¸ºå¤´</span>          pre.next = cur.next          cur.next = <span class="hljs-built_in">this</span>.head          <span class="hljs-keyword">return</span>      &#125;      preCatch = pre      curCatch = cur      pre = cur      cur = cur.next    &#125;    <span class="hljs-comment">// æ²¡æ‰¾åˆ°</span>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.curSize&lt;maxSize)&#123;      <span class="hljs-comment">// æ’å…¥å¤´éƒ¨</span>      n.next = <span class="hljs-built_in">this</span>.head      <span class="hljs-built_in">this</span>.head = n      <span class="hljs-built_in">this</span>.curSize ++    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-comment">// åˆ é™¤å°¾éƒ¨ç»“ç‚¹</span>      <span class="hljs-comment">// æ’å…¥å¤´éƒ¨</span>      preCatch.next = <span class="hljs-literal">null</span>      curCatch.next = <span class="hljs-built_in">this</span>.head      <span class="hljs-built_in">this</span>.head = curCatch    &#125;  &#125;&#125;</code></pre></div></li><li><p>å›æ–‡é“¾è¡¨</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆæ‰¾å‡ºä¸­ç‚¹</span><span class="hljs-comment">// ä¸€åŠçš„é“¾è¡¨ä¸å¦ä¸€åŠé“¾è¡¨ç»„æˆçš„æ ˆå¯¹æ¯”</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPalindrome</span>(<span class="hljs-params">head</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!head || !head.next) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  <span class="hljs-keyword">const</span> stack = []  <span class="hljs-keyword">let</span> slow = head  <span class="hljs-keyword">let</span> fast = head  <span class="hljs-keyword">while</span>(fast &amp;&amp; fast.next &amp;&amp; fast.next.next)&#123;    slow = slow.next    fast = fast.next.next  &#125;  <span class="hljs-keyword">let</span> mid  = slow  <span class="hljs-keyword">while</span> (mid.next) &#123;    stack.push(mid.next)    mid = mid.next  &#125;  <span class="hljs-keyword">while</span>(stack.length&gt;<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">if</span>(head.val !== stack.pop().val) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    head = head.next  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>&#125;<span class="hljs-comment">// æˆ–è€…å°†é“¾è¡¨è½¬æ•°ç»„ï¼Œå¯¹æ’æŒ‡é’ˆ</span><span class="hljs-comment">// å¦ä¸€ç§æ˜¯åˆ°åˆ°ä¸­ç‚¹ååè½¬é“¾è¡¨ï¼Œä¸ä½¿ç”¨è¾…åŠ©æ ˆ</span></code></pre></div></li><li><p>åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 1-&gt;2-&gt;4,1-&gt;3-&gt;4</span><span class="hljs-comment">// 1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeLinkedList</span>(<span class="hljs-params">l1,l2</span>)</span>&#123;  <span class="hljs-keyword">if</span>(l1===<span class="hljs-literal">null</span>)&#123;    <span class="hljs-keyword">return</span> l2  &#125;  <span class="hljs-keyword">if</span>(l2===<span class="hljs-literal">null</span>)&#123;    <span class="hljs-keyword">return</span> l1  &#125;  <span class="hljs-keyword">if</span>(l1.value&lt;=l2.value)&#123;    l1.next = mergeLinkedList(l1.next,l2)    <span class="hljs-keyword">return</span> l1  &#125;<span class="hljs-keyword">else</span>&#123;    l2.next = mergeLinkedList(l2.next,l1)    <span class="hljs-keyword">return</span> l2  &#125;&#125;<span class="hljs-comment">// æˆ–è€…è ¢åŠæ³•</span><span class="hljs-keyword">var</span> mergeTwoLists = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">l1, l2</span>) </span>&#123;   <span class="hljs-keyword">const</span> n = <span class="hljs-keyword">new</span> ListNode(-<span class="hljs-number">1</span>)   <span class="hljs-keyword">let</span> cur = n   <span class="hljs-keyword">while</span>(l1&amp;&amp;l2)&#123;       <span class="hljs-keyword">if</span>(l1.val&lt;=l2.val)&#123;           cur.next = l1           l1 = l1.next       &#125;<span class="hljs-keyword">else</span>&#123;           cur.next = l2           l2 = l2.next       &#125;       cur = cur.next   &#125;   <span class="hljs-comment">// æœ‰ä¸€æ¡åˆ°å¤´å’¯</span>   <span class="hljs-keyword">if</span>(l1)&#123;       cur.next = l1   &#125;<span class="hljs-keyword">else</span>&#123;       cur.next = l2   &#125;   <span class="hljs-keyword">return</span> n.next&#125;;</code></pre></div></li><li><p>æŸ¥æ‰¾ä¸¤ä¸ªé“¾è¡¨çš„å…¬å…±èµ·å§‹ç‚¹</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commonPrefix</span>(<span class="hljs-params">headA,headB</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!headA || !headB) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>  <span class="hljs-keyword">while</span>(headA)&#123;    headA.flag = <span class="hljs-literal">true</span>    headA = headA.next  &#125;  <span class="hljs-keyword">while</span>(headB)&#123;    <span class="hljs-keyword">if</span>(headB.flag) <span class="hljs-keyword">return</span> headB    headB.flag =<span class="hljs-literal">true</span>    headB = headB.next  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">commonPrefix2</span>(<span class="hljs-params">headA,headB</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!headA || !headB) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>  <span class="hljs-comment">// è¿ä¸ªé“¾è¡¨åŒæ—¶ç§»åŠ¨æŒ‡é’ˆ</span>  <span class="hljs-keyword">let</span> n1 = headA  <span class="hljs-keyword">let</span> n2 = headB  <span class="hljs-keyword">while</span>(n1 || n2)&#123;    <span class="hljs-keyword">if</span>(n1===n2) <span class="hljs-keyword">return</span> n1    <span class="hljs-comment">//æŒ‡é’ˆåˆ°å¤´åè·³åˆ°å¯¹é¢çš„å¼€å¤´</span>    n1 = n1 === <span class="hljs-literal">null</span> ? headB : n1.next    n2 = n2 === <span class="hljs-literal">null</span> ? headA : n2.next  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>&#125;</code></pre></div></li><li><p>åˆ é™¤ç‰¹å®šå€¼é“¾è¡¨èŠ‚ç‚¹</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deleteNode</span>(<span class="hljs-params">head,val</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!head) <span class="hljs-keyword">return</span>   <span class="hljs-keyword">if</span>(head.val === val)&#123;    <span class="hljs-keyword">return</span> head.next  &#125;  head.next = deleteNode(head.next,val)  <span class="hljs-keyword">return</span> head&#125;</code></pre></div></li><li><p>è¿”å›é“¾è¡¨ä¸­ç‰¹å®šä½ç½®èŠ‚ç‚¹</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// è®¡æ•°æ³•</span><span class="hljs-comment">// ä¸€éç®—é“¾è¡¨é•¿åº¦</span><span class="hljs-comment">// ä¸€éæ ¹æ®ä½ç½®.next</span><span class="hljs-comment">// è®¡æ•°æ³•é…åˆmap</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">head,k</span>)</span>&#123;  <span class="hljs-keyword">let</span> pos = <span class="hljs-number">1</span>  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  <span class="hljs-keyword">while</span>(head)&#123;    map.set(pos++,head)    head = head.next  &#125;  <span class="hljs-keyword">return</span> map.get(pos-k)&#125;<span class="hljs-comment">// åŒæŒ‡é’ˆ</span><span class="hljs-comment">// è¿”å›å€’æ•°kä½ç½®</span><span class="hljs-comment">//  * Definition for singly-linked list.</span><span class="hljs-comment">//  * function ListNode(val) &#123;</span><span class="hljs-comment">//  *     this.val = val;</span><span class="hljs-comment">//  *     this.next = null;</span><span class="hljs-comment">//  * &#125;</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getKthFromEnd</span>(<span class="hljs-params">head,k</span>)</span>&#123;  <span class="hljs-keyword">let</span> fast = head  <span class="hljs-keyword">let</span> slow = head  <span class="hljs-keyword">let</span> t = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(fast.next)&#123;    fast = fast.next    t ++    <span class="hljs-keyword">if</span>(t&gt;=k) slow = slow.next  &#125;  <span class="hljs-keyword">return</span> slow&#125;</code></pre></div></li><li><p>å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸é‡å¤å­—ç¬¦</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">//map</span><span class="hljs-comment">//å¾ªç¯ä¸¤æ¬¡</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">firstUniqChar</span>(<span class="hljs-params">s</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!s) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>  <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> [i,v] <span class="hljs-keyword">of</span> <span class="hljs-built_in">Array</span>.from(s).entries())&#123;    <span class="hljs-keyword">if</span>(map.has(v))&#123;      map.set(v,-<span class="hljs-number">1</span>)    &#125;<span class="hljs-keyword">else</span>&#123;      map.set(v,i)    &#125;  &#125;  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> map.keys())&#123;    <span class="hljs-keyword">if</span>(map.get(key)!==-<span class="hljs-number">1</span>)&#123;      <span class="hljs-keyword">return</span> key    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27; &#x27;</span>&#125;<span class="hljs-comment">//</span>...indexOf===lastIndexOf...</code></pre></div></li><li><p>å­—ç¬¦ä¸²èƒ½å¦æ„æˆå›æ–‡</p></li></ul><p>å­—ç¬¦é¡ºåºä¿®æ”¹åèƒ½å¦å›æ–‡<br>ç›¸å½“äºéå›æ–‡å­—ç¬¦æœ€å¤šåªæœ‰ä¸€ä¸ª</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canPermutePalindrome</span>(<span class="hljs-params">s</span>)</span>&#123;  <span class="hljs-comment">// map // objectéƒ½è¡Œ</span>&#125;<span class="hljs-keyword">var</span> canPermutePalindrome = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) </span>&#123;  <span class="hljs-keyword">const</span> obj = &#123;&#125;  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i&lt;s.length ;i++)&#123;    <span class="hljs-keyword">const</span> str = s[i]    <span class="hljs-built_in">console</span>.log(str);    <span class="hljs-keyword">if</span>(obj[str])&#123;      <span class="hljs-built_in">console</span>.log(<span class="hljs-number">6</span>);      <span class="hljs-keyword">delete</span> obj[str]    &#125;<span class="hljs-keyword">else</span>&#123;      <span class="hljs-comment">// ä½¿ç”¨objectæ—¶ï¼Œä¸Šé¢çš„if(obj[str])ä¼šå’Œè¿™é‡Œå†²çª</span>      <span class="hljs-comment">// åˆšå¥½è®¾ç½®obj[str] = 0</span>      <span class="hljs-comment">// ifåˆ¤æ–­ä¸æˆç«‹</span>      obj[str] = <span class="hljs-number">1</span>    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.keys(obj).length &lt;= <span class="hljs-number">1</span>&#125;;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾…æ•´ç†çš„jsç‰‡æ®µ</title>
    <link href="/2020/08/17/js%E7%89%87%E6%AE%B5/"/>
    <url>/2020/08/17/js%E7%89%87%E6%AE%B5/</url>
    
    <content type="html"><![CDATA[<ul><li>å­—æ¯çš„æ‰€æœ‰ç»„åˆ</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> anagrams = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> &#123;  <span class="hljs-keyword">if</span>(str.length&lt;=<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> str.length===<span class="hljs-number">2</span> ? [str , str[<span class="hljs-number">1</span>] + str[<span class="hljs-number">0</span>]] :str  <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨reduceçš„ç¬¬ä¸‰ä¸ªå‚æ•°indexï¼Œæ­£åœ¨å¤„ç†çš„å…ƒç´ </span>  <span class="hljs-comment">// å¦‚æœæä¾›äº†initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ä»ç´¢å¼•1èµ·å§‹ã€‚</span>  <span class="hljs-keyword">return</span> str.split(<span class="hljs-string">&#x27;&#x27;</span>).reduce(<span class="hljs-function">(<span class="hljs-params">acc,cur,index</span>)=&gt;</span>&#123;    <span class="hljs-keyword">let</span> other = str.slice(<span class="hljs-number">0</span>,index)+str.slice(index+<span class="hljs-number">1</span>)    <span class="hljs-comment">// otherä¸ºé™¤äº†å½“å‰å¤„ç†å…ƒç´ å¤–çš„å­—æ¯</span>    <span class="hljs-comment">// a bcd =&gt;</span>    <span class="hljs-comment">// b cd =&gt; bcd bdc</span>    <span class="hljs-comment">// c bd =&gt; cbd cdb</span>    <span class="hljs-comment">// d bc =&gt; dbc dcb</span>    <span class="hljs-comment">// b...</span>    <span class="hljs-keyword">return</span> acc.concat(anagrams(other).map(<span class="hljs-function"><span class="hljs-params">char</span>=&gt;</span>cur+char))    <span class="hljs-comment">// é€’å½’è‡³ä¸¤ä½æ•°æ•°ç»„é¢ å€’æ’åº,å¹¶å°†æ‰€æœ‰å¯èƒ½ä¸å½“å‰å¤„ç†å…ƒç´ ç»„åˆ</span>  &#125;,[])  <span class="hljs-comment">// æŒ‡å®šinitialValue</span>&#125;anagrams(<span class="hljs-string">&#x27;abcd&#x27;</span>) =&gt; [  <span class="hljs-string">&#x27;abcd&#x27;</span>, <span class="hljs-string">&#x27;abdc&#x27;</span>, <span class="hljs-string">&#x27;acbd&#x27;</span>,  <span class="hljs-string">&#x27;acdb&#x27;</span>, <span class="hljs-string">&#x27;adbc&#x27;</span>, <span class="hljs-string">&#x27;adcb&#x27;</span>,  <span class="hljs-string">&#x27;bacd&#x27;</span>, <span class="hljs-string">&#x27;badc&#x27;</span>, <span class="hljs-string">&#x27;bcad&#x27;</span>,  <span class="hljs-string">&#x27;bcda&#x27;</span>, <span class="hljs-string">&#x27;bdac&#x27;</span>, <span class="hljs-string">&#x27;bdca&#x27;</span>,  <span class="hljs-string">&#x27;cabd&#x27;</span>, <span class="hljs-string">&#x27;cadb&#x27;</span>, <span class="hljs-string">&#x27;cbad&#x27;</span>,  <span class="hljs-string">&#x27;cbda&#x27;</span>, <span class="hljs-string">&#x27;cdab&#x27;</span>, <span class="hljs-string">&#x27;cdba&#x27;</span>,  <span class="hljs-string">&#x27;dabc&#x27;</span>, <span class="hljs-string">&#x27;dacb&#x27;</span>, <span class="hljs-string">&#x27;dbac&#x27;</span>,  <span class="hljs-string">&#x27;dbca&#x27;</span>, <span class="hljs-string">&#x27;dcab&#x27;</span>, <span class="hljs-string">&#x27;dcba&#x27;</span>]</code></pre></div><ul><li>å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> capitalizeWords = <span class="hljs-function">(<span class="hljs-params">words</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> words.replace(<span class="hljs-regexp">/\b[a-z]/g</span>, <span class="hljs-function">(<span class="hljs-params">word</span>) =&gt;</span> word.toUpperCase());  <span class="hljs-comment">// \båŒ¹é…ä½œä¸ºå•è¯è¾¹ç•Œçš„é‚£ä¸ªå­—ç¬¦</span>  <span class="hljs-comment">// å³åŒ¹é…åˆ°äº†æ¯ä¸€ä¸ªå•è¯çš„é¦–å­—æ¯</span>&#125;;</code></pre></div><ul><li>æ ¼å¼åŒ–åªæœ‰é¦–å­—æ¯å¤§å†™</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> capitalize = <span class="hljs-function">(<span class="hljs-params">str, lowerRest = <span class="hljs-literal">false</span></span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> (    str.slice(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toUpperCase() +    (lowerRest ? str.slice(<span class="hljs-number">1</span>).toLowerCase() : str.slice(<span class="hljs-number">1</span>))  );&#125;;</code></pre></div><ul><li>å‡ºç°æ¬¡æ•°</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> countOccurrences = <span class="hljs-function">(<span class="hljs-params">arr, value</span>) =&gt;</span>  arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, v</span>) =&gt;</span> (v === value ? a + <span class="hljs-number">1</span> : a + <span class="hljs-number">0</span>), <span class="hljs-number">0</span>);<span class="hljs-comment">// countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span></code></pre></div><ul><li>Deep flatten array</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> deepFlatten = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span>  arr.reduce(<span class="hljs-function">(<span class="hljs-params">a, v</span>) =&gt;</span> a.concat(<span class="hljs-built_in">Array</span>.isArray(v) ? deepFlatten(v) : v), []);<span class="hljs-comment">// deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span></code></pre></div><ul><li>bifurcate</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> bifurcate = <span class="hljs-function">(<span class="hljs-params">arr, filter</span>) =&gt;</span>  arr.reduce(<span class="hljs-function">(<span class="hljs-params">acc, val, i</span>) =&gt;</span> (acc[filter[i] ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>].push(val), acc), [    [],    [],  ]);bifurcate([<span class="hljs-string">&quot;beep&quot;</span>, <span class="hljs-string">&quot;boop&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>], [<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>]);<span class="hljs-comment">// [ [&#x27;beep&#x27;, &#x27;boop&#x27;, &#x27;bar&#x27;], [&#x27;foo&#x27;] ]</span></code></pre></div><ul><li>é˜¶ä¹˜</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> factorial = <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> (n &lt;= <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : n * factorial(n - <span class="hljs-number">1</span>));<span class="hljs-comment">// factorial(6) -&gt; 720</span></code></pre></div><ul><li>æ–æ³¢é‚£å¥‘æ•°ç»„ç”Ÿæˆå™¨</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fibonacci = <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span>  <span class="hljs-built_in">Array</span>(n)    .fill(<span class="hljs-number">0</span>)    .reduce(      (acc, val, i) =&gt; acc.concat(i &gt; <span class="hljs-number">1</span> ? acc[i - <span class="hljs-number">1</span>] + acc[i - <span class="hljs-number">2</span>] : i),      []    );<span class="hljs-comment">// fibonacci(5) -&gt; [0,1,1,2,3]</span><span class="hljs-function"><span class="hljs-keyword">function</span>* <span class="hljs-title">fib</span>(<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-keyword">let</span> [pre, cur] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>];  <span class="hljs-keyword">for</span> (;;) &#123;    <span class="hljs-comment">// æ­»å¾ªç¯çš„å¦ä¸€ç§å†™æ³•</span>    <span class="hljs-comment">// while(true)</span>    [pre, cur] = [cur, cur + pre];    <span class="hljs-keyword">yield</span> cur;  &#125;&#125;<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x <span class="hljs-keyword">of</span> fib()) &#123;  <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">100</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-built_in">console</span>.log(x);&#125;</code></pre></div><ul><li>æ•°ç»„ä¸­å”¯ä¸€å€¼</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> filterNonUnique = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span>  arr.filter(<span class="hljs-function">(<span class="hljs-params">i</span>) =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i));<span class="hljs-comment">// filterNonUnique([1,2,2,3,4,4,5]) -&gt; [1,3,5]</span></code></pre></div><ul><li>æœ€å¤§å…¬çº¦æ•°ï¼ˆGCDï¼‰</li></ul><p>ä½¿ç”¨é€’å½’ã€‚åŸºæœ¬æƒ…å†µæ˜¯å½“ y ç­‰äº 0 æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å› xã€‚å¦åˆ™ï¼Œè¿”å› y çš„ GCD å’Œ x / y çš„å…¶ä½™éƒ¨åˆ†ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> gcd = <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> (!y ? x : gcd(y, x % y));<span class="hljs-comment">// gcd (8, 36) -&gt; 4</span></code></pre></div><ul><li>èŒƒå›´å†…ç”Ÿæˆæ•°ç»„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> initializeArrayRange = <span class="hljs-function">(<span class="hljs-params">end, start = <span class="hljs-number">0</span></span>) =&gt;</span>  <span class="hljs-built_in">Array</span>.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">Array</span>(end - start)).map(<span class="hljs-function">(<span class="hljs-params">v, i</span>) =&gt;</span> i + start);<span class="hljs-comment">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span></code></pre></div><ul><li>function è®¡æ—¶</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> timeTaken = <span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> &#123;  <span class="hljs-built_in">console</span>.time(<span class="hljs-string">&quot;timeTaken&quot;</span>);  <span class="hljs-keyword">const</span> r = callback();  <span class="hljs-built_in">console</span>.timeEnd(<span class="hljs-string">&quot;timeTaken&quot;</span>);  <span class="hljs-keyword">return</span> r;&#125;;<span class="hljs-comment">// timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span><span class="hljs-comment">// (logged): timeTaken: 0.02099609375ms</span></code></pre></div><ul><li>æ‰“ä¹±æ•°ç»„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> shuffle = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> arr.sort(<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">Math</span>.random() - <span class="hljs-number">0.5</span>);<span class="hljs-comment">// shuffle([1,2,3]) -&gt; [2,3,1]</span></code></pre></div><ul><li>RGB è½¬åå…­è¿›åˆ¶</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> rgbToHex = <span class="hljs-function">(<span class="hljs-params">r, g, b</span>) =&gt;</span>  ((r &lt;&lt; <span class="hljs-number">16</span>) + (g &lt;&lt; <span class="hljs-number">8</span>) + b).toString(<span class="hljs-number">16</span>).padStart(<span class="hljs-number">6</span>, <span class="hljs-string">&quot;0&quot;</span>);<span class="hljs-comment">// rgbToHex(255, 165, 1) -&gt; &#x27;ffa501&#x27;</span></code></pre></div><ul><li>å­—ç¬¦ä¸²æŒ‰å­—æ¯æ’åº</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> sortCharactersInString = <span class="hljs-function">(<span class="hljs-params">str</span>) =&gt;</span>  str    .split(<span class="hljs-string">&quot;&quot;</span>)    .sort(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.localeCompare(b))    .join(<span class="hljs-string">&quot;&quot;</span>);<span class="hljs-comment">// sortCharactersInString(&#x27;cabbage&#x27;) -&gt; &#x27;aabbceg&#x27;</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•é¢˜</title>
    <link href="/2020/08/02/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    <url>/2020/08/02/%E7%AE%97%E6%B3%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<ul><li><p>ä¸¤æ•°ä¹‹åˆ</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">arr,target</span>)</span>&#123;  <span class="hljs-keyword">let</span> res = []  <span class="hljs-keyword">let</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  <span class="hljs-comment">// ä½¿ç”¨æ•°å€¼-&gt;ç´¢å¼•å»ºç«‹map</span>  <span class="hljs-comment">// æ¯æ¬¡å¾ªç¯è®¡ç®—å¾—å‡ºå½“å‰å·®å€¼</span>  <span class="hljs-comment">// åœ¨mapä¸­æŸ¥æ‰¾è¿™ä¸ªå·®å€¼æ—¢èƒ½å¾—å‡ºç´¢å¼•</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i&lt;arr.length;i++)&#123;    <span class="hljs-keyword">let</span> k = target - arr[i]    <span class="hljs-keyword">if</span>(map.has(k))&#123;      res.push([map.get(k),i])    &#125;    map.set(arr[i],i)  &#125;  <span class="hljs-keyword">return</span> res.length === <span class="hljs-number">1</span> ? res[<span class="hljs-number">0</span>] : res&#125;</code></pre></div></li><li><p>æ’åºæ•°ç»„çš„ä¸¤æ•°ä¹‹å’Œ</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">twoSum</span>(<span class="hljs-params">nums,target</span>)</span>&#123;  <span class="hljs-keyword">let</span> l = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> r = nums.length-<span class="hljs-number">1</span>  <span class="hljs-keyword">while</span>(l&lt;r)&#123;    <span class="hljs-keyword">const</span> curSum = nums[l]+nums[r]    <span class="hljs-keyword">if</span>(curNum === target) <span class="hljs-keyword">return</span> [nums[l],nums[r]]    <span class="hljs-keyword">if</span>(curNum&gt;target)&#123;      r --    &#125;<span class="hljs-keyword">else</span>&#123;      l ++    &#125;  &#125;  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>&#125;</code></pre></div></li></ul><ul><li><p>ä¸‰æ•°ä¹‹åˆ</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">threeSum</span>(<span class="hljs-params">arr,target</span>)</span>&#123;  <span class="hljs-keyword">let</span> res = []  <span class="hljs-keyword">let</span> len = arr.length  <span class="hljs-keyword">if</span>(len&lt;<span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> res  arr = arr.sort(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>a-b)  <span class="hljs-comment">// æŒ‰å¤§å°æ’åº</span>  <span class="hljs-comment">// å¼€å§‹å¾ªç¯</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span> ; i&lt; len;i++)&#123;    <span class="hljs-keyword">if</span>(arr[i]&gt;=target) <span class="hljs-keyword">break</span>    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå€¼å°±å¤§äºtargetåé¢ä¸ç”¨æƒ³äº†</span>    <span class="hljs-keyword">if</span>(arr[i] === arr[i-<span class="hljs-number">1</span>]) <span class="hljs-keyword">continue</span>    <span class="hljs-comment">// è·³è¿‡é‡å¤çš„å€¼</span>    <span class="hljs-keyword">let</span> first = i,    second = i+<span class="hljs-number">1</span>,    third = len-<span class="hljs-number">1</span>    <span class="hljs-keyword">while</span>(second&lt;third)&#123;      <span class="hljs-keyword">const</span> sum = arr[first]+arr[second]+arr[third]      <span class="hljs-keyword">if</span>(sum===target)&#123;        res.push([arr[first],arr[second],arr[third]])        second++        third--        <span class="hljs-comment">// ç§»åŠ¨ä¸€æ¬¡æŒ‡é’ˆå†è·³è¿‡é‡å¤é¡¹</span>        <span class="hljs-keyword">while</span>(arr[second]===arr[second-<span class="hljs-number">1</span>])&#123;          second ++        &#125;        <span class="hljs-keyword">while</span>(arr[third]===arr[third+<span class="hljs-number">1</span>])&#123;          third --        &#125;      &#125;      <span class="hljs-comment">//ç§»åŠ¨æŒ‡é’ˆ</span>      <span class="hljs-keyword">if</span>(sum&gt;target) third --      <span class="hljs-keyword">if</span>(sum&lt;target) second ++    &#125;  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li><li><p>æœ€å¤§é¢ç§¯</p><p>  ç»™å®šæ•°ç»„ï¼ŒæŒ‰æ•°ç»„indexä¸ºxè½´åæ ‡,valueä¸ºyè½´åæ ‡åœ¨äºŒçº¬åæ ‡ç³»ç”»çº¿ï¼Œè¿æ¥å“ªä¸¤æ¡çº¿æ—¶å¾—åˆ°æœ€å¤§é¢ç§¯</p><blockquote><p>é¢ç§¯ = ä¸¤ç›´çº¿ä¸­è¾ƒçŸ­çš„é«˜åº¦ * ä¸¤çº¿é—´è·ç¦»</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxArea</span>(<span class="hljs-params">height</span>)</span>&#123;  <span class="hljs-keyword">let</span> l = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> r = height.length - <span class="hljs-number">1</span>  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(l&lt;r)&#123;    res = <span class="hljs-built_in">Math</span>.max(res,(r-l)*<span class="hljs-built_in">Math</span>.min(height[l],height[r]))    <span class="hljs-keyword">if</span>(height[l]&lt;height[r])&#123;      l++    &#125;<span class="hljs-keyword">else</span>&#123;      r--    &#125;  &#125;  <span class="hljs-keyword">return</span> res &#125;</code></pre></div></blockquote></li><li><p>åˆ é™¤æ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ï¼Œä¸èƒ½ä½¿ç”¨é¢å¤–ç©ºé—´ï¼Œè¿”å›ä¸é‡å¤çš„é•¿åº¦</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeDuplicates</span>(<span class="hljs-params">arr</span>)</span>&#123;  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> len = arr.length  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>;j&lt;len;j++)&#123;    <span class="hljs-keyword">if</span>(arr[j] !== arr[j-<span class="hljs-number">1</span>])&#123;      arr[++i] = arr[j]    &#125;  &#125;  <span class="hljs-keyword">return</span> i+<span class="hljs-number">1</span>&#125;</code></pre></div></li><li><p>è®¾è®¡ä¸€ä¸ªæ”¯æŒåœ¨å¹³å‡æ—¶é—´å¤æ‚åº¦ O(1) ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript">insert(val) ï¼šå½“å…ƒç´  val ä¸å­˜åœ¨æ—¶ï¼Œå‘é›†åˆä¸­æ’å…¥è¯¥é¡¹ã€‚remove(val) ï¼šå…ƒç´  val å­˜åœ¨æ—¶ï¼Œä»é›†åˆä¸­ç§»é™¤è¯¥é¡¹ã€‚getRandom ï¼šéšæœºè¿”å›ç°æœ‰é›†åˆä¸­çš„ä¸€é¡¹ã€‚æ¯ä¸ªå…ƒç´ åº”è¯¥æœ‰ ç›¸åŒçš„æ¦‚ç‡ è¢«è¿”å›ã€‚ç¤ºä¾‹ :<span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„é›†åˆã€‚</span>RandomizedSet randomSet = <span class="hljs-keyword">new</span> RandomizedSet();<span class="hljs-comment">// å‘é›†åˆä¸­æ’å…¥ 1 ã€‚è¿”å› true è¡¨ç¤º 1 è¢«æˆåŠŸåœ°æ’å…¥ã€‚</span>randomSet.insert(<span class="hljs-number">1</span>);<span class="hljs-comment">// è¿”å› false ï¼Œè¡¨ç¤ºé›†åˆä¸­ä¸å­˜åœ¨ 2 ã€‚</span>randomSet.remove(<span class="hljs-number">2</span>);<span class="hljs-comment">// å‘é›†åˆä¸­æ’å…¥ 2 ã€‚è¿”å› true ã€‚é›†åˆç°åœ¨åŒ…å« [1,2] ã€‚</span>randomSet.insert(<span class="hljs-number">2</span>);<span class="hljs-comment">// getRandom åº”éšæœºè¿”å› 1 æˆ– 2 ã€‚</span>randomSet.getRandom();<span class="hljs-comment">// ä»é›†åˆä¸­ç§»é™¤ 1 ï¼Œè¿”å› true ã€‚é›†åˆç°åœ¨åŒ…å« [2] ã€‚</span>randomSet.remove(<span class="hljs-number">1</span>);<span class="hljs-comment">// 2 å·²åœ¨é›†åˆä¸­ï¼Œæ‰€ä»¥è¿”å› false ã€‚</span>randomSet.insert(<span class="hljs-number">2</span>);<span class="hljs-comment">// ç”±äº 2 æ˜¯é›†åˆä¸­å”¯ä¸€çš„æ•°å­—ï¼ŒgetRandom æ€»æ˜¯è¿”å› 2 ã€‚</span>randomSet.getRandom();<span class="hljs-comment">// mapæ–¹æ³•</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RandomSet</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  <span class="hljs-built_in">this</span>.values = []&#125;RandomSet.prototype.insert = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.map.has(val)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-built_in">this</span>.map.set(val,values.length)  <span class="hljs-comment">// æ’å…¥åçš„ç´¢å¼•ï¼ˆæ’å…¥å‰çš„æ•°ç»„é•¿åº¦ï¼‰</span>  <span class="hljs-built_in">this</span>.values.push(val)  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>&#125;RandomSet.prototype.remove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">this</span>.map.has(val)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">this</span>.map.get(val)  <span class="hljs-comment">// åˆ¤æ–­åœ¨å°¾éƒ¨</span>  <span class="hljs-comment">// ä¼¼ä¹ä¹Ÿå¯ä»¥ç”¨å¤´éƒ¨</span>  <span class="hljs-keyword">if</span>(index === <span class="hljs-built_in">this</span>.values.length - <span class="hljs-number">1</span>)&#123;    <span class="hljs-built_in">this</span>.map.delete(value)    <span class="hljs-built_in">this</span>.values.pop()  &#125;<span class="hljs-keyword">else</span>&#123;    <span class="hljs-comment">// ä¸åœ¨å°¾éƒ¨</span>    <span class="hljs-comment">// valuesç”¨å°¾éƒ¨å…ƒç´ å¡«å……è¯¥ä½ç½®</span>    <span class="hljs-comment">// mapä¸­ä¿®æ”¹ç´¢å¼•</span>    <span class="hljs-keyword">let</span> last = <span class="hljs-built_in">this</span>.values.pop()    <span class="hljs-comment">// èµ‹å€¼</span>    <span class="hljs-built_in">this</span>.values[index] = last    <span class="hljs-built_in">this</span>.map.set(last,index)    <span class="hljs-built_in">this</span>.map.delete(val)  &#125;  <span class="hljs-keyword">return</span> val&#125;RandomSet.prototype.getRandom = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">let</span> len = <span class="hljs-built_in">this</span>.values.length  <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*len)  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.values[index]&#125;<span class="hljs-comment">// setæ–¹æ³•</span><span class="hljs-comment">// setæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆ</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">RandomSet</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.data = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()&#125;RandomizedSet.prototype.insert = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.data.has(val)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-built_in">this</span>.set.add(val)  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>&#125;RandomizedSet.prototype.remove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>)</span>&#123;  <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">this</span>.data.has(val)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <span class="hljs-built_in">this</span>.set.delete(val)  <span class="hljs-keyword">return</span> val&#125;RandomizedSet.prototype.getRandom = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-keyword">let</span> len = <span class="hljs-built_in">this</span>.values.length  <span class="hljs-keyword">let</span> index = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*len)  <span class="hljs-keyword">return</span> [...this.data][index]&#125;</code></pre></div></li></ul><ul><li>åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// arr1 = [1,2,5]  m=3</span><span class="hljs-comment">// arr2 = [2,3,4]  n=3</span><span class="hljs-comment">// å‡è®¾arr1èƒ½è£…ä¸‹arr2</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mergeArr</span>(<span class="hljs-params">arr1,m,arr2,n</span>)</span>&#123;  <span class="hljs-keyword">let</span> index1 = m-<span class="hljs-number">1</span>  <span class="hljs-keyword">let</span> index2 = n-<span class="hljs-number">1</span>  <span class="hljs-keyword">let</span> index = m+n-<span class="hljs-number">1</span>  <span class="hljs-keyword">while</span>(index&gt;=<span class="hljs-number">0</span>)&#123;    <span class="hljs-keyword">if</span>(index2&lt;<span class="hljs-number">0</span>)&#123;      <span class="hljs-comment">// arr2è€—å°½</span>      <span class="hljs-comment">// å‰©ä¸‹ä¿æŒarr1çš„å€¼</span>      arr1[index--] = arr2[index2--]      <span class="hljs-keyword">continue</span>    &#125;    arr1[index--] = arr1[index1]&gt;=arr2[index2]?arr1[index1--]:arr2[index2--]  &#125;&#125;</code></pre></div></li></ul><ul><li>è®¡ç®—ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">intersection</span>(<span class="hljs-params">arr1,arr2</span>)</span>&#123;  <span class="hljs-keyword">return</span> [...new <span class="hljs-built_in">Set</span>(arr1.filter(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>arr2.includes(item)))]&#125;</code></pre></div></li></ul><ul><li><p>è®¡ç®—å¤šä¸ªæ•°ç»„çš„äº¤é›†</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">intersection</span>(<span class="hljs-params">...arrs</span>)</span>&#123;  <span class="hljs-keyword">if</span>(arrs.length===<span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> []  <span class="hljs-keyword">if</span>(arrs.length===<span class="hljs-number">1</span>)<span class="hljs-keyword">return</span> arrs[<span class="hljs-number">0</span>]  <span class="hljs-keyword">return</span> [...new <span class="hljs-built_in">Set</span>(arrs.reduce(<span class="hljs-function">(<span class="hljs-params">pre,next</span>)=&gt;</span>&#123;    <span class="hljs-comment">// reduceç´¯åŠ å™¨ï¼Œæ¯ä¸€æ¬¡çš„returnä½œä¸ºä¸‹ä¸€æ¬¡ç´¯åŠ çš„preï¼Œä½ å’‹è¿™ä¹Ÿèƒ½å¿˜</span>    <span class="hljs-comment">// åè¿˜èƒ½æ·»åŠ å‚æ•°æ‰‹åŠ¨åˆ¶å®šç¬¬ä¸€æ¬¡ç´¯åŠ çš„preå€¼</span>    <span class="hljs-keyword">return</span> pre.filter(<span class="hljs-function"><span class="hljs-params">item</span>=&gt;</span>next.includes(item))  &#125;))]&#125;</code></pre></div></li><li><p>å®ç°ä¸€ä¸ªfillå‡½æ•°</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// fill(3,4) =&gt; [4,4,4]</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myFill</span>(<span class="hljs-params">num,size</span>)</span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">acc,size</span>)=&gt;</span>&#123;    <span class="hljs-keyword">if</span>(--size&gt;<span class="hljs-number">0</span>)&#123;      acc = acc.concat(num)    &#125;    <span class="hljs-keyword">return</span> acc  ,[]&#125;&#125;</code></pre></div></li></ul><ul><li><p>å¤§æ•°ç›¸åŠ (å¯ä»¥è¾“å‡ºå­—ç¬¦ä¸²)</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bigAdd</span>(<span class="hljs-params">x, y</span>) </span>&#123;  <span class="hljs-keyword">if</span>(x===<span class="hljs-string">&#x27;0&#x27;</span>)<span class="hljs-keyword">return</span> y  <span class="hljs-keyword">if</span>(y===<span class="hljs-string">&#x27;0&#x27;</span>)<span class="hljs-keyword">return</span> x  <span class="hljs-keyword">let</span> num1;  <span class="hljs-keyword">let</span> num2;  <span class="hljs-keyword">let</span> curNum;  <span class="hljs-keyword">let</span> ix = x.length - <span class="hljs-number">1</span>;  <span class="hljs-keyword">let</span> iy = y.length - <span class="hljs-number">1</span>;  <span class="hljs-keyword">let</span> carry = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> res = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// resæ˜¯å­—ç¬¦ä¸²</span>  <span class="hljs-keyword">while</span> (ix &gt;= <span class="hljs-number">0</span> || iy &gt;= <span class="hljs-number">0</span>) &#123;    num1 = x.charAt(ix--);    num2 = y.charAt(iy--);    curNum = <span class="hljs-built_in">Number</span>(num1) + <span class="hljs-built_in">Number</span>(num2) + carry    carry = <span class="hljs-number">0</span>    <span class="hljs-keyword">if</span>(curNum&gt;=<span class="hljs-number">10</span>)&#123;      carry = <span class="hljs-number">1</span>      curNum = curNum%<span class="hljs-number">10</span>    &#125;    res = curNum + res; <span class="hljs-comment">// æ•°å­—åŠ ä¸Šå­—ç¬¦ä¸²ï¼Œéšå¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥</span>  &#125;  <span class="hljs-keyword">return</span> carry ? carry + res : res&#125;</code></pre></div></li><li><p>å¤§æ•°ç›¸ä¹˜(å¯ä»¥è¾“å‡ºå­—ç¬¦ä¸²)</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bigMulti</span>(<span class="hljs-params">x,y</span>)</span>&#123;  <span class="hljs-keyword">if</span>(x===<span class="hljs-string">&#x27;0&#x27;</span> || y===<span class="hljs-string">&#x27;0&#x27;</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;0&#x27;</span>  <span class="hljs-keyword">if</span>(x===<span class="hljs-string">&#x27;1&#x27;</span>)<span class="hljs-keyword">return</span> y  <span class="hljs-keyword">if</span>(y===<span class="hljs-string">&#x27;1&#x27;</span>)<span class="hljs-keyword">return</span> x  <span class="hljs-keyword">const</span> len1 = x.length  <span class="hljs-keyword">const</span> len2 = y.length  <span class="hljs-keyword">const</span> pos = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len1+len2).fill(<span class="hljs-number">0</span>)  <span class="hljs-keyword">let</span> num1,num2,mulit,cur  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = len1 -<span class="hljs-number">1</span> ; i&gt;=<span class="hljs-number">0</span> ; i--)&#123;    num1 = x[i]    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = len2 - <span class="hljs-number">1</span> ; j &gt;= <span class="hljs-number">0</span> ;j --)&#123;      num2 = y[j]      mulit = num1*num2      cur = mulit + pos[i+j+<span class="hljs-number">1</span>]      pos[i+j+<span class="hljs-number">1</span>] = cur % <span class="hljs-number">10</span>      pos[i+j] += cur / <span class="hljs-number">10</span> | <span class="hljs-number">0</span> <span class="hljs-comment">// å–10ä½ä»¥ä¸Šéƒ¨åˆ†</span>    &#125;  &#125;  <span class="hljs-keyword">let</span> res = pos.join(<span class="hljs-string">&#x27;&#x27;</span>)  <span class="hljs-built_in">console</span>.log(res);  <span class="hljs-keyword">while</span>(res[<span class="hljs-number">0</span>]===<span class="hljs-string">&#x27;0&#x27;</span>)&#123;    res = res.substring(<span class="hljs-number">1</span>)  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li><li><p>ä¿ç•™ç²¾åº¦åŠ æ³•</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> fixAdd = <span class="hljs-function">(<span class="hljs-params">x,y</span>)=&gt;</span>&#123;  <span class="hljs-keyword">const</span>  len1 = x.split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">1</span>].length  <span class="hljs-keyword">const</span>  len2 = y.split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">1</span>].length  <span class="hljs-keyword">const</span>  maxLen = len1&gt;=len2 ? len1 :len2  <span class="hljs-keyword">const</span> times = maxLen*<span class="hljs-number">10</span>  <span class="hljs-keyword">return</span> (x * times + y * times) / times;&#125;</code></pre></div></li><li><p>æ»¡9åŠ 1</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add1</span>(<span class="hljs-params">num</span>)</span>&#123;  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> dig = num.length - <span class="hljs-number">1</span>;dig&gt;=<span class="hljs-number">0</span>;dig--)&#123;    <span class="hljs-keyword">if</span>(num[dig]===<span class="hljs-number">9</span>)&#123;      num[dig]=<span class="hljs-number">0</span>    &#125;<span class="hljs-keyword">else</span>&#123;      num[dig] ++      <span class="hljs-keyword">return</span> num    &#125;  &#125;  num.unshift(<span class="hljs-number">1</span>)  <span class="hljs-keyword">return</span> num&#125;</code></pre></div></li><li><p>å°†æ•°ç»„ä¸­çš„0å…¨éƒ¨ç§»åŠ¨åˆ°æœ€åä¸”é0éƒ¨åˆ†ä¿æŒåŸé¡ºåº</p>  <div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move0</span>(<span class="hljs-params">num</span>)</span>&#123;  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(i&lt;num.length)&#123;    <span class="hljs-keyword">if</span>(num[i]!==<span class="hljs-number">0</span>)&#123;      [mim[i],num[j]] = [num[j],num[i]]      i++      j++    &#125;<span class="hljs-keyword">else</span>&#123;      i++    &#125;  &#125;&#125;</code></pre></div></li><li><p>æ•°çš„æ¬¡æ–¹ï¼ˆä¸ä½¿ç”¨å†…ç½®åº“pow</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å¦‚æœæŒ‡æ•°næ˜¯å¶æ•°ï¼Œx^n = x^(n/2) * x^(n/2)</span><span class="hljs-comment">// å¦‚æœæŒ‡æ•°næ˜¯å¥‡æ•°ï¼Œx^n = x * x^(n/2) * x^(n/2)</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">myPow</span>(<span class="hljs-params">x,n</span>)</span>&#123;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_pow</span>(<span class="hljs-params">base,ex</span>)</span>&#123;    <span class="hljs-keyword">if</span>(ex===<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>    <span class="hljs-keyword">if</span>(ex===<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> base    <span class="hljs-keyword">const</span> splitPow = _pow(base,<span class="hljs-built_in">Math</span>.floor(ex/<span class="hljs-number">2</span>))    <span class="hljs-keyword">return</span> ex%<span class="hljs-number">2</span> ? base*splitPow*splitPow : splitPow*splitPow  &#125;  <span class="hljs-keyword">const</span> res = _pow(x,<span class="hljs-built_in">Math</span>.abs(n))  <span class="hljs-keyword">return</span> n&lt;<span class="hljs-number">0</span> ? <span class="hljs-number">1</span>/res : res &#125;</code></pre></div><ul><li>è¾“å‡º1åˆ°æœ€å¤§çš„nä½æ•°<div class="hljs code-wrapper"><pre><code class="hljs javascript">  <span class="hljs-comment">/**</span><span class="hljs-comment">  / <span class="hljs-doctag">@params </span>n=1 ä¸€ä½æ•°ï¼Œæœ€å¤§9ï¼Œè¾“å‡º123456789</span><span class="hljs-comment">  / <span class="hljs-doctag">@params </span>n=2 ä¸¤ä½æ•°å‘€ æœ€å¤§99</span><span class="hljs-comment">  */</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printNumbers1</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-comment">//ç»„åˆå­—ç¬¦ä¸²</span>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-keyword">while</span>(n&gt;<span class="hljs-number">0</span>)&#123;    str+=<span class="hljs-string">&#x27;9&#x27;</span>    n--  &#125;  str = <span class="hljs-built_in">Number</span>(str)  <span class="hljs-keyword">const</span> res = []  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;i&lt;=str;i++)&#123;    res.push(i)  &#125;  <span class="hljs-keyword">return</span> res&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printNumbers1</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-comment">//æœ€å¤§å€¼å°±æ˜¯ 10^n-1......</span>  <span class="hljs-keyword">const</span> max = <span class="hljs-number">10</span> ** n -<span class="hljs-number">1</span>  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(max).fill(<span class="hljs-number">1</span>)  <span class="hljs-keyword">return</span> res.map(<span class="hljs-function">(<span class="hljs-params">v,i</span>)=&gt;</span>v+i)&#125;</code></pre></div></li></ul><ul><li><p>å’Œä¸ºsçš„æ‰€æœ‰æ­£æ•°åºåˆ—</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><span class="hljs-comment"> *  15</span><span class="hljs-comment"> * [1,2,3,4,5] [4,5,6] [7,8]</span><span class="hljs-comment">*/</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">target</span>)</span>&#123;  <span class="hljs-comment">// ç›´æ¥ç”¨æ»‘åŠ¨çª—å£å¥—</span>  <span class="hljs-keyword">let</span> l = <span class="hljs-number">1</span>  <span class="hljs-keyword">let</span> r = <span class="hljs-number">2</span>  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">3</span>  <span class="hljs-keyword">const</span> res = []  <span class="hljs-keyword">while</span>(l&lt;r)&#123;    <span class="hljs-keyword">if</span>(sum===target)&#123;      <span class="hljs-keyword">const</span> ret = []      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = j;i&lt;=r;i++)&#123;        ret.push(i)      &#125;      sum-=l      l++    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(sum &gt; target)&#123;      sum -= l      l++    &#125;<span class="hljs-keyword">else</span>&#123;      r++      sum+=r    &#125;  &#125;  <span class="hljs-keyword">return</span> res&#125;<span class="hljs-comment">// æ»‘åŠ¨çª—å£çš„å¦å¤–ä¸€ç§å®ç°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findContinuousSequence</span>(<span class="hljs-params">target</span>)</span>&#123;  <span class="hljs-keyword">const</span> max = target%<span class="hljs-number">2</span>===<span class="hljs-number">0</span>?target/<span class="hljs-number">2</span>:<span class="hljs-built_in">Math</span>.floor(target/<span class="hljs-number">2</span>)+<span class="hljs-number">1</span>  <span class="hljs-comment">// maxå³è¾¹éƒ½ä¸å¯èƒ½æ»¡è¶³</span>  <span class="hljs-comment">// t = 9</span>  <span class="hljs-comment">// max = 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6[x]ï¼Œ7[x]ï¼Œ8[x]</span>  <span class="hljs-keyword">const</span> <span class="hljs-built_in">window</span> = []  <span class="hljs-keyword">const</span> res = []  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>;i &lt;= max ;i++)&#123;    <span class="hljs-built_in">window</span>.push(i)    sum += i    <span class="hljs-keyword">while</span>(sum &gt; target)&#123;      sum-=<span class="hljs-built_in">window</span>[<span class="hljs-number">0</span>]      <span class="hljs-built_in">window</span>.shift()    &#125;    <span class="hljs-keyword">if</span>(sum===target)&#123;      <span class="hljs-built_in">window</span>.length&gt;<span class="hljs-number">1</span> &amp;&amp; res.push([...window])      <span class="hljs-comment">// push windowçš„æµ…æ‹·è´</span>    &#125;  &#125;  <span class="hljs-keyword">return</span> res&#125;</code></pre></div></li><li><p>æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦ä¸€åŠçš„å…ƒç´ </p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¸€å®šä¼šæ˜¯æ’åºåçš„æ•°ç»„ä¸­ç‚¹</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">nums</span>)</span>&#123;  nums = nums.sort()  <span class="hljs-keyword">return</span> nums[<span class="hljs-built_in">Math</span>.floor(nums.length/<span class="hljs-number">2</span>)]&#125;<span class="hljs-comment">// æŠ•ç¥¨è®°æ•°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">majorityElement</span>(<span class="hljs-params">nums</span>)</span>&#123;  <span class="hljs-keyword">let</span> vote = <span class="hljs-number">0</span>  <span class="hljs-comment">// å‰åå…ƒç´ ç›¸åŒæŠ•ç¥¨åŠ 1ï¼Œä¸åŒå‡1ï¼Œç¥¨æ•°æŠµæ¶ˆåˆ™è®¡ç®—åé¢çš„å…ƒç´ </span>  <span class="hljs-keyword">let</span> mid = nums[<span class="hljs-number">0</span>]  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> num <span class="hljs-keyword">of</span> nums)&#123;    <span class="hljs-keyword">if</span>(vote===<span class="hljs-number">0</span>)&#123;      mid = num    &#125;    vote += num===mid ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>  &#125;  <span class="hljs-keyword">return</span> mid&#125;</code></pre></div></li><li><p>åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—</p></li></ul><p>0,1,Â·Â·Â·,n-1è¿™nä¸ªæ•°å­—æ’æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­—0å¼€å§‹ï¼Œæ¯æ¬¡ä»è¿™ä¸ªåœ†åœˆé‡Œåˆ é™¤ç¬¬mä¸ªæ•°å­—ï¼ˆåˆ é™¤åä»ä¸‹ä¸€ä¸ªæ•°å­—å¼€å§‹è®¡æ•°ï¼‰ã€‚æ±‚å‡ºè¿™ä¸ªåœ†åœˆé‡Œå‰©ä¸‹çš„æœ€åä¸€ä¸ªæ•°å­—ã€‚</p><p>ä¾‹å¦‚ï¼Œ0ã€1ã€2ã€3ã€4è¿™5ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­—0å¼€å§‹æ¯æ¬¡åˆ é™¤ç¬¬3ä¸ªæ•°å­—ï¼Œåˆ™åˆ é™¤çš„å‰4ä¸ªæ•°å­—ä¾æ¬¡æ˜¯2ã€0ã€4ã€1ï¼Œå› æ­¤æœ€åå‰©ä¸‹çš„æ•°å­—æ˜¯3ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// æœ´æœ´ç´ ç´ è¶…æ—¶æ–¹æ³•</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastRemaining</span>(<span class="hljs-params">n,m</span>) </span>&#123;  <span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(n).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">v,i</span>)=&gt;</span>v+=i)  <span class="hljs-keyword">let</span> pos = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(arr&gt;<span class="hljs-number">1</span>)&#123;    pos = (pos+m-<span class="hljs-number">1</span>) % arr.length    arr.splice(pos,<span class="hljs-number">1</span>)  &#125;  <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>]&#125;<span class="hljs-comment">// æ‰¾è§„å¾‹</span><span class="hljs-comment">// çº¦ç‘Ÿå¤«ç¯</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastRemaining</span>(<span class="hljs-params">n,m</span>)</span>&#123;  <span class="hljs-comment">// åªå‰©ä¸‹ä¸€ä¸ªæ•°å­—æ—¶,è¿™ä¸ªæœ€åå‰©ä¸‹çš„æ•°å­—ç´¢å¼•ä¸º0</span>  <span class="hljs-comment">// åæ¨</span>  <span class="hljs-comment">// å‰©ä¸‹ä¸¤ä¸ªæ•°å­—æ—¶ï¼Œè¿™ä¸ªæœ€åå‰©ä¸‹çš„æ•°å­—å½“å‰ç´¢å¼•ä¸º(ä¸Šä¸€è½®ç´¢å¼•+m)%2</span>  <span class="hljs-comment">// å–%è€ƒè™‘ç´¢å¼•æº¢å‡º</span>  <span class="hljs-comment">// å‰©ä¸‹ä¸‰ä¸ªæ•°å­—æ—¶ï¼Œè¿™ä¸ªæœ€åå‰©ä¸‹çš„æ•°å­—å½“å‰ç´¢å¼•ä¸º(ä¸Šä¸€è½®ç´¢å¼•+m)%3</span>  <span class="hljs-comment">// å¾—åˆ°å…¬å¼ </span>  <span class="hljs-comment">// nä¸ªæ•°å­— ï¼Œè¿™ä¸ªæœ€åå‰©ä¸‹çš„æ•°å­—å½“å‰ç´¢å¼•ä¸º(ä¸Šä¸€è½®ç´¢å¼•+m)%n</span>  <span class="hljs-comment">// å½“å‰çŠ¶æ€ç”¨f(n,m)è¡¨ç¤ºï¼Œåˆ™ä¸Šä¸€è½®ä¸ºf(n-1,m)</span>  <span class="hljs-comment">// f(n,m) = (f(n-1,m)+m)%n</span>    <span class="hljs-keyword">if</span>(n===<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>    <span class="hljs-keyword">return</span> (lastRemaining(n-<span class="hljs-number">1</span>,m)+m) % n&#125;<span class="hljs-comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨è¿­ä»£å®ç°</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lastRemaining</span>(<span class="hljs-params">n,m</span>)</span>&#123;  <span class="hljs-keyword">let</span> pos = <span class="hljs-number">0</span> <span class="hljs-comment">// nä¸º1æ—¶çš„ å‰©ä¸‹0</span>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span> ; i &lt;= n ;i++)&#123;    <span class="hljs-comment">// æ¯ä¸€è½®éƒ½æ ¹æ®è§„å¾‹ä¿®æ”¹</span>    pos = (pos+m) % i  &#125;  <span class="hljs-keyword">return</span> pos&#125;</code></pre></div><ul><li><p>å°†æ•°ç»„ä¸­çš„å¥‡æ•°ç§»åŠ¨åˆ°å‰ï¼Œå¶æ•°ç§»åŠ¨åˆ°å</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">nums</span>)</span>&#123;  <span class="hljs-comment">// å¯¹æ’æŒ‡é’ˆ</span>  <span class="hljs-comment">// åˆ†åˆ«å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„æ•°</span>  <span class="hljs-keyword">let</span> l = <span class="hljs-number">0</span> ,r = nums.length -<span class="hljs-number">1</span>  <span class="hljs-keyword">while</span>(l&lt;r)&#123;    <span class="hljs-keyword">while</span>(l&lt;r &amp;&amp; nums[l]%<span class="hljs-number">2</span>!==<span class="hljs-number">0</span>) l++    <span class="hljs-keyword">while</span>(l&lt;r &amp;&amp; nums[r]%<span class="hljs-number">2</span>===<span class="hljs-number">0</span>) r--    [nums[l],nums[r]] = [nums[r],nums[l]]  &#125;  <span class="hljs-keyword">return</span> nums&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">exchange</span>(<span class="hljs-params">nums</span>)</span>&#123;  <span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆ</span>  <span class="hljs-keyword">let</span> slow = <span class="hljs-number">0</span> ,fast = <span class="hljs-number">0</span>  <span class="hljs-keyword">while</span>(fast&lt;nums.length)&#123;    <span class="hljs-keyword">if</span>(nums[fast]%<span class="hljs-number">2</span>!==<span class="hljs-number">0</span>)&#123;      [nums[slow],nums[fast]] = [num[fast],nums[slow]]      slow++    &#125;    fast++  &#125;  <span class="hljs-keyword">return</span> nums&#125;</code></pre></div></li><li><p>å®ç°å‰ç¼€æ ‘prefixTree</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PrefixTree</span>(<span class="hljs-params"></span>)</span>&#123;  <span class="hljs-built_in">this</span>.tree = &#123;&#125;&#125;PrefixTree.prototype.insert = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">word</span>)</span>&#123;  <span class="hljs-comment">// ä¾æ¬¡å°†å•è¯çš„æ¯ä¸ªå­—æ¯å‘treeå¯¹è±¡ä¸­é€’å½’æ·»åŠ å±æ€§</span>  <span class="hljs-comment">// msy= &gt;</span>  <span class="hljs-comment">// &#123;m:&#123;s:&#123;y:&#123;isEnd:true&#125;&#125;&#125;&#125;</span>  <span class="hljs-keyword">let</span> node = <span class="hljs-built_in">this</span>.tree  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> n <span class="hljs-keyword">of</span> word)&#123;    <span class="hljs-keyword">if</span>(!node[n]) node[n] = &#123;&#125;    node = node[n]  &#125;  node.isEnd = <span class="hljs-literal">true</span>&#125;PrefixTree.prototype.loop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">word</span>)</span>&#123;  <span class="hljs-keyword">let</span> node = <span class="hljs-built_in">this</span>.tree  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> n <span class="hljs-keyword">of</span> word)&#123;    <span class="hljs-keyword">if</span>(!node[n]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>    node = node[n]  &#125;  <span class="hljs-keyword">return</span> node&#125;PrefixTree.prototype.search = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">word</span>)</span>&#123;  <span class="hljs-keyword">const</span> ret = <span class="hljs-built_in">this</span>.loop(word)  <span class="hljs-keyword">return</span> ret!==<span class="hljs-literal">undefined</span> &amp;&amp; ret.isEnd === <span class="hljs-literal">true</span>&#125;PrefixTree.prototype.startWith = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">prefix</span>)</span>&#123;  <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.loop(prefix)&#125;</code></pre></div></li><li><p>é’è›™è·³å°é˜¶</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numWays</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-keyword">if</span>(n===<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>  <span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> n  <span class="hljs-keyword">let</span> res = <span class="hljs-number">0</span>  <span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>  <span class="hljs-comment">// ä¸¤ä¸ªå°é˜¶æ—¶</span>  <span class="hljs-keyword">let</span> cur = <span class="hljs-number">2</span>  <span class="hljs-comment">// ä¸¤ç§è·³æ³•</span>  <span class="hljs-keyword">let</span> pre = <span class="hljs-number">1</span>  <span class="hljs-comment">// å°‘ä¸€ä¸ªå°é˜¶çš„è·³æ³•</span>  <span class="hljs-keyword">while</span>(i++ &lt; n)&#123;    <span class="hljs-comment">// ä»n=3æ—¶è¿­ä»£æ¨å¯¼</span>    res = cur + pre    pre = cur    cur = res  &#125;  <span class="hljs-keyword">return</span> res&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">numWays</span>(<span class="hljs-params">n</span>)</span>&#123;  <span class="hljs-comment">// æ–æ³¢é‚£å¥‘æ•°åˆ—</span>  <span class="hljs-keyword">const</span> arr = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span> ;i &lt;= n ;i++)&#123;    arr[i] = arr[i-<span class="hljs-number">1</span>] + arr[i-<span class="hljs-number">2</span>]  &#125;  <span class="hljs-keyword">return</span> arr[i]&#125;</code></pre></div><ul><li><p>è¿ç»­å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">maxSubArray</span>(<span class="hljs-params">nums</span>)</span>&#123;  <span class="hljs-comment">// ç”¨dpè®°å½•è¯¥ä½ç½®ä½œä¸ºå­æ•°ç»„æœ«å°¾çš„ç´¯åŠ å€¼</span>  <span class="hljs-comment">// [nums[0],nums[1]],dp[1] = num[0] + num[1]</span>  <span class="hljs-comment">// dp[2] = dp[1] + nums[2]</span>  <span class="hljs-comment">// åŒæ—¶åˆ¤æ–­å‰ä¸€dpçš„å€¼æ­£è´Ÿ</span>  <span class="hljs-comment">// å‰ä¸€ä¸ªdpä¸ºæ­£åˆ™ å½“å‰dp = å‰dp + å½“å‰nums</span>  <span class="hljs-comment">// å¦‚æœä¸ºè´Ÿç›´æ¥ä¸¢å¼ƒ</span>  <span class="hljs-keyword">if</span>(nums.length&lt;<span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>]  <span class="hljs-keyword">let</span> max = nums[<span class="hljs-number">0</span>]  <span class="hljs-keyword">let</span> dpi = nums[<span class="hljs-number">0</span>]  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span> ; i &lt; nums.length ;i++)&#123;    dpi = dpi &gt; <span class="hljs-number">0</span> ? dpi + nums[i] : nums[i]    max = <span class="hljs-built_in">Math</span>.max(max,dpi)  &#125;  <span class="hljs-keyword">return</span> max&#125;</code></pre></div></li><li><p>åè½¬åµŒå¥—æ•°ç»„</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// å·²çŸ¥æ•°ç»„ a=[1,[2,[3,[4,null]]]], å®ç°æ•°ç»„ b=[4,[3,[2,[1,null]]]] ï¼Œè€ƒè™‘nçº§åµŒå¥—çš„æƒ…å†µ</span><span class="hljs-keyword">const</span> a = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, [<span class="hljs-number">3</span>, [<span class="hljs-number">4</span>, <span class="hljs-literal">null</span>]]]];<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverseArray</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverse</span>(<span class="hljs-params">arr,temp</span>)</span>&#123;    <span class="hljs-comment">// arr = [1,[2,[3,[4,null]]]]</span>    <span class="hljs-comment">// arr = [1,[2,[3,[4,null]]]][1] = [2,[3,[4,null]]]</span>    <span class="hljs-comment">// arr = [1,[2,[3,[4,null]]]][1][1] = [3,[4,null]]</span>    <span class="hljs-comment">// arr = [1,[2,[3,[4,null]]]][1][1][1] = [4,null]</span>    <span class="hljs-keyword">if</span>(arr[<span class="hljs-number">1</span>]===<span class="hljs-literal">null</span>)&#123;      <span class="hljs-keyword">return</span> [arr[<span class="hljs-number">0</span>],temp]      <span class="hljs-comment">// return </span>    &#125;    temp = temp ? [arr[<span class="hljs-number">0</span>],temp] : [arr[<span class="hljs-number">0</span>],<span class="hljs-literal">null</span>]<span class="hljs-comment">// temp = [1,null]</span><span class="hljs-comment">// temp = [2,[1,null]]</span><span class="hljs-comment">// temp = [3,[2,[1,null]]]</span>    <span class="hljs-keyword">return</span> reverse(arr[<span class="hljs-number">1</span>],temp) <span class="hljs-comment">// é€’å½’è¿›åµŒå¥—</span>  &#125;  <span class="hljs-keyword">return</span> reverse(arr,<span class="hljs-literal">null</span>)&#125;<span class="hljs-built_in">console</span>.log(reverseArray(a));</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é¢å‘å¯¹è±¡é¢˜</title>
    <link href="/2020/04/09/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%A2%98/"/>
    <url>/2020/04/09/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<ul><li>æ‰“è½¦æ—¶å¯ä»¥æ‰“ä¸“è½¦æˆ–å¿«è½¦ã€‚ä»»ä½•è½¦éƒ½æœ‰è½¦ç‰Œå·å’Œåç§°ã€‚å¿«è½¦æ¯å…¬é‡Œ1å…ƒï¼Œä¸“è½¦æ¯å…¬é‡Œ2å…ƒã€‚è¡Œç¨‹å¼€å§‹æ—¶ï¼Œæ˜¾ç¤ºè½¦è¾†ä¿¡æ¯ã€‚è¡Œç¨‹ç»“æŸæ—¶ï¼Œæ˜¾ç¤ºæ‰“è½¦é‡‘é¢ã€‚è¡Œç¨‹è·ç¦»ä¸º5å…¬é‡Œã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">licence,name</span>)</span>&#123;    <span class="hljs-built_in">this</span>.licence = licence    <span class="hljs-built_in">this</span>.name = name  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FastCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Car</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">licence,name</span>)</span>&#123;    <span class="hljs-built_in">super</span>(licence,name)    <span class="hljs-built_in">this</span>.price =<span class="hljs-number">1</span>  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PrivateCar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Car</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">licence,name</span>)</span>&#123;    <span class="hljs-built_in">super</span>(licence,name)    <span class="hljs-built_in">this</span>.price = <span class="hljs-number">2</span>  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Order</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">car,distance</span>)</span>&#123;    <span class="hljs-built_in">this</span>.car = car    <span class="hljs-built_in">this</span>.distance = distance  &#125;  <span class="hljs-function"><span class="hljs-title">getIn</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.car.name);    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.car.licence);  &#125;  <span class="hljs-function"><span class="hljs-title">getOff</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.car.price*<span class="hljs-built_in">this</span>.distance);  &#125;&#125;<span class="hljs-keyword">let</span> car1 = <span class="hljs-keyword">new</span> PrivateCar(<span class="hljs-string">&#x27;ç²¤A8888888&#x27;</span>,<span class="hljs-string">&#x27;ç‰¹æ–¯æ‹‰&#x27;</span>)<span class="hljs-keyword">let</span> cost1 = <span class="hljs-keyword">new</span> Order(car1,<span class="hljs-number">5</span>).getOff()</code></pre></div><ul><li>æŸåœè½¦åœº, åˆ†ä¸‰å±‚, æ¯å±‚100 è½¦ä½,æ¯ä¸ªè½¦ä½éƒ½èƒ½ç›‘æ§åˆ°è½¦è¾†çš„è¿›å…¥å’Œç¦»å¼€,è½¦è¾†è¿›å…¥å‰,æ˜¾ç¤ºæ¯å±‚çš„ç©ºä½™è½¦ä½æ•°é‡,è½¦è¾†è¿›å…¥æ—¶,æ‘„åƒå¤´å¯è¯†åˆ«è½¦ç‰Œå·å’Œè¿›å…¥æ—¶é—´,è½¦è¾†å‡ºæ¥æ—¶,å‡ºå£æ˜¾ç¤ºå±æ˜¾ç¤ºè½¦ç‰Œå·å’Œåœè½¦æ—¶é•¿</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">licence</span>)</span>&#123;    <span class="hljs-built_in">this</span>.licence = licence  &#125;&#125;<span class="hljs-comment">// æ•´ä¸ªåœè½¦åœº</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParkingLot</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">floors</span>)</span>&#123;    <span class="hljs-comment">// floors:[[300],[300],[300]]</span>    <span class="hljs-built_in">this</span>.floors = floors    <span class="hljs-built_in">this</span>.dataBase = []  &#125;  <span class="hljs-function"><span class="hljs-title">showSpace</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">this</span>.floors.length;i++)&#123;      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`ç¬¬<span class="hljs-subst">$&#123;i+<span class="hljs-number">1</span>&#125;</span>å±‚ç©ºé—²è½¦ä½(<span class="hljs-subst">$&#123;<span class="hljs-built_in">this</span>.floors[i].emptySpace()&#125;</span>)`</span>)    &#125;  &#125;  <span class="hljs-function"><span class="hljs-title">intoLot</span>(<span class="hljs-params">car,floorIndex,lotIndex</span>)</span>&#123;    <span class="hljs-comment">//è½¦ç‰Œï¼Œæ—¶é—´</span>    <span class="hljs-keyword">let</span> licence = car.licence    <span class="hljs-keyword">let</span> intoTime = <span class="hljs-built_in">Date</span>.now()    <span class="hljs-keyword">let</span> space = <span class="hljs-built_in">this</span>.floors[floorIndex].lot[lotIndex]    <span class="hljs-built_in">this</span>.dataBase[licence] = &#123;intoTime,floorIndex,lotIndex&#125;    space.checkIn()  &#125;  <span class="hljs-function"><span class="hljs-title">outLot</span>(<span class="hljs-params">car</span>)</span>&#123;    <span class="hljs-keyword">let</span> outTime = <span class="hljs-built_in">Date</span>.now()    <span class="hljs-keyword">let</span> licence = car.licence    <span class="hljs-keyword">let</span> info = <span class="hljs-built_in">this</span>.dataBase[licence]    <span class="hljs-keyword">let</span> space = <span class="hljs-built_in">this</span>.floors[info.floorIndex].lot[info.lotIndex]    <span class="hljs-keyword">let</span> timeCount = <span class="hljs-built_in">parseInt</span>((outTime-info.intoTime)/<span class="hljs-number">36000000</span>)    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`åœè½¦æ—¶é•¿<span class="hljs-subst">$&#123;timeCount&#125;</span>å°æ—¶`</span>)    space.checkOut()  &#125;&#125;<span class="hljs-comment">// è½¦ä½,ç›‘è§†é©¶å…¥ç¦»å¼€</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParkingSpace</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">this</span>.free = <span class="hljs-literal">true</span>  &#125;  <span class="hljs-function"><span class="hljs-title">checkIn</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">this</span>.free = <span class="hljs-literal">false</span>  &#125;  <span class="hljs-function"><span class="hljs-title">checkOut</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">this</span>.free = <span class="hljs-literal">true</span>  &#125;&#125;<span class="hljs-comment">// å±‚</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParkingFloor</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">floor,lot</span>)</span>&#123;    <span class="hljs-built_in">this</span>.floor = floor    <span class="hljs-built_in">this</span>.lot = lot  &#125;  <span class="hljs-function"><span class="hljs-title">emptySpace</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-comment">//è¿”å›ç©ºé—²è½¦ä½</span>    <span class="hljs-keyword">let</span> freeLot = <span class="hljs-number">0</span>    <span class="hljs-built_in">this</span>.lot.forEach(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;      <span class="hljs-keyword">if</span>(item.free)&#123;        freeLot++      &#125;    &#125;);    <span class="hljs-keyword">return</span> freeLot  &#125;&#125;</code></pre></div><ul><li>ä¸€å‰¯æ‰‘å…‹ç‰Œæœ‰54å¼ ç‰Œï¼Œå…¶ä¸­52å¼ æ˜¯æ­£ç‰Œï¼Œå¦2å¼ æ˜¯å‰¯ç‰Œï¼ˆå¤§ç‹å’Œå°ç‹ï¼‰ã€‚<br>52å¼ æ­£ç‰Œåˆå‡åˆ†ä¸º13å¼ ä¸€ç»„ï¼Œå¹¶ä»¥é»‘æ¡ƒã€çº¢æ¡ƒã€è‰èŠ±ã€æ–¹å—å››ç§èŠ±è‰²è¡¨ç¤ºå„ç»„ï¼Œæ¯ç»„èŠ±è‰²çš„ç‰ŒåŒ…æ‹¬ä»1-10ï¼ˆ1é€šå¸¸è¡¨ç¤ºä¸ºAï¼‰ä»¥åŠJã€Qã€Kæ ‡ç¤ºçš„13å¼ ç‰Œã€‚<div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-string">&#x27;A&#x27;</span>, <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;J&#x27;</span>,<span class="hljs-string">&#x27;Q&#x27;</span>,<span class="hljs-string">&#x27;K&#x27;</span>]<span class="hljs-keyword">const</span> signs = [<span class="hljs-string">&#x27;â™¥ï¸&#x27;</span>, <span class="hljs-string">&#x27;â™¦ï¸&#x27;</span>, <span class="hljs-string">&#x27;â™£ï¸&#x27;</span>, <span class="hljs-string">&#x27;â™ ï¸&#x27;</span>]<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Poker</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">signs,numbers</span>)</span> &#123;<span class="hljs-built_in">this</span>.signs = signs<span class="hljs-built_in">this</span>.numbers = numbers<span class="hljs-built_in">this</span>.mounts = <span class="hljs-number">52</span><span class="hljs-built_in">this</span>.pokers = []&#125;<span class="hljs-function"><span class="hljs-title">initPokers</span>(<span class="hljs-params"></span>)</span>&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i =<span class="hljs-number">0</span>;i&lt;<span class="hljs-built_in">this</span>.signs.length;i++)&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>;j&lt;<span class="hljs-built_in">this</span>.numbers.length;j++)&#123;<span class="hljs-built_in">this</span>.pokers.push(<span class="hljs-keyword">new</span> Card(<span class="hljs-built_in">this</span>.signs[i],<span class="hljs-built_in">this</span>.numbers[j]))&#125;&#125;<span class="hljs-built_in">this</span>.pokers.push(<span class="hljs-keyword">new</span> Card(<span class="hljs-string">&#x27;BLACK&#x27;</span>,<span class="hljs-string">&#x27;GHOST&#x27;</span>))<span class="hljs-built_in">this</span>.pokers.push(<span class="hljs-keyword">new</span> Card(<span class="hljs-string">&#x27;RED&#x27;</span>,<span class="hljs-string">&#x27;GHOST&#x27;</span>))&#125;  <span class="hljs-function"><span class="hljs-title">shuffleCard</span>(<span class="hljs-params"></span>)</span> &#123;<span class="hljs-comment">// let arr = this.pokers</span><span class="hljs-comment">// let len = arr.length</span>    <span class="hljs-comment">// let temp,i</span>    <span class="hljs-comment">// while(len)&#123;</span>    <span class="hljs-comment">//   i = Math.floor(Math.random()*len--)</span>    <span class="hljs-comment">//   temp = arr[i]</span>    <span class="hljs-comment">//   arr[i] = arr[len]</span>    <span class="hljs-comment">//   arr[len] = temp</span>    <span class="hljs-comment">// &#125;</span>    <span class="hljs-comment">// this.pokers = arr</span>    <span class="hljs-built_in">this</span>.pokers = <span class="hljs-built_in">this</span>.pokers.sort(<span class="hljs-function">()=&gt;</span><span class="hljs-built_in">Math</span>.random()-<span class="hljs-number">0.5</span>)  &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Card</span> </span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">sign, number</span>)</span> &#123;    <span class="hljs-built_in">this</span>.sign = sign;    <span class="hljs-built_in">this</span>.number = number;  &#125;&#125;<span class="hljs-keyword">let</span> game1 = <span class="hljs-keyword">new</span> Poker(signs,numbers)game1.initPokers()game1.shuffleCard()<span class="hljs-built_in">console</span>.log(game1.pokers);game1.shuffleCard()<span class="hljs-built_in">console</span>.log(game1.pokers);</code></pre></div></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>javascript</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸç”Ÿjs</title>
    <link href="/2020/03/27/%E5%8E%9F%E7%94%9Fjs/"/>
    <url>/2020/03/27/%E5%8E%9F%E7%94%9Fjs/</url>
    
    <content type="html"><![CDATA[<ul><li><p>javascript</p><p>js æ˜¯ä¸€é—¨å‡½æ•°ä¼˜å…ˆçš„è½»é‡çº§è§£é‡Šå‹è¯­è¨€ï¼ŒåŸºäºåŸå‹ç¼–ç¨‹çš„åŠ¨æ€è„šæœ¬è¯­è¨€</p><ol><li>å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆå˜é‡æå‡ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¿”å›å€¼ï¼Œå¯ä»¥èµ‹å€¼ç»™å˜é‡ï¼Œã€å‡½æ•°å¼ç¼–ç¨‹çš„æ¡ä»¶ã€‘</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹</li><li>å¼±ç±»å‹è¯­è¨€ï¼ˆå˜é‡çš„ç±»å‹åœ¨è¿è¡Œæ—¶ä¼šå˜åŒ–ï¼Œå¼ºç±»å‹è¯­è¨€çš„å˜é‡ç±»å‹ç¼–è¯‘æ—¶å°±ç¡®å®šä¸”ä¸ä¼šæ”¹å˜</li><li>åŸºäºåŸå‹ï¼ˆåŒºåˆ«äºåŸºäºç±»[ç±»å’Œå®ä¾‹]ï¼Œjs ä¸­ä¸‡ç‰©çš†ä¸º[å¯¹è±¡]<blockquote><p>åŸºäºåŸå‹çš„è¯­è¨€å…·æœ‰æ‰€è°“åŸå‹å¯¹è±¡ï¼ˆprototypical objectï¼‰çš„æ¦‚å¿µã€‚åŸå‹å¯¹è±¡å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¨¡æ¿ï¼Œæ–°å¯¹è±¡å¯ä»¥ä»ä¸­è·å¾—åŸå§‹çš„å±æ€§ã€‚ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥æŒ‡å®šå…¶è‡ªèº«çš„å±æ€§ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼ˆprototypeï¼‰ï¼Œä»è€Œå…è®¸åè€…å…±äº«å‰è€…çš„å±æ€§ã€‚</p></blockquote></li></ol></li><li><p>BOM æµè§ˆå™¨çš„ç¼–ç¨‹æ¥å£</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">navigatoræµè§ˆå™¨ä¿¡æ¯locationæµè§ˆå™¨å®šä½å’Œå¯¼èˆªhistoryçª—å£æµè§ˆå™¨å†å²screen å±å¹•</code></pre></div><ul><li>DOM æ–‡æ¡£çš„ç¼–ç¨‹æ¥å£</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-built_in">document</span>.getElementById(id);<span class="hljs-built_in">document</span>.getElementsByTagName(name);<span class="hljs-built_in">document</span>.createElement(name);parentNode.appendChild(node);element.innerHTML;<span class="hljs-comment">//innerHTML ä»å¯¹è±¡èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å…¨éƒ¨å†…å®¹ï¼ˆåŒ…æ‹¬htmlæ ‡ç­¾</span><span class="hljs-comment">//outerHTML åŒ…æ‹¬å¯¹è±¡è‡ªèº«æ ‡ç­¾</span><span class="hljs-comment">//innerText innerHTMLä½†ä¸åŒ…æ‹¬htmlæ ‡ç­¾ï¼Œ</span><span class="hljs-comment">//textContent æ‰€æœ‰æ–‡æœ¬å†…å®¹ï¼ŒåŒ…æ‹¬scriptå’Œstyleæ ‡ç­¾å†…</span>element.style.left;element.setAttribute();element.getAttribute();element.addEventListener();<span class="hljs-built_in">window</span>.content;<span class="hljs-built_in">window</span>.onload;<span class="hljs-built_in">window</span>.dump();<span class="hljs-built_in">window</span>.scrollTo();</code></pre></div><ul><li><p>é¢å‘å¯¹è±¡ä¸é¢å‘è¿‡ç¨‹</p><ul><li><p>åˆ†æå‡ºè§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œç”¨å‡½æ•°åˆ†åˆ«å®ç°å„æ­¥éª¤</p></li><li><p>æŠŠæ„æˆé—®é¢˜çš„äº‹ç‰©æŠ½è±¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡ï¼Œç”¨å¯¹è±¡æ¥æè¿°æŸä¸ªäº‹ç‰©åœ¨æ•´ä¸ªè§£å†³é—®é¢˜è¿‡ç¨‹ä¸­çš„è¡Œä¸º</p></li><li><p>é¢å‘å¯¹è±¡ä¸‰è¦ç´ </p><ol><li>å°è£… -&gt; åˆ©ç”¨æŠ½è±¡æ•°æ®ç±»å‹å°†æ•°æ®å’ŒåŸºäºæ•°æ®çš„æ“ä½œå°è£…åœ¨ä¸€èµ·åªç•™ä¸‹æ¥å£ç»™å¤–éƒ¨è®¿é—®</li><li>ç»§æ‰¿ -&gt; å­ç±»è‡ªåŠ¨å…±äº«çˆ¶ç±»æ•°æ®ç»“æ„å’Œæ–¹æ³•</li><li>å¤šæ€ -&gt; ç›¸åŒçš„æ“ä½œæˆ–å‡½æ•°å¯ä½œç”¨äºå¤šç§ç±»å‹çš„å¯¹è±¡ä¸Šå¹¶è·å¾—ä¸åŒçš„ç»“æœ</li></ol></li></ul></li></ul><ul><li><p>ä½œç”¨åŸŸ/ä½œç”¨åŸŸé“¾/é—­åŒ…</p><ul><li>ä½œç”¨åŸŸï¼šjs ä¸­çš„ä½œç”¨åŸŸæ˜¯å‡½æ•°çº§çš„ï¼Œå˜é‡åœ¨å®ƒå£°æ˜çš„å‡½æ•°ä½“ä»¥åŠå‡½æ•°ä½“å†…åµŒå¥—çš„ä»»æ„å‡½æ•°ä½“å†…æœ‰å®šä¹‰</li><li>ä½œç”¨åŸŸé“¾ï¼šjs æ‰§è¡Œæ—¶åˆ›å»ºçš„æ‰§è¡Œä¸Šä¸‹æ–‡å«æœ‰å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å¼•ç”¨ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå¼•ç”¨è·å–å¤–éƒ¨è¯æ³•ç¯å¢ƒçš„å˜é‡ã€å£°æ˜ç­‰ï¼Œè¿™äº›å¼•ç”¨ä¸²è”èµ·æ¥ä¸€ç›´æŒ‡å‘å…¨å±€çš„è¯æ³•ç¯å¢ƒï¼Œå½¢æˆäº†ä½œç”¨åŸŸé“¾ã€‚</li><li>é—­åŒ…ï¼šå‡½æ•°ä½“å’Œå…¶è¯æ³•ç¯å¢ƒå…±åŒç»„æˆé—­åŒ…ã€‚</li><li>JavaScript ä¸­ï¼Œå‡½æ•°åœ¨æ¯æ¬¡åˆ›å»ºæ—¶ç”Ÿæˆé—­åŒ…</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;    <span class="hljs-built_in">console</span>.log(i);  &#125;, <span class="hljs-number">1000</span> * i);&#125;</code></pre></div></li><li><p>map/flatMap/reduce</p><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// reduceçš„éªšæ“ä½œ</span><span class="hljs-comment">// å¯¹å¯¹è±¡å†…çš„æ•°æ®æ±‚å’Œ</span><span class="hljs-keyword">let</span> data = [  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;mmm&quot;</span>, <span class="hljs-attr">money</span>: <span class="hljs-number">120</span> &#125;,];<span class="hljs-keyword">const</span> sumMoney = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> data.reduce(<span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> a + y.money, <span class="hljs-number">0</span>);&#125;;<span class="hljs-comment">//720</span><span class="hljs-comment">// è®¡ç®—å‡ºç°æ¬¡æ•°</span><span class="hljs-keyword">const</span> showCount = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> data.reduce(<span class="hljs-function">(<span class="hljs-params">showList, item</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (item <span class="hljs-keyword">in</span> showList) &#123;      showList[item]++;    &#125; <span class="hljs-keyword">else</span> &#123;      showList[item] = <span class="hljs-number">1</span>;    &#125;    <span class="hljs-keyword">return</span> showList;  &#125;, &#123;&#125;);&#125;;<span class="hljs-comment">// orderByæŒ‰å±æ€§åˆ†ç±»</span><span class="hljs-keyword">const</span> orderBy = <span class="hljs-function">(<span class="hljs-params">data, prop</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> data.reduce(<span class="hljs-function">(<span class="hljs-params">list, item</span>) =&gt;</span> &#123;    <span class="hljs-keyword">let</span> key = item[prop];    <span class="hljs-keyword">if</span> (!list[key]) &#123;      list[ket] = [];    &#125;    list[key].push(item);    <span class="hljs-keyword">return</span> list;  &#125;, &#123;&#125;);&#125;;<span class="hljs-comment">// å¯¹è±¡ä¸­å–å‡ºç‰¹å®šæ•°æ®è¾“å‡ºæ–°æ•°ç»„</span><span class="hljs-keyword">const</span> newArr = <span class="hljs-function">(<span class="hljs-params">data, prop</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> data.reduce(<span class="hljs-function">(<span class="hljs-params">arr, item</span>) =&gt;</span> &#123;    <span class="hljs-keyword">return</span> [...arr, ...item[prop]];  &#125;, []);&#125;;<span class="hljs-comment">// æ•°ç»„å»é‡</span><span class="hljs-keyword">const</span> reduceSet = <span class="hljs-function">(<span class="hljs-params">arr</span>) =&gt;</span> &#123;  <span class="hljs-keyword">return</span> arr.sort().reduce(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (!acc.length || acc[acc.length - <span class="hljs-number">1</span>] !== cur) &#123;      acc.push(cur);    &#125;    <span class="hljs-keyword">return</span> acc;  &#125;, []);&#125;;</code></pre></div></li><li><p>window</p><ul><li><code>window.ready</code>æ ·å¼åº”ç”¨åˆ°äº† DOM ä¸Š</li><li><code>window.load</code>åŠ è½½å®Œæ‰€æœ‰èµ„æºï¼ˆå›¾ç‰‡</li></ul></li><li><p>è¿›åˆ¶è½¬æ¢</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// åè¿›åˆ¶è½¬æ¢ä¸ºå…¶ä»–è¿›åˆ¶</span><span class="hljs-built_in">Number</span>(val).toString(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>);<span class="hljs-comment">// å…¶ä»–è¿›åˆ¶è½¬åè¿›åˆ¶</span><span class="hljs-built_in">parseInt</span>(val, radix);</code></pre></div><ul><li><p>ä¸¥æ ¼æ¨¡å¼<code>use strick</code></p><ul><li>ä¸¥æ ¼æ¨¡å¼é€šè¿‡æŠ›å‡ºé”™è¯¯æ¥æ¶ˆé™¤äº†ä¸€äº›åŸæœ‰é™é»˜é”™è¯¯å’Œç¼–ç é”™è¯¯ã€‚</li><li>ä¸¥æ ¼æ¨¡å¼ä¿®å¤äº†ä¸€äº›å¯¼è‡´ JavaScript å¼•æ“éš¾ä»¥æ‰§è¡Œä¼˜åŒ–çš„ç¼ºé™·ï¼Œæé«˜ä»£ç è¿è¡Œæ•ˆç‡ã€‚</li><li>ä¸¥æ ¼æ¨¡å¼ç¦ç”¨äº†åœ¨ ECMAScript çš„æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå®šä¹‰çš„ä¸€äº›å…³é”®å­—</li><li>æ— æ³•å†æ„å¤–åˆ›å»ºå…¨å±€å˜é‡ï¼Œå…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œthis çš„å€¼ä¸º undefinedã€‚</li><li>è¦æ±‚å‡½æ•°çš„å‚æ•°åå”¯ä¸€</li><li>eval()å‡½æ•°æœ‰è‡ªå·±çš„ä½œç”¨åŸŸ</li></ul></li><li><p>æ“ä½œå­—ç¬¦ä¸²</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">charAt(); <span class="hljs-comment">//è¿”å›ç´¢å¼•ä½ç½®å­—ç¬¦</span>concat(); <span class="hljs-comment">//æ‹¼æ¥</span>indexOf(), lastIndexOf(); <span class="hljs-comment">//è¿”å›å‡ºç°çš„ç´¢å¼•ä½ç½®</span>includes();match(); <span class="hljs-comment">//åŒ¹é…æ­£åˆ™</span>replace();split(); <span class="hljs-comment">//ä»¥xxåˆ†å‰²å­—ç¬¦ä¸²</span>slice(); <span class="hljs-comment">//æˆªå–è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä»¥ç´¢å¼•</span>substring(); <span class="hljs-comment">//æˆªå–è¿”å›æ–°å­—ç¬¦ä¸²ï¼Œä»¥é•¿åº¦</span>trim(); <span class="hljs-comment">//åˆ é™¤ç©ºæ ¼</span>toLowerCase(), toUpperCase();</code></pre></div><ul><li><p>æ“ä½œæ•°ç»„</p><ul><li>ä¸æ”¹å˜åŸæ•°ç»„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">filter();slice();concat();join(); <span class="hljs-comment">//è¿”å›å­—ç¬¦ä¸²</span>includes();indexOf(), lastIndexOf();reduce();forEach();reduce();map();find(); <span class="hljs-comment">//è¿”å›ç¬¦åˆæ¡ä»¶çš„</span>every(); <span class="hljs-comment">//å…¨éƒ½ç¬¦åˆæ¡ä»¶ï¼Ÿ</span>some(); <span class="hljs-comment">//æœ‰ç¬¦åˆæ¡ä»¶çš„</span></code></pre></div><ul><li>æ”¹å˜åŸæ•°ç»„</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript">push();pop();shift();unshift();sort(); <span class="hljs-comment">//æ’åº</span>reverse(); <span class="hljs-comment">//å€’åº</span>splice(); <span class="hljs-comment">// åˆ é™¤</span>flat();</code></pre></div></li><li><p>æ´—ç‰Œ</p></li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">shuffle</span>(<span class="hljs-params">arr</span>) </span>&#123;  <span class="hljs-keyword">let</span> len = arr.length  <span class="hljs-keyword">while</span> (len) &#123;    <span class="hljs-keyword">const</span> i = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * len--);    [arr[i],arr[len]] = [arr[len],arr[i]]  &#125;  <span class="hljs-keyword">return</span> arr;&#125;</code></pre></div><ul><li>å®ç° EventEmitter</li></ul><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// è¯·å®ç°ä¸‹é¢çš„è‡ªå®šä¹‰äº‹ä»¶ Event å¯¹è±¡çš„æ¥å£ï¼ŒåŠŸèƒ½è§æ³¨é‡Š(æµ‹è¯•1)</span><span class="hljs-comment">// è¯¥ Event å¯¹è±¡çš„æ¥å£éœ€è¦èƒ½è¢«å…¶ä»–å¯¹è±¡æ‹“å±•å¤ç”¨(æµ‹è¯•2)</span><span class="hljs-comment">// æµ‹è¯•1</span>Event.on(<span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(result);&#125;);Event.on(<span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;test&quot;</span>);&#125;);Event.emit(<span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-string">&quot;hello world&quot;</span>); <span class="hljs-comment">// è¾“å‡º &#x27;hello world&#x27; å’Œ &#x27;test&#x27;</span><span class="hljs-comment">// æµ‹è¯•2</span><span class="hljs-keyword">var</span> person1 = &#123;&#125;;<span class="hljs-keyword">var</span> person2 = &#123;&#125;;<span class="hljs-built_in">Object</span>.assign(person1, Event);<span class="hljs-built_in">Object</span>.assign(person2, Event);person1.on(<span class="hljs-string">&quot;call1&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;person1&quot;</span>);&#125;);person2.on(<span class="hljs-string">&quot;call2&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;person2&quot;</span>);&#125;);person1.emit(<span class="hljs-string">&quot;call1&quot;</span>); <span class="hljs-comment">// è¾“å‡º &#x27;person1&#x27;</span>person1.emit(<span class="hljs-string">&quot;call2&quot;</span>); <span class="hljs-comment">// æ²¡æœ‰è¾“å‡º</span>person2.emit(<span class="hljs-string">&quot;call1&quot;</span>); <span class="hljs-comment">// æ²¡æœ‰è¾“å‡º</span>person2.emit(<span class="hljs-string">&quot;call2&quot;</span>); <span class="hljs-comment">// è¾“å‡º &#x27;person2&#x27;</span><span class="hljs-keyword">var</span> Event = &#123;  <span class="hljs-comment">// é€šè¿‡onæ¥å£ç›‘å¬äº‹ä»¶eventName</span>  <span class="hljs-comment">// å¦‚æœäº‹ä»¶eventNameè¢«è§¦å‘ï¼Œåˆ™æ‰§è¡Œcallbackå›è°ƒå‡½æ•°</span>  on: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">eventName, callback</span>) </span>&#123;    <span class="hljs-comment">//ä½ çš„ä»£ç </span>  &#125;,  <span class="hljs-comment">// è§¦å‘äº‹ä»¶ eventName</span>  emit: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">eventName</span>) </span>&#123;    <span class="hljs-comment">//ä½ çš„ä»£ç </span>  &#125;,&#125;;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> Event =&#123;  on:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name,cb</span>)</span>&#123;    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">this</span>.handlers)&#123;      <span class="hljs-built_in">Object</span>.defineProperty(<span class="hljs-built_in">this</span>,<span class="hljs-string">&#x27;handlers&#x27;</span>,&#123;        value:&#123;&#125;,        enumerable:<span class="hljs-literal">false</span>,        configurable:<span class="hljs-literal">true</span>,        writable:<span class="hljs-literal">true</span>      &#125;)    &#125;    <span class="hljs-keyword">if</span>(!<span class="hljs-built_in">this</span>.handlers[name])&#123;      <span class="hljs-built_in">this</span>.handlers[name] = []    &#125;    <span class="hljs-built_in">this</span>.handles[name].push(cb)  &#125;,  emit:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name,...args</span>)</span>&#123;    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">this</span>.handlers[name])&#123;      <span class="hljs-built_in">this</span>.handlers[name].forEach(<span class="hljs-function"><span class="hljs-params">cb</span>=&gt;</span>&#123;        cb(...args)      &#125;)    &#125;  &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Events</span></span>&#123;  <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span>&#123;    <span class="hljs-built_in">this</span>.events = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()  &#125;  <span class="hljs-function"><span class="hljs-title">addEvent</span>(<span class="hljs-params">key,fn,isOnce,...args</span>)</span>&#123;    <span class="hljs-keyword">const</span> curEvent = <span class="hljs-built_in">this</span>.events.get(key) ? <span class="hljs-built_in">this</span>.events.get(key) : <span class="hljs-built_in">this</span>.events.set(key,<span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()).get(key)    curEvent.set(fn,<span class="hljs-function">(<span class="hljs-params">...args2</span>)=&gt;</span>&#123;      fn(...args,...args2)      <span class="hljs-keyword">if</span>(isOnce)<span class="hljs-built_in">this</span>.off(key,fn)    &#125;)  &#125;  <span class="hljs-function"><span class="hljs-title">on</span>(<span class="hljs-params">key, fn, ...args</span>)</span> &#123;    <span class="hljs-built_in">this</span>.addEvent(key, fn, <span class="hljs-literal">false</span>, ...args)  &#125;  <span class="hljs-function"><span class="hljs-title">once</span>(<span class="hljs-params">key,fn,...args</span>)</span>&#123;    <span class="hljs-built_in">this</span>.addEvent(key,fn,<span class="hljs-literal">true</span>,...args)  &#125;  <span class="hljs-function"><span class="hljs-title">off</span>(<span class="hljs-params">key,fn</span>)</span>&#123;    <span class="hljs-built_in">this</span>.events.get(key).delete(fn)  &#125;  <span class="hljs-function"><span class="hljs-title">fire</span>(<span class="hljs-params">key,...args</span>)</span>&#123;    <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">this</span>.events.get(key));    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> cb <span class="hljs-keyword">of</span> <span class="hljs-built_in">this</span>.events.get(key).values())&#123;      cb(...args)    &#125;  &#125;&#125;<span class="hljs-comment">// è¯·ä½¿ç”¨åŸç”Ÿä»£ç å®ç°ä¸€ä¸ªEventsæ¨¡å—ï¼Œå¯ä»¥å®ç°è‡ªå®šä¹‰äº‹ä»¶çš„è®¢é˜…ã€è§¦å‘ã€ç§»é™¤åŠŸèƒ½</span><span class="hljs-keyword">const</span> fn1 = <span class="hljs-function">(<span class="hljs-params">... args</span>)=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I want sleep1&#x27;</span>, ... args)<span class="hljs-keyword">const</span> fn2 = <span class="hljs-function">(<span class="hljs-params">... args</span>)=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I want sleep2&#x27;</span>, ... args)<span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> Events();event.on(<span class="hljs-string">&#x27;sleep&#x27;</span>, fn1, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);event.on(<span class="hljs-string">&#x27;sleep&#x27;</span>, fn2, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);event.fire(<span class="hljs-string">&#x27;sleep&#x27;</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<span class="hljs-comment">// I want sleep1 1 2 3 4 5 6</span><span class="hljs-comment">// I want sleep2 1 2 3 4 5 6</span>event.off(<span class="hljs-string">&#x27;sleep&#x27;</span>, fn1);event.once(<span class="hljs-string">&#x27;sleep&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;I want sleep&#x27;</span>));event.fire(<span class="hljs-string">&#x27;sleep&#x27;</span>);<span class="hljs-comment">// I want sleep2 1 2 3</span><span class="hljs-comment">// I want sleep</span>event.fire(<span class="hljs-string">&#x27;sleep&#x27;</span>);<span class="hljs-comment">// I want sleep2 1 2 3</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>js</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CSSé¢è¯•é¢˜</title>
    <link href="/2020/03/24/css%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <url>/2020/03/24/css%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="CSS3-æ–°ç‰¹æ€§"><a href="#CSS3-æ–°ç‰¹æ€§" class="headerlink" title="CSS3 æ–°ç‰¹æ€§"></a>CSS3 æ–°ç‰¹æ€§</h2><ul><li>è¾¹æ¡†å±æ€§<code>border-radius</code>ï¼Œ<code>box-shadow</code>ï¼Œ<code>border-image</code></li><li>èƒŒæ™¯æ§åˆ¶<code>background-size,background-origin</code></li><li>æ–‡å­—æ•ˆæœå’Œè‡ªåŠ¨æ¢è¡Œ<code>text-shadow,word-wrap</code></li><li>è‡ªå®šä¹‰å­—ä½“<code>@font-face</code></li><li>2d/3d å˜æ¢ï¼Œè¿‡æ¸¡å’ŒåŠ¨ç”»<code>transition``animation</code></li><li>å¤šæ å¸ƒå±€column</li><li>ç›’æ¨¡å‹å±æ€§<code>box-sizing</code></li><li>å¼¹æ€§ç›’å­<code>flex</code></li><li>æ›´å¼ºå¤§çš„å¤šåª’ä½“æŸ¥è¯¢<h2 id="æµè§ˆå™¨å…¼å®¹"><a href="#æµè§ˆå™¨å…¼å®¹" class="headerlink" title="æµè§ˆå™¨å…¼å®¹"></a>æµè§ˆå™¨å…¼å®¹</h2></li><li>IE<ul><li>åŒè¾¹è· <ul><li><code>display:inline</code></li></ul></li><li>é»˜è®¤é«˜åº¦<code>16px</code><ul><li><code>font-size:0</code></li><li><code>overflow:hidden</code></li></ul></li><li>è¶…é“¾æ¥å†…imgä¼šæœ‰è¾¹æ¡†<ul><li><code>border:0</code> </li></ul></li></ul></li></ul><ul><li>3px bug<ul><li><code>display:block</code></li><li><code>vertical-align:top</code></li></ul></li></ul><h2 id="position-è·Ÿ-displayã€margin-collapseã€overflowã€float-è¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€æ ·"><a href="#position-è·Ÿ-displayã€margin-collapseã€overflowã€float-è¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€æ ·" class="headerlink" title="position è·Ÿ displayã€margin collapseã€overflowã€float è¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€æ ·"></a>position è·Ÿ displayã€margin collapseã€overflowã€float è¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åä¼šæ€æ ·</h2><ul><li>å¦‚æœå…ƒç´ çš„ display ä¸º noneï¼Œé‚£ä¹ˆå…ƒç´ ä¸è¢«æ¸²æŸ“ï¼Œpositionï¼Œfloat ä¸èµ·ä½œç”¨ï¼›</li><li>å¦‚æœå…ƒç´ æ‹¥æœ‰ position:absolute;æˆ– position:fixed;å±æ€§ï¼Œé‚£ä¹ˆå…ƒç´ å°†ä¸ºç»å¯¹å®šä½ï¼Œfloat ä¸èµ·ä½œç”¨ã€‚</li><li>å¦‚æœå…ƒç´  float å±æ€§ä¸æ˜¯ noneï¼Œå…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œæ ¹æ® float å±æ€§å€¼æ¥æ˜¾ç¤ºã€‚</li><li>æœ‰æµ®åŠ¨ã€ç»å¯¹å®šä½ï¼Œinline-block å±æ€§çš„å…ƒç´ ï¼Œmargin ä¸ä¼šå’Œå‚ç›´æ–¹å‘ä¸Šçš„å…¶ä»–å…ƒç´  margin æŠ˜å ã€‚</li></ul><h2 id="ç”»ä¸‰è§’å½¢"><a href="#ç”»ä¸‰è§’å½¢" class="headerlink" title="ç”»ä¸‰è§’å½¢"></a>ç”»ä¸‰è§’å½¢</h2><ul><li>ä¸åŒè¾¹borderä¹‹é—´45åº¦æ‹¼æ¥<div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-selector-tag">div</span>&#123;  <span class="hljs-attribute">width</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">height</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">border-top</span>:<span class="hljs-number">50px</span> red solid;  <span class="hljs-attribute">border-left</span>:<span class="hljs-number">50px</span> $(èƒŒæ™¯è‰²) solid;  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">50px</span> $(èƒŒæ™¯è‰²) solid;&#125;</code></pre></div></li></ul><h2 id="ç”»æ¤­åœ†"><a href="#ç”»æ¤­åœ†" class="headerlink" title="ç”»æ¤­åœ†"></a>ç”»æ¤­åœ†</h2><p><code>border-radiuså±æ€§</code></p><ul><li>boder-radius æ˜¯ç®€å†™å±æ€§<ul><li>border-top-left-radius</li><li>border-top-right-radius</li><li>border-bottom-right-radius</li><li>border-botom-left-radius</li><li>top å·¦å³ï¼Œbottom å³å·¦ï¼Œé¡ºæ—¶é’ˆ</li><li>/ ç”¨æ¥åˆ†éš”æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘<div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-comment">/* ç»˜åˆ¶åŠæ¤­åœ† */</span><span class="hljs-selector-tag">div</span>&#123; <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">border-style</span>: solid; <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#f00</span>; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>/<span class="hljs-number">100%</span> <span class="hljs-number">100%</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>ï¼› /* æ°´å¹³æ–¹å‘ä¸Šå››ä¸ªè§’çš„åŠå¾„éƒ½ä¸º<span class="hljs-number">50%</span> /  å‚ç›´æ–¹å‘ å·¦å³ä¸ŠåŠå¾„ä¸º<span class="hljs-number">100%</span>ï¼Œå·¦å³ä¸‹ä¸º<span class="hljs-number">0</span>*/&#125;</code></pre></div></li></ul></li></ul><h2 id="æ–‡æœ¬æº¢å‡º"><a href="#æ–‡æœ¬æº¢å‡º" class="headerlink" title="æ–‡æœ¬æº¢å‡º"></a>æ–‡æœ¬æº¢å‡º</h2><ul><li><p>å•è¡Œæ–‡æœ¬å±…ä¸­ï¼Œå¤šè¡Œæ–‡æœ¬å·¦å¯¹é½</p><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-selector-tag">div</span>&#123;  <span class="hljs-attribute">text-align</span>:center&#125;<span class="hljs-selector-tag">p</span>&#123;  <span class="hljs-attribute">display</span>:inline-block;  <span class="hljs-attribute">text-align</span><span class="hljs-selector-pseudo">:left</span>&#125;</code></pre></div></li><li><p>å¤šè¡Œæ–‡æœ¬çœç•¥å·</p><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-selector-tag">p</span>:after&#123;  content:<span class="hljs-string">&#x27;...&#x27;</span>&#125;</code></pre></div></li><li><p>å•è¡Œæ–‡æœ¬æº¢å‡ºçœç•¥</p><div class="hljs code-wrapper"><pre><code class="hljs CSS"><span class="hljs-attribute">overflow</span>: hiddenï¼›/* ï¼ˆæ–‡å­—é•¿åº¦è¶…å‡ºé™å®šå®½åº¦ï¼Œåˆ™éšè—è¶…å‡ºçš„å†…å®¹ï¼‰ */white-space: nowrapï¼›/* ï¼ˆè®¾ç½®æ–‡å­—åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œä¸èƒ½æ¢è¡Œï¼‰ */text-overflow: ellipsisï¼›/* ï¼ˆè§„å®šå½“æ–‡æœ¬æº¢å‡ºæ—¶ï¼Œæ˜¾ç¤ºçœç•¥ç¬¦å·æ¥ä»£è¡¨è¢«ä¿®å‰ªçš„æ–‡æœ¬ï¼‰ */</code></pre></div></li><li><p>å¤šè¡Œæ–‡æœ¬æº¢å‡º</p><div class="hljs code-wrapper"><pre><code class="hljs CSS">-webkit-line-clamp: <span class="hljs-number">2</span>ï¼›/* ï¼ˆç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•°ï¼Œ<span class="hljs-number">2</span> è¡¨ç¤ºæœ€å¤šæ˜¾ç¤º <span class="hljs-number">2</span> è¡Œã€‚ä¸ºäº†å®ç°è¯¥æ•ˆæœï¼Œå®ƒéœ€è¦ç»„åˆå…¶ä»–çš„ WebKit å±æ€§ï¼‰ */display: -webkit-boxï¼›/* ï¼ˆå’Œ <span class="hljs-number">1</span> ç»“åˆä½¿ç”¨ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º ï¼‰ */-webkit-box-orient: verticalï¼›/* ï¼ˆå’Œ <span class="hljs-number">1</span> ç»“åˆä½¿ç”¨ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ ï¼‰ */overflow: hiddenï¼›/* ï¼ˆæ–‡æœ¬æº¢å‡ºé™å®šçš„å®½åº¦å°±éšè—å†…å®¹ï¼‰ */text-overflow: ellipsisï¼›/* ï¼ˆå¤šè¡Œæ–‡æœ¬çš„æƒ…å†µä¸‹ï¼Œç”¨çœç•¥å· â€œâ€¦â€ éšè—æº¢å‡ºèŒƒå›´çš„æ–‡æœ¬) */</code></pre></div></li></ul><h2 id="dpr-1pxè¾¹æ¡†"><a href="#dpr-1pxè¾¹æ¡†" class="headerlink" title="dpr 1pxè¾¹æ¡†"></a>dpr 1pxè¾¹æ¡†</h2><ul><li><code>@media</code>é…åˆ<code>transform:scale()</code></li><li>æŸ¥è¯¢è®¾å¤‡dprç­‰æ¯”ç¼©æ”¾pxå¤§å°<div class="hljs code-wrapper"><pre><code class="hljs CSS">.<span class="hljs-number">1px</span>_border:before&#123;  content:<span class="hljs-string">&#x27;&#x27;</span>;  <span class="hljs-attribute">position</span>:absolute;  <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;  <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;  <span class="hljs-attribute">height</span>:<span class="hljs-number">1px</span>;  <span class="hljs-attribute">background-color</span>:<span class="hljs-number">#000</span>;  <span class="hljs-attribute">transform-origin</span>:<span class="hljs-number">50%</span>,<span class="hljs-number">0</span>&#125;<span class="hljs-keyword">@media</span> <span class="hljs-keyword">only</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>: <span class="hljs-number">2</span>) &#123;  .<span class="hljs-number">1px</span>_border:before &#123;    transform: scaleY (<span class="hljs-number">0.5</span>);  &#125;<span class="hljs-keyword">@media</span> <span class="hljs-keyword">only</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">-webkit-min-device-pixel-ratio</span>: <span class="hljs-number">3</span>) &#123;  .<span class="hljs-number">1px</span>_border:before &#123;    transform: scaleY (<span class="hljs-number">0.33</span>);  &#125;&#125;</code></pre></div></li></ul><h2 id="å‚ç›´å±…ä¸­div"><a href="#å‚ç›´å±…ä¸­div" class="headerlink" title="å‚ç›´å±…ä¸­div"></a>å‚ç›´å±…ä¸­div</h2><ul><li>ç»å¯¹å®šä½+ä¸Šä¸‹å·¦å³0+margin 0</li><li>ç»å¯¹å®šä½+è´Ÿmargin</li><li>ç»å¯¹å®šä½+è´Ÿtranslate</li><li>flex+justify-content+align-items</li><li>table-cell+vertical-align</li><li>table+table-cell</li></ul><h2 id="ä¸‰æ å¸ƒå±€"><a href="#ä¸‰æ å¸ƒå±€" class="headerlink" title="ä¸‰æ å¸ƒå±€"></a>ä¸‰æ å¸ƒå±€</h2><div class="hljs code-wrapper"><pre><code>å·¦å³å›ºå®šï¼Œä¸­è‡ªé€‚åº”</code></pre></div><ol><li>ç»å¯¹å®šä½</li><li>å·¦å³æµ®åŠ¨ã€è‡ªé€‚åº”å…ƒç´ è¦æ”¾åœ¨æœ€åã€‘ <div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>          * &#123;<span class="css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><span class="css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span>          &#125;<span class="css">          <span class="hljs-selector-tag">body</span> &#123;</span><span class="css">            <span class="hljs-attribute">min-width</span>: <span class="hljs-number">550px</span>;</span>          &#125;          .container &#123;<span class="css">            <span class="hljs-attribute">overflow</span>: hidden;</span>          &#125;          .column &#123;<span class="css">            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;</span>          &#125;          .left &#123;<span class="css">            <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:left</span>;</span><span class="css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><span class="css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffbbff</span>;</span>          &#125;          .center &#123;<span class="css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><span class="css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#bfefff</span>;</span>          &#125;          .right &#123;<span class="css">            <span class="hljs-attribute">float</span><span class="hljs-selector-pseudo">:right</span>;</span><span class="css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><span class="css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#eeee00</span>;</span>          &#125;          /*å·¦å³æµ®åŠ¨è‡³å·¦å³å¹¶å¤„äºåŒä¸€è¡Œ          *æœªæµ®åŠ¨çš„centerå†…å®¹ä¼šè¢«æµ®åŠ¨å…ƒç´ ç¯ç»•          */    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column left&quot;</span>&gt;</span>left<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column right&quot;</span>&gt;</span>right<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column center&quot;</span>&gt;</span>center<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li>å…¨éƒ¨å·¦æµ®ï¼Œ-marginç§»åˆ°ä¸Šä¸€è¡Œã€è‡ªé€‚åº”å…ƒç´ æ”¾åœ¨æœ€å‰ã€‘ <div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>      * &#123;<span class="css">        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><span class="css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span>      &#125;<span class="css">      <span class="hljs-selector-tag">body</span> &#123;</span><span class="css">        <span class="hljs-attribute">min-width</span>: <span class="hljs-number">550px</span>;</span>      &#125;      .container &#123;<span class="css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">150px</span> <span class="hljs-number">0</span> <span class="hljs-number">200px</span>;</span><span class="css">        <span class="hljs-attribute">overflow</span>: hidden;</span>      &#125;      .column &#123;<span class="css">        <span class="hljs-attribute">position</span>: relative;</span>        /**<span class="css">        *è®¾ç½®å®šä½ï¼Œå…ƒç´ éœ€è¦æ‰‹åŠ¨ç§»åŠ¨è‡³<span class="hljs-attribute">padding</span>ç©ºéš™ä¸­</span>        */<span class="css">        <span class="hljs-attribute">float</span>: left;</span><span class="css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;</span>      &#125;      .left &#123;<span class="css">        <span class="hljs-attribute">right</span>: <span class="hljs-number">200px</span>;</span><span class="css">        <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">100%</span>;</span><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><span class="css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffbbff</span>;</span>      &#125;      .center &#123;<span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><span class="css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#bfefff</span>;</span>      &#125;      .right &#123;<span class="css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">150px</span>;</span><span class="css">        <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">150px</span>;</span><span class="css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><span class="css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#eeee00</span>;</span>      &#125;    <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column center&quot;</span>&gt;</span>center<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column left&quot;</span>&gt;</span>left<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column right&quot;</span>&gt;</span>right<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>  <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li>å…¨éƒ¨å·¦æµ®ï¼Œcenterå…ƒç´ éœ€è¦æ’‘å¼€center-wrapperã€è‡ªé€‚åº”å…ƒç´ æ”¾åœ¨æœ€å‰ã€‘<div class="hljs code-wrapper"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span>       * &#123;<span class="css">         <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;</span><span class="css">         <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span>       &#125;<span class="css">       <span class="hljs-selector-tag">body</span> &#123;</span><span class="css">         <span class="hljs-attribute">min-width</span>: <span class="hljs-number">550px</span>;</span>       &#125;       .container &#123;<span class="css">         <span class="hljs-attribute">overflow</span>: hidden;</span>       &#125;       .column &#123;<span class="css">         <span class="hljs-attribute">float</span>: left;</span><span class="css">         <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;</span>       &#125;       .left &#123;<span class="css">         <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">100%</span>;</span><span class="css">         <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><span class="css">         <span class="hljs-attribute">background</span>: <span class="hljs-number">#ffbbff</span>;</span>       &#125;       .center-wrapper &#123;<span class="css">         <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span>       &#125;       .center &#123;<span class="css">         <span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;</span><span class="css">         <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">150px</span> <span class="hljs-number">0</span> <span class="hljs-number">200px</span>;</span><span class="css">         <span class="hljs-attribute">background</span>: <span class="hljs-number">#bfefff</span>;</span><span class="css">         <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;</span>       &#125;       .right &#123;<span class="css">         <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">150px</span>;</span><span class="css">         <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><span class="css">         <span class="hljs-attribute">background</span>: <span class="hljs-number">#eeee00</span>;</span>       &#125;       /**       *3ï¼Œ4æ–¹æ³•ç±»ä¼¼<span class="css">       * -<span class="hljs-number">100%</span>çš„<span class="hljs-attribute">margin-left</span>å°†å…ƒç´ ç§»åˆ°ä¸Šè¡Œæœ€å·¦</span><span class="css">       * -è‡ªèº«å®½åº¦<span class="hljs-attribute">margin-left</span>å°†å…ƒç´ ç§»åˆ°ä¸Šè¡Œæœ€å³</span><span class="css">       * å¹¶é€šè¿‡ç»™centeråŠ <span class="hljs-attribute">padding</span></span>       */     <span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>     <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column center-wrapper&quot;</span>&gt;</span>         <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>center<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column left&quot;</span>&gt;</span>left<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>       <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column right&quot;</span>&gt;</span>right<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>     <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div></li><li>flex</li><li>grid</li><li>table-cell</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>é¢è¯•</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ§åˆ¶å°ä¸€ç›´æ‰“å°http://xxx/sockjs-node/info?t=xxx</title>
    <link href="/2020/02/04/%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E7%9B%B4%E6%8A%A5%E9%94%99sockjs-node/"/>
    <url>/2020/02/04/%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%80%E7%9B%B4%E6%8A%A5%E9%94%99sockjs-node/</url>
    
    <content type="html"><![CDATA[<h3 id="sockjs-nodeæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œæä¾›è·¨æµè§ˆå™¨JavaScriptçš„APIï¼Œåˆ›å»ºäº†ä¸€ä¸ªä½å»¶è¿Ÿï¼Œå…¨åŒå·¥çš„æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨ä¹‹é—´é€šä¿¡é€šé“ã€‚"><a href="#sockjs-nodeæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œæä¾›è·¨æµè§ˆå™¨JavaScriptçš„APIï¼Œåˆ›å»ºäº†ä¸€ä¸ªä½å»¶è¿Ÿï¼Œå…¨åŒå·¥çš„æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨ä¹‹é—´é€šä¿¡é€šé“ã€‚" class="headerlink" title="sockjs-nodeæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œæä¾›è·¨æµè§ˆå™¨JavaScriptçš„APIï¼Œåˆ›å»ºäº†ä¸€ä¸ªä½å»¶è¿Ÿï¼Œå…¨åŒå·¥çš„æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨ä¹‹é—´é€šä¿¡é€šé“ã€‚"></a>sockjs-nodeæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œæä¾›è·¨æµè§ˆå™¨JavaScriptçš„APIï¼Œåˆ›å»ºäº†ä¸€ä¸ªä½å»¶è¿Ÿï¼Œå…¨åŒå·¥çš„æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨ä¹‹é—´é€šä¿¡é€šé“ã€‚</h3><h3 id="å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ç”¨åˆ°sockjs-vuecli3-è¿è¡Œnpm-run-serve-ä¹‹ånetworké‡Œé¢ä¸€ç›´è°ƒç”¨ä¸€ä¸ªæ¥å£"><a href="#å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ç”¨åˆ°sockjs-vuecli3-è¿è¡Œnpm-run-serve-ä¹‹ånetworké‡Œé¢ä¸€ç›´è°ƒç”¨ä¸€ä¸ªæ¥å£" class="headerlink" title="å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ç”¨åˆ°sockjs,vuecli3 è¿è¡Œnpm run serve ä¹‹ånetworké‡Œé¢ä¸€ç›´è°ƒç”¨ä¸€ä¸ªæ¥å£:"></a>å¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰ç”¨åˆ°sockjs,vuecli3 è¿è¡Œnpm run serve ä¹‹ånetworké‡Œé¢ä¸€ç›´è°ƒç”¨ä¸€ä¸ªæ¥å£:</h3><p><code>http://localhost:8080/sockjs-node/info?t=1556418283950</code></p><h2 id="è§£å†³æ–¹æ¡ˆï¼š"><a href="#è§£å†³æ–¹æ¡ˆï¼š" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼š"></a>è§£å†³æ–¹æ¡ˆï¼š</h2><ol><li>å¼€å‘ç¯å¢ƒä¸­å…³é—­æ­¤æœåŠ¡</li></ol><p>  <code>node_modules/sockjs-client/dist/sockjs.js</code>ä¸­æ³¨é‡Š<br><code>self.xhr.send(payload)</code></p><ol start="2"><li>webpacké…ç½®ä¸­</li></ol><div class="hljs code-wrapper"><pre><code class="hljs javascript">sockHost: <span class="hljs-string">&quot; http://192.168.1.6:8080&quot;</span>,disableHostCheck: <span class="hljs-literal">true</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>javascript</tag>
      
      <tag>webpack</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
